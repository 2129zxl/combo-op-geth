<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>op-geth - go-ethereum fork diff overview</title>

    <style>
        .line-stat {
            width: 14rem;
            float: right;
        }
        .line-stat div {
            width: 50%;
        }
    </style>

    
<style>
    .term-container {
        background: #171717;
        border-radius: 5px;
        color: white;
        word-break: break-word;
        overflow-wrap: break-word;
        font-family: "SFMono-Regular", Monaco, Menlo, Consolas, "Liberation Mono", Courier, monospace;
        font-size: 12px;
        line-height: 20px;
        padding: 14px 18px;
        white-space: pre-wrap;
    }

    .term-container img { max-width: 100%; }

    .term a { color: inherit; text-decoration: underline; text-decoration-style: dashed; }
    .term a:hover { color: #2882F9 }

    @keyframes blink-animation {
        to {
            visibility: hidden;
        }
    }

    .term-fg1 { } /* don't bold beccause it looks weird */
    .term-fg2 { color: #838887; } /* faint (decreased intensity) - same as gray really */
    .term-fg3 { font-style: italic; } /* italic */
    .term-fg4 { text-decoration: underline; } /* underline */
    .term-fg5 { animation: blink-animation 1s steps(3, start) infinite; } /* blink */
    .term-fg9 { text-decoration: line-through; } /* crossed-out */

    .term-fg30 { color: #666666; } /* black (but we can't use black, so a diff color) */
    .term-fg31 { color: #ff7070; } /* red */
    .term-fg32 { color: #b0f986; } /* green */
    .term-fg33 { color: #c6c502; } /* yellow */
    .term-fg34 { color: #8db7e0; } /* blue */
    .term-fg35 { color: #f271fb; } /* magenta */
    .term-fg36 { color: #6bf7ff; } /* cyan */

    /* high intense colors */
    .term-fgi1 { color: #5ef765; }
    .term-fgi90 { color: #838887; } /* grey */
    .term-fgi91 { color: #ff3333; } /* red */
    .term-fgi92 { color: #00FF00; } /* green */
    .term-fgi93 { color: #fffc67; } /* yellow */
    .term-fgi94 { color: #6871ff; } /* blue */
    .term-fgi95 { color: #ff76ff; } /* magenta */
    .term-fgi96 { color: #60fcff; } /* cyan */

    /* background colors */
    .term-bg40 { background: #676767; } /* grey */
    .term-bg41 { background: #ff4343; } /* red */
    .term-bg42 { background: #99ff5f; } /* green */

    /* custom foreground/background combos for readability */
    .term-fg31.term-bg40 { color: #F8A39F; }

    /* xterm colors */
    .term-fgx16 { color: #000000; }
    .term-fgx17 { color: #00005f; }
    .term-fgx18 { color: #000087; }
    .term-fgx19 { color: #0000af; }
    .term-fgx20 { color: #0000d7; }
    .term-fgx21 { color: #0000ff; }
    .term-fgx22 { color: #005f00; }
    .term-fgx23 { color: #005f5f; }
    .term-fgx24 { color: #005f87; }
    .term-fgx25 { color: #005faf; }
    .term-fgx26 { color: #005fd7; }
    .term-fgx27 { color: #005fff; }
    .term-fgx28 { color: #008700; }
    .term-fgx29 { color: #00875f; }
    .term-fgx30 { color: #008787; }
    .term-fgx31 { color: #0087af; }
    .term-fgx32 { color: #0087d7; }
    .term-fgx33 { color: #0087ff; }
    .term-fgx34 { color: #00af00; }
    .term-fgx35 { color: #00af5f; }
    .term-fgx36 { color: #00af87; }
    .term-fgx37 { color: #00afaf; }
    .term-fgx38 { color: #00afd7; }
    .term-fgx39 { color: #00afff; }
    .term-fgx40 { color: #00d700; }
    .term-fgx41 { color: #00d75f; }
    .term-fgx42 { color: #00d787; }
    .term-fgx43 { color: #00d7af; }
    .term-fgx44 { color: #00d7d7; }
    .term-fgx45 { color: #00d7ff; }
    .term-fgx46 { color: #00ff00; }
    .term-fgx47 { color: #00ff5f; }
    .term-fgx48 { color: #00ff87; }
    .term-fgx49 { color: #00ffaf; }
    .term-fgx50 { color: #00ffd7; }
    .term-fgx51 { color: #00ffff; }
    .term-fgx52 { color: #5f0000; }
    .term-fgx53 { color: #5f005f; }
    .term-fgx54 { color: #5f0087; }
    .term-fgx55 { color: #5f00af; }
    .term-fgx56 { color: #5f00d7; }
    .term-fgx57 { color: #5f00ff; }
    .term-fgx58 { color: #5f5f00; }
    .term-fgx59 { color: #5f5f5f; }
    .term-fgx60 { color: #5f5f87; }
    .term-fgx61 { color: #5f5faf; }
    .term-fgx62 { color: #5f5fd7; }
    .term-fgx63 { color: #5f5fff; }
    .term-fgx64 { color: #5f8700; }
    .term-fgx65 { color: #5f875f; }
    .term-fgx66 { color: #5f8787; }
    .term-fgx67 { color: #5f87af; }
    .term-fgx68 { color: #5f87d7; }
    .term-fgx69 { color: #5f87ff; }
    .term-fgx70 { color: #5faf00; }
    .term-fgx71 { color: #5faf5f; }
    .term-fgx72 { color: #5faf87; }
    .term-fgx73 { color: #5fafaf; }
    .term-fgx74 { color: #5fafd7; }
    .term-fgx75 { color: #5fafff; }
    .term-fgx76 { color: #5fd700; }
    .term-fgx77 { color: #5fd75f; }
    .term-fgx78 { color: #5fd787; }
    .term-fgx79 { color: #5fd7af; }
    .term-fgx80 { color: #5fd7d7; }
    .term-fgx81 { color: #5fd7ff; }
    .term-fgx82 { color: #5fff00; }
    .term-fgx83 { color: #5fff5f; }
    .term-fgx84 { color: #5fff87; }
    .term-fgx85 { color: #5fffaf; }
    .term-fgx86 { color: #5fffd7; }
    .term-fgx87 { color: #5fffff; }
    .term-fgx88 { color: #870000; }
    .term-fgx89 { color: #87005f; }
    .term-fgx90 { color: #870087; }
    .term-fgx91 { color: #8700af; }
    .term-fgx92 { color: #8700d7; }
    .term-fgx93 { color: #8700ff; }
    .term-fgx94 { color: #875f00; }
    .term-fgx95 { color: #875f5f; }
    .term-fgx96 { color: #875f87; }
    .term-fgx97 { color: #875faf; }
    .term-fgx98 { color: #875fd7; }
    .term-fgx99 { color: #875fff; }
    .term-fgx100 { color: #878700; }
    .term-fgx101 { color: #87875f; }
    .term-fgx102 { color: #878787; }
    .term-fgx103 { color: #8787af; }
    .term-fgx104 { color: #8787d7; }
    .term-fgx105 { color: #8787ff; }
    .term-fgx106 { color: #87af00; }
    .term-fgx107 { color: #87af5f; }
    .term-fgx108 { color: #87af87; }
    .term-fgx109 { color: #87afaf; }
    .term-fgx110 { color: #87afd7; }
    .term-fgx111 { color: #87afff; }
    .term-fgx112 { color: #87d700; }
    .term-fgx113 { color: #87d75f; }
    .term-fgx114 { color: #87d787; }
    .term-fgx115 { color: #87d7af; }
    .term-fgx116 { color: #87d7d7; }
    .term-fgx117 { color: #87d7ff; }
    .term-fgx118 { color: #87ff00; }
    .term-fgx119 { color: #87ff5f; }
    .term-fgx120 { color: #87ff87; }
    .term-fgx121 { color: #87ffaf; }
    .term-fgx122 { color: #87ffd7; }
    .term-fgx123 { color: #87ffff; }
    .term-fgx124 { color: #af0000; }
    .term-fgx125 { color: #af005f; }
    .term-fgx126 { color: #af0087; }
    .term-fgx127 { color: #af00af; }
    .term-fgx128 { color: #af00d7; }
    .term-fgx129 { color: #af00ff; }
    .term-fgx130 { color: #af5f00; }
    .term-fgx131 { color: #af5f5f; }
    .term-fgx132 { color: #af5f87; }
    .term-fgx133 { color: #af5faf; }
    .term-fgx134 { color: #af5fd7; }
    .term-fgx135 { color: #af5fff; }
    .term-fgx136 { color: #af8700; }
    .term-fgx137 { color: #af875f; }
    .term-fgx138 { color: #af8787; }
    .term-fgx139 { color: #af87af; }
    .term-fgx140 { color: #af87d7; }
    .term-fgx141 { color: #af87ff; }
    .term-fgx142 { color: #afaf00; }
    .term-fgx143 { color: #afaf5f; }
    .term-fgx144 { color: #afaf87; }
    .term-fgx145 { color: #afafaf; }
    .term-fgx146 { color: #afafd7; }
    .term-fgx147 { color: #afafff; }
    .term-fgx148 { color: #afd700; }
    .term-fgx149 { color: #afd75f; }
    .term-fgx150 { color: #afd787; }
    .term-fgx151 { color: #afd7af; }
    .term-fgx152 { color: #afd7d7; }
    .term-fgx153 { color: #afd7ff; }
    .term-fgx154 { color: #afff00; }
    .term-fgx155 { color: #afff5f; }
    .term-fgx156 { color: #afff87; }
    .term-fgx157 { color: #afffaf; }
    .term-fgx158 { color: #afffd7; }
    .term-fgx159 { color: #afffff; }
    .term-fgx160 { color: #d70000; }
    .term-fgx161 { color: #d7005f; }
    .term-fgx162 { color: #d70087; }
    .term-fgx163 { color: #d700af; }
    .term-fgx164 { color: #d700d7; }
    .term-fgx165 { color: #d700ff; }
    .term-fgx166 { color: #d75f00; }
    .term-fgx167 { color: #d75f5f; }
    .term-fgx168 { color: #d75f87; }
    .term-fgx169 { color: #d75faf; }
    .term-fgx170 { color: #d75fd7; }
    .term-fgx171 { color: #d75fff; }
    .term-fgx172 { color: #d78700; }
    .term-fgx173 { color: #d7875f; }
    .term-fgx174 { color: #d78787; }
    .term-fgx175 { color: #d787af; }
    .term-fgx176 { color: #d787d7; }
    .term-fgx177 { color: #d787ff; }
    .term-fgx178 { color: #d7af00; }
    .term-fgx179 { color: #d7af5f; }
    .term-fgx180 { color: #d7af87; }
    .term-fgx181 { color: #d7afaf; }
    .term-fgx182 { color: #d7afd7; }
    .term-fgx183 { color: #d7afff; }
    .term-fgx184 { color: #d7d700; }
    .term-fgx185 { color: #d7d75f; }
    .term-fgx186 { color: #d7d787; }
    .term-fgx187 { color: #d7d7af; }
    .term-fgx188 { color: #d7d7d7; }
    .term-fgx189 { color: #d7d7ff; }
    .term-fgx190 { color: #d7ff00; }
    .term-fgx191 { color: #d7ff5f; }
    .term-fgx192 { color: #d7ff87; }
    .term-fgx193 { color: #d7ffaf; }
    .term-fgx194 { color: #d7ffd7; }
    .term-fgx195 { color: #d7ffff; }
    .term-fgx196 { color: #ff0000; }
    .term-fgx197 { color: #ff005f; }
    .term-fgx198 { color: #ff0087; }
    .term-fgx199 { color: #ff00af; }
    .term-fgx200 { color: #ff00d7; }
    .term-fgx201 { color: #ff00ff; }
    .term-fgx202 { color: #ff5f00; }
    .term-fgx203 { color: #ff5f5f; }
    .term-fgx204 { color: #ff5f87; }
    .term-fgx205 { color: #ff5faf; }
    .term-fgx206 { color: #ff5fd7; }
    .term-fgx207 { color: #ff5fff; }
    .term-fgx208 { color: #ff8700; }
    .term-fgx209 { color: #ff875f; }
    .term-fgx210 { color: #ff8787; }
    .term-fgx211 { color: #ff87af; }
    .term-fgx212 { color: #ff87d7; }
    .term-fgx213 { color: #ff87ff; }
    .term-fgx214 { color: #ffaf00; }
    .term-fgx215 { color: #ffaf5f; }
    .term-fgx216 { color: #ffaf87; }
    .term-fgx217 { color: #ffafaf; }
    .term-fgx218 { color: #ffafd7; }
    .term-fgx219 { color: #ffafff; }
    .term-fgx220 { color: #ffd700; }
    .term-fgx221 { color: #ffd75f; }
    .term-fgx222 { color: #ffd787; }
    .term-fgx223 { color: #ffd7af; }
    .term-fgx224 { color: #ffd7d7; }
    .term-fgx225 { color: #ffd7ff; }
    .term-fgx226 { color: #ffff00; }
    .term-fgx227 { color: #ffff5f; }
    .term-fgx228 { color: #ffff87; }
    .term-fgx229 { color: #ffffaf; }
    .term-fgx230 { color: #ffffd7; }
    .term-fgx231 { color: #ffffff; }
    .term-fgx232 { color: #080808; }
    .term-fgx233 { color: #121212; }
    .term-fgx234 { color: #1c1c1c; }
    .term-fgx235 { color: #262626; }
    .term-fgx236 { color: #303030; }
    .term-fgx237 { color: #3a3a3a; }
    .term-fgx238 { color: #444444; }
    .term-fgx239 { color: #4e4e4e; }
    .term-fgx240 { color: #585858; }
    .term-fgx241 { color: #626262; }
    .term-fgx242 { color: #6c6c6c; }
    .term-fgx243 { color: #767676; }
    .term-fgx244 { color: #808080; }
    .term-fgx245 { color: #8a8a8a; }
    .term-fgx246 { color: #949494; }
    .term-fgx247 { color: #9e9e9e; }
    .term-fgx248 { color: #a8a8a8; }
    .term-fgx249 { color: #b2b2b2; }
    .term-fgx250 { color: #bcbcbc; }
    .term-fgx251 { color: #c6c6c6; }
    .term-fgx252 { color: #d0d0d0; }
    .term-fgx253 { color: #dadada; }
    .term-fgx254 { color: #e4e4e4; }
    .term-fgx255 { color: #eeeeee; }
</style>

</head>
<body>
    <div class="col-xl-10 col-xxl-8 mx-auto px-3 py-1 py-md-3">
        <main class="container-fluid">
            <div class="row">
                <div>
                    <div class="float-end">
                        <div class="form-check form-switch">
                            <i class="bi bi-brightness-low" id="dark-mode-icon"></i>
                            <input class="form-check-input" type="checkbox" role="switch" id="dark-mode-toggle" data-bs-toggle="tooltip"
                                   data-bs-placement="bottom" data-bs-title="Toggle Dark Mode"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"role="button" aria-expanded="true" aria-controls="id-54b222b1b25cf6d7902e6afe">
        
            <div class="col-12 col-sm-9 text-start"><h1>op-geth</h1></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+10129</span></div>
                <div class="text-start"><span class="text-danger">-1753</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse show border-1 ps-3 my-3" id="id-54b222b1b25cf6d7902e6afe">
        <div><p>This is an overview of the changes in <a href="https://github.com/ethereum-optimism/op-geth"><code>op-geth</code></a>,
a fork of <a href="https://github.com/ethereum/go-ethereum"><code>go-ethereum</code></a>, part of the OP-stack.</p>

<p>The OP-stack architecture is modular, following the Consensus/Execution split of post-Merge Ethereum L1:</p>

<ul>
<li><a href="https://github.com/ethereum-optimism/optimism/tree/develop/op-node"><code>op-node</code></a> implements most rollup-specific functionality as Consensus-Layer, similar to a L1 beacon-node.</li>
<li><a href="https://github.com/ethereum-optimism/op-geth"><code>op-geth</code></a> implements the Execution-Layer, with <strong>minimal changes</strong> for a secure Ethereum-equivalent application environment.</li>
</ul>

<p>Related <a href="https://github.com/ethereum-optimism/optimism/tree/develop/specs">op-stack specifications</a>:</p>

<ul>
<li><a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/exec-engine.md">L2 Execution Engine spec</a></li>
<li><a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/deposits.md">Deposit Transaction spec</a></li>
</ul>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-2de98da8e7ac241a8cfc5ff6"role="button" aria-expanded="false" aria-controls="id-2de98da8e7ac241a8cfc5ff6">
        
            <div class="col-12 col-sm-9 text-start"><h2>Core modifications</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+1356</span></div>
                <div class="text-start"><span class="text-danger">-292</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-2de98da8e7ac241a8cfc5ff6">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-591457e12daf4b9f5b8914b1"role="button" aria-expanded="false" aria-controls="id-591457e12daf4b9f5b8914b1">
        
            <div class="col-12 col-sm-9 text-start"><h3>State-transition modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+647</span></div>
                <div class="text-start"><span class="text-danger">-204</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-591457e12daf4b9f5b8914b1">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-5a2be5c9db1ef1e6c242107a"role="button" aria-expanded="false" aria-controls="id-5a2be5c9db1ef1e6c242107a">
        
            <div class="col-12 col-sm-9 text-start"><h4>Deposit Transaction type</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+181</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-5a2be5c9db1ef1e6c242107a">
        <div><p>The Bedrock upgrade introduces a <code>Deposit</code> transaction-type (<code>0x7E</code>) to enable both users and the
rollup system itself to change the L2 state based on L1 events and system rules as
<a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/deposits.md">specified</a>.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3fa096c67ef7f293c356add7" role="button"
                   aria-expanded="false" aria-controls="id-3fa096c67ef7f293c356add7">
                    <code>core/types/deposit_tx.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/deposit_tx.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+93</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3fa096c67ef7f293c356add7"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;deposit_tx.go op-geth&#47;core&#47;types&#47;deposit_tx.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..dc0708a0c208defb6e2c94c3428c26637094f1c3</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;deposit_tx.go</span>
<span class="term-fg36">@@ -0,0 +1,93 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2021 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const DepositTxType = 0x7E</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type DepositTx struct {</span>
<span class="term-fg32">+	&#47;&#47; SourceHash uniquely identifies the source of the deposit</span>
<span class="term-fg32">+	SourceHash common.Hash</span>
<span class="term-fg32">+	&#47;&#47; From is exposed through the types.Signer, not through TxData</span>
<span class="term-fg32">+	From common.Address</span>
<span class="term-fg32">+	&#47;&#47; nil means contract creation</span>
<span class="term-fg32">+	To *common.Address `rlp:&quot;nil&quot;`</span>
<span class="term-fg32">+	&#47;&#47; Mint is minted on L2, locked on L1, nil if no minting.</span>
<span class="term-fg32">+	Mint *big.Int `rlp:&quot;nil&quot;`</span>
<span class="term-fg32">+	&#47;&#47; Value is transferred from L2 balance, executed after Mint (if any)</span>
<span class="term-fg32">+	Value *big.Int</span>
<span class="term-fg32">+	&#47;&#47; gas limit</span>
<span class="term-fg32">+	Gas uint64</span>
<span class="term-fg32">+	&#47;&#47; Field indicating if this transaction is exempt from the L2 gas limit.</span>
<span class="term-fg32">+	IsSystemTransaction bool</span>
<span class="term-fg32">+	&#47;&#47; Normal Tx data</span>
<span class="term-fg32">+	Data []byte</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; copy creates a deep copy of the transaction data and initializes all fields.</span>
<span class="term-fg32">+func (tx *DepositTx) copy() TxData {</span>
<span class="term-fg32">+	cpy := &amp;DepositTx{</span>
<span class="term-fg32">+		SourceHash:          tx.SourceHash,</span>
<span class="term-fg32">+		From:                tx.From,</span>
<span class="term-fg32">+		To:                  copyAddressPtr(tx.To),</span>
<span class="term-fg32">+		Mint:                nil,</span>
<span class="term-fg32">+		Value:               new(big.Int),</span>
<span class="term-fg32">+		Gas:                 tx.Gas,</span>
<span class="term-fg32">+		IsSystemTransaction: tx.IsSystemTransaction,</span>
<span class="term-fg32">+		Data:                common.CopyBytes(tx.Data),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if tx.Mint != nil {</span>
<span class="term-fg32">+		cpy.Mint = new(big.Int).Set(tx.Mint)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if tx.Value != nil {</span>
<span class="term-fg32">+		cpy.Value.Set(tx.Value)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return cpy</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; accessors for innerTx.</span>
<span class="term-fg32">+func (tx *DepositTx) txType() byte           { return DepositTxType }</span>
<span class="term-fg32">+func (tx *DepositTx) chainID() *big.Int      { return common.Big0 }</span>
<span class="term-fg32">+func (tx *DepositTx) accessList() AccessList { return nil }</span>
<span class="term-fg32">+func (tx *DepositTx) data() []byte           { return tx.Data }</span>
<span class="term-fg32">+func (tx *DepositTx) gas() uint64            { return tx.Gas }</span>
<span class="term-fg32">+func (tx *DepositTx) gasFeeCap() *big.Int    { return new(big.Int) }</span>
<span class="term-fg32">+func (tx *DepositTx) gasTipCap() *big.Int    { return new(big.Int) }</span>
<span class="term-fg32">+func (tx *DepositTx) gasPrice() *big.Int     { return new(big.Int) }</span>
<span class="term-fg32">+func (tx *DepositTx) value() *big.Int        { return tx.Value }</span>
<span class="term-fg32">+func (tx *DepositTx) nonce() uint64          { return 0 }</span>
<span class="term-fg32">+func (tx *DepositTx) to() *common.Address    { return tx.To }</span>
<span class="term-fg32">+func (tx *DepositTx) isSystemTx() bool       { return tx.IsSystemTransaction }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTx) effectiveGasPrice(dst *big.Int, baseFee *big.Int) *big.Int {</span>
<span class="term-fg32">+	return dst.Set(new(big.Int))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTx) effectiveNonce() *uint64 { return nil }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTx) rawSignatureValues() (v, r, s *big.Int) {</span>
<span class="term-fg32">+	return common.Big0, common.Big0, common.Big0</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DepositTx) setSignatureValues(chainID, v, r, s *big.Int) {</span>
<span class="term-fg32">+	&#47;&#47; this is a noop for deposit transactions</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-365aca9ac69102b3cab41d4d" role="button"
                   aria-expanded="false" aria-controls="id-365aca9ac69102b3cab41d4d">
                    <code>core/types/transaction_marshalling.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/transaction_marshalling.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/transaction_marshalling.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+79</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-365aca9ac69102b3cab41d4d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;transaction_marshalling.go op-geth&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg1">index 2566d0b8d6566aa2953cb0456ede19af069e7d4c..dccb54ffcad6e5565a463bc911fc16824ca5e4f6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;transaction_marshalling.go</span>
<span class="term-fg36">@@ -19,10 +19,12 @@</span>
 import (
 	&quot;encoding&#47;json&quot;
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;io&quot;</span>
 	&quot;math&#47;big&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;</span>
 )
&nbsp;
 &#47;&#47; txJSON is the JSON representation of transactions.
<span class="term-fg36">@@ -41,6 +43,12 @@</span> 	V                    *hexutil.Big    `json:&quot;v&quot;`
 	R                    *hexutil.Big    `json:&quot;r&quot;`
 	S                    *hexutil.Big    `json:&quot;s&quot;`
 	To                   *common.Address `json:&quot;to&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deposit transaction fields</span>
<span class="term-fg32">+	SourceHash *common.Hash    `json:&quot;sourceHash,omitempty&quot;`</span>
<span class="term-fg32">+	From       *common.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+	Mint       *hexutil.Big    `json:&quot;mint,omitempty&quot;`</span>
<span class="term-fg32">+	IsSystemTx *bool           `json:&quot;isSystemTx,omitempty&quot;`</span>
&nbsp;
 	&#47;&#47; Access list transaction fields:
 	ChainID    *hexutil.Big `json:&quot;chainId,omitempty&quot;`
<span class="term-fg36">@@ -94,6 +102,18 @@</span> 		enc.To = tx.To()
 		enc.V = (*hexutil.Big)(itx.V)
 		enc.R = (*hexutil.Big)(itx.R)
 		enc.S = (*hexutil.Big)(itx.S)
<span class="term-fg32">+	case *DepositTx:</span>
<span class="term-fg32">+		enc.Gas = (*hexutil.Uint64)(&amp;itx.Gas)</span>
<span class="term-fg32">+		enc.Value = (*hexutil.Big)(itx.Value)</span>
<span class="term-fg32">+		enc.Data = (*hexutil.Bytes)(&amp;itx.Data)</span>
<span class="term-fg32">+		enc.To = tx.To()</span>
<span class="term-fg32">+		enc.SourceHash = &amp;itx.SourceHash</span>
<span class="term-fg32">+		enc.From = &amp;itx.From</span>
<span class="term-fg32">+		if itx.Mint != nil {</span>
<span class="term-fg32">+			enc.Mint = (*hexutil.Big)(itx.Mint)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enc.IsSystemTx = &amp;itx.IsSystemTransaction</span>
<span class="term-fg32">+		&#47;&#47; other fields will show up as null.</span>
 	}
 	return json.Marshal(&amp;enc)
 }
<span class="term-fg36">@@ -262,7 +282,54 @@</span> 			if err := sanityCheckSignature(itx.V, itx.R, itx.S, false); err != nil {
 				return err
 			}
 		}
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		if dec.AccessList != nil || dec.MaxFeePerGas != nil ||</span>
<span class="term-fg32">+			dec.MaxPriorityFeePerGas != nil {</span>
<span class="term-fg32">+			return errors.New(&quot;unexpected field(s) in deposit transaction&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if dec.GasPrice != nil &amp;&amp; dec.GasPrice.ToInt().Cmp(common.Big0) != 0 {</span>
<span class="term-fg32">+			return errors.New(&quot;deposit transaction GasPrice must be 0&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if (dec.V != nil &amp;&amp; dec.V.ToInt().Cmp(common.Big0) != 0) ||</span>
<span class="term-fg32">+			(dec.R != nil &amp;&amp; dec.R.ToInt().Cmp(common.Big0) != 0) ||</span>
<span class="term-fg32">+			(dec.S != nil &amp;&amp; dec.S.ToInt().Cmp(common.Big0) != 0) {</span>
<span class="term-fg32">+			return errors.New(&quot;deposit transaction signature must be 0 or unset&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		var itx DepositTx</span>
<span class="term-fg32">+		inner = &amp;itx</span>
<span class="term-fg32">+		if dec.To != nil {</span>
<span class="term-fg32">+			itx.To = dec.To</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if dec.Gas == nil {</span>
<span class="term-fg32">+			return errors.New(&quot;missing required field &#39;gas&#39; for txdata&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		itx.Gas = uint64(*dec.Gas)</span>
<span class="term-fg32">+		if dec.Value == nil {</span>
<span class="term-fg32">+			return errors.New(&quot;missing required field &#39;value&#39; in transaction&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		itx.Value = (*big.Int)(dec.Value)</span>
<span class="term-fg32">+		&#47;&#47; mint may be omitted or nil if there is nothing to mint.</span>
<span class="term-fg32">+		itx.Mint = (*big.Int)(dec.Mint)</span>
<span class="term-fg32">+		if dec.Data == nil {</span>
<span class="term-fg32">+			return errors.New(&quot;missing required field &#39;input&#39; in transaction&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		itx.Data = *dec.Data</span>
<span class="term-fg32">+		if dec.From == nil {</span>
<span class="term-fg32">+			return errors.New(&quot;missing required field &#39;from&#39; in transaction&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		itx.From = *dec.From</span>
<span class="term-fg32">+		if dec.SourceHash == nil {</span>
<span class="term-fg32">+			return errors.New(&quot;missing required field &#39;sourceHash&#39; in transaction&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		itx.SourceHash = *dec.SourceHash</span>
<span class="term-fg32">+		&#47;&#47; IsSystemTx may be omitted. Defaults to false.</span>
<span class="term-fg32">+		if dec.IsSystemTx != nil {</span>
<span class="term-fg32">+			itx.IsSystemTransaction = *dec.IsSystemTx</span>
<span class="term-fg32">+		}</span>
&nbsp;
<span class="term-fg32">+		if dec.Nonce != nil {</span>
<span class="term-fg32">+			inner = &amp;depositTxWithNonce{DepositTx: itx, EffectiveNonce: uint64(*dec.Nonce)}</span>
<span class="term-fg32">+		}</span>
 	default:
 		return ErrTxTypeNotSupported
 	}
<span class="term-fg36">@@ -273,3 +340,15 @@</span>
 	&#47;&#47; TODO: check hash here?
 	return nil
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+type depositTxWithNonce struct {</span>
<span class="term-fg32">+	DepositTx</span>
<span class="term-fg32">+	EffectiveNonce uint64</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; EncodeRLP ensures that RLP encoding this transaction excludes the nonce. Otherwise, the tx Hash would change</span>
<span class="term-fg32">+func (tx *depositTxWithNonce) EncodeRLP(w io.Writer) error {</span>
<span class="term-fg32">+	return rlp.Encode(w, tx.DepositTx)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *depositTxWithNonce) effectiveNonce() *uint64 { return &amp;tx.EffectiveNonce }</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9055da7c9f87de093938ad7a" role="button"
                   aria-expanded="false" aria-controls="id-9055da7c9f87de093938ad7a">
                    <code>core/types/transaction_signing.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/transaction_signing.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/transaction_signing.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9055da7c9f87de093938ad7a"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;transaction_signing.go op-geth&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg1">index 87f0390a6f9ce448873688ef214fc02753856342..70a10eb1c1ed086a4421914f940555e406040c55 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;transaction_signing.go</span>
<span class="term-fg36">@@ -182,6 +182,9 @@</span> 	return londonSigner{eip2930Signer{NewEIP155Signer(chainId)}}
 }
&nbsp;
 func (s londonSigner) Sender(tx *Transaction) (common.Address, error) {
<span class="term-fg32">+	if tx.Type() == DepositTxType {</span>
<span class="term-fg32">+		return tx.inner.(*DepositTx).From, nil</span>
<span class="term-fg32">+	}</span>
 	if tx.Type() != DynamicFeeTxType {
 		return s.eip2930Signer.Sender(tx)
 	}
<span class="term-fg36">@@ -201,6 +204,9 @@</span> 	return ok &amp;&amp; x.chainId.Cmp(s.chainId) == 0
 }
&nbsp;
 func (s londonSigner) SignatureValues(tx *Transaction, sig []byte) (R, S, V *big.Int, err error) {
<span class="term-fg32">+	if tx.Type() == DepositTxType {</span>
<span class="term-fg32">+		return nil, nil, nil, fmt.Errorf(&quot;deposits do not have a signature&quot;)</span>
<span class="term-fg32">+	}</span>
 	txdata, ok := tx.inner.(*DynamicFeeTx)
 	if !ok {
 		return s.eip2930Signer.SignatureValues(tx, sig)
<span class="term-fg36">@@ -218,6 +224,9 @@</span>
 &#47;&#47; Hash returns the hash to be signed by the sender.
 &#47;&#47; It does not uniquely identify the transaction.
 func (s londonSigner) Hash(tx *Transaction) common.Hash {
<span class="term-fg32">+	if tx.Type() == DepositTxType {</span>
<span class="term-fg32">+		panic(&quot;deposits cannot be signed and do not have a signing hash&quot;)</span>
<span class="term-fg32">+	}</span>
 	if tx.Type() != DynamicFeeTxType {
 		return s.eip2930Signer.Hash(tx)
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-af7c12c46649df98e5f2313e"role="button" aria-expanded="false" aria-controls="id-af7c12c46649df98e5f2313e">
        
            <div class="col-12 col-sm-9 text-start"><h4>Transaction properties</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+110</span></div>
                <div class="text-start"><span class="text-danger">-68</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-af7c12c46649df98e5f2313e">
        <div><p>The <code>Transaction</code> type now exposes the deposit-transaction and L1-cost properties required for the rollup.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9538c18f51ecfd7db8356cea" role="button"
                   aria-expanded="false" aria-controls="id-9538c18f51ecfd7db8356cea">
                    <code>core/types/transaction.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/transaction.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/transaction.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+88</span></div>
                        <div class="text-start"><span class="text-danger">-68</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9538c18f51ecfd7db8356cea"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;transaction.go op-geth&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg1">index 353e0e599c681b00c75d43578e604f7cb1928ae7..6485d0516914a4291a5e7ea95d4f7d0edd4a8642 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;transaction.go</span>
<span class="term-fg36">@@ -28,6 +28,7 @@</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;
 )
&nbsp;
<span class="term-fg36">@@ -56,6 +57,9 @@</span> 	&#47;&#47; caches
 	hash atomic.Value
 	size atomic.Value
 	from atomic.Value
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; cache of RollupGasData details to compute the gas the tx takes on L1 for its share of rollup data</span>
<span class="term-fg32">+	rollupGas atomic.Value</span>
 }
&nbsp;
 &#47;&#47; NewTx creates a new transaction.
<span class="term-fg36">@@ -82,9 +86,18 @@</span> 	gasFeeCap() *big.Int
 	value() *big.Int
 	nonce() uint64
 	to() *common.Address
<span class="term-fg32">+	isSystemTx() bool</span>
&nbsp;
 	rawSignatureValues() (v, r, s *big.Int)
 	setSignatureValues(chainID, v, r, s *big.Int)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; effectiveGasPrice computes the gas price paid by the transaction, given</span>
<span class="term-fg32">+	&#47;&#47; the inclusion block baseFee.</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; Unlike other TxData methods, the returned *big.Int should be an independent</span>
<span class="term-fg32">+	&#47;&#47; copy of the computed value, i.e. callers are allowed to mutate the result.</span>
<span class="term-fg32">+	&#47;&#47; Method implementations can use &#39;dst&#39; to store the result.</span>
<span class="term-fg32">+	effectiveGasPrice(dst *big.Int, baseFee *big.Int) *big.Int</span>
 }
&nbsp;
 &#47;&#47; EncodeRLP implements rlp.Encoder
<span class="term-fg36">@@ -184,6 +197,10 @@</span> 	case DynamicFeeTxType:
 		var inner DynamicFeeTx
 		err := rlp.DecodeBytes(b[1:], &amp;inner)
 		return &amp;inner, err
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		var inner DepositTx</span>
<span class="term-fg32">+		err := rlp.DecodeBytes(b[1:], &amp;inner)</span>
<span class="term-fg32">+		return &amp;inner, err</span>
 	default:
 		return nil, ErrTxTypeNotSupported
 	}
<span class="term-fg36">@@ -279,12 +296,56 @@</span>
 &#47;&#47; Nonce returns the sender account nonce of the transaction.
 func (tx *Transaction) Nonce() uint64 { return tx.inner.nonce() }
&nbsp;
<span class="term-fg32">+&#47;&#47; EffectiveNonce returns the nonce that was actually used as part of transaction execution</span>
<span class="term-fg32">+&#47;&#47; Returns nil if the effective nonce is not known</span>
<span class="term-fg32">+func (tx *Transaction) EffectiveNonce() *uint64 {</span>
<span class="term-fg32">+	type txWithEffectiveNonce interface {</span>
<span class="term-fg32">+		effectiveNonce() *uint64</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if itx, ok := tx.inner.(txWithEffectiveNonce); ok {</span>
<span class="term-fg32">+		return itx.effectiveNonce()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nonce := tx.inner.nonce()</span>
<span class="term-fg32">+	return &amp;nonce</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; To returns the recipient address of the transaction.
 &#47;&#47; For contract-creation transactions, To returns nil.
 func (tx *Transaction) To() *common.Address {
 	return copyAddressPtr(tx.inner.to())
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; SourceHash returns the hash that uniquely identifies the source of the deposit tx,</span>
<span class="term-fg32">+&#47;&#47; e.g. a user deposit event, or a L1 info deposit included in a specific L2 block height.</span>
<span class="term-fg32">+&#47;&#47; Non-deposit transactions return a zeroed hash.</span>
<span class="term-fg32">+func (tx *Transaction) SourceHash() common.Hash {</span>
<span class="term-fg32">+	if dep, ok := tx.inner.(*DepositTx); ok {</span>
<span class="term-fg32">+		return dep.SourceHash</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return common.Hash{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Mint returns the ETH to mint in the deposit tx.</span>
<span class="term-fg32">+&#47;&#47; This returns nil if there is nothing to mint, or if this is not a deposit tx.</span>
<span class="term-fg32">+func (tx *Transaction) Mint() *big.Int {</span>
<span class="term-fg32">+	if dep, ok := tx.inner.(*DepositTx); ok {</span>
<span class="term-fg32">+		return dep.Mint</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsDepositTx returns true if the transaction is a deposit tx type.</span>
<span class="term-fg32">+func (tx *Transaction) IsDepositTx() bool {</span>
<span class="term-fg32">+	return tx.Type() == DepositTxType</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsSystemTx returns true for deposits that are system transactions. These transactions</span>
<span class="term-fg32">+&#47;&#47; are executed in an unmetered environment &amp; do not contribute to the block gas limit.</span>
<span class="term-fg32">+func (tx *Transaction) IsSystemTx() bool {</span>
<span class="term-fg32">+	return tx.inner.isSystemTx()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Cost returns gas * gasPrice + value.
 func (tx *Transaction) Cost() *big.Int {
 	total := new(big.Int).Mul(tx.GasPrice(), new(big.Int).SetUint64(tx.Gas()))
<span class="term-fg36">@@ -292,6 +353,30 @@</span> 	total.Add(total, tx.Value())
 	return total
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; RollupDataGas is the amount of gas it takes to confirm the tx on L1 as a rollup</span>
<span class="term-fg32">+func (tx *Transaction) RollupDataGas() RollupGasData {</span>
<span class="term-fg32">+	if tx.Type() == DepositTxType {</span>
<span class="term-fg32">+		return RollupGasData{}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if v := tx.rollupGas.Load(); v != nil {</span>
<span class="term-fg32">+		return v.(RollupGasData)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	data, err := tx.MarshalBinary()</span>
<span class="term-fg32">+	if err != nil { &#47;&#47; Silent error, invalid txs will not be marshalled&#47;unmarshalled for batch submission anyway.</span>
<span class="term-fg32">+		log.Error(&quot;failed to encode tx for L1 cost computation&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var out RollupGasData</span>
<span class="term-fg32">+	for _, byt := range data {</span>
<span class="term-fg32">+		if byt == 0 {</span>
<span class="term-fg32">+			out.Zeroes++</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			out.Ones++</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tx.rollupGas.Store(out)</span>
<span class="term-fg32">+	return out</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; RawSignatureValues returns the V, R, S signature values of the transaction.
 &#47;&#47; The return values should not be modified by the caller.
 func (tx *Transaction) RawSignatureValues() (v, r, s *big.Int) {
<span class="term-fg36">@@ -322,6 +407,9 @@</span> &#47;&#47; EffectiveGasTip returns the effective miner gasTipCap for the given base fee.
 &#47;&#47; Note: if the effective gasTipCap is negative, this method returns both error
 &#47;&#47; the actual negative value, _and_ ErrGasFeeCapTooLow
 func (tx *Transaction) EffectiveGasTip(baseFee *big.Int) (*big.Int, error) {
<span class="term-fg32">+	if tx.Type() == DepositTxType {</span>
<span class="term-fg32">+		return new(big.Int), nil</span>
<span class="term-fg32">+	}</span>
 	if baseFee == nil {
 		return tx.GasTipCap(), nil
 	}
<span class="term-fg36">@@ -580,74 +668,6 @@</span> &#47;&#47; and hence all subsequent ones should be discarded from the same account.
 func (t *TransactionsByPriceAndNonce) Pop() {
 	heap.Pop(&amp;t.heads)
 }
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; Message is a fully derived transaction and implements core.Message</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; NOTE: In a future PR this will be removed.</span>
<span class="term-fg31">-type Message struct {</span>
<span class="term-fg31">-	to         *common.Address</span>
<span class="term-fg31">-	from       common.Address</span>
<span class="term-fg31">-	nonce      uint64</span>
<span class="term-fg31">-	amount     *big.Int</span>
<span class="term-fg31">-	gasLimit   uint64</span>
<span class="term-fg31">-	gasPrice   *big.Int</span>
<span class="term-fg31">-	gasFeeCap  *big.Int</span>
<span class="term-fg31">-	gasTipCap  *big.Int</span>
<span class="term-fg31">-	data       []byte</span>
<span class="term-fg31">-	accessList AccessList</span>
<span class="term-fg31">-	isFake     bool</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func NewMessage(from common.Address, to *common.Address, nonce uint64, amount *big.Int, gasLimit uint64, gasPrice, gasFeeCap, gasTipCap *big.Int, data []byte, accessList AccessList, isFake bool) Message {</span>
<span class="term-fg31">-	return Message{</span>
<span class="term-fg31">-		from:       from,</span>
<span class="term-fg31">-		to:         to,</span>
<span class="term-fg31">-		nonce:      nonce,</span>
<span class="term-fg31">-		amount:     amount,</span>
<span class="term-fg31">-		gasLimit:   gasLimit,</span>
<span class="term-fg31">-		gasPrice:   gasPrice,</span>
<span class="term-fg31">-		gasFeeCap:  gasFeeCap,</span>
<span class="term-fg31">-		gasTipCap:  gasTipCap,</span>
<span class="term-fg31">-		data:       data,</span>
<span class="term-fg31">-		accessList: accessList,</span>
<span class="term-fg31">-		isFake:     isFake,</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; AsMessage returns the transaction as a core.Message.</span>
<span class="term-fg31">-func (tx *Transaction) AsMessage(s Signer, baseFee *big.Int) (Message, error) {</span>
<span class="term-fg31">-	msg := Message{</span>
<span class="term-fg31">-		nonce:      tx.Nonce(),</span>
<span class="term-fg31">-		gasLimit:   tx.Gas(),</span>
<span class="term-fg31">-		gasPrice:   new(big.Int).Set(tx.GasPrice()),</span>
<span class="term-fg31">-		gasFeeCap:  new(big.Int).Set(tx.GasFeeCap()),</span>
<span class="term-fg31">-		gasTipCap:  new(big.Int).Set(tx.GasTipCap()),</span>
<span class="term-fg31">-		to:         tx.To(),</span>
<span class="term-fg31">-		amount:     tx.Value(),</span>
<span class="term-fg31">-		data:       tx.Data(),</span>
<span class="term-fg31">-		accessList: tx.AccessList(),</span>
<span class="term-fg31">-		isFake:     false,</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; If baseFee provided, set gasPrice to effectiveGasPrice.</span>
<span class="term-fg31">-	if baseFee != nil {</span>
<span class="term-fg31">-		msg.gasPrice = math.BigMin(msg.gasPrice.Add(msg.gasTipCap, baseFee), msg.gasFeeCap)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	var err error</span>
<span class="term-fg31">-	msg.from, err = Sender(s, tx)</span>
<span class="term-fg31">-	return msg, err</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (m Message) From() common.Address   { return m.from }</span>
<span class="term-fg31">-func (m Message) To() *common.Address    { return m.to }</span>
<span class="term-fg31">-func (m Message) GasPrice() *big.Int     { return m.gasPrice }</span>
<span class="term-fg31">-func (m Message) GasFeeCap() *big.Int    { return m.gasFeeCap }</span>
<span class="term-fg31">-func (m Message) GasTipCap() *big.Int    { return m.gasTipCap }</span>
<span class="term-fg31">-func (m Message) Value() *big.Int        { return m.amount }</span>
<span class="term-fg31">-func (m Message) Gas() uint64            { return m.gasLimit }</span>
<span class="term-fg31">-func (m Message) Nonce() uint64          { return m.nonce }</span>
<span class="term-fg31">-func (m Message) Data() []byte           { return m.data }</span>
<span class="term-fg31">-func (m Message) AccessList() AccessList { return m.accessList }</span>
<span class="term-fg31">-func (m Message) IsFake() bool           { return m.isFake }</span>
&nbsp;
 &#47;&#47; copyAddressPtr copies an address.
 func copyAddressPtr(a *common.Address) *common.Address {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9e66fb28f58c77220e2e2967" role="button"
                   aria-expanded="false" aria-controls="id-9e66fb28f58c77220e2e2967">
                    <code>core/types/tx_access_list.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/tx_access_list.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/tx_access_list.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9e66fb28f58c77220e2e2967"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;tx_access_list.go op-geth&#47;core&#47;types&#47;tx_access_list.go</span>
<span class="term-fg1">index 620848fe624a30d4ebaa86932da53da4a6f99490..518fb603754dcd3497d8b8829598736cd640e136 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;tx_access_list.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;tx_access_list.go</span>
<span class="term-fg36">@@ -105,6 +105,11 @@</span> func (tx *AccessListTx) gasFeeCap() *big.Int    { return tx.GasPrice }
 func (tx *AccessListTx) value() *big.Int        { return tx.Value }
 func (tx *AccessListTx) nonce() uint64          { return tx.Nonce }
 func (tx *AccessListTx) to() *common.Address    { return tx.To }
<span class="term-fg32">+func (tx *AccessListTx) isSystemTx() bool       { return false }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *AccessListTx) effectiveGasPrice(dst *big.Int, baseFee *big.Int) *big.Int {</span>
<span class="term-fg32">+	return dst.Set(tx.GasPrice)</span>
<span class="term-fg32">+}</span>
&nbsp;
 func (tx *AccessListTx) rawSignatureValues() (v, r, s *big.Int) {
 	return tx.V, tx.R, tx.S</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-45659b6ad9558c1e458c1178" role="button"
                   aria-expanded="false" aria-controls="id-45659b6ad9558c1e458c1178">
                    <code>core/types/tx_dynamic_fee.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/tx_dynamic_fee.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/tx_dynamic_fee.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-45659b6ad9558c1e458c1178"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;tx_dynamic_fee.go op-geth&#47;core&#47;types&#47;tx_dynamic_fee.go</span>
<span class="term-fg1">index 53f246ea1fadc9dedeae876063819e08a3eb49ac..ee84b7741f21c8bfbe5dd9f7cce0304d89b6a9bc 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;tx_dynamic_fee.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;tx_dynamic_fee.go</span>
<span class="term-fg36">@@ -93,6 +93,18 @@</span> func (tx *DynamicFeeTx) gasPrice() *big.Int     { return tx.GasFeeCap }
 func (tx *DynamicFeeTx) value() *big.Int        { return tx.Value }
 func (tx *DynamicFeeTx) nonce() uint64          { return tx.Nonce }
 func (tx *DynamicFeeTx) to() *common.Address    { return tx.To }
<span class="term-fg32">+func (tx *DynamicFeeTx) isSystemTx() bool       { return false }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *DynamicFeeTx) effectiveGasPrice(dst *big.Int, baseFee *big.Int) *big.Int {</span>
<span class="term-fg32">+	if baseFee == nil {</span>
<span class="term-fg32">+		return dst.Set(tx.GasFeeCap)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	tip := dst.Sub(tx.GasFeeCap, baseFee)</span>
<span class="term-fg32">+	if tip.Cmp(tx.GasTipCap) &gt; 0 {</span>
<span class="term-fg32">+		tip.Set(tx.GasTipCap)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return tip.Add(tip, baseFee)</span>
<span class="term-fg32">+}</span>
&nbsp;
 func (tx *DynamicFeeTx) rawSignatureValues() (v, r, s *big.Int) {
 	return tx.V, tx.R, tx.S</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-280d0ff84f97db23c6eed01c" role="button"
                   aria-expanded="false" aria-controls="id-280d0ff84f97db23c6eed01c">
                    <code>core/types/tx_legacy.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/tx_legacy.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/tx_legacy.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-280d0ff84f97db23c6eed01c"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;tx_legacy.go op-geth&#47;core&#47;types&#47;tx_legacy.go</span>
<span class="term-fg1">index 14d307829cc92be9910e78ddde6d65ca8c2c9b03..3fdbaf1eec4d5f22ffa47c8723c095ff825fde97 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;tx_legacy.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;tx_legacy.go</span>
<span class="term-fg36">@@ -102,6 +102,11 @@</span> func (tx *LegacyTx) gasFeeCap() *big.Int    { return tx.GasPrice }
 func (tx *LegacyTx) value() *big.Int        { return tx.Value }
 func (tx *LegacyTx) nonce() uint64          { return tx.Nonce }
 func (tx *LegacyTx) to() *common.Address    { return tx.To }
<span class="term-fg32">+func (tx *LegacyTx) isSystemTx() bool       { return false }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (tx *LegacyTx) effectiveGasPrice(dst *big.Int, baseFee *big.Int) *big.Int {</span>
<span class="term-fg32">+	return dst.Set(tx.GasPrice)</span>
<span class="term-fg32">+}</span>
&nbsp;
 func (tx *LegacyTx) rawSignatureValues() (v, r, s *big.Int) {
 	return tx.V, tx.R, tx.S</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-43a10edc73698061c0e05988"role="button" aria-expanded="false" aria-controls="id-43a10edc73698061c0e05988">
        
            <div class="col-12 col-sm-9 text-start"><h4>L1 cost computation</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+109</span></div>
                <div class="text-start"><span class="text-danger">-11</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-43a10edc73698061c0e05988">
        <div><p>Transactions must pay an additional L1 cost based on the amount of rollup-data-gas they consume,
estimated based on gas-price-oracle information and encoded tx size.&rdquo;</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-de062eb77238cc69c46423fa" role="button"
                   aria-expanded="false" aria-controls="id-de062eb77238cc69c46423fa">
                    <code>core/vm/evm.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/vm/evm.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/vm/evm.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-de062eb77238cc69c46423fa"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;vm&#47;evm.go op-geth&#47;core&#47;vm&#47;evm.go</span>
<span class="term-fg1">index d78ea07926641a08a6ccda5b552fa4f851eadd4e..9ab030dbabd8fb5b961f88365ec8505afd4ad9d5 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;vm&#47;evm.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;vm&#47;evm.go</span>
<span class="term-fg36">@@ -20,10 +20,12 @@</span> import (
 	&quot;math&#47;big&quot;
 	&quot;sync&#47;atomic&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg31">-	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
 )
&nbsp;
 &#47;&#47; emptyCodeHash is used by create to ensure deployment is disallowed to already
<span class="term-fg36">@@ -66,6 +68,8 @@</span> 	&#47;&#47; Transfer transfers ether from one account to the other
 	Transfer TransferFunc
 	&#47;&#47; GetHash returns the hash corresponding to n
 	GetHash GetHashFunc
<span class="term-fg32">+	&#47;&#47; L1CostFunc returns the L1 cost of the rollup message, the function may be nil, or return nil</span>
<span class="term-fg32">+	L1CostFunc types.L1CostFunc</span>
&nbsp;
 	&#47;&#47; Block information
 	Coinbase    common.Address &#47;&#47; Provides information for COINBASE</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5b58e436fcc3ea65e745d2d0" role="button"
                   aria-expanded="false" aria-controls="id-5b58e436fcc3ea65e745d2d0">
                    <code>core/types/rollup_l1_cost.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/rollup_l1_cost.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+83</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5b58e436fcc3ea65e745d2d0"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;rollup_l1_cost.go op-geth&#47;core&#47;types&#47;rollup_l1_cost.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..521dfc10d7a7f086456cea4d16b2a756a0dbc777</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;rollup_l1_cost.go</span>
<span class="term-fg36">@@ -0,0 +1,83 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type RollupGasData struct {</span>
<span class="term-fg32">+	Zeroes, Ones uint64</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (r RollupGasData) DataGas(time uint64, cfg *params.ChainConfig) (gas uint64) {</span>
<span class="term-fg32">+	gas = r.Zeroes * params.TxDataZeroGas</span>
<span class="term-fg32">+	if cfg.IsRegolith(time) {</span>
<span class="term-fg32">+		gas += r.Ones * params.TxDataNonZeroGasEIP2028</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		gas += (r.Ones + 68) * params.TxDataNonZeroGasEIP2028</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return gas</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type StateGetter interface {</span>
<span class="term-fg32">+	GetState(common.Address, common.Hash) common.Hash</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; L1CostFunc is used in the state transition to determine the cost of a rollup message.</span>
<span class="term-fg32">+&#47;&#47; Returns nil if there is no cost.</span>
<span class="term-fg32">+type L1CostFunc func(blockNum uint64, blockTime uint64, dataGas RollupGasData, isDepositTx bool) *big.Int</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	L1BaseFeeSlot = common.BigToHash(big.NewInt(1))</span>
<span class="term-fg32">+	OverheadSlot  = common.BigToHash(big.NewInt(5))</span>
<span class="term-fg32">+	ScalarSlot    = common.BigToHash(big.NewInt(6))</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var L1BlockAddr = common.HexToAddress(&quot;0x4200000000000000000000000000000000000015&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewL1CostFunc returns a function used for calculating L1 fee cost.</span>
<span class="term-fg32">+&#47;&#47; This depends on the oracles because gas costs can change over time.</span>
<span class="term-fg32">+&#47;&#47; It returns nil if there is no applicable cost function.</span>
<span class="term-fg32">+func NewL1CostFunc(config *params.ChainConfig, statedb StateGetter) L1CostFunc {</span>
<span class="term-fg32">+	cacheBlockNum := ^uint64(0)</span>
<span class="term-fg32">+	var l1BaseFee, overhead, scalar *big.Int</span>
<span class="term-fg32">+	return func(blockNum uint64, blockTime uint64, dataGas RollupGasData, isDepositTx bool) *big.Int {</span>
<span class="term-fg32">+		rollupDataGas := dataGas.DataGas(blockTime, config) &#47;&#47; Only fake txs for RPC view-calls are 0.</span>
<span class="term-fg32">+		if config.Optimism == nil || isDepositTx || rollupDataGas == 0 {</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if blockNum != cacheBlockNum {</span>
<span class="term-fg32">+			l1BaseFee = statedb.GetState(L1BlockAddr, L1BaseFeeSlot).Big()</span>
<span class="term-fg32">+			overhead = statedb.GetState(L1BlockAddr, OverheadSlot).Big()</span>
<span class="term-fg32">+			scalar = statedb.GetState(L1BlockAddr, ScalarSlot).Big()</span>
<span class="term-fg32">+			cacheBlockNum = blockNum</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return L1Cost(rollupDataGas, l1BaseFee, overhead, scalar)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func L1Cost(rollupDataGas uint64, l1BaseFee, overhead, scalar *big.Int) *big.Int {</span>
<span class="term-fg32">+	l1GasUsed := new(big.Int).SetUint64(rollupDataGas)</span>
<span class="term-fg32">+	l1GasUsed = l1GasUsed.Add(l1GasUsed, overhead)</span>
<span class="term-fg32">+	l1Cost := l1GasUsed.Mul(l1GasUsed, l1BaseFee)</span>
<span class="term-fg32">+	l1Cost = l1Cost.Mul(l1Cost, scalar)</span>
<span class="term-fg32">+	return l1Cost.Div(l1Cost, big.NewInt(1_000_000))</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9cab23a18ba9271d4503a813" role="button"
                   aria-expanded="false" aria-controls="id-9cab23a18ba9271d4503a813">
                    <code>core/state_processor.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/state_processor.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/state_processor.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+18</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9cab23a18ba9271d4503a813"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_processor.go op-geth&#47;core&#47;state_processor.go</span>
<span class="term-fg1">index 163ea0a0200af06c11723a333a291e9ca9ec80c2..7a638190aafc4c37bd2fe3855a755b2e75d00089 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_processor.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;state_processor.go</span>
<span class="term-fg36">@@ -70,11 +70,11 @@</span> 	&#47;&#47; Mutate the block and state according to any hard-fork specs
 	if p.config.DAOForkSupport &amp;&amp; p.config.DAOForkBlock != nil &amp;&amp; p.config.DAOForkBlock.Cmp(block.Number()) == 0 {
 		misc.ApplyDAOHardFork(statedb)
 	}
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, p.bc, nil)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, p.bc, nil, p.config, statedb)</span>
 	vmenv := vm.NewEVM(blockContext, vm.TxContext{}, statedb, p.config, cfg)
 	&#47;&#47; Iterate over and process the individual transactions
 	for i, tx := range block.Transactions() {
<span class="term-fg31">-		msg, err := tx.AsMessage(types.MakeSigner(p.config, header.Number), header.BaseFee)</span>
<span class="term-fg32">+		msg, err := TransactionToMessage(tx, types.MakeSigner(p.config, header.Number), header.BaseFee)</span>
 		if err != nil {
 			return nil, nil, 0, fmt.Errorf(&quot;could not apply tx %d [%v]: %w&quot;, i, tx.Hash().Hex(), err)
 		}
<span class="term-fg36">@@ -97,11 +97,16 @@</span>
 	return receipts, allLogs, *usedGas, nil
 }
&nbsp;
<span class="term-fg31">-func applyTransaction(msg types.Message, config *params.ChainConfig, gp *GasPool, statedb *state.StateDB, blockNumber *big.Int, blockHash common.Hash, tx *types.Transaction, usedGas *uint64, evm *vm.EVM) (*types.Receipt, error) {</span>
<span class="term-fg32">+func applyTransaction(msg *Message, config *params.ChainConfig, gp *GasPool, statedb *state.StateDB, blockNumber *big.Int, blockHash common.Hash, tx *types.Transaction, usedGas *uint64, evm *vm.EVM) (*types.Receipt, error) {</span>
 	&#47;&#47; Create a new context to be used in the EVM environment.
 	txContext := NewEVMTxContext(msg)
 	evm.Reset(txContext, statedb)
&nbsp;
<span class="term-fg32">+	nonce := tx.Nonce()</span>
<span class="term-fg32">+	if msg.IsDepositTx &amp;&amp; config.IsOptimismRegolith(evm.Context.Time) {</span>
<span class="term-fg32">+		nonce = statedb.GetNonce(msg.From)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Apply the transaction to the current state (included in the env).
 	result, err := ApplyMessage(evm, msg, gp)
 	if err != nil {
<span class="term-fg36">@@ -128,9 +133,15 @@</span> 	}
 	receipt.TxHash = tx.Hash()
 	receipt.GasUsed = result.UsedGas
&nbsp;
<span class="term-fg32">+	if msg.IsDepositTx &amp;&amp; config.IsOptimismRegolith(evm.Context.Time) {</span>
<span class="term-fg32">+		&#47;&#47; The actual nonce for deposit transactions is only recorded from Regolith onwards.</span>
<span class="term-fg32">+		&#47;&#47; Before the Regolith fork the DepositNonce must remain nil</span>
<span class="term-fg32">+		receipt.DepositNonce = &amp;nonce</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; If the transaction created a contract, store the creation address in the receipt.
<span class="term-fg31">-	if msg.To() == nil {</span>
<span class="term-fg31">-		receipt.ContractAddress = crypto.CreateAddress(evm.TxContext.Origin, tx.Nonce())</span>
<span class="term-fg32">+	if msg.To == nil {</span>
<span class="term-fg32">+		receipt.ContractAddress = crypto.CreateAddress(evm.TxContext.Origin, nonce)</span>
 	}
&nbsp;
 	&#47;&#47; Set the receipt logs and create the bloom filter.
<span class="term-fg36">@@ -147,12 +158,12 @@</span> &#47;&#47; and uses the input parameters for its environment. It returns the receipt
 &#47;&#47; for the transaction, gas used and an error if the transaction failed,
 &#47;&#47; indicating the block was invalid.
 func ApplyTransaction(config *params.ChainConfig, bc ChainContext, author *common.Address, gp *GasPool, statedb *state.StateDB, header *types.Header, tx *types.Transaction, usedGas *uint64, cfg vm.Config) (*types.Receipt, error) {
<span class="term-fg31">-	msg, err := tx.AsMessage(types.MakeSigner(config, header.Number), header.BaseFee)</span>
<span class="term-fg32">+	msg, err := TransactionToMessage(tx, types.MakeSigner(config, header.Number), header.BaseFee)</span>
 	if err != nil {
 		return nil, err
 	}
 	&#47;&#47; Create a new context to be used in the EVM environment
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, bc, author)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, bc, author, config, statedb)</span>
 	vmenv := vm.NewEVM(blockContext, vm.TxContext{}, statedb, config, cfg)
 	return applyTransaction(msg, config, gp, statedb, header.Number, header.Hash(), tx, usedGas, vmenv)
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ebfdd9e7968cc037fe819877" role="button"
                   aria-expanded="false" aria-controls="id-ebfdd9e7968cc037fe819877">
                    <code>core/state_prefetcher.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/state_prefetcher.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/state_prefetcher.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ebfdd9e7968cc037fe819877"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_prefetcher.go op-geth&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg1">index 867b47db5319da828079046ad0f6fadb58c4feff..72cb249f22edc98eac716c2bfc5e363690bd16f1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg36">@@ -51,7 +51,7 @@</span> func (p *statePrefetcher) Prefetch(block *types.Block, statedb *state.StateDB, cfg vm.Config, interrupt *uint32) {
 	var (
 		header       = block.Header()
 		gaspool      = new(GasPool).AddGas(block.GasLimit())
<span class="term-fg31">-		blockContext = NewEVMBlockContext(header, p.bc, nil)</span>
<span class="term-fg32">+		blockContext = NewEVMBlockContext(header, p.bc, nil, p.config, statedb)</span>
 		evm          = vm.NewEVM(blockContext, vm.TxContext{}, statedb, p.config, cfg)
 		signer       = types.MakeSigner(p.config, header.Number)
 	)
<span class="term-fg36">@@ -63,7 +63,7 @@</span> 		if interrupt != nil &amp;&amp; atomic.LoadUint32(interrupt) == 1 {
 			return
 		}
 		&#47;&#47; Convert the transaction into an executable message and pre-cache its sender
<span class="term-fg31">-		msg, err := tx.AsMessage(signer, header.BaseFee)</span>
<span class="term-fg32">+		msg, err := TransactionToMessage(tx, signer, header.BaseFee)</span>
 		if err != nil {
 			return &#47;&#47; Also invalid block, bail out
 		}
<span class="term-fg36">@@ -85,7 +85,7 @@</span>
 &#47;&#47; precacheTransaction attempts to apply a transaction to the given state database
 &#47;&#47; and uses the input parameters for its environment. The goal is not to execute
 &#47;&#47; the transaction successfully, rather to warm up touched data slots.
<span class="term-fg31">-func precacheTransaction(msg types.Message, config *params.ChainConfig, gaspool *GasPool, statedb *state.StateDB, header *types.Header, evm *vm.EVM) error {</span>
<span class="term-fg32">+func precacheTransaction(msg *Message, config *params.ChainConfig, gaspool *GasPool, statedb *state.StateDB, header *types.Header, evm *vm.EVM) error {</span>
 	&#47;&#47; Update the evm with the new transaction context.
 	evm.Reset(NewEVMTxContext(msg), statedb)
 	&#47;&#47; Add addresses to access list if applicable</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-fd8bc856b5f763ca4496abd0"role="button" aria-expanded="false" aria-controls="id-fd8bc856b5f763ca4496abd0">
        
            <div class="col-12 col-sm-9 text-start"><h4>Transaction processing</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+240</span></div>
                <div class="text-start"><span class="text-danger">-123</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-fd8bc856b5f763ca4496abd0">
        <div><p>Deposit transactions have special processing rules: gas is pre-paid on L1,
and deposits with EVM-failure are included with rolled back changes (except mint).
For regular transactions, at the end of the transition, the 1559 burn and L1 cost are routed to vaults.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7d235f04f563cf427da62a35" role="button"
                   aria-expanded="false" aria-controls="id-7d235f04f563cf427da62a35">
                    <code>core/state_transition.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/state_transition.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/state_transition.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+240</span></div>
                        <div class="text-start"><span class="text-danger">-123</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7d235f04f563cf427da62a35"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_transition.go op-geth&#47;core&#47;state_transition.go</span>
<span class="term-fg1">index 653c6b1836187b7cfed5f04d2b7f2e5d0564dbfb..232a79af7cf2cb6e57332b2a7a0baeb07d6d27aa 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_transition.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;state_transition.go</span>
<span class="term-fg36">@@ -25,64 +25,8 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	cmath &quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 )
<span class="term-fg31">-</span>
<span class="term-fg31">-var emptyCodeHash = crypto.Keccak256Hash(nil)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; StateTransition represents a state transition.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; == The State Transitioning Model</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; A state transition is a change made when a transaction is applied to the current world</span>
<span class="term-fg31">-&#47;&#47; state. The state transitioning model does all the necessary work to work out a valid new</span>
<span class="term-fg31">-&#47;&#47; state root.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;  1. Nonce handling</span>
<span class="term-fg31">-&#47;&#47;  2. Pre pay gas</span>
<span class="term-fg31">-&#47;&#47;  3. Create a new state object if the recipient is nil</span>
<span class="term-fg31">-&#47;&#47;  4. Value transfer</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; == If contract creation ==</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;	4a. Attempt to run transaction data</span>
<span class="term-fg31">-&#47;&#47;	4b. If valid, use result as code for the new state object</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; == end ==</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;  5. Run Script section</span>
<span class="term-fg31">-&#47;&#47;  6. Derive new state root</span>
<span class="term-fg31">-type StateTransition struct {</span>
<span class="term-fg31">-	gp         *GasPool</span>
<span class="term-fg31">-	msg        Message</span>
<span class="term-fg31">-	gas        uint64</span>
<span class="term-fg31">-	gasPrice   *big.Int</span>
<span class="term-fg31">-	gasFeeCap  *big.Int</span>
<span class="term-fg31">-	gasTipCap  *big.Int</span>
<span class="term-fg31">-	initialGas uint64</span>
<span class="term-fg31">-	value      *big.Int</span>
<span class="term-fg31">-	data       []byte</span>
<span class="term-fg31">-	state      vm.StateDB</span>
<span class="term-fg31">-	evm        *vm.EVM</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; Message represents a message sent to a contract.</span>
<span class="term-fg31">-type Message interface {</span>
<span class="term-fg31">-	From() common.Address</span>
<span class="term-fg31">-	To() *common.Address</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	GasPrice() *big.Int</span>
<span class="term-fg31">-	GasFeeCap() *big.Int</span>
<span class="term-fg31">-	GasTipCap() *big.Int</span>
<span class="term-fg31">-	Gas() uint64</span>
<span class="term-fg31">-	Value() *big.Int</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	Nonce() uint64</span>
<span class="term-fg31">-	IsFake() bool</span>
<span class="term-fg31">-	Data() []byte</span>
<span class="term-fg31">-	AccessList() types.AccessList</span>
<span class="term-fg31">-}</span>
&nbsp;
 &#47;&#47; ExecutionResult includes all output after executing given evm
 &#47;&#47; message no matter the execution itself is successful or not.
<span class="term-fg36">@@ -178,19 +122,57 @@</span>
 	return (size + 31) &#47; 32
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; NewStateTransition initialises and returns a new state transition object.</span>
<span class="term-fg31">-func NewStateTransition(evm *vm.EVM, msg Message, gp *GasPool) *StateTransition {</span>
<span class="term-fg31">-	return &amp;StateTransition{</span>
<span class="term-fg31">-		gp:        gp,</span>
<span class="term-fg31">-		evm:       evm,</span>
<span class="term-fg31">-		msg:       msg,</span>
<span class="term-fg31">-		gasPrice:  msg.GasPrice(),</span>
<span class="term-fg31">-		gasFeeCap: msg.GasFeeCap(),</span>
<span class="term-fg31">-		gasTipCap: msg.GasTipCap(),</span>
<span class="term-fg31">-		value:     msg.Value(),</span>
<span class="term-fg31">-		data:      msg.Data(),</span>
<span class="term-fg31">-		state:     evm.StateDB,</span>
<span class="term-fg32">+&#47;&#47; A Message contains the data derived from a single transaction that is relevant to state</span>
<span class="term-fg32">+&#47;&#47; processing.</span>
<span class="term-fg32">+type Message struct {</span>
<span class="term-fg32">+	To         *common.Address</span>
<span class="term-fg32">+	From       common.Address</span>
<span class="term-fg32">+	Nonce      uint64</span>
<span class="term-fg32">+	Value      *big.Int</span>
<span class="term-fg32">+	GasLimit   uint64</span>
<span class="term-fg32">+	GasPrice   *big.Int</span>
<span class="term-fg32">+	GasFeeCap  *big.Int</span>
<span class="term-fg32">+	GasTipCap  *big.Int</span>
<span class="term-fg32">+	Data       []byte</span>
<span class="term-fg32">+	AccessList types.AccessList</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; When SkipAccountCheckss is true, the message nonce is not checked against the</span>
<span class="term-fg32">+	&#47;&#47; account nonce in state. It also disables checking that the sender is an EOA.</span>
<span class="term-fg32">+	&#47;&#47; This field will be set to true for operations like RPC eth_call.</span>
<span class="term-fg32">+	SkipAccountChecks bool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	IsSystemTx    bool                &#47;&#47; IsSystemTx indicates the message, if also a deposit, does not emit gas usage.</span>
<span class="term-fg32">+	IsDepositTx   bool                &#47;&#47; IsDepositTx indicates the message is force-included and can persist a mint.</span>
<span class="term-fg32">+	Mint          *big.Int            &#47;&#47; Mint is the amount to mint before EVM processing, or nil if there is no minting.</span>
<span class="term-fg32">+	RollupDataGas types.RollupGasData &#47;&#47; RollupDataGas indicates the rollup cost of the message, 0 if not a rollup or no cost.</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransactionToMessage converts a transaction into a Message.</span>
<span class="term-fg32">+func TransactionToMessage(tx *types.Transaction, s types.Signer, baseFee *big.Int) (*Message, error) {</span>
<span class="term-fg32">+	msg := &amp;Message{</span>
<span class="term-fg32">+		Nonce:         tx.Nonce(),</span>
<span class="term-fg32">+		GasLimit:      tx.Gas(),</span>
<span class="term-fg32">+		GasPrice:      new(big.Int).Set(tx.GasPrice()),</span>
<span class="term-fg32">+		GasFeeCap:     new(big.Int).Set(tx.GasFeeCap()),</span>
<span class="term-fg32">+		GasTipCap:     new(big.Int).Set(tx.GasTipCap()),</span>
<span class="term-fg32">+		To:            tx.To(),</span>
<span class="term-fg32">+		Value:         tx.Value(),</span>
<span class="term-fg32">+		Data:          tx.Data(),</span>
<span class="term-fg32">+		AccessList:    tx.AccessList(),</span>
<span class="term-fg32">+		IsSystemTx:    tx.IsSystemTx(),</span>
<span class="term-fg32">+		IsDepositTx:   tx.IsDepositTx(),</span>
<span class="term-fg32">+		Mint:          tx.Mint(),</span>
<span class="term-fg32">+		RollupDataGas: tx.RollupDataGas(),</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		SkipAccountChecks: false,</span>
 	}
<span class="term-fg32">+	&#47;&#47; If baseFee provided, set gasPrice to effectiveGasPrice.</span>
<span class="term-fg32">+	if baseFee != nil {</span>
<span class="term-fg32">+		msg.GasPrice = cmath.BigMin(msg.GasPrice.Add(msg.GasTipCap, baseFee), msg.GasFeeCap)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var err error</span>
<span class="term-fg32">+	msg.From, err = types.Sender(s, tx)</span>
<span class="term-fg32">+	return msg, err</span>
 }
&nbsp;
 &#47;&#47; ApplyMessage computes the new state by applying the given message
<span class="term-fg36">@@ -200,82 +182,151 @@</span> &#47;&#47; ApplyMessage returns the bytes returned by any EVM execution (if it took place),
 &#47;&#47; the gas used (which includes gas refunds) and an error if it failed. An error always
 &#47;&#47; indicates a core error meaning that the message would always fail for that particular
 &#47;&#47; state and would never be accepted within a block.
<span class="term-fg31">-func ApplyMessage(evm *vm.EVM, msg Message, gp *GasPool) (*ExecutionResult, error) {</span>
<span class="term-fg32">+func ApplyMessage(evm *vm.EVM, msg *Message, gp *GasPool) (*ExecutionResult, error) {</span>
 	return NewStateTransition(evm, msg, gp).TransitionDb()
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; StateTransition represents a state transition.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; == The State Transitioning Model</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; A state transition is a change made when a transaction is applied to the current world</span>
<span class="term-fg32">+&#47;&#47; state. The state transitioning model does all the necessary work to work out a valid new</span>
<span class="term-fg32">+&#47;&#47; state root.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;  1. Nonce handling</span>
<span class="term-fg32">+&#47;&#47;  2. Pre pay gas</span>
<span class="term-fg32">+&#47;&#47;  3. Create a new state object if the recipient is nil</span>
<span class="term-fg32">+&#47;&#47;  4. Value transfer</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; == If contract creation ==</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	4a. Attempt to run transaction data</span>
<span class="term-fg32">+&#47;&#47;	4b. If valid, use result as code for the new state object</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; == end ==</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;  5. Run Script section</span>
<span class="term-fg32">+&#47;&#47;  6. Derive new state root</span>
<span class="term-fg32">+type StateTransition struct {</span>
<span class="term-fg32">+	gp           *GasPool</span>
<span class="term-fg32">+	msg          *Message</span>
<span class="term-fg32">+	gasRemaining uint64</span>
<span class="term-fg32">+	initialGas   uint64</span>
<span class="term-fg32">+	state        vm.StateDB</span>
<span class="term-fg32">+	evm          *vm.EVM</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewStateTransition initialises and returns a new state transition object.</span>
<span class="term-fg32">+func NewStateTransition(evm *vm.EVM, msg *Message, gp *GasPool) *StateTransition {</span>
<span class="term-fg32">+	return &amp;StateTransition{</span>
<span class="term-fg32">+		gp:    gp,</span>
<span class="term-fg32">+		evm:   evm,</span>
<span class="term-fg32">+		msg:   msg,</span>
<span class="term-fg32">+		state: evm.StateDB,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; to returns the recipient of the message.
 func (st *StateTransition) to() common.Address {
<span class="term-fg31">-	if st.msg == nil || st.msg.To() == nil &#47;* contract creation *&#47; {</span>
<span class="term-fg32">+	if st.msg == nil || st.msg.To == nil &#47;* contract creation *&#47; {</span>
 		return common.Address{}
 	}
<span class="term-fg31">-	return *st.msg.To()</span>
<span class="term-fg32">+	return *st.msg.To</span>
 }
&nbsp;
 func (st *StateTransition) buyGas() error {
<span class="term-fg31">-	mgval := new(big.Int).SetUint64(st.msg.Gas())</span>
<span class="term-fg31">-	mgval = mgval.Mul(mgval, st.gasPrice)</span>
<span class="term-fg32">+	mgval := new(big.Int).SetUint64(st.msg.GasLimit)</span>
<span class="term-fg32">+	mgval = mgval.Mul(mgval, st.msg.GasPrice)</span>
<span class="term-fg32">+	var l1Cost *big.Int</span>
<span class="term-fg32">+	if st.evm.Context.L1CostFunc != nil &amp;&amp; !st.msg.SkipAccountChecks {</span>
<span class="term-fg32">+		l1Cost = st.evm.Context.L1CostFunc(st.evm.Context.BlockNumber.Uint64(), st.evm.Context.Time, st.msg.RollupDataGas, st.msg.IsDepositTx)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if l1Cost != nil {</span>
<span class="term-fg32">+		mgval = mgval.Add(mgval, l1Cost)</span>
<span class="term-fg32">+	}</span>
 	balanceCheck := mgval
<span class="term-fg31">-	if st.gasFeeCap != nil {</span>
<span class="term-fg31">-		balanceCheck = new(big.Int).SetUint64(st.msg.Gas())</span>
<span class="term-fg31">-		balanceCheck = balanceCheck.Mul(balanceCheck, st.gasFeeCap)</span>
<span class="term-fg31">-		balanceCheck.Add(balanceCheck, st.value)</span>
<span class="term-fg32">+	if st.msg.GasFeeCap != nil {</span>
<span class="term-fg32">+		balanceCheck = new(big.Int).SetUint64(st.msg.GasLimit)</span>
<span class="term-fg32">+		balanceCheck = balanceCheck.Mul(balanceCheck, st.msg.GasFeeCap)</span>
<span class="term-fg32">+		balanceCheck.Add(balanceCheck, st.msg.Value)</span>
<span class="term-fg32">+		if l1Cost != nil {</span>
<span class="term-fg32">+			balanceCheck.Add(balanceCheck, l1Cost)</span>
<span class="term-fg32">+		}</span>
 	}
<span class="term-fg31">-	if have, want := st.state.GetBalance(st.msg.From()), balanceCheck; have.Cmp(want) &lt; 0 {</span>
<span class="term-fg31">-		return fmt.Errorf(&quot;%w: address %v have %v want %v&quot;, ErrInsufficientFunds, st.msg.From().Hex(), have, want)</span>
<span class="term-fg32">+	if have, want := st.state.GetBalance(st.msg.From), balanceCheck; have.Cmp(want) &lt; 0 {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;%w: address %v have %v want %v&quot;, ErrInsufficientFunds, st.msg.From.Hex(), have, want)</span>
 	}
<span class="term-fg31">-	if err := st.gp.SubGas(st.msg.Gas()); err != nil {</span>
<span class="term-fg32">+	if err := st.gp.SubGas(st.msg.GasLimit); err != nil {</span>
 		return err
 	}
<span class="term-fg31">-	st.gas += st.msg.Gas()</span>
<span class="term-fg32">+	st.gasRemaining += st.msg.GasLimit</span>
&nbsp;
<span class="term-fg31">-	st.initialGas = st.msg.Gas()</span>
<span class="term-fg31">-	st.state.SubBalance(st.msg.From(), mgval)</span>
<span class="term-fg32">+	st.initialGas = st.msg.GasLimit</span>
<span class="term-fg32">+	st.state.SubBalance(st.msg.From, mgval)</span>
 	return nil
 }
&nbsp;
 func (st *StateTransition) preCheck() error {
<span class="term-fg32">+	if st.msg.IsDepositTx {</span>
<span class="term-fg32">+		&#47;&#47; No fee fields to check, no nonce to check, and no need to check if EOA (L1 already verified it for us)</span>
<span class="term-fg32">+		&#47;&#47; Gas is free, but no refunds!</span>
<span class="term-fg32">+		st.initialGas = st.msg.GasLimit</span>
<span class="term-fg32">+		st.gasRemaining += st.msg.GasLimit &#47;&#47; Add gas here in order to be able to execute calls.</span>
<span class="term-fg32">+		&#47;&#47; Don&#39;t touch the gas pool for system transactions</span>
<span class="term-fg32">+		if st.msg.IsSystemTx {</span>
<span class="term-fg32">+			if st.evm.ChainConfig().IsOptimismRegolith(st.evm.Context.Time) {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;%w: address %v&quot;, ErrSystemTxNotSupported,</span>
<span class="term-fg32">+					st.msg.From.Hex())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return st.gp.SubGas(st.msg.GasLimit) &#47;&#47; gas used by deposits may not be used by other txs</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Only check transactions that are not fake
<span class="term-fg31">-	if !st.msg.IsFake() {</span>
<span class="term-fg32">+	msg := st.msg</span>
<span class="term-fg32">+	if !msg.SkipAccountChecks {</span>
 		&#47;&#47; Make sure this transaction&#39;s nonce is correct.
<span class="term-fg31">-		stNonce := st.state.GetNonce(st.msg.From())</span>
<span class="term-fg31">-		if msgNonce := st.msg.Nonce(); stNonce &lt; msgNonce {</span>
<span class="term-fg32">+		stNonce := st.state.GetNonce(msg.From)</span>
<span class="term-fg32">+		if msgNonce := msg.Nonce; stNonce &lt; msgNonce {</span>
 			return fmt.Errorf(&quot;%w: address %v, tx: %d state: %d&quot;, ErrNonceTooHigh,
<span class="term-fg31">-				st.msg.From().Hex(), msgNonce, stNonce)</span>
<span class="term-fg32">+				msg.From.Hex(), msgNonce, stNonce)</span>
 		} else if stNonce &gt; msgNonce {
 			return fmt.Errorf(&quot;%w: address %v, tx: %d state: %d&quot;, ErrNonceTooLow,
<span class="term-fg31">-				st.msg.From().Hex(), msgNonce, stNonce)</span>
<span class="term-fg32">+				msg.From.Hex(), msgNonce, stNonce)</span>
 		} else if stNonce+1 &lt; stNonce {
 			return fmt.Errorf(&quot;%w: address %v, nonce: %d&quot;, ErrNonceMax,
<span class="term-fg31">-				st.msg.From().Hex(), stNonce)</span>
<span class="term-fg32">+				msg.From.Hex(), stNonce)</span>
 		}
 		&#47;&#47; Make sure the sender is an EOA
<span class="term-fg31">-		if codeHash := st.state.GetCodeHash(st.msg.From()); codeHash != emptyCodeHash &amp;&amp; codeHash != (common.Hash{}) {</span>
<span class="term-fg32">+		codeHash := st.state.GetCodeHash(msg.From)</span>
<span class="term-fg32">+		if codeHash != (common.Hash{}) &amp;&amp; codeHash != types.EmptyCodeHash {</span>
 			return fmt.Errorf(&quot;%w: address %v, codehash: %s&quot;, ErrSenderNoEOA,
<span class="term-fg31">-				st.msg.From().Hex(), codeHash)</span>
<span class="term-fg32">+				msg.From.Hex(), codeHash)</span>
 		}
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Make sure that transaction gasFeeCap is greater than the baseFee (post london)
 	if st.evm.ChainConfig().IsLondon(st.evm.Context.BlockNumber) {
 		&#47;&#47; Skip the checks if gas fields are zero and baseFee was explicitly disabled (eth_call)
<span class="term-fg31">-		if !st.evm.Config.NoBaseFee || st.gasFeeCap.BitLen() &gt; 0 || st.gasTipCap.BitLen() &gt; 0 {</span>
<span class="term-fg31">-			if l := st.gasFeeCap.BitLen(); l &gt; 256 {</span>
<span class="term-fg32">+		if !st.evm.Config.NoBaseFee || msg.GasFeeCap.BitLen() &gt; 0 || msg.GasTipCap.BitLen() &gt; 0 {</span>
<span class="term-fg32">+			if l := msg.GasFeeCap.BitLen(); l &gt; 256 {</span>
 				return fmt.Errorf(&quot;%w: address %v, maxFeePerGas bit length: %d&quot;, ErrFeeCapVeryHigh,
<span class="term-fg31">-					st.msg.From().Hex(), l)</span>
<span class="term-fg32">+					msg.From.Hex(), l)</span>
 			}
<span class="term-fg31">-			if l := st.gasTipCap.BitLen(); l &gt; 256 {</span>
<span class="term-fg32">+			if l := msg.GasTipCap.BitLen(); l &gt; 256 {</span>
 				return fmt.Errorf(&quot;%w: address %v, maxPriorityFeePerGas bit length: %d&quot;, ErrTipVeryHigh,
<span class="term-fg31">-					st.msg.From().Hex(), l)</span>
<span class="term-fg32">+					msg.From.Hex(), l)</span>
 			}
<span class="term-fg31">-			if st.gasFeeCap.Cmp(st.gasTipCap) &lt; 0 {</span>
<span class="term-fg32">+			if msg.GasFeeCap.Cmp(msg.GasTipCap) &lt; 0 {</span>
 				return fmt.Errorf(&quot;%w: address %v, maxPriorityFeePerGas: %s, maxFeePerGas: %s&quot;, ErrTipAboveFeeCap,
<span class="term-fg31">-					st.msg.From().Hex(), st.gasTipCap, st.gasFeeCap)</span>
<span class="term-fg32">+					msg.From.Hex(), msg.GasTipCap, msg.GasFeeCap)</span>
 			}
 			&#47;&#47; This will panic if baseFee is nil, but basefee presence is verified
 			&#47;&#47; as part of header validation.
<span class="term-fg31">-			if st.gasFeeCap.Cmp(st.evm.Context.BaseFee) &lt; 0 {</span>
<span class="term-fg32">+			if msg.GasFeeCap.Cmp(st.evm.Context.BaseFee) &lt; 0 {</span>
 				return fmt.Errorf(&quot;%w: address %v, maxFeePerGas: %s baseFee: %s&quot;, ErrFeeCapTooLow,
<span class="term-fg31">-					st.msg.From().Hex(), st.gasFeeCap, st.evm.Context.BaseFee)</span>
<span class="term-fg32">+					msg.From.Hex(), msg.GasFeeCap, st.evm.Context.BaseFee)</span>
 			}
 		}
 	}
<span class="term-fg36">@@ -293,6 +344,37 @@</span> &#47;&#47;
 &#47;&#47; However if any consensus issue encountered, return the error directly with
 &#47;&#47; nil evm execution result.
 func (st *StateTransition) TransitionDb() (*ExecutionResult, error) {
<span class="term-fg32">+	if mint := st.msg.Mint; mint != nil {</span>
<span class="term-fg32">+		st.state.AddBalance(st.msg.From, mint)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	snap := st.state.Snapshot()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	result, err := st.innerTransitionDb()</span>
<span class="term-fg32">+	&#47;&#47; Failed deposits must still be included. Unless we cannot produce the block at all due to the gas limit.</span>
<span class="term-fg32">+	&#47;&#47; On deposit failure, we rewind any state changes from after the minting, and increment the nonce.</span>
<span class="term-fg32">+	if err != nil &amp;&amp; err != ErrGasLimitReached &amp;&amp; st.msg.IsDepositTx {</span>
<span class="term-fg32">+		st.state.RevertToSnapshot(snap)</span>
<span class="term-fg32">+		&#47;&#47; Even though we revert the state changes, always increment the nonce for the next deposit transaction</span>
<span class="term-fg32">+		st.state.SetNonce(st.msg.From, st.state.GetNonce(st.msg.From)+1)</span>
<span class="term-fg32">+		&#47;&#47; Record deposits as using all their gas (matches the gas pool)</span>
<span class="term-fg32">+		&#47;&#47; System Transactions are special &amp; are not recorded as using any gas (anywhere)</span>
<span class="term-fg32">+		&#47;&#47; Regolith changes this behaviour so the actual gas used is reported.</span>
<span class="term-fg32">+		&#47;&#47; In this case the tx is invalid so is recorded as using all gas.</span>
<span class="term-fg32">+		gasUsed := st.msg.GasLimit</span>
<span class="term-fg32">+		if st.msg.IsSystemTx &amp;&amp; !st.evm.ChainConfig().IsRegolith(st.evm.Context.Time) {</span>
<span class="term-fg32">+			gasUsed = 0</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		result = &amp;ExecutionResult{</span>
<span class="term-fg32">+			UsedGas:    gasUsed,</span>
<span class="term-fg32">+			Err:        fmt.Errorf(&quot;failed deposit: %w&quot;, err),</span>
<span class="term-fg32">+			ReturnData: nil,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		err = nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return result, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (st *StateTransition) innerTransitionDb() (*ExecutionResult, error) {</span>
 	&#47;&#47; First check this message satisfies all consensus rules before
 	&#47;&#47; applying the message. The rules include these clauses
 	&#47;&#47;
<span class="term-fg36">@@ -311,54 +393,72 @@</span>
 	if st.evm.Config.Debug {
 		st.evm.Config.Tracer.CaptureTxStart(st.initialGas)
 		defer func() {
<span class="term-fg31">-			st.evm.Config.Tracer.CaptureTxEnd(st.gas)</span>
<span class="term-fg32">+			st.evm.Config.Tracer.CaptureTxEnd(st.gasRemaining)</span>
 		}()
 	}
&nbsp;
 	var (
 		msg              = st.msg
<span class="term-fg31">-		sender           = vm.AccountRef(msg.From())</span>
<span class="term-fg32">+		sender           = vm.AccountRef(msg.From)</span>
 		rules            = st.evm.ChainConfig().Rules(st.evm.Context.BlockNumber, st.evm.Context.Random != nil, st.evm.Context.Time)
<span class="term-fg31">-		contractCreation = msg.To() == nil</span>
<span class="term-fg32">+		contractCreation = msg.To == nil</span>
 	)
&nbsp;
 	&#47;&#47; Check clauses 4-5, subtract intrinsic gas if everything is correct
<span class="term-fg31">-	gas, err := IntrinsicGas(st.data, st.msg.AccessList(), contractCreation, rules.IsHomestead, rules.IsIstanbul, rules.IsShanghai)</span>
<span class="term-fg32">+	gas, err := IntrinsicGas(msg.Data, msg.AccessList, contractCreation, rules.IsHomestead, rules.IsIstanbul, rules.IsShanghai)</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg31">-	if st.gas &lt; gas {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;%w: have %d, want %d&quot;, ErrIntrinsicGas, st.gas, gas)</span>
<span class="term-fg32">+	if st.gasRemaining &lt; gas {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;%w: have %d, want %d&quot;, ErrIntrinsicGas, st.gasRemaining, gas)</span>
 	}
<span class="term-fg31">-	st.gas -= gas</span>
<span class="term-fg32">+	st.gasRemaining -= gas</span>
&nbsp;
 	&#47;&#47; Check clause 6
<span class="term-fg31">-	if msg.Value().Sign() &gt; 0 &amp;&amp; !st.evm.Context.CanTransfer(st.state, msg.From(), msg.Value()) {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFundsForTransfer, msg.From().Hex())</span>
<span class="term-fg32">+	if msg.Value.Sign() &gt; 0 &amp;&amp; !st.evm.Context.CanTransfer(st.state, msg.From, msg.Value) {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;%w: address %v&quot;, ErrInsufficientFundsForTransfer, msg.From.Hex())</span>
 	}
&nbsp;
 	&#47;&#47; Check whether the init code size has been exceeded.
<span class="term-fg31">-	if rules.IsShanghai &amp;&amp; contractCreation &amp;&amp; len(st.data) &gt; params.MaxInitCodeSize {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;%w: code size %v limit %v&quot;, ErrMaxInitCodeSizeExceeded, len(st.data), params.MaxInitCodeSize)</span>
<span class="term-fg32">+	if rules.IsShanghai &amp;&amp; contractCreation &amp;&amp; len(msg.Data) &gt; params.MaxInitCodeSize {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;%w: code size %v limit %v&quot;, ErrMaxInitCodeSizeExceeded, len(msg.Data), params.MaxInitCodeSize)</span>
 	}
&nbsp;
 	&#47;&#47; Execute the preparatory steps for state transition which includes:
 	&#47;&#47; - prepare accessList(post-berlin)
 	&#47;&#47; - reset transient storage(eip 1153)
<span class="term-fg31">-	st.state.Prepare(rules, msg.From(), st.evm.Context.Coinbase, msg.To(), vm.ActivePrecompiles(rules), msg.AccessList())</span>
<span class="term-fg32">+	st.state.Prepare(rules, msg.From, st.evm.Context.Coinbase, msg.To, vm.ActivePrecompiles(rules), msg.AccessList)</span>
&nbsp;
 	var (
 		ret   []byte
 		vmerr error &#47;&#47; vm errors do not effect consensus and are therefore not assigned to err
 	)
 	if contractCreation {
<span class="term-fg31">-		ret, _, st.gas, vmerr = st.evm.Create(sender, st.data, st.gas, st.value)</span>
<span class="term-fg32">+		ret, _, st.gasRemaining, vmerr = st.evm.Create(sender, msg.Data, st.gasRemaining, msg.Value)</span>
 	} else {
 		&#47;&#47; Increment the nonce for the next transaction
<span class="term-fg31">-		st.state.SetNonce(msg.From(), st.state.GetNonce(sender.Address())+1)</span>
<span class="term-fg31">-		ret, st.gas, vmerr = st.evm.Call(sender, st.to(), st.data, st.gas, st.value)</span>
<span class="term-fg32">+		st.state.SetNonce(msg.From, st.state.GetNonce(sender.Address())+1)</span>
<span class="term-fg32">+		ret, st.gasRemaining, vmerr = st.evm.Call(sender, st.to(), msg.Data, st.gasRemaining, msg.Value)</span>
 	}
&nbsp;
<span class="term-fg32">+	&#47;&#47; if deposit: skip refunds, skip tipping coinbase</span>
<span class="term-fg32">+	&#47;&#47; Regolith changes this behaviour to report the actual gasUsed instead of always reporting all gas used.</span>
<span class="term-fg32">+	if st.msg.IsDepositTx &amp;&amp; !rules.IsOptimismRegolith {</span>
<span class="term-fg32">+		&#47;&#47; Record deposits as using all their gas (matches the gas pool)</span>
<span class="term-fg32">+		&#47;&#47; System Transactions are special &amp; are not recorded as using any gas (anywhere)</span>
<span class="term-fg32">+		gasUsed := st.msg.GasLimit</span>
<span class="term-fg32">+		if st.msg.IsSystemTx {</span>
<span class="term-fg32">+			gasUsed = 0</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return &amp;ExecutionResult{</span>
<span class="term-fg32">+			UsedGas:    gasUsed,</span>
<span class="term-fg32">+			Err:        vmerr,</span>
<span class="term-fg32">+			ReturnData: ret,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Note for deposit tx there is no ETH refunded for unused gas, but that&#39;s taken care of by the fact that gasPrice</span>
<span class="term-fg32">+	&#47;&#47; is always 0 for deposit tx. So calling refundGas will ensure the gasUsed accounting is correct without actually</span>
<span class="term-fg32">+	&#47;&#47; changing the sender&#39;s balance</span>
 	if !rules.IsLondon {
 		&#47;&#47; Before EIP-3529: refunds were capped to gasUsed &#47; 2
 		st.refundGas(params.RefundQuotient)
<span class="term-fg36">@@ -366,12 +466,20 @@</span> 	} else {
 		&#47;&#47; After EIP-3529: refunds are capped to gasUsed &#47; 5
 		st.refundGas(params.RefundQuotientEIP3529)
 	}
<span class="term-fg31">-	effectiveTip := st.gasPrice</span>
<span class="term-fg32">+	if st.msg.IsDepositTx &amp;&amp; rules.IsOptimismRegolith {</span>
<span class="term-fg32">+		&#47;&#47; Skip coinbase payments for deposit tx in Regolith</span>
<span class="term-fg32">+		return &amp;ExecutionResult{</span>
<span class="term-fg32">+			UsedGas:    st.gasUsed(),</span>
<span class="term-fg32">+			Err:        vmerr,</span>
<span class="term-fg32">+			ReturnData: ret,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	effectiveTip := msg.GasPrice</span>
 	if rules.IsLondon {
<span class="term-fg31">-		effectiveTip = cmath.BigMin(st.gasTipCap, new(big.Int).Sub(st.gasFeeCap, st.evm.Context.BaseFee))</span>
<span class="term-fg32">+		effectiveTip = cmath.BigMin(msg.GasTipCap, new(big.Int).Sub(msg.GasFeeCap, st.evm.Context.BaseFee))</span>
 	}
&nbsp;
<span class="term-fg31">-	if st.evm.Config.NoBaseFee &amp;&amp; st.gasFeeCap.Sign() == 0 &amp;&amp; st.gasTipCap.Sign() == 0 {</span>
<span class="term-fg32">+	if st.evm.Config.NoBaseFee &amp;&amp; msg.GasFeeCap.Sign() == 0 &amp;&amp; msg.GasTipCap.Sign() == 0 {</span>
 		&#47;&#47; Skip fee payment when NoBaseFee is set and the fee fields
 		&#47;&#47; are 0. This avoids a negative effectiveTip being applied to
 		&#47;&#47; the coinbase when simulating calls.
<span class="term-fg36">@@ -381,6 +489,15 @@</span> 		fee.Mul(fee, effectiveTip)
 		st.state.AddBalance(st.evm.Context.Coinbase, fee)
 	}
&nbsp;
<span class="term-fg32">+	&#47;&#47; Check that we are post bedrock to enable op-geth to be able to create pseudo pre-bedrock blocks (these are pre-bedrock, but don&#39;t follow l2 geth rules)</span>
<span class="term-fg32">+	&#47;&#47; Note optimismConfig will not be nil if rules.IsOptimismBedrock is true</span>
<span class="term-fg32">+	if optimismConfig := st.evm.ChainConfig().Optimism; optimismConfig != nil &amp;&amp; rules.IsOptimismBedrock {</span>
<span class="term-fg32">+		st.state.AddBalance(params.OptimismBaseFeeRecipient, new(big.Int).Mul(new(big.Int).SetUint64(st.gasUsed()), st.evm.Context.BaseFee))</span>
<span class="term-fg32">+		if cost := st.evm.Context.L1CostFunc(st.evm.Context.BlockNumber.Uint64(), st.evm.Context.Time, st.msg.RollupDataGas, st.msg.IsDepositTx); cost != nil {</span>
<span class="term-fg32">+			st.state.AddBalance(params.OptimismL1FeeRecipient, cost)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return &amp;ExecutionResult{
 		UsedGas:    st.gasUsed(),
 		Err:        vmerr,
<span class="term-fg36">@@ -394,18 +511,18 @@</span> 	refund := st.gasUsed() &#47; refundQuotient
 	if refund &gt; st.state.GetRefund() {
 		refund = st.state.GetRefund()
 	}
<span class="term-fg31">-	st.gas += refund</span>
<span class="term-fg32">+	st.gasRemaining += refund</span>
&nbsp;
 	&#47;&#47; Return ETH for remaining gas, exchanged at the original rate.
<span class="term-fg31">-	remaining := new(big.Int).Mul(new(big.Int).SetUint64(st.gas), st.gasPrice)</span>
<span class="term-fg31">-	st.state.AddBalance(st.msg.From(), remaining)</span>
<span class="term-fg32">+	remaining := new(big.Int).Mul(new(big.Int).SetUint64(st.gasRemaining), st.msg.GasPrice)</span>
<span class="term-fg32">+	st.state.AddBalance(st.msg.From, remaining)</span>
&nbsp;
 	&#47;&#47; Also return remaining gas to the block gas counter so it is
 	&#47;&#47; available for the next transaction.
<span class="term-fg31">-	st.gp.AddGas(st.gas)</span>
<span class="term-fg32">+	st.gp.AddGas(st.gasRemaining)</span>
 }
&nbsp;
 &#47;&#47; gasUsed returns the amount of gas used up by the state transition.
 func (st *StateTransition) gasUsed() uint64 {
<span class="term-fg31">-	return st.initialGas - st.gas</span>
<span class="term-fg32">+	return st.initialGas - st.gasRemaining</span>
 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-3b057fc28023a09b3b5e0119"role="button" aria-expanded="false" aria-controls="id-3b057fc28023a09b3b5e0119">
        
            <div class="col-12 col-sm-9 text-start"><h4>Gaslimit</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+4</span></div>
                <div class="text-start"><span class="text-danger">-2</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-3b057fc28023a09b3b5e0119">
        <div><p>The gaslimit is free to be set by the Engine API caller, instead of enforcing adjustments of the
gaslimit in increments of <sup>1</sup>&frasl;<sub>1024</sub> of the previous gaslimit.
The gaslimit is changed (and limited) through the <code>SystemConfig</code> contract.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-09ede236265ba576d16ee354" role="button"
                   aria-expanded="false" aria-controls="id-09ede236265ba576d16ee354">
                    <code>consensus/misc/eip1559.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/consensus/misc/eip1559.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/consensus/misc/eip1559.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-09ede236265ba576d16ee354"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;misc&#47;eip1559.go op-geth&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg1">index 4521b47b36e6b4d6fe0aa1c9895383f1be2f3ec1..0b6c8532ac01995cc73a161889a29612b63615e1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg1">+++ op-geth&#47;consensus&#47;misc&#47;eip1559.go</span>
<span class="term-fg36">@@ -35,8 +35,10 @@</span> 	parentGasLimit := parent.GasLimit
 	if !config.IsLondon(parent.Number) {
 		parentGasLimit = parent.GasLimit * config.ElasticityMultiplier()
 	}
<span class="term-fg31">-	if err := VerifyGaslimit(parentGasLimit, header.GasLimit); err != nil {</span>
<span class="term-fg31">-		return err</span>
<span class="term-fg32">+	if config.Optimism == nil { &#47;&#47; gasLimit can adjust instantly in optimism</span>
<span class="term-fg32">+		if err := VerifyGaslimit(parentGasLimit, header.GasLimit); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
 	}
 	&#47;&#47; Verify the header is not malformed
 	if header.BaseFee == nil {</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-f3b18572aca68b85a9584a5e"role="button" aria-expanded="false" aria-controls="id-f3b18572aca68b85a9584a5e">
        
            <div class="col-12 col-sm-9 text-start"><h4>Consensus tweaks</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+3</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-f3b18572aca68b85a9584a5e">
        <div><p>The Engine API is activated at the Merge transition, with a Total Terminal Difficulty (TTD).
The rollup starts post-merge, and thus sets the TTD to 0.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5bdbec3ca10e214f04ec5d19" role="button"
                   aria-expanded="false" aria-controls="id-5bdbec3ca10e214f04ec5d19">
                    <code>consensus/beacon/consensus.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/consensus/beacon/consensus.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/consensus/beacon/consensus.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5bdbec3ca10e214f04ec5d19"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;beacon&#47;consensus.go op-geth&#47;consensus&#47;beacon&#47;consensus.go</span>
<span class="term-fg1">index eb5aa58ca8879b6eb1f73b631954a97a283e129d..dca750339ad5c311d2243ea48bccd3d010d9103d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;consensus&#47;beacon&#47;consensus.go</span>
<span class="term-fg1">+++ op-geth&#47;consensus&#47;beacon&#47;consensus.go</span>
<span class="term-fg36">@@ -445,6 +445,9 @@</span> func IsTTDReached(chain consensus.ChainHeaderReader, parentHash common.Hash, parentNumber uint64) (bool, error) {
 	if chain.Config().TerminalTotalDifficulty == nil {
 		return false, nil
 	}
<span class="term-fg32">+	if common.Big0.Cmp(chain.Config().TerminalTotalDifficulty) == 0 { &#47;&#47; in case TTD is reached at genesis.</span>
<span class="term-fg32">+		return true, nil</span>
<span class="term-fg32">+	}</span>
 	td := chain.GetTd(parentHash, parentNumber)
 	if td == nil {
 		return false, consensus.ErrUnknownAncestor</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-f7b2cbcb1d2dd668de17bc5e"role="button" aria-expanded="false" aria-controls="id-f7b2cbcb1d2dd668de17bc5e">
        
            <div class="col-12 col-sm-9 text-start"><h3>Chain config</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+113</span></div>
                <div class="text-start"><span class="text-danger">-2</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-f7b2cbcb1d2dd668de17bc5e">
        <div><p>The rollup functionality is enabled with the <code>optimism</code> field in the chain config.
The EIP-1559 parameters are configurable to adjust for faster more frequent and smaller blocks.
The parameters can be overriden for testing.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-76e84df6cb3f4e41f4002883" role="button"
                   aria-expanded="false" aria-controls="id-76e84df6cb3f4e41f4002883">
                    <code>params/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/params/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/params/config.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+79</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-76e84df6cb3f4e41f4002883"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;config.go op-geth&#47;params&#47;config.go</span>
<span class="term-fg1">index 816577a5479540268016d32a10f42701b45e578e..827046a42d46963f6223ce55917fe32180802df7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;config.go</span>
<span class="term-fg1">+++ op-geth&#47;params&#47;config.go</span>
<span class="term-fg36">@@ -21,8 +21,9 @@</span> 	&quot;encoding&#47;binary&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;crypto&#47;sha3&quot;</span>
<span class="term-fg32">+</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg31">-	&quot;golang.org&#47;x&#47;crypto&#47;sha3&quot;</span>
 )
&nbsp;
 &#47;&#47; Genesis hashes to enforce below configs on.
<span class="term-fg36">@@ -31,6 +32,13 @@</span> 	MainnetGenesisHash = common.HexToHash(&quot;0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3&quot;)
 	SepoliaGenesisHash = common.HexToHash(&quot;0x25a5cc106eea7138acab33231d7160d69cb777ee0c2c553fcddf5138993e6dd9&quot;)
 	RinkebyGenesisHash = common.HexToHash(&quot;0x6341fd3daf94b748c72ced5a5b26028f2474f5f00d824504e4fa37a75767e177&quot;)
 	GoerliGenesisHash  = common.HexToHash(&quot;0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a&quot;)
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Optimism chain config</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	OptimismGoerliChainId = big.NewInt(420)</span>
<span class="term-fg32">+	&#47;&#47; March 17, 2023 @ 7:00:00 pm UTC</span>
<span class="term-fg32">+	OptimismGoerliRegolithTime = uint64(1679079600)</span>
 )
&nbsp;
 &#47;&#47; TrustedCheckpoints associates each known checkpoint with the genesis hash of
<span class="term-fg36">@@ -194,6 +202,7 @@</span> 		LondonBlock:                   big.NewInt(5_062_605),
 		ArrowGlacierBlock:             nil,
 		TerminalTotalDifficulty:       big.NewInt(10_790_000),
 		TerminalTotalDifficultyPassed: true,
<span class="term-fg32">+		ShanghaiTime:                  newUint64(1678832736),</span>
 		Clique: &amp;CliqueConfig{
 			Period: 15,
 			Epoch:  30000,
<span class="term-fg36">@@ -341,6 +350,15 @@</span> 		Ethash:                        new(EthashConfig),
 		Clique:                        nil,
 	}
 	TestRules = TestChainConfig.Rules(new(big.Int), false, 0)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; This is an Optimism chain config with bedrock starting a block 5, introduced for historical endpoint testing, largely based on the clique config</span>
<span class="term-fg32">+	OptimismTestConfig = func() *ChainConfig {</span>
<span class="term-fg32">+		conf := *AllCliqueProtocolChanges &#47;&#47; copy the config</span>
<span class="term-fg32">+		conf.Clique = nil</span>
<span class="term-fg32">+		conf.BedrockBlock = big.NewInt(5)</span>
<span class="term-fg32">+		conf.Optimism = &amp;OptimismConfig{EIP1559Elasticity: 50, EIP1559Denominator: 10}</span>
<span class="term-fg32">+		return &amp;conf</span>
<span class="term-fg32">+	}()</span>
 )
&nbsp;
 &#47;&#47; NetworkNames are user friendly names to use in the chain spec banner.
<span class="term-fg36">@@ -436,6 +454,9 @@</span> 	ShanghaiTime *uint64 `json:&quot;shanghaiTime,omitempty&quot;` &#47;&#47; Shanghai switch time (nil = no fork, 0 = already on shanghai)
 	CancunTime   *uint64 `json:&quot;cancunTime,omitempty&quot;`   &#47;&#47; Cancun switch time (nil = no fork, 0 = already on cancun)
 	PragueTime   *uint64 `json:&quot;pragueTime,omitempty&quot;`   &#47;&#47; Prague switch time (nil = no fork, 0 = already on prague)
&nbsp;
<span class="term-fg32">+	BedrockBlock *big.Int `json:&quot;bedrockBlock,omitempty&quot;` &#47;&#47; Bedrock switch block (nil = no fork, 0 = already on optimism bedrock)</span>
<span class="term-fg32">+	RegolithTime *uint64  `json:&quot;regolithTime,omitempty&quot;` &#47;&#47; Regolith switch time (nil = no fork, 0 = already on optimism regolith)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; TerminalTotalDifficulty is the amount of total difficulty reached by
 	&#47;&#47; the network that triggers the consensus upgrade.
 	TerminalTotalDifficulty *big.Int `json:&quot;terminalTotalDifficulty,omitempty&quot;`
<span class="term-fg36">@@ -448,6 +469,9 @@</span>
 	&#47;&#47; Various consensus engines
 	Ethash *EthashConfig `json:&quot;ethash,omitempty&quot;`
 	Clique *CliqueConfig `json:&quot;clique,omitempty&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Optimism config, nil if not active</span>
<span class="term-fg32">+	Optimism *OptimismConfig `json:&quot;optimism,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; EthashConfig is the consensus engine configs for proof-of-work based sealing.
<span class="term-fg36">@@ -469,6 +493,17 @@</span> func (c *CliqueConfig) String() string {
 	return &quot;clique&quot;
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; OptimismConfig is the optimism config.</span>
<span class="term-fg32">+type OptimismConfig struct {</span>
<span class="term-fg32">+	EIP1559Elasticity  uint64 `json:&quot;eip1559Elasticity&quot;`</span>
<span class="term-fg32">+	EIP1559Denominator uint64 `json:&quot;eip1559Denominator&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; String implements the stringer interface, returning the optimism fee config details.</span>
<span class="term-fg32">+func (o *OptimismConfig) String() string {</span>
<span class="term-fg32">+	return &quot;optimism&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Description returns a human-readable description of ChainConfig.
 func (c *ChainConfig) Description() string {
 	var banner string
<span class="term-fg36">@@ -480,6 +515,8 @@</span> 		network = &quot;unknown&quot;
 	}
 	banner += fmt.Sprintf(&quot;Chain ID:  %v (%s)\n&quot;, c.ChainID, network)
 	switch {
<span class="term-fg32">+	case c.Optimism != nil:</span>
<span class="term-fg32">+		banner += &quot;Consensus: Optimism\n&quot;</span>
 	case c.Ethash != nil:
 		if c.TerminalTotalDifficulty == nil {
 			banner += &quot;Consensus: Ethash (proof-of-work)\n&quot;
<span class="term-fg36">@@ -555,6 +592,9 @@</span> 	}
 	if c.PragueTime != nil {
 		banner += fmt.Sprintf(&quot; - Prague:                      @%-10v\n&quot;, *c.PragueTime)
 	}
<span class="term-fg32">+	if c.RegolithTime != nil {</span>
<span class="term-fg32">+		banner += fmt.Sprintf(&quot; - Regolith:                    @%-10v\n&quot;, *c.RegolithTime)</span>
<span class="term-fg32">+	}</span>
 	return banner
 }
&nbsp;
<span class="term-fg36">@@ -653,6 +693,34 @@</span> func (c *ChainConfig) IsPrague(time uint64) bool {
 	return isTimestampForked(c.PragueTime, time)
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; IsBedrock returns whether num is either equal to the Bedrock fork block or greater.</span>
<span class="term-fg32">+func (c *ChainConfig) IsBedrock(num *big.Int) bool {</span>
<span class="term-fg32">+	return isBlockForked(c.BedrockBlock, num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *ChainConfig) IsRegolith(time uint64) bool {</span>
<span class="term-fg32">+	return isTimestampForked(c.RegolithTime, time)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsOptimism returns whether the node is an optimism node or not.</span>
<span class="term-fg32">+func (c *ChainConfig) IsOptimism() bool {</span>
<span class="term-fg32">+	return c.Optimism != nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsOptimismBedrock returns true iff this is an optimism node &amp; bedrock is active</span>
<span class="term-fg32">+func (c *ChainConfig) IsOptimismBedrock(num *big.Int) bool {</span>
<span class="term-fg32">+	return c.IsOptimism() &amp;&amp; c.IsBedrock(num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *ChainConfig) IsOptimismRegolith(time uint64) bool {</span>
<span class="term-fg32">+	return c.IsOptimism() &amp;&amp; c.IsRegolith(time)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsOptimismPreBedrock returns true iff this is an optimism node &amp; bedrock is not yet active</span>
<span class="term-fg32">+func (c *ChainConfig) IsOptimismPreBedrock(num *big.Int) bool {</span>
<span class="term-fg32">+	return c.IsOptimism() &amp;&amp; !c.IsBedrock(num)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; CheckCompatible checks whether scheduled fork transitions have been imported
 &#47;&#47; with a mismatching chain configuration.
 func (c *ChainConfig) CheckCompatible(newcfg *ChainConfig, height uint64, time uint64) *ConfigCompatError {
<span class="term-fg36">@@ -815,11 +883,17 @@</span> }
&nbsp;
 &#47;&#47; BaseFeeChangeDenominator bounds the amount the base fee can change between blocks.
 func (c *ChainConfig) BaseFeeChangeDenominator() uint64 {
<span class="term-fg32">+	if c.Optimism != nil {</span>
<span class="term-fg32">+		return c.Optimism.EIP1559Denominator</span>
<span class="term-fg32">+	}</span>
 	return DefaultBaseFeeChangeDenominator
 }
&nbsp;
 &#47;&#47; ElasticityMultiplier bounds the maximum gas limit an EIP-1559 block may have.
 func (c *ChainConfig) ElasticityMultiplier() uint64 {
<span class="term-fg32">+	if c.Optimism != nil {</span>
<span class="term-fg32">+		return c.Optimism.EIP1559Elasticity</span>
<span class="term-fg32">+	}</span>
 	return DefaultElasticityMultiplier
 }
&nbsp;
<span class="term-fg36">@@ -955,6 +1029,7 @@</span> 	IsHomestead, IsEIP150, IsEIP155, IsEIP158               bool
 	IsByzantium, IsConstantinople, IsPetersburg, IsIstanbul bool
 	IsBerlin, IsLondon                                      bool
 	IsMerge, IsShanghai, isCancun, isPrague                 bool
<span class="term-fg32">+	IsOptimismBedrock, IsOptimismRegolith                   bool</span>
 }
&nbsp;
 &#47;&#47; Rules ensures c&#39;s ChainID is not nil.
<span class="term-fg36">@@ -979,5 +1054,8 @@</span> 		IsMerge:          isMerge,
 		IsShanghai:       c.IsShanghai(timestamp),
 		isCancun:         c.IsCancun(timestamp),
 		isPrague:         c.IsPrague(timestamp),
<span class="term-fg32">+		&#47;&#47; Optimism</span>
<span class="term-fg32">+		IsOptimismBedrock:  c.IsOptimismBedrock(num),</span>
<span class="term-fg32">+		IsOptimismRegolith: c.IsOptimismRegolith(timestamp),</span>
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a611fd55d1dae045d9ded238" role="button"
                   aria-expanded="false" aria-controls="id-a611fd55d1dae045d9ded238">
                    <code>params/protocol_params.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/params/protocol_params.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/params/protocol_params.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a611fd55d1dae045d9ded238"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;protocol_params.go op-geth&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">index bb703d0b74dce80d4f90c83f428eb54a0aedd780..e5a5b7f669951fa74cf635f0fec87bf717aa526c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">+++ op-geth&#47;params&#47;protocol_params.go</span>
<span class="term-fg36">@@ -16,7 +16,18 @@</span> &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
 package params
&nbsp;
<span class="term-fg31">-import &quot;math&#47;big&quot;</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; The base fee portion of the transaction fee accumulates at this predeploy</span>
<span class="term-fg32">+	OptimismBaseFeeRecipient = common.HexToAddress(&quot;0x4200000000000000000000000000000000000019&quot;)</span>
<span class="term-fg32">+	&#47;&#47; The L1 portion of the transaction fee accumulates at this predeploy</span>
<span class="term-fg32">+	OptimismL1FeeRecipient = common.HexToAddress(&quot;0x420000000000000000000000000000000000001A&quot;)</span>
<span class="term-fg32">+)</span>
&nbsp;
 const (
 	GasLimitBoundDivisor uint64 = 1024               &#47;&#47; The bound divisor of the gas limit, used in update calculations.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f46b6eb768495ff3814c79d3" role="button"
                   aria-expanded="false" aria-controls="id-f46b6eb768495ff3814c79d3">
                    <code>core/genesis.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/genesis.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/genesis.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+22</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f46b6eb768495ff3814c79d3"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;genesis.go op-geth&#47;core&#47;genesis.go</span>
<span class="term-fg1">index 269c1486d31d824f238bfb9180b960aad137ef91..f012cb9d55c3488fddbd046075b402d9297c1da9 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;genesis.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;genesis.go</span>
<span class="term-fg36">@@ -268,6 +268,10 @@</span>
 &#47;&#47; ChainOverrides contains the changes to chain config.
 type ChainOverrides struct {
 	OverrideShanghai *uint64
<span class="term-fg32">+	&#47;&#47; optimism</span>
<span class="term-fg32">+	OverrideOptimismBedrock  *big.Int</span>
<span class="term-fg32">+	OverrideOptimismRegolith *uint64</span>
<span class="term-fg32">+	OverrideOptimism         *bool</span>
 }
&nbsp;
 &#47;&#47; SetupGenesisBlock writes or updates the genesis block in db.
<span class="term-fg36">@@ -293,8 +297,26 @@</span> 		return params.AllEthashProtocolChanges, common.Hash{}, errGenesisNoConfig
 	}
 	applyOverrides := func(config *params.ChainConfig) {
 		if config != nil {
<span class="term-fg32">+			if config.IsOptimism() &amp;&amp; config.ChainID != nil &amp;&amp; config.ChainID.Cmp(params.OptimismGoerliChainId) == 0 {</span>
<span class="term-fg32">+				&#47;&#47; Apply Optimism Goerli regolith time</span>
<span class="term-fg32">+				config.RegolithTime = &amp;params.OptimismGoerliRegolithTime</span>
<span class="term-fg32">+			}</span>
 			if overrides != nil &amp;&amp; overrides.OverrideShanghai != nil {
 				config.ShanghaiTime = overrides.OverrideShanghai
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if overrides != nil &amp;&amp; overrides.OverrideOptimismBedrock != nil {</span>
<span class="term-fg32">+				config.BedrockBlock = overrides.OverrideOptimismBedrock</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if overrides != nil &amp;&amp; overrides.OverrideOptimismRegolith != nil {</span>
<span class="term-fg32">+				config.RegolithTime = overrides.OverrideOptimismRegolith</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if overrides != nil &amp;&amp; overrides.OverrideOptimism != nil {</span>
<span class="term-fg32">+				if *overrides.OverrideOptimism {</span>
<span class="term-fg32">+					config.Optimism = &amp;params.OptimismConfig{</span>
<span class="term-fg32">+						EIP1559Elasticity:  10,</span>
<span class="term-fg32">+						EIP1559Denominator: 50,</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+				}</span>
 			}
 		}
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-144725f8d6690602a10ade79"role="button" aria-expanded="false" aria-controls="id-144725f8d6690602a10ade79">
        
            <div class="col-12 col-sm-9 text-start"><h3>Chain config cleanup</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+3</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-144725f8d6690602a10ade79">
        <div><p>The optimism Goerli testnet used clique-config data to make geth internals accept blocks.
Post-bedrock the beacon-consensus (i.e. follow Engine API) is now used, and the clique config is removed.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8fc5cf8156179069adf6a850" role="button"
                   aria-expanded="false" aria-controls="id-8fc5cf8156179069adf6a850">
                    <code>core/rawdb/accessors_metadata.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/accessors_metadata.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/accessors_metadata.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8fc5cf8156179069adf6a850"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;accessors_metadata.go op-geth&#47;core&#47;rawdb&#47;accessors_metadata.go</span>
<span class="term-fg1">index 2ff29d1add93938a5f76f621ce6b47af179d9aca..45ced36a4fd400cc84f60a9a9dffedd19cb7e1cf 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;accessors_metadata.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;accessors_metadata.go</span>
<span class="term-fg36">@@ -64,6 +64,9 @@</span> 	if err := json.Unmarshal(data, &amp;config); err != nil {
 		log.Error(&quot;Invalid chain config JSON&quot;, &quot;hash&quot;, hash, &quot;err&quot;, err)
 		return nil
 	}
<span class="term-fg32">+	if config.Optimism != nil {</span>
<span class="term-fg32">+		config.Clique = nil &#47;&#47; get rid of legacy clique data in chain config (optimism goerli issue)</span>
<span class="term-fg32">+	}</span>
 	return &amp;config
 }
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-6f7d3b8591deaf04133cbb50"role="button" aria-expanded="false" aria-controls="id-6f7d3b8591deaf04133cbb50">
        
            <div class="col-12 col-sm-9 text-start"><h3>Engine API modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+77</span></div>
                <div class="text-start"><span class="text-danger">-11</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-6f7d3b8591deaf04133cbb50">
        <div><p>The Engine API is extended to insert transactions into the block and optionally exclude the tx-pool,
to reproduce the exact block of the sequencer from just the inputs, as derived from L1 by the rollup-node.
See <a href="https://github.com/ethereum-optimism/optimism/blob/develop/specs/exec-engine.md">L2 execution engine specs</a>.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7bb22cfb4c0442acf8381644" role="button"
                   aria-expanded="false" aria-controls="id-7bb22cfb4c0442acf8381644">
                    <code>beacon/engine/types.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/beacon/engine/types.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/beacon/engine/types.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7bb22cfb4c0442acf8381644"><span class="term-fg1">diff --git go-ethereum&#47;beacon&#47;engine&#47;types.go op-geth&#47;beacon&#47;engine&#47;types.go</span>
<span class="term-fg1">index 58f72631194fab274e5bed2ebf5414546cadc260..00128cf777744fba0aec75a29d5566ca968d20ce 100644</span>
<span class="term-fg1">--- go-ethereum&#47;beacon&#47;engine&#47;types.go</span>
<span class="term-fg1">+++ op-geth&#47;beacon&#47;engine&#47;types.go</span>
<span class="term-fg36">@@ -34,12 +34,23 @@</span> type PayloadAttributes struct {
 	Timestamp             uint64              `json:&quot;timestamp&quot;             gencodec:&quot;required&quot;`
 	Random                common.Hash         `json:&quot;prevRandao&quot;            gencodec:&quot;required&quot;`
 	SuggestedFeeRecipient common.Address      `json:&quot;suggestedFeeRecipient&quot; gencodec:&quot;required&quot;`
<span class="term-fg31">-	Withdrawals           []*types.Withdrawal `json:&quot;withdrawals&quot;`</span>
<span class="term-fg32">+	Withdrawals           []*types.Withdrawal `json:&quot;withdrawals,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transactions is a field for rollups: the transactions list is forced into the block</span>
<span class="term-fg32">+	Transactions [][]byte `json:&quot;transactions,omitempty&quot;  gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+	&#47;&#47; NoTxPool is a field for rollups: if true, the no transactions are taken out of the tx-pool,</span>
<span class="term-fg32">+	&#47;&#47; only transactions from the above Transactions list will be included.</span>
<span class="term-fg32">+	NoTxPool bool `json:&quot;noTxPool,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+	&#47;&#47; GasLimit is a field for rollups: if set, this sets the exact gas limit the block produced with.</span>
<span class="term-fg32">+	GasLimit *uint64 `json:&quot;gasLimit,omitempty&quot; gencodec:&quot;optional&quot;`</span>
 }
&nbsp;
 &#47;&#47; JSON type overrides for PayloadAttributes.
 type payloadAttributesMarshaling struct {
 	Timestamp hexutil.Uint64
<span class="term-fg32">+</span>
<span class="term-fg32">+	Transactions []hexutil.Bytes</span>
<span class="term-fg32">+	GasLimit     *hexutil.Uint64</span>
 }
&nbsp;
 &#47;&#47;go:generate go run github.com&#47;fjl&#47;gencodec -type ExecutableData -field-override executableDataMarshaling -out gen_ed.go
<span class="term-fg36">@@ -233,5 +244,5 @@</span>
 &#47;&#47; ExecutionPayloadBodyV1 is used in the response to GetPayloadBodiesByHashV1 and GetPayloadBodiesByRangeV1
 type ExecutionPayloadBodyV1 struct {
 	TransactionData []hexutil.Bytes     `json:&quot;transactions&quot;`
<span class="term-fg31">-	Withdrawals     []*types.Withdrawal `json:&quot;withdrawals,omitempty&quot;`</span>
<span class="term-fg32">+	Withdrawals     []*types.Withdrawal `json:&quot;withdrawals&quot;`</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b4b1e2e327d7f5a94a78a669" role="button"
                   aria-expanded="false" aria-controls="id-b4b1e2e327d7f5a94a78a669">
                    <code>beacon/engine/gen_blockparams.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/beacon/engine/gen_blockparams.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/beacon/engine/gen_blockparams.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+28</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b4b1e2e327d7f5a94a78a669"><span class="term-fg1">diff --git go-ethereum&#47;beacon&#47;engine&#47;gen_blockparams.go op-geth&#47;beacon&#47;engine&#47;gen_blockparams.go</span>
<span class="term-fg1">index 0dd2b52597ad5ddc7fc46d97c6c8878edf29d471..0a76475841a12886ef2f9eaadba0172f2708d2b4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;beacon&#47;engine&#47;gen_blockparams.go</span>
<span class="term-fg1">+++ op-geth&#47;beacon&#47;engine&#47;gen_blockparams.go</span>
<span class="term-fg36">@@ -19,13 +19,24 @@</span> 	type PayloadAttributes struct {
 		Timestamp             hexutil.Uint64      `json:&quot;timestamp&quot;             gencodec:&quot;required&quot;`
 		Random                common.Hash         `json:&quot;prevRandao&quot;            gencodec:&quot;required&quot;`
 		SuggestedFeeRecipient common.Address      `json:&quot;suggestedFeeRecipient&quot; gencodec:&quot;required&quot;`
<span class="term-fg31">-		Withdrawals           []*types.Withdrawal `json:&quot;withdrawals&quot;`</span>
<span class="term-fg32">+		Withdrawals           []*types.Withdrawal `json:&quot;withdrawals,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		Transactions          []hexutil.Bytes     `json:&quot;transactions,omitempty&quot;  gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		NoTxPool              bool                `json:&quot;noTxPool,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		GasLimit              *hexutil.Uint64     `json:&quot;gasLimit,omitempty&quot; gencodec:&quot;optional&quot;`</span>
 	}
 	var enc PayloadAttributes
 	enc.Timestamp = hexutil.Uint64(p.Timestamp)
 	enc.Random = p.Random
 	enc.SuggestedFeeRecipient = p.SuggestedFeeRecipient
 	enc.Withdrawals = p.Withdrawals
<span class="term-fg32">+	if p.Transactions != nil {</span>
<span class="term-fg32">+		enc.Transactions = make([]hexutil.Bytes, len(p.Transactions))</span>
<span class="term-fg32">+		for k, v := range p.Transactions {</span>
<span class="term-fg32">+			enc.Transactions[k] = v</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	enc.NoTxPool = p.NoTxPool</span>
<span class="term-fg32">+	enc.GasLimit = (*hexutil.Uint64)(p.GasLimit)</span>
 	return json.Marshal(&amp;enc)
 }
&nbsp;
<span class="term-fg36">@@ -35,7 +46,10 @@</span> 	type PayloadAttributes struct {
 		Timestamp             *hexutil.Uint64     `json:&quot;timestamp&quot;             gencodec:&quot;required&quot;`
 		Random                *common.Hash        `json:&quot;prevRandao&quot;            gencodec:&quot;required&quot;`
 		SuggestedFeeRecipient *common.Address     `json:&quot;suggestedFeeRecipient&quot; gencodec:&quot;required&quot;`
<span class="term-fg31">-		Withdrawals           []*types.Withdrawal `json:&quot;withdrawals&quot;`</span>
<span class="term-fg32">+		Withdrawals           []*types.Withdrawal `json:&quot;withdrawals,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		Transactions          []hexutil.Bytes     `json:&quot;transactions,omitempty&quot;  gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		NoTxPool              *bool               `json:&quot;noTxPool,omitempty&quot; gencodec:&quot;optional&quot;`</span>
<span class="term-fg32">+		GasLimit              *hexutil.Uint64     `json:&quot;gasLimit,omitempty&quot; gencodec:&quot;optional&quot;`</span>
 	}
 	var dec PayloadAttributes
 	if err := json.Unmarshal(input, &amp;dec); err != nil {
<span class="term-fg36">@@ -55,6 +69,18 @@</span> 	}
 	p.SuggestedFeeRecipient = *dec.SuggestedFeeRecipient
 	if dec.Withdrawals != nil {
 		p.Withdrawals = dec.Withdrawals
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Transactions != nil {</span>
<span class="term-fg32">+		p.Transactions = make([][]byte, len(dec.Transactions))</span>
<span class="term-fg32">+		for k, v := range dec.Transactions {</span>
<span class="term-fg32">+			p.Transactions[k] = v</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.NoTxPool != nil {</span>
<span class="term-fg32">+		p.NoTxPool = *dec.NoTxPool</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.GasLimit != nil {</span>
<span class="term-fg32">+		p.GasLimit = (*uint64)(dec.GasLimit)</span>
 	}
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-62100f1135a8fce66c37c43c" role="button"
                   aria-expanded="false" aria-controls="id-62100f1135a8fce66c37c43c">
                    <code>eth/catalyst/api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/catalyst/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/catalyst/api.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+36</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-62100f1135a8fce66c37c43c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;catalyst&#47;api.go op-geth&#47;eth&#47;catalyst&#47;api.go</span>
<span class="term-fg1">index 95eed408f0310a72e13d6265bd7c9cfb63a541c1..4e8efdfb7485f778a5b5623265bef881125b3a48 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;catalyst&#47;api.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;catalyst&#47;api.go</span>
<span class="term-fg36">@@ -149,6 +149,9 @@</span> 		invalidBlocksHits: make(map[common.Hash]int),
 		invalidTipsets:    make(map[common.Hash]*types.Header),
 	}
 	eth.Downloader().SetBadBlockCallback(api.setInvalidAncestor)
<span class="term-fg32">+	if api.eth.BlockChain().Config().Optimism != nil { &#47;&#47; don&#39;t start the api heartbeat, there is no transition</span>
<span class="term-fg32">+		return api</span>
<span class="term-fg32">+	}</span>
 	go api.heartbeat()
&nbsp;
 	return api
<span class="term-fg36">@@ -237,6 +240,10 @@</span> 		if header == nil {
 			log.Warn(&quot;Forkchoice requested unknown head&quot;, &quot;hash&quot;, update.HeadBlockHash)
 			return engine.STATUS_SYNCING, nil
 		}
<span class="term-fg32">+		&#47;&#47; If the finalized hash is known, we can direct the downloader to move</span>
<span class="term-fg32">+		&#47;&#47; potentially more data to the freezer from the get go.</span>
<span class="term-fg32">+		finalized := api.remoteBlocks.get(update.FinalizedBlockHash)</span>
<span class="term-fg32">+</span>
 		&#47;&#47; Header advertised via a past newPayload request. Start syncing to it.
 		&#47;&#47; Before we do however, make sure any legacy sync in switched off so we
 		&#47;&#47; don&#39;t accidentally have 2 cycles running.
<span class="term-fg36">@@ -244,8 +251,16 @@</span> 		if merger := api.eth.Merger(); !merger.TDDReached() {
 			merger.ReachTTD()
 			api.eth.Downloader().Cancel()
 		}
<span class="term-fg31">-		log.Info(&quot;Forkchoice requested sync to new head&quot;, &quot;number&quot;, header.Number, &quot;hash&quot;, header.Hash())</span>
<span class="term-fg31">-		if err := api.eth.Downloader().BeaconSync(api.eth.SyncMode(), header); err != nil {</span>
<span class="term-fg32">+		context := []interface{}{&quot;number&quot;, header.Number, &quot;hash&quot;, header.Hash()}</span>
<span class="term-fg32">+		if update.FinalizedBlockHash != (common.Hash{}) {</span>
<span class="term-fg32">+			if finalized == nil {</span>
<span class="term-fg32">+				context = append(context, []interface{}{&quot;finalized&quot;, &quot;unknown&quot;}...)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				context = append(context, []interface{}{&quot;finalized&quot;, finalized.Number}...)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Info(&quot;Forkchoice requested sync to new head&quot;, context...)</span>
<span class="term-fg32">+		if err := api.eth.Downloader().BeaconSync(api.eth.SyncMode(), header, finalized); err != nil {</span>
 			return engine.STATUS_SYNCING, err
 		}
 		return engine.STATUS_SYNCING, nil
<span class="term-fg36">@@ -286,10 +301,10 @@</span> 	} else if api.eth.BlockChain().CurrentBlock().Hash() == update.HeadBlockHash {
 		&#47;&#47; If the specified head matches with our local head, do nothing and keep
 		&#47;&#47; generating the payload. It&#39;s a special corner case that a few slots are
 		&#47;&#47; missing and we are requested to generate the payload in slot.
<span class="term-fg31">-	} else {</span>
<span class="term-fg32">+	} else if api.eth.BlockChain().Config().Optimism == nil { &#47;&#47; minor Engine API divergence: allow proposers to reorg their own chain</span>
 		&#47;&#47; If the head block is already in our canonical chain, the beacon client is
 		&#47;&#47; probably resyncing. Ignore the update.
<span class="term-fg31">-		log.Info(&quot;Ignoring beacon update to old head&quot;, &quot;number&quot;, block.NumberU64(), &quot;hash&quot;, update.HeadBlockHash, &quot;age&quot;, common.PrettyAge(time.Unix(int64(block.Time()), 0)), &quot;have&quot;, api.eth.BlockChain().CurrentBlock().NumberU64())</span>
<span class="term-fg32">+		log.Info(&quot;Ignoring beacon update to old head&quot;, &quot;number&quot;, block.NumberU64(), &quot;hash&quot;, update.HeadBlockHash, &quot;age&quot;, common.PrettyAge(time.Unix(int64(block.Time()), 0)), &quot;have&quot;, api.eth.BlockChain().CurrentBlock().Number)</span>
 		return valid(nil), nil
 	}
 	api.eth.SetSynced()
<span class="term-fg36">@@ -310,7 +325,7 @@</span> 			log.Warn(&quot;Final block not in canonical chain&quot;, &quot;number&quot;, block.NumberU64(), &quot;hash&quot;, update.HeadBlockHash)
 			return engine.STATUS_INVALID, engine.InvalidForkChoiceState.With(errors.New(&quot;final block not in canonical chain&quot;))
 		}
 		&#47;&#47; Set the finalized block
<span class="term-fg31">-		api.eth.BlockChain().SetFinalized(finalBlock)</span>
<span class="term-fg32">+		api.eth.BlockChain().SetFinalized(finalBlock.Header())</span>
 	}
 	&#47;&#47; Check if the safe block hash is in our canonical tree, if not somethings wrong
 	if update.SafeBlockHash != (common.Hash{}) {
<span class="term-fg36">@@ -324,18 +339,32 @@</span> 			log.Warn(&quot;Safe block not in canonical chain&quot;)
 			return engine.STATUS_INVALID, engine.InvalidForkChoiceState.With(errors.New(&quot;safe block not in canonical chain&quot;))
 		}
 		&#47;&#47; Set the safe block
<span class="term-fg31">-		api.eth.BlockChain().SetSafe(safeBlock)</span>
<span class="term-fg32">+		api.eth.BlockChain().SetSafe(safeBlock.Header())</span>
 	}
 	&#47;&#47; If payload generation was requested, create a new block to be potentially
 	&#47;&#47; sealed by the beacon client. The payload will be requested later, and we
 	&#47;&#47; will replace it arbitrarily many times in between.
 	if payloadAttributes != nil {
<span class="term-fg32">+		if api.eth.BlockChain().Config().Optimism != nil &amp;&amp; payloadAttributes.GasLimit == nil {</span>
<span class="term-fg32">+			return engine.STATUS_INVALID, engine.InvalidPayloadAttributes.With(errors.New(&quot;gasLimit parameter is required&quot;))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		transactions := make(types.Transactions, 0, len(payloadAttributes.Transactions))</span>
<span class="term-fg32">+		for i, otx := range payloadAttributes.Transactions {</span>
<span class="term-fg32">+			var tx types.Transaction</span>
<span class="term-fg32">+			if err := tx.UnmarshalBinary(otx); err != nil {</span>
<span class="term-fg32">+				return engine.STATUS_INVALID, fmt.Errorf(&quot;transaction %d is not valid: %v&quot;, i, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			transactions = append(transactions, &amp;tx)</span>
<span class="term-fg32">+		}</span>
 		args := &amp;miner.BuildPayloadArgs{
 			Parent:       update.HeadBlockHash,
 			Timestamp:    payloadAttributes.Timestamp,
 			FeeRecipient: payloadAttributes.SuggestedFeeRecipient,
 			Random:       payloadAttributes.Random,
 			Withdrawals:  payloadAttributes.Withdrawals,
<span class="term-fg32">+			NoTxPool:     payloadAttributes.NoTxPool,</span>
<span class="term-fg32">+			Transactions: transactions,</span>
<span class="term-fg32">+			GasLimit:     payloadAttributes.GasLimit,</span>
 		}
 		id := args.Id()
 		&#47;&#47; If we already are busy generating this work, then we do not need
<span class="term-fg36">@@ -792,7 +821,7 @@</span> 	if count &gt; 1024 {
 		return nil, engine.TooLargeRequest.With(fmt.Errorf(&quot;requested count too large: %v&quot;, count))
 	}
 	&#47;&#47; limit count up until current
<span class="term-fg31">-	current := api.eth.BlockChain().CurrentBlock().NumberU64()</span>
<span class="term-fg32">+	current := api.eth.BlockChain().CurrentBlock().Number.Uint64()</span>
 	last := uint64(start) + uint64(count) - 1
 	if last &gt; current {
 		last = current</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-f233e410fd0b6d15fb9e6cb3"role="button" aria-expanded="false" aria-controls="id-f233e410fd0b6d15fb9e6cb3">
        
            <div class="col-12 col-sm-9 text-start"><h3>Block-building modifications</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+107</span></div>
                <div class="text-start"><span class="text-danger">-39</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-f233e410fd0b6d15fb9e6cb3">
        <div><p>The block-building code (in the &ldquo;miner&rdquo; package because of Proof-Of-Work legacy of ethereum) implements the
changes to support the transaction-inclusion, tx-pool toggle and gaslimit parameters of the Engine API.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d64cb308fa9248992ab91905" role="button"
                   aria-expanded="false" aria-controls="id-d64cb308fa9248992ab91905">
                    <code>miner/payload_building.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/miner/payload_building.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/miner/payload_building.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+22</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d64cb308fa9248992ab91905"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;payload_building.go op-geth&#47;miner&#47;payload_building.go</span>
<span class="term-fg1">index f84d908e86d68dbb132e2cd75ba5e21887fc018c..26e89eef31cab52754e0a41bb540639b4f58067f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;payload_building.go</span>
<span class="term-fg1">+++ op-geth&#47;miner&#47;payload_building.go</span>
<span class="term-fg36">@@ -40,6 +40,10 @@</span> 	Timestamp    uint64            &#47;&#47; The provided timestamp of generated payload
 	FeeRecipient common.Address    &#47;&#47; The provided recipient address for collecting transaction fee
 	Random       common.Hash       &#47;&#47; The provided randomness value
 	Withdrawals  types.Withdrawals &#47;&#47; The provided withdrawals
<span class="term-fg32">+</span>
<span class="term-fg32">+	NoTxPool     bool                 &#47;&#47; Optimism addition: option to disable tx pool contents from being included</span>
<span class="term-fg32">+	Transactions []*types.Transaction &#47;&#47; Optimism addition: txs forced into the block via engine API</span>
<span class="term-fg32">+	GasLimit     *uint64              &#47;&#47; Optimism addition: override gas limit of the block to build</span>
 }
&nbsp;
 &#47;&#47; Id computes an 8-byte identifier by hashing the components of the payload arguments.
<span class="term-fg36">@@ -51,6 +55,19 @@</span> 	binary.Write(hasher, binary.BigEndian, args.Timestamp)
 	hasher.Write(args.Random[:])
 	hasher.Write(args.FeeRecipient[:])
 	rlp.Encode(hasher, args.Withdrawals)
<span class="term-fg32">+</span>
<span class="term-fg32">+	if args.NoTxPool || len(args.Transactions) &gt; 0 { &#47;&#47; extend if extra payload attributes are used</span>
<span class="term-fg32">+		binary.Write(hasher, binary.BigEndian, args.NoTxPool)</span>
<span class="term-fg32">+		binary.Write(hasher, binary.BigEndian, uint64(len(args.Transactions)))</span>
<span class="term-fg32">+		for _, tx := range args.Transactions {</span>
<span class="term-fg32">+			h := tx.Hash()</span>
<span class="term-fg32">+			hasher.Write(h[:])</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if args.GasLimit != nil {</span>
<span class="term-fg32">+		binary.Write(hasher, binary.BigEndian, *args.GasLimit)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	var out engine.PayloadID
 	copy(out[:], hasher.Sum(nil)[:8])
 	return out
<span class="term-fg36">@@ -156,12 +173,15 @@</span> func (w *worker) buildPayload(args *BuildPayloadArgs) (*Payload, error) {
 	&#47;&#47; Build the initial version with no transaction included. It should be fast
 	&#47;&#47; enough to run. The empty payload can at least make sure there is something
 	&#47;&#47; to deliver for not missing slot.
<span class="term-fg31">-	empty, _, err := w.getSealingBlock(args.Parent, args.Timestamp, args.FeeRecipient, args.Random, args.Withdrawals, true)</span>
<span class="term-fg32">+	empty, _, err := w.getSealingBlock(args.Parent, args.Timestamp, args.FeeRecipient, args.Random, args.Withdrawals, true, args.Transactions, args.GasLimit)</span>
 	if err != nil {
 		return nil, err
 	}
 	&#47;&#47; Construct a payload object for return.
 	payload := newPayload(empty, args.Id())
<span class="term-fg32">+	if args.NoTxPool { &#47;&#47; don&#39;t start the background payload updating job if there is no tx pool to pull from</span>
<span class="term-fg32">+		return payload, nil</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	&#47;&#47; Spin up a routine for updating the payload in background. This strategy
 	&#47;&#47; can maximum the revenue for including transactions with highest fee.
<span class="term-fg36">@@ -180,7 +200,7 @@</span> 		for {
 			select {
 			case &lt;-timer.C:
 				start := time.Now()
<span class="term-fg31">-				block, fees, err := w.getSealingBlock(args.Parent, args.Timestamp, args.FeeRecipient, args.Random, args.Withdrawals, false)</span>
<span class="term-fg32">+				block, fees, err := w.getSealingBlock(args.Parent, args.Timestamp, args.FeeRecipient, args.Random, args.Withdrawals, false, args.Transactions, args.GasLimit)</span>
 				if err == nil {
 					payload.update(block, fees, time.Since(start))
 				}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4716fa224e6413714a0e4f5a" role="button"
                   aria-expanded="false" aria-controls="id-4716fa224e6413714a0e4f5a">
                    <code>miner/miner.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/miner/miner.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/miner/miner.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4716fa224e6413714a0e4f5a"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;miner.go op-geth&#47;miner&#47;miner.go</span>
<span class="term-fg1">index c969aec735469405966e7676eb0d44d169155541..aa17a57967a0bfcc11ee454460598be37a5e9c38 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;miner.go</span>
<span class="term-fg1">+++ op-geth&#47;miner&#47;miner.go</span>
<span class="term-fg36">@@ -18,6 +18,7 @@</span> &#47;&#47; Package miner implements Ethereum block creation and mining.
 package miner
&nbsp;
 import (
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
 	&quot;sync&quot;
<span class="term-fg36">@@ -31,6 +32,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;downloader&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg36">@@ -41,6 +43,10 @@</span> &#47;&#47; to offer all the functions here.
 type Backend interface {
 	BlockChain() *core.BlockChain
 	TxPool() *txpool.TxPool
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type BackendWithHistoricalState interface {</span>
<span class="term-fg32">+	StateAtBlock(ctx context.Context, block *types.Block, reexec uint64, base *state.StateDB, readOnly bool, preferDisk bool) (*state.StateDB, tracers.StateReleaseFunc, error)</span>
 }
&nbsp;
 &#47;&#47; Config is the configuration parameters of mining.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c82827fa1f08e3169973f0cb" role="button"
                   aria-expanded="false" aria-controls="id-c82827fa1f08e3169973f0cb">
                    <code>miner/worker_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/miner/worker_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/miner/worker_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c82827fa1f08e3169973f0cb"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;worker_test.go op-geth&#47;miner&#47;worker_test.go</span>
<span class="term-fg1">index ba929d293d8a08e6ccca983ceca2817192ede86a..46f0e0a8f1283e3dfa1f59e677941cbc1cb69ece 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;worker_test.go</span>
<span class="term-fg1">+++ op-geth&#47;miner&#47;worker_test.go</span>
<span class="term-fg36">@@ -147,7 +147,7 @@</span> 		})
 		if _, err := chain.InsertChain(blocks); err != nil {
 			t.Fatalf(&quot;failed to insert origin chain: %v&quot;, err)
 		}
<span class="term-fg31">-		parent := chain.GetBlockByHash(chain.CurrentBlock().ParentHash())</span>
<span class="term-fg32">+		parent := chain.GetBlockByHash(chain.CurrentBlock().ParentHash)</span>
 		blocks, _ = core.GenerateChain(chainConfig, parent, engine, genDb, 1, func(i int, gen *core.BlockGen) {
 			gen.SetCoinbase(testUserAddress)
 		})
<span class="term-fg36">@@ -176,10 +176,10 @@</span>
 func (b *testWorkerBackend) newRandomUncle() *types.Block {
 	var parent *types.Block
 	cur := b.chain.CurrentBlock()
<span class="term-fg31">-	if cur.NumberU64() == 0 {</span>
<span class="term-fg32">+	if cur.Number.Uint64() == 0 {</span>
 		parent = b.chain.Genesis()
 	} else {
<span class="term-fg31">-		parent = b.chain.GetBlockByHash(b.chain.CurrentBlock().ParentHash())</span>
<span class="term-fg32">+		parent = b.chain.GetBlockByHash(b.chain.CurrentBlock().ParentHash)</span>
 	}
 	blocks, _ := core.GenerateChain(b.chain.Config(), parent, b.chain.Engine(), b.db, 1, func(i int, gen *core.BlockGen) {
 		var addr = make([]byte, common.AddressLength)
<span class="term-fg36">@@ -607,21 +607,21 @@</span> 		{
 			b.chain.CurrentBlock().Hash(),
 			common.HexToAddress(&quot;0xdeadbeef&quot;),
 			common.HexToHash(&quot;0xcafebabe&quot;),
<span class="term-fg31">-			b.chain.CurrentBlock().NumberU64() + 1,</span>
<span class="term-fg32">+			b.chain.CurrentBlock().Number.Uint64() + 1,</span>
 			false,
 		},
 		{
 			b.chain.CurrentBlock().Hash(),
 			common.Address{},
 			common.HexToHash(&quot;0xcafebabe&quot;),
<span class="term-fg31">-			b.chain.CurrentBlock().NumberU64() + 1,</span>
<span class="term-fg32">+			b.chain.CurrentBlock().Number.Uint64() + 1,</span>
 			false,
 		},
 		{
 			b.chain.CurrentBlock().Hash(),
 			common.Address{},
 			common.Hash{},
<span class="term-fg31">-			b.chain.CurrentBlock().NumberU64() + 1,</span>
<span class="term-fg32">+			b.chain.CurrentBlock().Number.Uint64() + 1,</span>
 			false,
 		},
 		{
<span class="term-fg36">@@ -635,7 +635,7 @@</span> 	}
&nbsp;
 	&#47;&#47; This API should work even when the automatic sealing is not enabled
 	for _, c := range cases {
<span class="term-fg31">-		block, _, err := w.getSealingBlock(c.parent, timestamp, c.coinbase, c.random, nil, false)</span>
<span class="term-fg32">+		block, _, err := w.getSealingBlock(c.parent, timestamp, c.coinbase, c.random, nil, false, nil, nil)</span>
 		if c.expectErr {
 			if err == nil {
 				t.Error(&quot;Expect error but get nil&quot;)
<span class="term-fg36">@@ -651,7 +651,7 @@</span>
 	&#47;&#47; This API should work even when the automatic sealing is enabled
 	w.start()
 	for _, c := range cases {
<span class="term-fg31">-		block, _, err := w.getSealingBlock(c.parent, timestamp, c.coinbase, c.random, nil, false)</span>
<span class="term-fg32">+		block, _, err := w.getSealingBlock(c.parent, timestamp, c.coinbase, c.random, nil, false, nil, nil)</span>
 		if c.expectErr {
 			if err == nil {
 				t.Error(&quot;Expect error but get nil&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-024ebe7d9394ea2329b9cbe6" role="button"
                   aria-expanded="false" aria-controls="id-024ebe7d9394ea2329b9cbe6">
                    <code>miner/miner_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/miner/miner_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/miner/miner_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-024ebe7d9394ea2329b9cbe6"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;miner_test.go op-geth&#47;miner&#47;miner_test.go</span>
<span class="term-fg1">index 2e7682acd3313035d14d324207e57cc7b66c68da..6bf3edae5dbb79002aa37580de73a6f908044516 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;miner_test.go</span>
<span class="term-fg1">+++ op-geth&#47;miner&#47;miner_test.go</span>
<span class="term-fg36">@@ -19,6 +19,7 @@</span> package miner
&nbsp;
 import (
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
 	&quot;testing&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg36">@@ -65,14 +66,15 @@</span> 	gasLimit      uint64
 	chainHeadFeed *event.Feed
 }
&nbsp;
<span class="term-fg31">-func (bc *testBlockChain) CurrentBlock() *types.Block {</span>
<span class="term-fg31">-	return types.NewBlock(&amp;types.Header{</span>
<span class="term-fg32">+func (bc *testBlockChain) CurrentBlock() *types.Header {</span>
<span class="term-fg32">+	return &amp;types.Header{</span>
<span class="term-fg32">+		Number:   new(big.Int),</span>
 		GasLimit: bc.gasLimit,
<span class="term-fg31">-	}, nil, nil, nil, trie.NewStackTrie(nil))</span>
<span class="term-fg32">+	}</span>
 }
&nbsp;
 func (bc *testBlockChain) GetBlock(hash common.Hash, number uint64) *types.Block {
<span class="term-fg31">-	return bc.CurrentBlock()</span>
<span class="term-fg32">+	return types.NewBlock(bc.CurrentBlock(), nil, nil, nil, trie.NewStackTrie(nil))</span>
 }
&nbsp;
 func (bc *testBlockChain) StateAt(common.Hash) (*state.StateDB, error) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-28f28811077248f83084daad" role="button"
                   aria-expanded="false" aria-controls="id-28f28811077248f83084daad">
                    <code>miner/worker.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/miner/worker.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/miner/worker.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+65</span></div>
                        <div class="text-start"><span class="text-danger">-25</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-28f28811077248f83084daad"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;worker.go op-geth&#47;miner&#47;worker.go</span>
<span class="term-fg1">index 49204f71a0766774b09a78434a9b025f11742d32..f09bc32058ed4813cff36738fffc58de4db53dfa 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;worker.go</span>
<span class="term-fg1">+++ op-geth&#47;miner&#47;worker.go</span>
<span class="term-fg36">@@ -17,6 +17,7 @@</span>
 package miner
&nbsp;
 import (
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg36">@@ -31,6 +32,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg36">@@ -494,7 +496,7 @@</span>
 	for {
 		select {
 		case &lt;-w.startCh:
<span class="term-fg31">-			clearPending(w.chain.CurrentBlock().NumberU64())</span>
<span class="term-fg32">+			clearPending(w.chain.CurrentBlock().Number.Uint64())</span>
 			timestamp = time.Now().Unix()
 			commit(false, commitInterruptNewHead)
&nbsp;
<span class="term-fg36">@@ -607,12 +609,12 @@</span>
 		case &lt;-cleanTicker.C:
 			chainHead := w.chain.CurrentBlock()
 			for hash, uncle := range w.localUncles {
<span class="term-fg31">-				if uncle.NumberU64()+staleThreshold &lt;= chainHead.NumberU64() {</span>
<span class="term-fg32">+				if uncle.NumberU64()+staleThreshold &lt;= chainHead.Number.Uint64() {</span>
 					delete(w.localUncles, hash)
 				}
 			}
 			for hash, uncle := range w.remoteUncles {
<span class="term-fg31">-				if uncle.NumberU64()+staleThreshold &lt;= chainHead.NumberU64() {</span>
<span class="term-fg32">+				if uncle.NumberU64()+staleThreshold &lt;= chainHead.Number.Uint64() {</span>
 					delete(w.remoteUncles, hash)
 				}
 			}
<span class="term-fg36">@@ -790,10 +792,19 @@</span> 	}
 }
&nbsp;
 &#47;&#47; makeEnv creates a new environment for the sealing block.
<span class="term-fg31">-func (w *worker) makeEnv(parent *types.Block, header *types.Header, coinbase common.Address) (*environment, error) {</span>
<span class="term-fg32">+func (w *worker) makeEnv(parent *types.Header, header *types.Header, coinbase common.Address) (*environment, error) {</span>
 	&#47;&#47; Retrieve the parent state to execute on top and start a prefetcher for
 	&#47;&#47; the miner to speed block sealing up a bit.
<span class="term-fg31">-	state, err := w.chain.StateAt(parent.Root())</span>
<span class="term-fg32">+	state, err := w.chain.StateAt(parent.Root)</span>
<span class="term-fg32">+	if err != nil &amp;&amp; w.chainConfig.Optimism != nil { &#47;&#47; Allow the miner to reorg its own chain arbitrarily deep</span>
<span class="term-fg32">+		if historicalBackend, ok := w.eth.(BackendWithHistoricalState); ok {</span>
<span class="term-fg32">+			var release tracers.StateReleaseFunc</span>
<span class="term-fg32">+			parentBlock := w.eth.BlockChain().GetBlockByHash(parent.Hash())</span>
<span class="term-fg32">+			state, release, err = historicalBackend.StateAtBlock(context.Background(), parentBlock, ^uint64(0), nil, false, false)</span>
<span class="term-fg32">+			state = state.Copy()</span>
<span class="term-fg32">+			release()</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -861,11 +872,14 @@</span> 	w.snapshotState = env.state.Copy()
 }
&nbsp;
 func (w *worker) commitTransaction(env *environment, tx *types.Transaction) ([]*types.Log, error) {
<span class="term-fg31">-	snap := env.state.Snapshot()</span>
<span class="term-fg31">-</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		snap = env.state.Snapshot()</span>
<span class="term-fg32">+		gp   = env.gasPool.Gas()</span>
<span class="term-fg32">+	)</span>
 	receipt, err := core.ApplyTransaction(w.chainConfig, w.chain, &amp;env.coinbase, env.gasPool, env.state, env.header, tx, &amp;env.header.GasUsed, *w.chain.GetVMConfig())
 	if err != nil {
 		env.state.RevertToSnapshot(snap)
<span class="term-fg32">+		env.gasPool.SetGas(gp)</span>
 		return nil, err
 	}
 	env.txs = append(env.txs, tx)
<span class="term-fg36">@@ -976,6 +990,9 @@</span> 	random      common.Hash       &#47;&#47; The randomness generated by beacon chain, empty before the merge
 	withdrawals types.Withdrawals &#47;&#47; List of withdrawals to include in block.
 	noUncle     bool              &#47;&#47; Flag whether the uncle block inclusion is allowed
 	noTxs       bool              &#47;&#47; Flag whether an empty block without any transaction is expected
<span class="term-fg32">+</span>
<span class="term-fg32">+	txs      types.Transactions &#47;&#47; Deposit transactions to include at the start of the block</span>
<span class="term-fg32">+	gasLimit *uint64            &#47;&#47; Optional gas limit override</span>
 }
&nbsp;
 &#47;&#47; prepareWork constructs the sealing task according to the given parameters,
<span class="term-fg36">@@ -988,30 +1005,31 @@</span>
 	&#47;&#47; Find the parent block for sealing task
 	parent := w.chain.CurrentBlock()
 	if genParams.parentHash != (common.Hash{}) {
<span class="term-fg31">-		parent = w.chain.GetBlockByHash(genParams.parentHash)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if parent == nil {</span>
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;missing parent&quot;)</span>
<span class="term-fg32">+		block := w.chain.GetBlockByHash(genParams.parentHash)</span>
<span class="term-fg32">+		if block == nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;missing parent&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		parent = block.Header()</span>
 	}
 	&#47;&#47; Sanity check the timestamp correctness, recap the timestamp
 	&#47;&#47; to parent+1 if the mutation is allowed.
 	timestamp := genParams.timestamp
<span class="term-fg31">-	if parent.Time() &gt;= timestamp {</span>
<span class="term-fg32">+	if parent.Time &gt;= timestamp {</span>
 		if genParams.forceTime {
<span class="term-fg31">-			return nil, fmt.Errorf(&quot;invalid timestamp, parent %d given %d&quot;, parent.Time(), timestamp)</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;invalid timestamp, parent %d given %d&quot;, parent.Time, timestamp)</span>
 		}
<span class="term-fg31">-		timestamp = parent.Time() + 1</span>
<span class="term-fg32">+		timestamp = parent.Time + 1</span>
 	}
 	&#47;&#47; Construct the sealing block header.
 	header := &amp;types.Header{
 		ParentHash: parent.Hash(),
<span class="term-fg31">-		Number:     new(big.Int).Add(parent.Number(), common.Big1),</span>
<span class="term-fg31">-		GasLimit:   core.CalcGasLimit(parent.GasLimit(), w.config.GasCeil),</span>
<span class="term-fg32">+		Number:     new(big.Int).Add(parent.Number, common.Big1),</span>
<span class="term-fg32">+		GasLimit:   core.CalcGasLimit(parent.GasLimit, w.config.GasCeil),</span>
 		Time:       timestamp,
 		Coinbase:   genParams.coinbase,
 	}
 	&#47;&#47; Set the extra field.
<span class="term-fg31">-	if len(w.extra) != 0 {</span>
<span class="term-fg32">+	if len(w.extra) != 0 &amp;&amp; w.chainConfig.Optimism == nil { &#47;&#47; Optimism chains must not set any extra data.</span>
 		header.Extra = w.extra
 	}
 	&#47;&#47; Set the randomness field from the beacon chain if it&#39;s available.
<span class="term-fg36">@@ -1020,11 +1038,17 @@</span> 		header.MixDigest = genParams.random
 	}
 	&#47;&#47; Set baseFee and GasLimit if we are on an EIP-1559 chain
 	if w.chainConfig.IsLondon(header.Number) {
<span class="term-fg31">-		header.BaseFee = misc.CalcBaseFee(w.chainConfig, parent.Header())</span>
<span class="term-fg31">-		if !w.chainConfig.IsLondon(parent.Number()) {</span>
<span class="term-fg31">-			parentGasLimit := parent.GasLimit() * w.chainConfig.ElasticityMultiplier()</span>
<span class="term-fg32">+		header.BaseFee = misc.CalcBaseFee(w.chainConfig, parent)</span>
<span class="term-fg32">+		if !w.chainConfig.IsLondon(parent.Number) {</span>
<span class="term-fg32">+			parentGasLimit := parent.GasLimit * w.chainConfig.ElasticityMultiplier()</span>
 			header.GasLimit = core.CalcGasLimit(parentGasLimit, w.config.GasCeil)
 		}
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if genParams.gasLimit != nil { &#47;&#47; override gas limit if specified</span>
<span class="term-fg32">+		header.GasLimit = *genParams.gasLimit</span>
<span class="term-fg32">+	} else if w.chain.Config().Optimism != nil &amp;&amp; w.config.GasCeil != 0 {</span>
<span class="term-fg32">+		&#47;&#47; configure the gas limit of pending blocks with the miner gas limit config when using optimism</span>
<span class="term-fg32">+		header.GasLimit = w.config.GasCeil</span>
 	}
 	&#47;&#47; Run the consensus preparation with the default or customized consensus engine.
 	if err := w.engine.Prepare(w.chain, header); err != nil {
<span class="term-fg36">@@ -1090,14 +1114,28 @@</span> 	return nil
 }
&nbsp;
 &#47;&#47; generateWork generates a sealing block based on the given parameters.
<span class="term-fg31">-func (w *worker) generateWork(params *generateParams) (*types.Block, *big.Int, error) {</span>
<span class="term-fg31">-	work, err := w.prepareWork(params)</span>
<span class="term-fg32">+func (w *worker) generateWork(genParams *generateParams) (*types.Block, *big.Int, error) {</span>
<span class="term-fg32">+	work, err := w.prepareWork(genParams)</span>
 	if err != nil {
 		return nil, nil, err
 	}
 	defer work.discard()
<span class="term-fg32">+	if work.gasPool == nil {</span>
<span class="term-fg32">+		work.gasPool = new(core.GasPool).AddGas(work.header.GasLimit)</span>
<span class="term-fg32">+	}</span>
&nbsp;
<span class="term-fg31">-	if !params.noTxs {</span>
<span class="term-fg32">+	for _, tx := range genParams.txs {</span>
<span class="term-fg32">+		from, _ := types.Sender(work.signer, tx)</span>
<span class="term-fg32">+		work.state.SetTxContext(tx.Hash(), work.tcount)</span>
<span class="term-fg32">+		_, err := w.commitTransaction(work, tx)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, nil, fmt.Errorf(&quot;failed to force-include tx: %s type: %d sender: %s nonce: %d, err: %w&quot;, tx.Hash(), tx.Type(), from, tx.Nonce(), err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		work.tcount++</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; forced transactions done, fill rest of block with transactions</span>
<span class="term-fg32">+	if !genParams.noTxs {</span>
 		interrupt := new(int32)
 		timer := time.AfterFunc(w.newpayloadTimeout, func() {
 			atomic.StoreInt32(interrupt, commitInterruptTimeout)
<span class="term-fg36">@@ -1109,7 +1147,7 @@</span> 		if errors.Is(err, errBlockInterruptedByTimeout) {
 			log.Warn(&quot;Block building is interrupted&quot;, &quot;allowance&quot;, common.PrettyDuration(w.newpayloadTimeout))
 		}
 	}
<span class="term-fg31">-	block, err := w.engine.FinalizeAndAssemble(w.chain, work.header, work.state, work.txs, work.unclelist(), work.receipts, params.withdrawals)</span>
<span class="term-fg32">+	block, err := w.engine.FinalizeAndAssemble(w.chain, work.header, work.state, work.txs, work.unclelist(), work.receipts, genParams.withdrawals)</span>
 	if err != nil {
 		return nil, nil, err
 	}
<span class="term-fg36">@@ -1226,7 +1264,7 @@</span>
 &#47;&#47; getSealingBlock generates the sealing block based on the given parameters.
 &#47;&#47; The generation result will be passed back via the given channel no matter
 &#47;&#47; the generation itself succeeds or not.
<span class="term-fg31">-func (w *worker) getSealingBlock(parent common.Hash, timestamp uint64, coinbase common.Address, random common.Hash, withdrawals types.Withdrawals, noTxs bool) (*types.Block, *big.Int, error) {</span>
<span class="term-fg32">+func (w *worker) getSealingBlock(parent common.Hash, timestamp uint64, coinbase common.Address, random common.Hash, withdrawals types.Withdrawals, noTxs bool, transactions types.Transactions, gasLimit *uint64) (*types.Block, *big.Int, error) {</span>
 	req := &amp;getWorkReq{
 		params: &amp;generateParams{
 			timestamp:   timestamp,
<span class="term-fg36">@@ -1237,6 +1275,8 @@</span> 			random:      random,
 			withdrawals: withdrawals,
 			noUncle:     true,
 			noTxs:       noTxs,
<span class="term-fg32">+			txs:         transactions,</span>
<span class="term-fg32">+			gasLimit:    gasLimit,</span>
 		},
 		result: make(chan *newPayloadResult, 1),
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a67af10b7f57020311da953d"role="button" aria-expanded="false" aria-controls="id-a67af10b7f57020311da953d">
        
            <div class="col-12 col-sm-9 text-start"><h3>Tx-pool tx cost updates</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+409</span></div>
                <div class="text-start"><span class="text-danger">-36</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a67af10b7f57020311da953d">
        <div><p>Transaction queueing and inclusion needs to account for the L1 cost component.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2935043654522f893bca0d46" role="button"
                   aria-expanded="false" aria-controls="id-2935043654522f893bca0d46">
                    <code>core/txpool/list.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/txpool/list.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/txpool/list.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+45</span></div>
                        <div class="text-start"><span class="text-danger">-9</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2935043654522f893bca0d46"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;list.go op-geth&#47;core&#47;txpool&#47;list.go</span>
<span class="term-fg1">index 062cbbf63e6a546b43ae1ecf3ad6c5237d856cd6..33989414666e7a6fd9f43070cbfee0a46fc1cdb2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;list.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;txpool&#47;list.go</span>
<span class="term-fg36">@@ -246,6 +246,15 @@</span> 	cache := m.flatten()
 	return cache[len(cache)-1]
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; FirstElement returns the first element from the heap (guaranteed to be lowest), thus, the</span>
<span class="term-fg32">+&#47;&#47; transaction with the lowest nonce. Returns nil if there are no elements.</span>
<span class="term-fg32">+func (m *sortedMap) FirstElement() *types.Transaction {</span>
<span class="term-fg32">+	if m.Len() == 0 {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return m.Get((*m.index)[0])</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; list is a &quot;list&quot; of transactions belonging to an account, sorted by account
 &#47;&#47; nonce. The same type can be used both for storing contiguous transactions for
 &#47;&#47; the executable&#47;pending queue; and for storing gapped transactions for the non-
<span class="term-fg36">@@ -254,17 +263,19 @@</span> type list struct {
 	strict bool       &#47;&#47; Whether nonces are strictly continuous or not
 	txs    *sortedMap &#47;&#47; Heap indexed sorted hash map of the transactions
&nbsp;
<span class="term-fg31">-	costcap *big.Int &#47;&#47; Price of the highest costing transaction (reset only if exceeds balance)</span>
<span class="term-fg31">-	gascap  uint64   &#47;&#47; Gas limit of the highest spending transaction (reset only if exceeds block limit)</span>
<span class="term-fg32">+	costcap   *big.Int &#47;&#47; Price of the highest costing transaction (reset only if exceeds balance)</span>
<span class="term-fg32">+	gascap    uint64   &#47;&#47; Gas limit of the highest spending transaction (reset only if exceeds block limit)</span>
<span class="term-fg32">+	totalcost *big.Int &#47;&#47; Total cost of all transactions in the list</span>
 }
&nbsp;
 &#47;&#47; newList create a new transaction list for maintaining nonce-indexable fast,
 &#47;&#47; gapped, sortable transaction lists.
 func newList(strict bool) *list {
 	return &amp;list{
<span class="term-fg31">-		strict:  strict,</span>
<span class="term-fg31">-		txs:     newSortedMap(),</span>
<span class="term-fg31">-		costcap: new(big.Int),</span>
<span class="term-fg32">+		strict:    strict,</span>
<span class="term-fg32">+		txs:       newSortedMap(),</span>
<span class="term-fg32">+		costcap:   new(big.Int),</span>
<span class="term-fg32">+		totalcost: new(big.Int),</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -302,7 +313,11 @@</span> 		&#47;&#47; this is accurate for low (Wei-level) gas price replacements.
 		if tx.GasFeeCapIntCmp(thresholdFeeCap) &lt; 0 || tx.GasTipCapIntCmp(thresholdTip) &lt; 0 {
 			return false, nil
 		}
<span class="term-fg32">+		&#47;&#47; Old is being replaced, subtract old cost</span>
<span class="term-fg32">+		l.subTotalCost([]*types.Transaction{old})</span>
 	}
<span class="term-fg32">+	&#47;&#47; Add new tx cost to totalcost</span>
<span class="term-fg32">+	l.totalcost.Add(l.totalcost, tx.Cost())</span>
 	&#47;&#47; Otherwise overwrite the old transaction with the current one
 	l.txs.Put(tx)
 	if cost := tx.Cost(); l.costcap.Cmp(cost) &lt; 0 {
<span class="term-fg36">@@ -318,7 +333,9 @@</span> &#47;&#47; Forward removes all transactions from the list with a nonce lower than the
 &#47;&#47; provided threshold. Every removed transaction is returned for any post-removal
 &#47;&#47; maintenance.
 func (l *list) Forward(threshold uint64) types.Transactions {
<span class="term-fg31">-	return l.txs.Forward(threshold)</span>
<span class="term-fg32">+	txs := l.txs.Forward(threshold)</span>
<span class="term-fg32">+	l.subTotalCost(txs)</span>
<span class="term-fg32">+	return txs</span>
 }
&nbsp;
 &#47;&#47; Filter removes all transactions from the list with a cost or gas limit higher
<span class="term-fg36">@@ -357,6 +374,9 @@</span> 			}
 		}
 		invalids = l.txs.filter(func(tx *types.Transaction) bool { return tx.Nonce() &gt; lowest })
 	}
<span class="term-fg32">+	&#47;&#47; Reset total cost</span>
<span class="term-fg32">+	l.subTotalCost(removed)</span>
<span class="term-fg32">+	l.subTotalCost(invalids)</span>
 	l.txs.reheap()
 	return removed, invalids
 }
<span class="term-fg36">@@ -364,7 +384,9 @@</span>
 &#47;&#47; Cap places a hard limit on the number of items, returning all transactions
 &#47;&#47; exceeding that limit.
 func (l *list) Cap(threshold int) types.Transactions {
<span class="term-fg31">-	return l.txs.Cap(threshold)</span>
<span class="term-fg32">+	txs := l.txs.Cap(threshold)</span>
<span class="term-fg32">+	l.subTotalCost(txs)</span>
<span class="term-fg32">+	return txs</span>
 }
&nbsp;
 &#47;&#47; Remove deletes a transaction from the maintained list, returning whether the
<span class="term-fg36">@@ -376,9 +398,12 @@</span> 	nonce := tx.Nonce()
 	if removed := l.txs.Remove(nonce); !removed {
 		return false, nil
 	}
<span class="term-fg32">+	l.subTotalCost([]*types.Transaction{tx})</span>
 	&#47;&#47; In strict mode, filter out non-executable transactions
 	if l.strict {
<span class="term-fg31">-		return true, l.txs.Filter(func(tx *types.Transaction) bool { return tx.Nonce() &gt; nonce })</span>
<span class="term-fg32">+		txs := l.txs.Filter(func(tx *types.Transaction) bool { return tx.Nonce() &gt; nonce })</span>
<span class="term-fg32">+		l.subTotalCost(txs)</span>
<span class="term-fg32">+		return true, txs</span>
 	}
 	return true, nil
 }
<span class="term-fg36">@@ -391,7 +416,9 @@</span> &#47;&#47; Note, all transactions with nonces lower than start will also be returned to
 &#47;&#47; prevent getting into and invalid state. This is not something that should ever
 &#47;&#47; happen but better to be self correcting than failing!
 func (l *list) Ready(start uint64) types.Transactions {
<span class="term-fg31">-	return l.txs.Ready(start)</span>
<span class="term-fg32">+	txs := l.txs.Ready(start)</span>
<span class="term-fg32">+	l.subTotalCost(txs)</span>
<span class="term-fg32">+	return txs</span>
 }
&nbsp;
 &#47;&#47; Len returns the length of the transaction list.
<span class="term-fg36">@@ -415,6 +442,14 @@</span> &#47;&#47; LastElement returns the last element of a flattened list, thus, the
 &#47;&#47; transaction with the highest nonce
 func (l *list) LastElement() *types.Transaction {
 	return l.txs.LastElement()
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; subTotalCost subtracts the cost of the given transactions from the</span>
<span class="term-fg32">+&#47;&#47; total cost of all transactions.</span>
<span class="term-fg32">+func (l *list) subTotalCost(txs []*types.Transaction) {</span>
<span class="term-fg32">+	for _, tx := range txs {</span>
<span class="term-fg32">+		l.totalcost.Sub(l.totalcost, tx.Cost())</span>
<span class="term-fg32">+	}</span>
 }
&nbsp;
 &#47;&#47; priceHeap is a heap.Interface implementation over transactions for retrieving
<span class="term-fg36">@@ -561,6 +596,7 @@</span> }
&nbsp;
 &#47;&#47; Discard finds a number of most underpriced transactions, removes them from the
 &#47;&#47; priced list and returns them for further removal from the entire pool.
<span class="term-fg32">+&#47;&#47; If noPending is set to true, we will only consider the floating list</span>
 &#47;&#47;
 &#47;&#47; Note local transaction won&#39;t be considered for eviction.
 func (l *pricedList) Discard(slots int, force bool) (types.Transactions, bool) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9ba6e2f220886d43ab52f956" role="button"
                   aria-expanded="false" aria-controls="id-9ba6e2f220886d43ab52f956">
                    <code>core/txpool/txpool2_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/txpool/txpool2_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+212</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9ba6e2f220886d43ab52f956"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;txpool2_test.go op-geth&#47;core&#47;txpool&#47;txpool2_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..20d6dd713a95d7022d98d4c3011ef106a09ee9e6</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;txpool&#47;txpool2_test.go</span>
<span class="term-fg36">@@ -0,0 +1,212 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2023 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+package txpool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func pricedValuedTransaction(nonce uint64, value int64, gaslimit uint64, gasprice *big.Int, key *ecdsa.PrivateKey) *types.Transaction {</span>
<span class="term-fg32">+	tx, _ := types.SignTx(types.NewTransaction(nonce, common.Address{}, big.NewInt(value), gaslimit, gasprice, nil), types.HomesteadSigner{}, key)</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func count(t *testing.T, pool *TxPool) (pending int, queued int) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	pending, queued = pool.stats()</span>
<span class="term-fg32">+	if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return pending, queued</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func fillPool(t *testing.T, pool *TxPool) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	&#47;&#47; Create a number of test accounts, fund them and make transactions</span>
<span class="term-fg32">+	executableTxs := types.Transactions{}</span>
<span class="term-fg32">+	nonExecutableTxs := types.Transactions{}</span>
<span class="term-fg32">+	for i := 0; i &lt; 384; i++ {</span>
<span class="term-fg32">+		key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+		pool.currentState.AddBalance(crypto.PubkeyToAddress(key.PublicKey), big.NewInt(10000000000))</span>
<span class="term-fg32">+		&#47;&#47; Add executable ones</span>
<span class="term-fg32">+		for j := 0; j &lt; int(pool.config.AccountSlots); j++ {</span>
<span class="term-fg32">+			executableTxs = append(executableTxs, pricedTransaction(uint64(j), 100000, big.NewInt(300), key))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Import the batch and verify that limits have been enforced</span>
<span class="term-fg32">+	pool.AddRemotesSync(executableTxs)</span>
<span class="term-fg32">+	pool.AddRemotesSync(nonExecutableTxs)</span>
<span class="term-fg32">+	pending, queued := pool.Stats()</span>
<span class="term-fg32">+	slots := pool.all.Slots()</span>
<span class="term-fg32">+	&#47;&#47; sanity-check that the test prerequisites are ok (pending full)</span>
<span class="term-fg32">+	if have, want := pending, slots; have != want {</span>
<span class="term-fg32">+		t.Fatalf(&quot;have %d, want %d&quot;, have, want)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if have, want := queued, 0; have != want {</span>
<span class="term-fg32">+		t.Fatalf(&quot;have %d, want %d&quot;, have, want)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	t.Logf(&quot;pool.config: GlobalSlots=%d, GlobalQueue=%d\n&quot;, pool.config.GlobalSlots, pool.config.GlobalQueue)</span>
<span class="term-fg32">+	t.Logf(&quot;pending: %d queued: %d, all: %d\n&quot;, pending, queued, slots)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Tests that if a batch high-priced of non-executables arrive, they do not kick out</span>
<span class="term-fg32">+&#47;&#47; executable transactions</span>
<span class="term-fg32">+func TestTransactionFutureAttack(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the pool to test the limit enforcement with</span>
<span class="term-fg32">+	statedb, _ := state.New(common.Hash{}, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := &amp;testBlockChain{1000000, statedb, new(event.Feed)}</span>
<span class="term-fg32">+	config := testTxPoolConfig</span>
<span class="term-fg32">+	config.GlobalQueue = 100</span>
<span class="term-fg32">+	config.GlobalSlots = 100</span>
<span class="term-fg32">+	pool := NewTxPool(config, eip1559Config, blockchain)</span>
<span class="term-fg32">+	defer pool.Stop()</span>
<span class="term-fg32">+	fillPool(t, pool)</span>
<span class="term-fg32">+	pending, _ := pool.Stats()</span>
<span class="term-fg32">+	&#47;&#47; Now, future transaction attack starts, let&#39;s add a bunch of expensive non-executables, and see if the pending-count drops</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+		pool.currentState.AddBalance(crypto.PubkeyToAddress(key.PublicKey), big.NewInt(100000000000))</span>
<span class="term-fg32">+		futureTxs := types.Transactions{}</span>
<span class="term-fg32">+		for j := 0; j &lt; int(pool.config.GlobalSlots+pool.config.GlobalQueue); j++ {</span>
<span class="term-fg32">+			futureTxs = append(futureTxs, pricedTransaction(1000+uint64(j), 100000, big.NewInt(500), key))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		for i := 0; i &lt; 5; i++ {</span>
<span class="term-fg32">+			pool.AddRemotesSync(futureTxs)</span>
<span class="term-fg32">+			newPending, newQueued := count(t, pool)</span>
<span class="term-fg32">+			t.Logf(&quot;pending: %d queued: %d, all: %d\n&quot;, newPending, newQueued, pool.all.Slots())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	newPending, _ := pool.Stats()</span>
<span class="term-fg32">+	&#47;&#47; Pending should not have been touched</span>
<span class="term-fg32">+	if have, want := newPending, pending; have &lt; want {</span>
<span class="term-fg32">+		t.Errorf(&quot;wrong pending-count, have %d, want %d (GlobalSlots: %d)&quot;,</span>
<span class="term-fg32">+			have, want, pool.config.GlobalSlots)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Tests that if a batch high-priced of non-executables arrive, they do not kick out</span>
<span class="term-fg32">+&#47;&#47; executable transactions</span>
<span class="term-fg32">+func TestTransactionFuture1559(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+	&#47;&#47; Create the pool to test the pricing enforcement with</span>
<span class="term-fg32">+	statedb, _ := state.New(common.Hash{}, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := &amp;testBlockChain{1000000, statedb, new(event.Feed)}</span>
<span class="term-fg32">+	pool := NewTxPool(testTxPoolConfig, eip1559Config, blockchain)</span>
<span class="term-fg32">+	defer pool.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create a number of test accounts, fund them and make transactions</span>
<span class="term-fg32">+	fillPool(t, pool)</span>
<span class="term-fg32">+	pending, _ := pool.Stats()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Now, future transaction attack starts, let&#39;s add a bunch of expensive non-executables, and see if the pending-count drops</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+		pool.currentState.AddBalance(crypto.PubkeyToAddress(key.PublicKey), big.NewInt(100000000000))</span>
<span class="term-fg32">+		futureTxs := types.Transactions{}</span>
<span class="term-fg32">+		for j := 0; j &lt; int(pool.config.GlobalSlots+pool.config.GlobalQueue); j++ {</span>
<span class="term-fg32">+			futureTxs = append(futureTxs, dynamicFeeTx(1000+uint64(j), 100000, big.NewInt(200), big.NewInt(101), key))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		pool.AddRemotesSync(futureTxs)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	newPending, _ := pool.Stats()</span>
<span class="term-fg32">+	&#47;&#47; Pending should not have been touched</span>
<span class="term-fg32">+	if have, want := newPending, pending; have != want {</span>
<span class="term-fg32">+		t.Errorf(&quot;Wrong pending-count, have %d, want %d (GlobalSlots: %d)&quot;,</span>
<span class="term-fg32">+			have, want, pool.config.GlobalSlots)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Tests that if a batch of balance-overdraft txs arrive, they do not kick out</span>
<span class="term-fg32">+&#47;&#47; executable transactions</span>
<span class="term-fg32">+func TestTransactionZAttack(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+	&#47;&#47; Create the pool to test the pricing enforcement with</span>
<span class="term-fg32">+	statedb, _ := state.New(common.Hash{}, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := &amp;testBlockChain{1000000, statedb, new(event.Feed)}</span>
<span class="term-fg32">+	pool := NewTxPool(testTxPoolConfig, eip1559Config, blockchain)</span>
<span class="term-fg32">+	defer pool.Stop()</span>
<span class="term-fg32">+	&#47;&#47; Create a number of test accounts, fund them and make transactions</span>
<span class="term-fg32">+	fillPool(t, pool)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	countInvalidPending := func() int {</span>
<span class="term-fg32">+		t.Helper()</span>
<span class="term-fg32">+		var ivpendingNum int</span>
<span class="term-fg32">+		pendingtxs, _ := pool.Content()</span>
<span class="term-fg32">+		for account, txs := range pendingtxs {</span>
<span class="term-fg32">+			cur_balance := new(big.Int).Set(pool.currentState.GetBalance(account))</span>
<span class="term-fg32">+			for _, tx := range txs {</span>
<span class="term-fg32">+				if cur_balance.Cmp(tx.Value()) &lt;= 0 {</span>
<span class="term-fg32">+					ivpendingNum++</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					cur_balance.Sub(cur_balance, tx.Value())</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return ivpendingNum</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ivPending := countInvalidPending()</span>
<span class="term-fg32">+	t.Logf(&quot;invalid pending: %d\n&quot;, ivPending)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Now, DETER-Z attack starts, let&#39;s add a bunch of expensive non-executables (from N accounts) along with balance-overdraft txs (from one account), and see if the pending-count drops</span>
<span class="term-fg32">+	for j := 0; j &lt; int(pool.config.GlobalQueue); j++ {</span>
<span class="term-fg32">+		futureTxs := types.Transactions{}</span>
<span class="term-fg32">+		key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+		pool.currentState.AddBalance(crypto.PubkeyToAddress(key.PublicKey), big.NewInt(100000000000))</span>
<span class="term-fg32">+		futureTxs = append(futureTxs, pricedTransaction(1000+uint64(j), 21000, big.NewInt(500), key))</span>
<span class="term-fg32">+		pool.AddRemotesSync(futureTxs)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	overDraftTxs := types.Transactions{}</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+		pool.currentState.AddBalance(crypto.PubkeyToAddress(key.PublicKey), big.NewInt(100000000000))</span>
<span class="term-fg32">+		for j := 0; j &lt; int(pool.config.GlobalSlots); j++ {</span>
<span class="term-fg32">+			overDraftTxs = append(overDraftTxs, pricedValuedTransaction(uint64(j), 60000000000, 21000, big.NewInt(500), key))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	pool.AddRemotesSync(overDraftTxs)</span>
<span class="term-fg32">+	pool.AddRemotesSync(overDraftTxs)</span>
<span class="term-fg32">+	pool.AddRemotesSync(overDraftTxs)</span>
<span class="term-fg32">+	pool.AddRemotesSync(overDraftTxs)</span>
<span class="term-fg32">+	pool.AddRemotesSync(overDraftTxs)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	newPending, newQueued := count(t, pool)</span>
<span class="term-fg32">+	newIvPending := countInvalidPending()</span>
<span class="term-fg32">+	t.Logf(&quot;pool.all.Slots(): %d\n&quot;, pool.all.Slots())</span>
<span class="term-fg32">+	t.Logf(&quot;pending: %d queued: %d, all: %d\n&quot;, newPending, newQueued, pool.all.Slots())</span>
<span class="term-fg32">+	t.Logf(&quot;invalid pending: %d\n&quot;, newIvPending)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Pending should not have been touched</span>
<span class="term-fg32">+	if newIvPending != ivPending {</span>
<span class="term-fg32">+		t.Errorf(&quot;Wrong invalid pending-count, have %d, want %d (GlobalSlots: %d, queued: %d)&quot;,</span>
<span class="term-fg32">+			newIvPending, ivPending, pool.config.GlobalSlots, newQueued)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-50d3e43a4d97fc88a2068e29" role="button"
                   aria-expanded="false" aria-controls="id-50d3e43a4d97fc88a2068e29">
                    <code>core/txpool/txpool_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/txpool/txpool_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/txpool/txpool_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+24</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-50d3e43a4d97fc88a2068e29"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;txpool_test.go op-geth&#47;core&#47;txpool&#47;txpool_test.go</span>
<span class="term-fg1">index bd82622f8de6db8ed22b6617bb5e8fdec77d088b..c4c62db2d6da7d0fd896bc5ff37372e40102751f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;txpool_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;txpool&#47;txpool_test.go</span>
<span class="term-fg36">@@ -64,14 +64,15 @@</span> 	statedb       *state.StateDB
 	chainHeadFeed *event.Feed
 }
&nbsp;
<span class="term-fg31">-func (bc *testBlockChain) CurrentBlock() *types.Block {</span>
<span class="term-fg31">-	return types.NewBlock(&amp;types.Header{</span>
<span class="term-fg32">+func (bc *testBlockChain) CurrentBlock() *types.Header {</span>
<span class="term-fg32">+	return &amp;types.Header{</span>
<span class="term-fg32">+		Number:   new(big.Int),</span>
 		GasLimit: atomic.LoadUint64(&amp;bc.gasLimit),
<span class="term-fg31">-	}, nil, nil, nil, trie.NewStackTrie(nil))</span>
<span class="term-fg32">+	}</span>
 }
&nbsp;
 func (bc *testBlockChain) GetBlock(hash common.Hash, number uint64) *types.Block {
<span class="term-fg31">-	return bc.CurrentBlock()</span>
<span class="term-fg32">+	return types.NewBlock(bc.CurrentBlock(), nil, nil, nil, trie.NewStackTrie(nil))</span>
 }
&nbsp;
 func (bc *testBlockChain) StateAt(common.Hash) (*state.StateDB, error) {
<span class="term-fg36">@@ -156,6 +157,9 @@</span> 			}
 		}
 		if nonce := pool.pendingNonces.get(addr); nonce != last+1 {
 			return fmt.Errorf(&quot;pending nonce mismatch: have %v, want %v&quot;, nonce, last+1)
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if txs.totalcost.Cmp(common.Big0) &lt; 0 {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;totalcost went negative: %v&quot;, txs.totalcost)</span>
 		}
 	}
 	return nil
<span class="term-fg36">@@ -1104,7 +1108,7 @@</span> 	pool, key := setupPool()
 	defer pool.Stop()
&nbsp;
 	account := crypto.PubkeyToAddress(key.PublicKey)
<span class="term-fg31">-	testAddBalance(pool, account, big.NewInt(1000000))</span>
<span class="term-fg32">+	testAddBalance(pool, account, big.NewInt(1000000000000))</span>
&nbsp;
 	&#47;&#47; Keep track of transaction events to ensure all executables get announced
 	events := make(chan core.NewTxsEvent, testTxPoolConfig.AccountQueue+5)
<span class="term-fg36">@@ -1583,7 +1587,7 @@</span> 	&#47;&#47; Create a number of test accounts and fund them
 	keys := make([]*ecdsa.PrivateKey, 3)
 	for i := 0; i &lt; len(keys); i++ {
 		keys[i], _ = crypto.GenerateKey()
<span class="term-fg31">-		testAddBalance(pool, crypto.PubkeyToAddress(keys[i].PublicKey), big.NewInt(1000*1000000))</span>
<span class="term-fg32">+		testAddBalance(pool, crypto.PubkeyToAddress(keys[i].PublicKey), big.NewInt(100000*1000000))</span>
 	}
 	&#47;&#47; Create transaction (both pending and queued) with a linearly growing gasprice
 	for i := uint64(0); i &lt; 500; i++ {
<span class="term-fg36">@@ -1662,7 +1666,7 @@</span> 	sub := pool.txFeed.Subscribe(events)
 	defer sub.Unsubscribe()
&nbsp;
 	&#47;&#47; Create a number of test accounts and fund them
<span class="term-fg31">-	keys := make([]*ecdsa.PrivateKey, 4)</span>
<span class="term-fg32">+	keys := make([]*ecdsa.PrivateKey, 5)</span>
 	for i := 0; i &lt; len(keys); i++ {
 		keys[i], _ = crypto.GenerateKey()
 		testAddBalance(pool, crypto.PubkeyToAddress(keys[i].PublicKey), big.NewInt(1000000))
<span class="term-fg36">@@ -1698,6 +1702,10 @@</span> 	&#47;&#47; Ensure that adding an underpriced transaction on block limit fails
 	if err := pool.AddRemote(pricedTransaction(0, 100000, big.NewInt(1), keys[1])); err != ErrUnderpriced {
 		t.Fatalf(&quot;adding underpriced pending transaction error mismatch: have %v, want %v&quot;, err, ErrUnderpriced)
 	}
<span class="term-fg32">+	&#47;&#47; Replace a future transaction with a future transaction</span>
<span class="term-fg32">+	if err := pool.AddRemote(pricedTransaction(1, 100000, big.NewInt(2), keys[1])); err != nil { &#47;&#47; +K1:1 =&gt; -K1:1 =&gt; Pend K0:0, K0:1, K2:0; Que K1:1</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Ensure that adding high priced transactions drops cheap ones, but not own
 	if err := pool.AddRemote(pricedTransaction(0, 100000, big.NewInt(3), keys[1])); err != nil { &#47;&#47; +K1:0 =&gt; -K1:1 =&gt; Pend K0:0, K0:1, K1:0, K2:0; Que -
 		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)
<span class="term-fg36">@@ -1708,6 +1716,10 @@</span> 	}
 	if err := pool.AddRemote(pricedTransaction(3, 100000, big.NewInt(5), keys[1])); err != nil { &#47;&#47; +K1:3 =&gt; -K0:1 =&gt; Pend K1:0, K2:0; Que K1:2 K1:3
 		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)
 	}
<span class="term-fg32">+	&#47;&#47; Ensure that replacing a pending transaction with a future transaction fails</span>
<span class="term-fg32">+	if err := pool.AddRemote(pricedTransaction(5, 100000, big.NewInt(6), keys[1])); err != ErrFutureReplacePending {</span>
<span class="term-fg32">+		t.Fatalf(&quot;adding future replace transaction error mismatch: have %v, want %v&quot;, err, ErrFutureReplacePending)</span>
<span class="term-fg32">+	}</span>
 	pending, queued = pool.Stats()
 	if pending != 2 {
 		t.Fatalf(&quot;pending transactions mismatched: have %d, want %d&quot;, pending, 2)
<span class="term-fg36">@@ -1715,7 +1727,7 @@</span> 	}
 	if queued != 2 {
 		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 2)
 	}
<span class="term-fg31">-	if err := validateEvents(events, 1); err != nil {</span>
<span class="term-fg32">+	if err := validateEvents(events, 2); err != nil {</span>
 		t.Fatalf(&quot;additional event firing failed: %v&quot;, err)
 	}
 	if err := validatePoolInternals(pool); err != nil {
<span class="term-fg36">@@ -1877,11 +1889,11 @@</span> 	if err := pool.AddRemote(tx); err != nil { &#47;&#47; +K1:0, -K1:1 =&gt; Pend K0:0, K0:1, K1:0, K2:0; Que -
 		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)
 	}
&nbsp;
<span class="term-fg31">-	tx = pricedTransaction(2, 100000, big.NewInt(3), keys[1])</span>
<span class="term-fg32">+	tx = pricedTransaction(1, 100000, big.NewInt(3), keys[1])</span>
 	if err := pool.AddRemote(tx); err != nil { &#47;&#47; +K1:2, -K0:1 =&gt; Pend K0:0 K1:0, K2:0; Que K1:2
 		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)
 	}
<span class="term-fg31">-	tx = dynamicFeeTx(3, 100000, big.NewInt(4), big.NewInt(1), keys[1])</span>
<span class="term-fg32">+	tx = dynamicFeeTx(2, 100000, big.NewInt(4), big.NewInt(1), keys[1])</span>
 	if err := pool.AddRemote(tx); err != nil { &#47;&#47; +K1:3, -K1:0 =&gt; Pend K0:0 K2:0; Que K1:2 K1:3
 		t.Fatalf(&quot;failed to add well priced transaction: %v&quot;, err)
 	}
<span class="term-fg36">@@ -1892,7 +1904,7 @@</span> 	}
 	if queued != 2 {
 		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 2)
 	}
<span class="term-fg31">-	if err := validateEvents(events, 1); err != nil {</span>
<span class="term-fg32">+	if err := validateEvents(events, 2); err != nil {</span>
 		t.Fatalf(&quot;additional event firing failed: %v&quot;, err)
 	}
 	if err := validatePoolInternals(pool); err != nil {
<span class="term-fg36">@@ -2486,7 +2498,7 @@</span> 	pool, key := setupPool()
 	defer pool.Stop()
&nbsp;
 	account := crypto.PubkeyToAddress(key.PublicKey)
<span class="term-fg31">-	testAddBalance(pool, account, big.NewInt(1000000))</span>
<span class="term-fg32">+	testAddBalance(pool, account, big.NewInt(1000000000000000000))</span>
&nbsp;
 	batches := make([]types.Transactions, b.N)
 	for i := 0; i &lt; b.N; i++ {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7cc8ddd2049efa7f02821284" role="button"
                   aria-expanded="false" aria-controls="id-7cc8ddd2049efa7f02821284">
                    <code>core/txpool/txpool.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/txpool/txpool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/txpool/txpool.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+128</span></div>
                        <div class="text-start"><span class="text-danger">-15</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7cc8ddd2049efa7f02821284"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;txpool.go op-geth&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg1">index c80520186627954456fd8d17183d8d2ba0f9074a..9a918d10c619dc9c373dc9c6fe835b41ce6b92ce 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg36">@@ -17,6 +17,7 @@</span>
 package txpool
&nbsp;
 import (
<span class="term-fg32">+	&quot;container&#47;heap&quot;</span>
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&quot;
<span class="term-fg36">@@ -87,6 +88,14 @@</span> 	&#47;&#47; ErrOversizedData is returned if the input data of a transaction is greater
 	&#47;&#47; than some meaningful limit a user might use. This is not a consensus error
 	&#47;&#47; making the transaction invalid, rather a DOS protection.
 	ErrOversizedData = errors.New(&quot;oversized data&quot;)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; ErrFutureReplacePending is returned if a future transaction replaces a pending</span>
<span class="term-fg32">+	&#47;&#47; transaction. Future transactions should only be able to replace other future transactions.</span>
<span class="term-fg32">+	ErrFutureReplacePending = errors.New(&quot;future transaction tries to replace pending&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; ErrOverdraft is returned if a transaction would cause the senders balance to go negative</span>
<span class="term-fg32">+	&#47;&#47; thus invalidating a potential large number of transactions.</span>
<span class="term-fg32">+	ErrOverdraft = errors.New(&quot;transaction would cause overdraft&quot;)</span>
 )
&nbsp;
 var (
<span class="term-fg36">@@ -145,7 +154,7 @@</span>
 &#47;&#47; blockChain provides the state of blockchain and current gas limit to do
 &#47;&#47; some pre checks in tx pool and event subscribers.
 type blockChain interface {
<span class="term-fg31">-	CurrentBlock() *types.Block</span>
<span class="term-fg32">+	CurrentBlock() *types.Header</span>
 	GetBlock(hash common.Hash, number uint64) *types.Block
 	StateAt(root common.Hash) (*state.StateDB, error)
&nbsp;
<span class="term-fg36">@@ -252,6 +261,8 @@</span> 	currentState  *state.StateDB &#47;&#47; Current state in the blockchain head
 	pendingNonces *noncer        &#47;&#47; Pending state tracking virtual nonces
 	currentMaxGas uint64         &#47;&#47; Current gas limit for transaction caps
&nbsp;
<span class="term-fg32">+	l1CostFn func(dataGas types.RollupGasData, isDepositTx bool) *big.Int &#47;&#47; Current L1 fee cost function</span>
<span class="term-fg32">+</span>
 	locals  *accountSet &#47;&#47; Set of local transaction to exempt from eviction rules
 	journal *journal    &#47;&#47; Journal of local transaction to back up to disk
&nbsp;
<span class="term-fg36">@@ -309,7 +320,7 @@</span> 		log.Info(&quot;Setting new local account&quot;, &quot;address&quot;, addr)
 		pool.locals.add(addr)
 	}
 	pool.priced = newPricedList(pool.all)
<span class="term-fg31">-	pool.reset(nil, chain.CurrentBlock().Header())</span>
<span class="term-fg32">+	pool.reset(nil, chain.CurrentBlock())</span>
&nbsp;
 	&#47;&#47; Start the reorg loop early so it can handle requests generated during journal loading.
 	pool.wg.Add(1)
<span class="term-fg36">@@ -361,8 +372,8 @@</span> 		select {
 		&#47;&#47; Handle ChainHeadEvent
 		case ev := &lt;-pool.chainHeadCh:
 			if ev.Block != nil {
<span class="term-fg31">-				pool.requestReset(head.Header(), ev.Block.Header())</span>
<span class="term-fg31">-				head = ev.Block</span>
<span class="term-fg32">+				pool.requestReset(head, ev.Block.Header())</span>
<span class="term-fg32">+				head = ev.Block.Header()</span>
 			}
&nbsp;
 		&#47;&#47; System shutdown.
<span class="term-fg36">@@ -588,6 +599,12 @@</span>
 &#47;&#47; validateTx checks whether a transaction is valid according to the consensus
 &#47;&#47; rules and adheres to some heuristic limits of the local node (price and size).
 func (pool *TxPool) validateTx(tx *types.Transaction, local bool) error {
<span class="term-fg32">+	&#47;&#47; No unauthenticated deposits allowed in the transaction pool.</span>
<span class="term-fg32">+	&#47;&#47; This is for spam protection, not consensus,</span>
<span class="term-fg32">+	&#47;&#47; as the external engine-API user authenticates deposits.</span>
<span class="term-fg32">+	if tx.Type() == types.DepositTxType {</span>
<span class="term-fg32">+		return core.ErrTxTypeNotSupported</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Accept only legacy transactions until EIP-2718&#47;2930 activates.
 	if !pool.eip2718 &amp;&amp; tx.Type() != types.LegacyTxType {
 		return core.ErrTxTypeNotSupported
<span class="term-fg36">@@ -639,9 +656,33 @@</span> 		return core.ErrNonceTooLow
 	}
 	&#47;&#47; Transactor should have enough funds to cover the costs
 	&#47;&#47; cost == V + GP * GL
<span class="term-fg31">-	if pool.currentState.GetBalance(from).Cmp(tx.Cost()) &lt; 0 {</span>
<span class="term-fg32">+	cost := tx.Cost()</span>
<span class="term-fg32">+	if l1Cost := pool.l1CostFn(tx.RollupDataGas(), tx.IsDepositTx()); l1Cost != nil { &#47;&#47; add rollup cost</span>
<span class="term-fg32">+		cost = cost.Add(cost, l1Cost)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	balance := pool.currentState.GetBalance(from)</span>
<span class="term-fg32">+	if balance.Cmp(cost) &lt; 0 {</span>
 		return core.ErrInsufficientFunds
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Verify that replacing transactions will not result in overdraft</span>
<span class="term-fg32">+	list := pool.pending[from]</span>
<span class="term-fg32">+	if list != nil { &#47;&#47; Sender already has pending txs</span>
<span class="term-fg32">+		sum := new(big.Int).Add(cost, list.totalcost)</span>
<span class="term-fg32">+		if repl := list.txs.Get(tx.Nonce()); repl != nil {</span>
<span class="term-fg32">+			&#47;&#47; Deduct the cost of a transaction replaced by this</span>
<span class="term-fg32">+			replL1Cost := repl.Cost()</span>
<span class="term-fg32">+			if l1Cost := pool.l1CostFn(tx.RollupDataGas(), tx.IsDepositTx()); l1Cost != nil { &#47;&#47; add rollup cost</span>
<span class="term-fg32">+				replL1Cost = replL1Cost.Add(cost, l1Cost)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			sum.Sub(sum, replL1Cost)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if balance.Cmp(sum) &lt; 0 {</span>
<span class="term-fg32">+			log.Trace(&quot;Replacing transactions would overdraft&quot;, &quot;sender&quot;, from, &quot;balance&quot;, pool.currentState.GetBalance(from), &quot;required&quot;, sum)</span>
<span class="term-fg32">+			return ErrOverdraft</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Ensure the transaction has more gas than the basic tx fee.
 	intrGas, err := core.IntrinsicGas(tx.Data(), tx.AccessList(), tx.To() == nil, true, pool.istanbul, pool.shanghai)
 	if err != nil {
<span class="term-fg36">@@ -678,6 +719,10 @@</span> 		log.Trace(&quot;Discarding invalid transaction&quot;, &quot;hash&quot;, hash, &quot;err&quot;, err)
 		invalidTxMeter.Mark(1)
 		return false, err
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; already validated by this point</span>
<span class="term-fg32">+	from, _ := types.Sender(pool.signer, tx)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; If the transaction pool is full, discard underpriced transactions
 	if uint64(pool.all.Slots()+numSlots(tx)) &gt; pool.config.GlobalSlots+pool.config.GlobalQueue {
 		&#47;&#47; If the new transaction is underpriced, don&#39;t accept it
<span class="term-fg36">@@ -686,6 +731,7 @@</span> 			log.Trace(&quot;Discarding underpriced transaction&quot;, &quot;hash&quot;, hash, &quot;gasTipCap&quot;, tx.GasTipCap(), &quot;gasFeeCap&quot;, tx.GasFeeCap())
 			underpricedTxMeter.Mark(1)
 			return false, ErrUnderpriced
 		}
<span class="term-fg32">+</span>
 		&#47;&#47; We&#39;re about to replace a transaction. The reorg does a more thorough
 		&#47;&#47; analysis of what to remove and how, but it runs async. We don&#39;t want to
 		&#47;&#47; do too many replacements between reorg-runs, so we cap the number of
<span class="term-fg36">@@ -706,17 +752,37 @@</span> 			log.Trace(&quot;Discarding overflown transaction&quot;, &quot;hash&quot;, hash)
 			overflowedTxMeter.Mark(1)
 			return false, ErrTxPoolOverflow
 		}
<span class="term-fg31">-		&#47;&#47; Bump the counter of rejections-since-reorg</span>
<span class="term-fg31">-		pool.changesSinceReorg += len(drop)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; If the new transaction is a future transaction it should never churn pending transactions</span>
<span class="term-fg32">+		if pool.isFuture(from, tx) {</span>
<span class="term-fg32">+			var replacesPending bool</span>
<span class="term-fg32">+			for _, dropTx := range drop {</span>
<span class="term-fg32">+				dropSender, _ := types.Sender(pool.signer, dropTx)</span>
<span class="term-fg32">+				if list := pool.pending[dropSender]; list != nil &amp;&amp; list.Overlaps(dropTx) {</span>
<span class="term-fg32">+					replacesPending = true</span>
<span class="term-fg32">+					break</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; Add all transactions back to the priced queue</span>
<span class="term-fg32">+			if replacesPending {</span>
<span class="term-fg32">+				for _, dropTx := range drop {</span>
<span class="term-fg32">+					heap.Push(&amp;pool.priced.urgent, dropTx)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				log.Trace(&quot;Discarding future transaction replacing pending tx&quot;, &quot;hash&quot;, hash)</span>
<span class="term-fg32">+				return false, ErrFutureReplacePending</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
 		&#47;&#47; Kick out the underpriced remote transactions.
 		for _, tx := range drop {
 			log.Trace(&quot;Discarding freshly underpriced transaction&quot;, &quot;hash&quot;, tx.Hash(), &quot;gasTipCap&quot;, tx.GasTipCap(), &quot;gasFeeCap&quot;, tx.GasFeeCap())
 			underpricedTxMeter.Mark(1)
<span class="term-fg31">-			pool.removeTx(tx.Hash(), false)</span>
<span class="term-fg32">+			dropped := pool.removeTx(tx.Hash(), false)</span>
<span class="term-fg32">+			pool.changesSinceReorg += dropped</span>
 		}
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Try to replace an existing transaction in the pending pool
<span class="term-fg31">-	from, _ := types.Sender(pool.signer, tx) &#47;&#47; already validated</span>
 	if list := pool.pending[from]; list != nil &amp;&amp; list.Overlaps(tx) {
 		&#47;&#47; Nonce already pending, check if required price bump is met
 		inserted, old := list.Add(tx, pool.config.PriceBump)
<span class="term-fg36">@@ -760,6 +826,20 @@</span> 	log.Trace(&quot;Pooled new future transaction&quot;, &quot;hash&quot;, hash, &quot;from&quot;, from, &quot;to&quot;, tx.To())
 	return replaced, nil
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; isFuture reports whether the given transaction is immediately executable.</span>
<span class="term-fg32">+func (pool *TxPool) isFuture(from common.Address, tx *types.Transaction) bool {</span>
<span class="term-fg32">+	list := pool.pending[from]</span>
<span class="term-fg32">+	if list == nil {</span>
<span class="term-fg32">+		return pool.pendingNonces.get(from) != tx.Nonce()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Sender has pending transactions.</span>
<span class="term-fg32">+	if old := list.txs.Get(tx.Nonce()); old != nil {</span>
<span class="term-fg32">+		return false &#47;&#47; It replaces a pending transaction.</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Not replacing, check if parent nonce exists in pending.</span>
<span class="term-fg32">+	return list.txs.Get(tx.Nonce()-1) == nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; enqueueTx inserts a new transaction into the non-executable transaction queue.
 &#47;&#47;
 &#47;&#47; Note, this method assumes the pool lock is held!
<span class="term-fg36">@@ -996,11 +1076,12 @@</span> }
&nbsp;
 &#47;&#47; removeTx removes a single transaction from the queue, moving all subsequent
 &#47;&#47; transactions back to the future queue.
<span class="term-fg31">-func (pool *TxPool) removeTx(hash common.Hash, outofbound bool) {</span>
<span class="term-fg32">+&#47;&#47; Returns the number of transactions removed from the pending queue.</span>
<span class="term-fg32">+func (pool *TxPool) removeTx(hash common.Hash, outofbound bool) int {</span>
 	&#47;&#47; Fetch the transaction we wish to delete
 	tx := pool.all.Get(hash)
 	if tx == nil {
<span class="term-fg31">-		return</span>
<span class="term-fg32">+		return 0</span>
 	}
 	addr, _ := types.Sender(pool.signer, tx) &#47;&#47; already validated during insertion
&nbsp;
<span class="term-fg36">@@ -1028,7 +1109,7 @@</span> 			&#47;&#47; Update the account nonce if needed
 			pool.pendingNonces.setIfLower(addr, tx.Nonce())
 			&#47;&#47; Reduce the pending counter
 			pendingGauge.Dec(int64(1 + len(invalids)))
<span class="term-fg31">-			return</span>
<span class="term-fg32">+			return 1 + len(invalids)</span>
 		}
 	}
 	&#47;&#47; Transaction is in the future queue
<span class="term-fg36">@@ -1042,6 +1123,7 @@</span> 			delete(pool.queue, addr)
 			delete(pool.beats, addr)
 		}
 	}
<span class="term-fg32">+	return 0</span>
 }
&nbsp;
 &#47;&#47; requestReset requests a pool reset to the new head block.
<span class="term-fg36">@@ -1285,13 +1367,23 @@</span> 						log.Error(&quot;Unrooted new chain seen by tx pool&quot;, &quot;block&quot;, newHead.Number, &quot;hash&quot;, newHead.Hash())
 						return
 					}
 				}
<span class="term-fg32">+				&#47;&#47; Do not insert deposit txs back into the pool</span>
<span class="term-fg32">+				&#47;&#47; (validateTx would still catch it if not filtered, but no need to re-inject in the first place).</span>
<span class="term-fg32">+				j := 0</span>
<span class="term-fg32">+				for _, tx := range discarded {</span>
<span class="term-fg32">+					if tx.Type() != types.DepositTxType {</span>
<span class="term-fg32">+						discarded[j] = tx</span>
<span class="term-fg32">+						j++</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				discarded = discarded[:j]</span>
 				reinject = types.TxDifference(discarded, included)
 			}
 		}
 	}
 	&#47;&#47; Initialize the internal state to the current head
 	if newHead == nil {
<span class="term-fg31">-		newHead = pool.chain.CurrentBlock().Header() &#47;&#47; Special case during testing</span>
<span class="term-fg32">+		newHead = pool.chain.CurrentBlock() &#47;&#47; Special case during testing</span>
 	}
 	statedb, err := pool.chain.StateAt(newHead.Root)
 	if err != nil {
<span class="term-fg36">@@ -1302,6 +1394,11 @@</span> 	pool.currentState = statedb
 	pool.pendingNonces = newNoncer(statedb)
 	pool.currentMaxGas = newHead.GasLimit
&nbsp;
<span class="term-fg32">+	costFn := types.NewL1CostFunc(pool.chainconfig, statedb)</span>
<span class="term-fg32">+	pool.l1CostFn = func(dataGas types.RollupGasData, isDepositTx bool) *big.Int {</span>
<span class="term-fg32">+		return costFn(newHead.Number.Uint64(), newHead.Time, dataGas, isDepositTx)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Inject any transactions discarded due to reorgs
 	log.Debug(&quot;Reinjecting stale transactions&quot;, &quot;count&quot;, len(reinject))
 	core.SenderCacher.Recover(pool.signer, reinject)
<span class="term-fg36">@@ -1335,8 +1432,16 @@</span> 			hash := tx.Hash()
 			pool.all.Remove(hash)
 		}
 		log.Trace(&quot;Removed old queued transactions&quot;, &quot;count&quot;, len(forwards))
<span class="term-fg32">+		balance := pool.currentState.GetBalance(addr)</span>
<span class="term-fg32">+		if !list.Empty() {</span>
<span class="term-fg32">+			&#47;&#47; Reduce the cost-cap by L1 rollup cost of the first tx if necessary. Other txs will get filtered out afterwards.</span>
<span class="term-fg32">+			el := list.txs.FirstElement()</span>
<span class="term-fg32">+			if l1Cost := pool.l1CostFn(el.RollupDataGas(), el.IsDepositTx()); l1Cost != nil {</span>
<span class="term-fg32">+				balance = new(big.Int).Sub(balance, l1Cost) &#47;&#47; negative big int is fine</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
 		&#47;&#47; Drop all transactions that are too costly (low balance or out of gas)
<span class="term-fg31">-		drops, _ := list.Filter(pool.currentState.GetBalance(addr), pool.currentMaxGas)</span>
<span class="term-fg32">+		drops, _ := list.Filter(balance, pool.currentMaxGas)</span>
 		for _, tx := range drops {
 			hash := tx.Hash()
 			pool.all.Remove(hash)
<span class="term-fg36">@@ -1532,8 +1637,16 @@</span> 			hash := tx.Hash()
 			pool.all.Remove(hash)
 			log.Trace(&quot;Removed old pending transaction&quot;, &quot;hash&quot;, hash)
 		}
<span class="term-fg32">+		balance := pool.currentState.GetBalance(addr)</span>
<span class="term-fg32">+		if !list.Empty() {</span>
<span class="term-fg32">+			&#47;&#47; Reduce the cost-cap by L1 rollup cost of the first tx if necessary. Other txs will get filtered out afterwards.</span>
<span class="term-fg32">+			el := list.txs.FirstElement()</span>
<span class="term-fg32">+			if l1Cost := pool.l1CostFn(el.RollupDataGas(), el.IsDepositTx()); l1Cost != nil {</span>
<span class="term-fg32">+				balance = new(big.Int).Sub(balance, l1Cost) &#47;&#47; negative big int is fine</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
 		&#47;&#47; Drop all transactions that are too costly (low balance or out of gas), and queue any invalids back for later
<span class="term-fg31">-		drops, invalids := list.Filter(pool.currentState.GetBalance(addr), pool.currentMaxGas)</span>
<span class="term-fg32">+		drops, invalids := list.Filter(balance, pool.currentMaxGas)</span>
 		for _, tx := range drops {
 			hash := tx.Hash()
 			log.Trace(&quot;Removed unpayable pending transaction&quot;, &quot;hash&quot;, hash)</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-83314443b976043a50572f30"role="button" aria-expanded="false" aria-controls="id-83314443b976043a50572f30">
        
            <div class="col-12 col-sm-9 text-start"><h2>Node modifications</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+147</span></div>
                <div class="text-start"><span class="text-danger">-20</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-83314443b976043a50572f30">
        <div><p>Changes to the node configuration and services.</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-85bc520e4b559392d7689bdf"role="button" aria-expanded="false" aria-controls="id-85bc520e4b559392d7689bdf">
        
            <div class="col-12 col-sm-9 text-start"><h3>CLI</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+108</span></div>
                <div class="text-start"><span class="text-danger">-11</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-85bc520e4b559392d7689bdf">
        <div></div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d9ce5641384c9ce45792afc5"role="button" aria-expanded="false" aria-controls="id-d9ce5641384c9ce45792afc5">
        
            <div class="col-12 col-sm-9 text-start"><h4>Flags</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+77</span></div>
                <div class="text-start"><span class="text-danger">-4</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d9ce5641384c9ce45792afc5">
        <div><p>Flag changes:
  - Transactions can be forwarded to an RPC for sequencing.
  - Historical calls can be forwarded to a legacy node.
  - The tx pool propagation can be enabled/disabled.
  - The Optimism bedrock fork activation can be changed for testing.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-42410a28eef8dc6841ff3583" role="button"
                   aria-expanded="false" aria-controls="id-42410a28eef8dc6841ff3583">
                    <code>cmd/utils/flags.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/utils/flags.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/utils/flags.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+56</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-42410a28eef8dc6841ff3583"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;utils&#47;flags.go op-geth&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">index 08de71ee831bfb9e29441c76226842e748108702..7b17390d97dff41d3cfe9b57bd0bc8e24b75bcf1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg36">@@ -34,6 +34,10 @@</span> 	&quot;strconv&quot;
 	&quot;strings&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg32">+	pcsclite &quot;github.com&#47;gballet&#47;go-libpcsclite&quot;</span>
<span class="term-fg32">+	gopsutil &quot;github.com&#47;shirou&#47;gopsutil&#47;mem&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg36">@@ -74,9 +78,6 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;netutil&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg31">-	pcsclite &quot;github.com&#47;gballet&#47;go-libpcsclite&quot;</span>
<span class="term-fg31">-	gopsutil &quot;github.com&#47;shirou&#47;gopsutil&#47;mem&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
 )
&nbsp;
 &#47;&#47; These are all the command line flags we support.
<span class="term-fg36">@@ -271,6 +272,21 @@</span> 	}
 	OverrideShanghai = &amp;cli.Uint64Flag{
 		Name:     &quot;override.shanghai&quot;,
 		Usage:    &quot;Manually specify the Shanghai fork timestamp, overriding the bundled setting&quot;,
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	OverrideOptimismBedrock = &amp;flags.BigFlag{</span>
<span class="term-fg32">+		Name:     &quot;override.bedrock&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manually specify OptimsimBedrock, overriding the bundled setting&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	OverrideOptimismRegolith = &amp;flags.BigFlag{</span>
<span class="term-fg32">+		Name:     &quot;override.regolith&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manually specify the OptimsimRegolith fork timestamp, overriding the bundled setting&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	OverrideOptimism = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;override.optimism&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manually specify optimism&quot;,</span>
 		Category: flags.EthCategory,
 	}
 	&#47;&#47; Light server and client settings
<span class="term-fg36">@@ -898,6 +914,32 @@</span> 		Name:     &quot;gpo.ignoreprice&quot;,
 		Usage:    &quot;Gas price below which gpo will ignore transactions&quot;,
 		Value:    ethconfig.Defaults.GPO.IgnorePrice.Int64(),
 		Category: flags.GasPriceCategory,
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Rollup Flags</span>
<span class="term-fg32">+	RollupSequencerHTTPFlag = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;rollup.sequencerhttp&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;HTTP endpoint for the sequencer mempool&quot;,</span>
<span class="term-fg32">+		Category: flags.RollupCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupHistoricalRPCFlag = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;rollup.historicalrpc&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;RPC endpoint for historical data.&quot;,</span>
<span class="term-fg32">+		Category: flags.RollupCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupHistoricalRPCTimeoutFlag = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;rollup.historicalrpctimeout&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Timeout for historical RPC requests.&quot;,</span>
<span class="term-fg32">+		Value:    &quot;5s&quot;,</span>
<span class="term-fg32">+		Category: flags.RollupCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupDisableTxPoolGossipFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rollup.disabletxpoolgossip&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable transaction pool gossip.&quot;,</span>
<span class="term-fg32">+		Category: flags.RollupCategory,</span>
 	}
&nbsp;
 	&#47;&#47; Metrics flags
<span class="term-fg36">@@ -1857,7 +1899,17 @@</span> 		} else {
 			cfg.EthDiscoveryURLs = SplitAndTrim(urls)
 		}
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	&#47;&#47; Only configure sequencer http flag if we&#39;re running in verifier mode i.e. --mine is disabled.</span>
<span class="term-fg32">+	if ctx.IsSet(RollupSequencerHTTPFlag.Name) &amp;&amp; !ctx.IsSet(MiningEnabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupSequencerHTTP = ctx.String(RollupSequencerHTTPFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(RollupHistoricalRPCFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupHistoricalRPC = ctx.String(RollupHistoricalRPCFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(RollupHistoricalRPCTimeoutFlag.Name) {</span>
<span class="term-fg32">+		cfg.RollupHistoricalRPCTimeout = ctx.Duration(RollupHistoricalRPCTimeoutFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	cfg.RollupDisableTxPoolGossip = ctx.Bool(RollupDisableTxPoolGossipFlag.Name)</span>
 	&#47;&#47; Override any default configs for hard coded networks.
 	switch {
 	case ctx.Bool(MainnetFlag.Name):</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e0b69300dd6d927d7215b7b2" role="button"
                   aria-expanded="false" aria-controls="id-e0b69300dd6d927d7215b7b2">
                    <code>cmd/geth/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/geth/main.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/geth/main.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+7</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e0b69300dd6d927d7215b7b2"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;main.go op-geth&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg1">index 5ba07024989706783e48353498a37e0016552f2b..e70e4da37babebde502aa83d38206d3749534de7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg36">@@ -66,6 +66,9 @@</span> 		utils.USBFlag,
 		utils.SmartCardDaemonPathFlag,
 		utils.OverrideShanghai,
 		utils.EnablePersonal,
<span class="term-fg32">+		utils.OverrideOptimismBedrock,</span>
<span class="term-fg32">+		utils.OverrideOptimismRegolith,</span>
<span class="term-fg32">+		utils.OverrideOptimism,</span>
 		utils.EthashCacheDirFlag,
 		utils.EthashCachesInMemoryFlag,
 		utils.EthashCachesOnDiskFlag,
<span class="term-fg36">@@ -149,6 +152,10 @@</span> 		utils.GpoPercentileFlag,
 		utils.GpoMaxGasPriceFlag,
 		utils.GpoIgnoreGasPriceFlag,
 		utils.MinerNotifyFullFlag,
<span class="term-fg32">+		utils.RollupSequencerHTTPFlag,</span>
<span class="term-fg32">+		utils.RollupHistoricalRPCFlag,</span>
<span class="term-fg32">+		utils.RollupHistoricalRPCTimeoutFlag,</span>
<span class="term-fg32">+		utils.RollupDisableTxPoolGossipFlag,</span>
 		configFileFlag,
 	}, utils.NetworkFlags, utils.DatabasePathFlags)
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bf133621b136881ba8f4e4fa" role="button"
                   aria-expanded="false" aria-controls="id-bf133621b136881ba8f4e4fa">
                    <code>internal/flags/categories.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/flags/categories.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/flags/categories.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bf133621b136881ba8f4e4fa"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;flags&#47;categories.go op-geth&#47;internal&#47;flags&#47;categories.go</span>
<span class="term-fg1">index c2db6c6c1d25c115c77c8a829d481133a932faa7..f2b368775867174abef2e16d6c64d10b890ca9ff 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;flags&#47;categories.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;flags&#47;categories.go</span>
<span class="term-fg36">@@ -31,6 +31,7 @@</span> 	NetworkingCategory = &quot;NETWORKING&quot;
 	MinerCategory      = &quot;MINER&quot;
 	GasPriceCategory   = &quot;GAS PRICE ORACLE&quot;
 	VMCategory         = &quot;VIRTUAL MACHINE&quot;
<span class="term-fg32">+	RollupCategory     = &quot;ROLLUP NODE&quot;</span>
 	LoggingCategory    = &quot;LOGGING AND DEBUGGING&quot;
 	MetricsCategory    = &quot;METRICS AND STATS&quot;
 	MiscCategory       = &quot;MISC&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-478af0e176109cbcfa4ac82a" role="button"
                   aria-expanded="false" aria-controls="id-478af0e176109cbcfa4ac82a">
                    <code>cmd/geth/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/geth/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/geth/config.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-478af0e176109cbcfa4ac82a"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;config.go op-geth&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg1">index 0b856d1c1b7a9c25a29c0b467a3f88487ef09ebb..10a519c2cbcd859a59abde028660a5b8e7df37a2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg36">@@ -162,6 +162,19 @@</span> 	if ctx.IsSet(utils.OverrideShanghai.Name) {
 		v := ctx.Uint64(utils.OverrideShanghai.Name)
 		cfg.Eth.OverrideShanghai = &amp;v
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverrideOptimismBedrock.Name) {</span>
<span class="term-fg32">+		cfg.Eth.OverrideOptimismBedrock = flags.GlobalBig(ctx, utils.OverrideOptimismBedrock.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverrideOptimismRegolith.Name) {</span>
<span class="term-fg32">+		v := ctx.Uint64(utils.OverrideOptimismRegolith.Name)</span>
<span class="term-fg32">+		cfg.Eth.OverrideOptimismRegolith = &amp;v</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverrideOptimism.Name) {</span>
<span class="term-fg32">+		override := ctx.Bool(utils.OverrideOptimism.Name)</span>
<span class="term-fg32">+		cfg.Eth.OverrideOptimism = &amp;override</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	backend, eth := utils.RegisterEthService(stack, &amp;cfg.Eth)
&nbsp;
 	&#47;&#47; Configure log filter RPC API.</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d0ef8f1cdbc9a16ec2e93886"role="button" aria-expanded="false" aria-controls="id-d0ef8f1cdbc9a16ec2e93886">
        
            <div class="col-12 col-sm-9 text-start"><h4>Versioning</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+31</span></div>
                <div class="text-start"><span class="text-danger">-7</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d0ef8f1cdbc9a16ec2e93886">
        <div><p>List the op-geth and upstream go-ethereum versions.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2cb38a19f19f217377688d80" role="button"
                   aria-expanded="false" aria-controls="id-2cb38a19f19f217377688d80">
                    <code>cmd/geth/misccmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/geth/misccmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/geth/misccmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2cb38a19f19f217377688d80"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;misccmd.go op-geth&#47;cmd&#47;geth&#47;misccmd.go</span>
<span class="term-fg1">index d8a523c6322168c5c532e81a05b8fb5a4933d642..5ca1732e07ade07abae15ce53e042f97e1be8634 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;misccmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;geth&#47;misccmd.go</span>
<span class="term-fg36">@@ -137,6 +137,7 @@</span> 	}
 	if git.Date != &quot;&quot; {
 		fmt.Println(&quot;Git Commit Date:&quot;, git.Date)
 	}
<span class="term-fg32">+	fmt.Println(&quot;Upstream Version:&quot;, params.GethVersionWithMeta)</span>
 	fmt.Println(&quot;Architecture:&quot;, runtime.GOARCH)
 	fmt.Println(&quot;Go Version:&quot;, runtime.Version())
 	fmt.Println(&quot;Operating System:&quot;, runtime.GOOS)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-971cbc110d51e39c66bd14fa" role="button"
                   aria-expanded="false" aria-controls="id-971cbc110d51e39c66bd14fa">
                    <code>params/version.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/params/version.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/params/version.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+28</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-971cbc110d51e39c66bd14fa"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;version.go op-geth&#47;params&#47;version.go</span>
<span class="term-fg1">index 8bbf0b99be53f4bb2f50c1acf7e48e55e657203b..375803434a3a8f1a1b957d24cbe0f2af9c51422c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;version.go</span>
<span class="term-fg1">+++ op-geth&#47;params&#47;version.go</span>
<span class="term-fg36">@@ -20,21 +20,44 @@</span> import (
 	&quot;fmt&quot;
 )
&nbsp;
<span class="term-fg32">+&#47;&#47; Version is the version of upstream geth</span>
 const (
 	VersionMajor = 1        &#47;&#47; Major version component of the current release
 	VersionMinor = 11       &#47;&#47; Minor version component of the current release
<span class="term-fg31">-	VersionPatch = 2        &#47;&#47; Patch version component of the current release</span>
<span class="term-fg32">+	VersionPatch = 4        &#47;&#47; Patch version component of the current release</span>
 	VersionMeta  = &quot;stable&quot; &#47;&#47; Version metadata to append to the version string
 )
&nbsp;
<span class="term-fg32">+&#47;&#47; OPVersion is the version of op-geth</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	OPVersionMajor = 0          &#47;&#47; Major version component of the current release</span>
<span class="term-fg32">+	OPVersionMinor = 1          &#47;&#47; Minor version component of the current release</span>
<span class="term-fg32">+	OPVersionPatch = 0          &#47;&#47; Patch version component of the current release</span>
<span class="term-fg32">+	OPVersionMeta  = &quot;unstable&quot; &#47;&#47; Version metadata to append to the version string</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
 &#47;&#47; Version holds the textual version string.
 var Version = func() string {
<span class="term-fg31">-	return fmt.Sprintf(&quot;%d.%d.%d&quot;, VersionMajor, VersionMinor, VersionPatch)</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;%d.%d.%d&quot;, OPVersionMajor, OPVersionMinor, OPVersionPatch)</span>
 }()
&nbsp;
 &#47;&#47; VersionWithMeta holds the textual version string including the metadata.
 var VersionWithMeta = func() string {
 	v := Version
<span class="term-fg32">+	if OPVersionMeta != &quot;&quot; {</span>
<span class="term-fg32">+		v += &quot;-&quot; + OPVersionMeta</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return v</span>
<span class="term-fg32">+}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GethVersion holds the textual geth version string.</span>
<span class="term-fg32">+var GethVersion = func() string {</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;%d.%d.%d&quot;, VersionMajor, VersionMinor, VersionPatch)</span>
<span class="term-fg32">+}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GethVersionWithMeta holds the textual geth version string including the metadata.</span>
<span class="term-fg32">+var GethVersionWithMeta = func() string {</span>
<span class="term-fg32">+	v := GethVersion</span>
 	if VersionMeta != &quot;&quot; {
 		v += &quot;-&quot; + VersionMeta
 	}
<span class="term-fg36">@@ -46,8 +69,8 @@</span> &#47;&#47; &quot;1.8.11-dea1ce05&quot; for stable releases, or &quot;1.8.13-unstable-21c059b6&quot; for unstable
 &#47;&#47; releases.
 func ArchiveVersion(gitCommit string) string {
 	vsn := Version
<span class="term-fg31">-	if VersionMeta != &quot;stable&quot; {</span>
<span class="term-fg31">-		vsn += &quot;-&quot; + VersionMeta</span>
<span class="term-fg32">+	if OPVersionMeta != &quot;stable&quot; {</span>
<span class="term-fg32">+		vsn += &quot;-&quot; + OPVersionMeta</span>
 	}
 	if len(gitCommit) &gt;= 8 {
 		vsn += &quot;-&quot; + gitCommit[:8]
<span class="term-fg36">@@ -60,7 +83,7 @@</span> 	vsn := VersionWithMeta
 	if len(gitCommit) &gt;= 8 {
 		vsn += &quot;-&quot; + gitCommit[:8]
 	}
<span class="term-fg31">-	if (VersionMeta != &quot;stable&quot;) &amp;&amp; (gitDate != &quot;&quot;) {</span>
<span class="term-fg32">+	if (OPVersionMeta != &quot;stable&quot;) &amp;&amp; (gitDate != &quot;&quot;) {</span>
 		vsn += &quot;-&quot; + gitDate
 	}
 	return vsn</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-616fd144cbcac8f25e7391c7" role="button"
                   aria-expanded="false" aria-controls="id-616fd144cbcac8f25e7391c7">
                    <code>build/ci.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/build/ci.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/build/ci.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-616fd144cbcac8f25e7391c7"><span class="term-fg1">diff --git go-ethereum&#47;build&#47;ci.go op-geth&#47;build&#47;ci.go</span>
<span class="term-fg1">index 2aad2ac52b330ec6aeafcc14dfae2cf9a9647f34..c939f7672fc77c4464179877772e6e25f814d387 100644</span>
<span class="term-fg1">--- go-ethereum&#47;build&#47;ci.go</span>
<span class="term-fg1">+++ op-geth&#47;build&#47;ci.go</span>
<span class="term-fg36">@@ -139,7 +139,7 @@</span>
 	&#47;&#47; This is the version of Go that will be downloaded by
 	&#47;&#47;
 	&#47;&#47;     go run ci.go install -dlgo
<span class="term-fg31">-	dlgoVersion = &quot;1.20.1&quot;</span>
<span class="term-fg32">+	dlgoVersion = &quot;1.20.2&quot;</span>
&nbsp;
 	&#47;&#47; This is the version of Go that will be used to bootstrap the PPA builder.
 	&#47;&#47;
<span class="term-fg36">@@ -512,7 +512,7 @@</span> 	switch {
 	case env.Branch == &quot;master&quot;:
 		tags = []string{&quot;latest&quot;}
 	case strings.HasPrefix(env.Tag, &quot;v1.&quot;):
<span class="term-fg31">-		tags = []string{&quot;stable&quot;, fmt.Sprintf(&quot;release-1.%d&quot;, params.VersionMinor), &quot;v&quot; + params.Version}</span>
<span class="term-fg32">+		tags = []string{&quot;stable&quot;, fmt.Sprintf(&quot;release-1.%d&quot;, params.OPVersionMinor), &quot;v&quot; + params.Version}</span>
 	}
 	&#47;&#47; If architecture specific image builds are requested, build and push them
 	if *image {</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-62f8b4a0fa261f89c6d3da36"role="button" aria-expanded="false" aria-controls="id-62f8b4a0fa261f89c6d3da36">
        
            <div class="col-12 col-sm-9 text-start"><h3>Node config</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+10</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-62f8b4a0fa261f89c6d3da36">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-003bbf4b337264450758b6a5" role="button"
                   aria-expanded="false" aria-controls="id-003bbf4b337264450758b6a5">
                    <code>eth/ethconfig/config.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/ethconfig/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/ethconfig/config.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-003bbf4b337264450758b6a5"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;ethconfig&#47;config.go op-geth&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">index db686c5d0875f43f099e401865558f7ccf2b9224..272433cd278c2e58b7064ec141bba9611cc2c6cd 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg36">@@ -18,6 +18,7 @@</span> &#47;&#47; Package ethconfig contains the configuration of the ETH and LES protocols.
 package ethconfig
&nbsp;
 import (
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
 	&quot;os&quot;
 	&quot;os&#47;user&quot;
 	&quot;path&#47;filepath&quot;
<span class="term-fg36">@@ -207,6 +208,15 @@</span> 	CheckpointOracle *params.CheckpointOracleConfig `toml:&quot;,omitempty&quot;`
&nbsp;
 	&#47;&#47; OverrideShanghai (TODO: remove after the fork)
 	OverrideShanghai *uint64 `toml:&quot;,omitempty&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	OverrideOptimismBedrock  *big.Int</span>
<span class="term-fg32">+	OverrideOptimismRegolith *uint64 `toml:&quot;,omitempty&quot;`</span>
<span class="term-fg32">+	OverrideOptimism         *bool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	RollupSequencerHTTP        string</span>
<span class="term-fg32">+	RollupHistoricalRPC        string</span>
<span class="term-fg32">+	RollupHistoricalRPCTimeout time.Duration</span>
<span class="term-fg32">+	RollupDisableTxPoolGossip  bool</span>
 }
&nbsp;
 &#47;&#47; CreateConsensusEngine creates a consensus engine for the given chain configuration.</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-74229ef206e88aed8de3fbde"role="button" aria-expanded="false" aria-controls="id-74229ef206e88aed8de3fbde">
        
            <div class="col-12 col-sm-9 text-start"><h3>Tx gossip disable option</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+29</span></div>
                <div class="text-start"><span class="text-danger">-9</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-74229ef206e88aed8de3fbde">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ace8c675acdd16b78f3d9cb8" role="button"
                   aria-expanded="false" aria-controls="id-ace8c675acdd16b78f3d9cb8">
                    <code>eth/handler.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/handler.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/handler.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ace8c675acdd16b78f3d9cb8"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;handler.go op-geth&#47;eth&#47;handler.go</span>
<span class="term-fg1">index 078133f059f2e3899176d40afb107c330dd8bd28..b39f5d0fd82756695f71b2f1db4e9d5dd1433b24 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;handler.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;handler.go</span>
<span class="term-fg36">@@ -87,6 +87,7 @@</span> 	BloomCache     uint64                    &#47;&#47; Megabytes to alloc for snap sync bloom
 	EventMux       *event.TypeMux            &#47;&#47; Legacy event mux, deprecate for `feed`
 	Checkpoint     *params.TrustedCheckpoint &#47;&#47; Hard coded checkpoint for sync challenges
 	RequiredBlocks map[uint64]common.Hash    &#47;&#47; Hard coded map of required block hashes for sync challenges
<span class="term-fg32">+	NoTxGossip     bool                      &#47;&#47; Disable P2P transaction gossip</span>
 }
&nbsp;
 type handler struct {
<span class="term-fg36">@@ -103,6 +104,8 @@</span> 	database ethdb.Database
 	txpool   txPool
 	chain    *core.BlockChain
 	maxPeers int
<span class="term-fg32">+</span>
<span class="term-fg32">+	noTxGossip bool</span>
&nbsp;
 	downloader   *downloader.Downloader
 	blockFetcher *fetcher.BlockFetcher
<span class="term-fg36">@@ -137,6 +140,7 @@</span> 		forkFilter:     forkid.NewFilter(config.Chain),
 		eventMux:       config.EventMux,
 		database:       config.Database,
 		txpool:         config.TxPool,
<span class="term-fg32">+		noTxGossip:     config.NoTxGossip,</span>
 		chain:          config.Chain,
 		peers:          newPeerSet(),
 		merger:         config.Merger,
<span class="term-fg36">@@ -152,13 +156,13 @@</span> 		&#47;&#47;   below the sync point.
 		&#47;&#47; * the last snap sync is not finished while user specifies a full sync this
 		&#47;&#47;   time. But we don&#39;t have any recent state for full sync.
 		&#47;&#47; In these cases however it&#39;s safe to reenable snap sync.
<span class="term-fg31">-		fullBlock, fastBlock := h.chain.CurrentBlock(), h.chain.CurrentFastBlock()</span>
<span class="term-fg31">-		if fullBlock.NumberU64() == 0 &amp;&amp; fastBlock.NumberU64() &gt; 0 {</span>
<span class="term-fg32">+		fullBlock, snapBlock := h.chain.CurrentBlock(), h.chain.CurrentSnapBlock()</span>
<span class="term-fg32">+		if fullBlock.Number.Uint64() == 0 &amp;&amp; snapBlock.Number.Uint64() &gt; 0 {</span>
 			h.snapSync = uint32(1)
 			log.Warn(&quot;Switch sync mode from full sync to snap sync&quot;)
 		}
 	} else {
<span class="term-fg31">-		if h.chain.CurrentBlock().NumberU64() &gt; 0 {</span>
<span class="term-fg32">+		if h.chain.CurrentBlock().Number.Uint64() &gt; 0 {</span>
 			&#47;&#47; Print warning log if database is not empty to run snap sync.
 			log.Warn(&quot;Switch sync mode from snap sync to full sync&quot;)
 		} else {
<span class="term-fg36">@@ -183,10 +187,10 @@</span> 		}
 		&#47;&#47; If we&#39;ve successfully finished a sync cycle and passed any required
 		&#47;&#47; checkpoint, enable accepting transactions from the network
 		head := h.chain.CurrentBlock()
<span class="term-fg31">-		if head.NumberU64() &gt;= h.checkpointNumber {</span>
<span class="term-fg32">+		if head.Number.Uint64() &gt;= h.checkpointNumber {</span>
 			&#47;&#47; Checkpoint passed, sanity check the timestamp to have a fallback mechanism
 			&#47;&#47; for non-checkpointed (number = 0) private networks.
<span class="term-fg31">-			if head.Time() &gt;= uint64(time.Now().AddDate(0, -1, 0).Unix()) {</span>
<span class="term-fg32">+			if head.Time &gt;= uint64(time.Now().AddDate(0, -1, 0).Unix()) {</span>
 				atomic.StoreUint32(&amp;h.acceptTxs, 1)
 			}
 		}
<span class="term-fg36">@@ -198,7 +202,7 @@</span> 		if h.chain.Config().TerminalTotalDifficultyPassed {
 			log.Info(&quot;Chain post-merge, sync via beacon client&quot;)
 		} else {
 			head := h.chain.CurrentBlock()
<span class="term-fg31">-			if td := h.chain.GetTd(head.Hash(), head.NumberU64()); td.Cmp(ttd) &gt;= 0 {</span>
<span class="term-fg32">+			if td := h.chain.GetTd(head.Hash(), head.Number.Uint64()); td.Cmp(ttd) &gt;= 0 {</span>
 				log.Info(&quot;Chain post-TTD, sync via beacon client&quot;)
 			} else {
 				log.Warn(&quot;Chain pre-merge, sync via PoW (ensure beacon client is ready)&quot;)
<span class="term-fg36">@@ -227,7 +231,7 @@</span> 		}
 		return h.chain.Engine().VerifyHeader(h.chain, header, true)
 	}
 	heighter := func() uint64 {
<span class="term-fg31">-		return h.chain.CurrentBlock().NumberU64()</span>
<span class="term-fg32">+		return h.chain.CurrentBlock().Number.Uint64()</span>
 	}
 	inserter := func(blocks types.Blocks) (int, error) {
 		&#47;&#47; All the block fetcher activities should be disabled
<span class="term-fg36">@@ -250,7 +254,7 @@</span> 		&#47;&#47; Ideally we would also compare the head block&#39;s timestamp and similarly reject
 		&#47;&#47; the propagated block if the head is too old. Unfortunately there is a corner
 		&#47;&#47; case when starting new networks, where the genesis might be ancient (0 unix)
 		&#47;&#47; which would prevent full nodes from accepting it.
<span class="term-fg31">-		if h.chain.CurrentBlock().NumberU64() &lt; h.checkpointNumber {</span>
<span class="term-fg32">+		if h.chain.CurrentBlock().Number.Uint64() &lt; h.checkpointNumber {</span>
 			log.Warn(&quot;Unsynced yet, discarded propagated block&quot;, &quot;number&quot;, blocks[0].Number(), &quot;hash&quot;, blocks[0].Hash())
 			return 0, nil
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cef5366a6069b78db543691c" role="button"
                   aria-expanded="false" aria-controls="id-cef5366a6069b78db543691c">
                    <code>eth/handler_eth.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/handler_eth.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/handler_eth.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+17</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cef5366a6069b78db543691c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;handler_eth.go op-geth&#47;eth&#47;handler_eth.go</span>
<span class="term-fg1">index 4ed6335769cf9c32017c19c3037df91e7fabed48..6f573cc3e9a98861531f976b59a8ab67d5d33e51 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;handler_eth.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;handler_eth.go</span>
<span class="term-fg36">@@ -34,7 +34,20 @@</span> &#47;&#47; packets that are sent as replies or broadcasts.
 type ethHandler handler
&nbsp;
 func (h *ethHandler) Chain() *core.BlockChain { return h.chain }
<span class="term-fg31">-func (h *ethHandler) TxPool() eth.TxPool      { return h.txpool }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NilPool satisfies the TxPool interface but does not return any tx in the</span>
<span class="term-fg32">+&#47;&#47; pool. It is used to disable transaction gossip.</span>
<span class="term-fg32">+type NilPool struct{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NilPool Get always returns nil</span>
<span class="term-fg32">+func (n NilPool) Get(hash common.Hash) *types.Transaction { return nil }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (h *ethHandler) TxPool() eth.TxPool {</span>
<span class="term-fg32">+	if h.noTxGossip {</span>
<span class="term-fg32">+		return &amp;NilPool{}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return h.txpool</span>
<span class="term-fg32">+}</span>
&nbsp;
 &#47;&#47; RunPeer is invoked when a peer joins on the `eth` protocol.
 func (h *ethHandler) RunPeer(peer *eth.Peer, hand eth.Handler) error {
<span class="term-fg36">@@ -52,6 +65,9 @@</span>
 &#47;&#47; AcceptTxs retrieves whether transaction processing is enabled on the node
 &#47;&#47; or if inbound transactions should simply be dropped.
 func (h *ethHandler) AcceptTxs() bool {
<span class="term-fg32">+	if h.noTxGossip {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
 	return atomic.LoadUint32(&amp;h.acceptTxs) == 1
 }
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-78f0fe67c915de03d39f5840"role="button" aria-expanded="false" aria-controls="id-78f0fe67c915de03d39f5840">
        
            <div class="col-12 col-sm-9 text-start"><h2>User API enhancements</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+1089</span></div>
                <div class="text-start"><span class="text-danger">-149</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-78f0fe67c915de03d39f5840">
        <div><p>Encode the Deposit Tx properties, the L1 costs, and daisy-chain RPC-calls for pre-Bedrock historical data</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-f7ddee63681aefc1c7654714"role="button" aria-expanded="false" aria-controls="id-f7ddee63681aefc1c7654714">
        
            <div class="col-12 col-sm-9 text-start"><h3>Receipts metadata</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+238</span></div>
                <div class="text-start"><span class="text-danger">-10</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-f7ddee63681aefc1c7654714">
        <div><p>Pre-Bedrock L1-cost receipt data is loaded from the database if available, and post-Bedrock the L1-cost
metadata is hydrated on-the-fly based on the L1 fee information in the corresponding block.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b9a71fbd1869a39f4144eff9" role="button"
                   aria-expanded="false" aria-controls="id-b9a71fbd1869a39f4144eff9">
                    <code>core/types/receipt.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/receipt.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/receipt.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+204</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b9a71fbd1869a39f4144eff9"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;receipt.go op-geth&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg1">index 4404b278891ff08f2b5d916340fa1441ed8a13cf..874e10efb01a7a5307ea566094647e980208d871 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;receipt.go</span>
<span class="term-fg36">@@ -58,17 +58,28 @@</span> 	CumulativeGasUsed uint64 `json:&quot;cumulativeGasUsed&quot; gencodec:&quot;required&quot;`
 	Bloom             Bloom  `json:&quot;logsBloom&quot;         gencodec:&quot;required&quot;`
 	Logs              []*Log `json:&quot;logs&quot;              gencodec:&quot;required&quot;`
&nbsp;
<span class="term-fg31">-	&#47;&#47; Implementation fields: These fields are added by geth when processing a transaction.</span>
<span class="term-fg31">-	&#47;&#47; They are stored in the chain database.</span>
<span class="term-fg31">-	TxHash          common.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg31">-	ContractAddress common.Address `json:&quot;contractAddress&quot;`</span>
<span class="term-fg31">-	GasUsed         uint64         `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg32">+	&#47;&#47; Implementation fields: These fields are added by geth when processing a transaction or retrieving a receipt.</span>
<span class="term-fg32">+	&#47;&#47; gencodec annotated fields: these are stored in the chain database.</span>
<span class="term-fg32">+	TxHash            common.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg32">+	ContractAddress   common.Address `json:&quot;contractAddress&quot;`</span>
<span class="term-fg32">+	GasUsed           uint64         `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`</span>
<span class="term-fg32">+	EffectiveGasPrice *big.Int       `json:&quot;effectiveGasPrice&quot;`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions</span>
<span class="term-fg32">+	&#47;&#47; The state transition process ensures this is only set for Regolith deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `json:&quot;depositNonce,omitempty&quot;`</span>
&nbsp;
 	&#47;&#47; Inclusion information: These fields provide information about the inclusion of the
 	&#47;&#47; transaction corresponding to this receipt.
 	BlockHash        common.Hash `json:&quot;blockHash,omitempty&quot;`
 	BlockNumber      *big.Int    `json:&quot;blockNumber,omitempty&quot;`
 	TransactionIndex uint        `json:&quot;transactionIndex&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; OVM legacy: extend receipts with their L1 price (if a rollup tx)</span>
<span class="term-fg32">+	L1GasPrice *big.Int   `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+	L1GasUsed  *big.Int   `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+	L1Fee      *big.Int   `json:&quot;l1Fee,omitempty&quot;`</span>
<span class="term-fg32">+	FeeScalar  *big.Float `json:&quot;l1FeeScalar,omitempty&quot;`</span>
 }
&nbsp;
 type receiptMarshaling struct {
<span class="term-fg36">@@ -79,6 +90,12 @@</span> 	CumulativeGasUsed hexutil.Uint64
 	GasUsed           hexutil.Uint64
 	BlockNumber       *hexutil.Big
 	TransactionIndex  hexutil.Uint
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Optimism: extend receipts with their L1 price (if a rollup tx)</span>
<span class="term-fg32">+	L1GasPrice *hexutil.Big</span>
<span class="term-fg32">+	L1GasUsed  *hexutil.Big</span>
<span class="term-fg32">+	L1Fee      *hexutil.Big</span>
<span class="term-fg32">+	FeeScalar  *big.Float</span>
 }
&nbsp;
 &#47;&#47; receiptRLP is the consensus encoding of a receipt.
<span class="term-fg36">@@ -89,11 +106,90 @@</span> 	Bloom             Bloom
 	Logs              []*Log
 }
&nbsp;
<span class="term-fg32">+type depositReceiptRlp struct {</span>
<span class="term-fg32">+	PostStateOrStatus []byte</span>
<span class="term-fg32">+	CumulativeGasUsed uint64</span>
<span class="term-fg32">+	Bloom             Bloom</span>
<span class="term-fg32">+	Logs              []*Log</span>
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions.</span>
<span class="term-fg32">+	&#47;&#47; Must be nil for any transactions prior to Regolith or that aren&#39;t deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; storedReceiptRLP is the storage encoding of a receipt.
 type storedReceiptRLP struct {
 	PostStateOrStatus []byte
 	CumulativeGasUsed uint64
 	Logs              []*Log
<span class="term-fg32">+	&#47;&#47; DepositNonce was introduced in Regolith to store the actual nonce used by deposit transactions.</span>
<span class="term-fg32">+	&#47;&#47; Must be nil for any transactions prior to Regolith or that aren&#39;t deposit transactions.</span>
<span class="term-fg32">+	DepositNonce *uint64 `rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; LegacyOptimismStoredReceiptRLP is the pre bedrock storage encoding of a</span>
<span class="term-fg32">+&#47;&#47; receipt. It will only exist in the database if it was migrated using the</span>
<span class="term-fg32">+&#47;&#47; migration tool. Nodes that sync using snap-sync will not have any of these</span>
<span class="term-fg32">+&#47;&#47; entries.</span>
<span class="term-fg32">+type LegacyOptimismStoredReceiptRLP struct {</span>
<span class="term-fg32">+	PostStateOrStatus []byte</span>
<span class="term-fg32">+	CumulativeGasUsed uint64</span>
<span class="term-fg32">+	Logs              []*LogForStorage</span>
<span class="term-fg32">+	L1GasUsed         *big.Int</span>
<span class="term-fg32">+	L1GasPrice        *big.Int</span>
<span class="term-fg32">+	L1Fee             *big.Int</span>
<span class="term-fg32">+	FeeScalar         string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; LogForStorage is a wrapper around a Log that handles</span>
<span class="term-fg32">+&#47;&#47; backward compatibility with prior storage formats.</span>
<span class="term-fg32">+type LogForStorage Log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; EncodeRLP implements rlp.Encoder.</span>
<span class="term-fg32">+func (l *LogForStorage) EncodeRLP(w io.Writer) error {</span>
<span class="term-fg32">+	rl := rlpLog{Address: l.Address, Topics: l.Topics, Data: l.Data}</span>
<span class="term-fg32">+	return rlp.Encode(w, &amp;rl)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type legacyRlpStorageLog struct {</span>
<span class="term-fg32">+	Address     common.Address</span>
<span class="term-fg32">+	Topics      []common.Hash</span>
<span class="term-fg32">+	Data        []byte</span>
<span class="term-fg32">+	BlockNumber uint64</span>
<span class="term-fg32">+	TxHash      common.Hash</span>
<span class="term-fg32">+	TxIndex     uint</span>
<span class="term-fg32">+	BlockHash   common.Hash</span>
<span class="term-fg32">+	Index       uint</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DecodeRLP implements rlp.Decoder.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Note some redundant fields(e.g. block number, tx hash etc) will be assembled later.</span>
<span class="term-fg32">+func (l *LogForStorage) DecodeRLP(s *rlp.Stream) error {</span>
<span class="term-fg32">+	blob, err := s.Raw()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var dec rlpLog</span>
<span class="term-fg32">+	err = rlp.DecodeBytes(blob, &amp;dec)</span>
<span class="term-fg32">+	if err == nil {</span>
<span class="term-fg32">+		*l = LogForStorage{</span>
<span class="term-fg32">+			Address: dec.Address,</span>
<span class="term-fg32">+			Topics:  dec.Topics,</span>
<span class="term-fg32">+			Data:    dec.Data,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		&#47;&#47; Try to decode log with previous definition.</span>
<span class="term-fg32">+		var dec legacyRlpStorageLog</span>
<span class="term-fg32">+		err = rlp.DecodeBytes(blob, &amp;dec)</span>
<span class="term-fg32">+		if err == nil {</span>
<span class="term-fg32">+			*l = LogForStorage{</span>
<span class="term-fg32">+				Address: dec.Address,</span>
<span class="term-fg32">+				Topics:  dec.Topics,</span>
<span class="term-fg32">+				Data:    dec.Data,</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return err</span>
 }
&nbsp;
 &#47;&#47; NewReceipt creates a barebone transaction receipt, copying the init fields.
<span class="term-fg36">@@ -131,7 +227,13 @@</span>
 &#47;&#47; encodeTyped writes the canonical encoding of a typed receipt to w.
 func (r *Receipt) encodeTyped(data *receiptRLP, w *bytes.Buffer) error {
 	w.WriteByte(r.Type)
<span class="term-fg31">-	return rlp.Encode(w, data)</span>
<span class="term-fg32">+	switch r.Type {</span>
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		withNonce := depositReceiptRlp{data.PostStateOrStatus, data.CumulativeGasUsed, data.Bloom, data.Logs, r.DepositNonce}</span>
<span class="term-fg32">+		return rlp.Encode(w, withNonce)</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return rlp.Encode(w, data)</span>
<span class="term-fg32">+	}</span>
 }
&nbsp;
 &#47;&#47; MarshalBinary returns the consensus encoding of the receipt.
<span class="term-fg36">@@ -201,6 +303,15 @@</span> 			return err
 		}
 		r.Type = b[0]
 		return r.setFromRLP(data)
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		var data depositReceiptRlp</span>
<span class="term-fg32">+		err := rlp.DecodeBytes(b[1:], &amp;data)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		r.Type = b[0]</span>
<span class="term-fg32">+		r.DepositNonce = data.DepositNonce</span>
<span class="term-fg32">+		return r.setFromRLP(receiptRLP{data.PostStateOrStatus, data.CumulativeGasUsed, data.Bloom, data.Logs})</span>
 	default:
 		return ErrTxTypeNotSupported
 	}
<span class="term-fg36">@@ -264,6 +375,9 @@</span> 			return err
 		}
 	}
 	w.ListEnd(logList)
<span class="term-fg32">+	if r.DepositNonce != nil {</span>
<span class="term-fg32">+		w.WriteUint64(*r.DepositNonce)</span>
<span class="term-fg32">+	}</span>
 	w.ListEnd(outerList)
 	return w.Flush()
 }
<span class="term-fg36">@@ -271,8 +385,51 @@</span>
 &#47;&#47; DecodeRLP implements rlp.Decoder, and loads both consensus and implementation
 &#47;&#47; fields of a receipt from an RLP stream.
 func (r *ReceiptForStorage) DecodeRLP(s *rlp.Stream) error {
<span class="term-fg32">+	&#47;&#47; Retrieve the entire receipt blob as we need to try multiple decoders</span>
<span class="term-fg32">+	blob, err := s.Raw()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; First try to decode the latest receipt database format, try the pre-bedrock Optimism legacy format otherwise.</span>
<span class="term-fg32">+	if err := decodeStoredReceiptRLP(r, blob); err == nil {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return decodeLegacyOptimismReceiptRLP(r, blob)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func decodeLegacyOptimismReceiptRLP(r *ReceiptForStorage, blob []byte) error {</span>
<span class="term-fg32">+	var stored LegacyOptimismStoredReceiptRLP</span>
<span class="term-fg32">+	if err := rlp.DecodeBytes(blob, &amp;stored); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := (*Receipt)(r).setStatus(stored.PostStateOrStatus); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	r.CumulativeGasUsed = stored.CumulativeGasUsed</span>
<span class="term-fg32">+	r.Logs = make([]*Log, len(stored.Logs))</span>
<span class="term-fg32">+	for i, log := range stored.Logs {</span>
<span class="term-fg32">+		r.Logs[i] = (*Log)(log)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	r.Bloom = CreateBloom(Receipts{(*Receipt)(r)})</span>
<span class="term-fg32">+	&#47;&#47; UsingOVM</span>
<span class="term-fg32">+	scalar := new(big.Float)</span>
<span class="term-fg32">+	if stored.FeeScalar != &quot;&quot; {</span>
<span class="term-fg32">+		var ok bool</span>
<span class="term-fg32">+		scalar, ok = scalar.SetString(stored.FeeScalar)</span>
<span class="term-fg32">+		if !ok {</span>
<span class="term-fg32">+			return errors.New(&quot;cannot parse fee scalar&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	r.L1GasUsed = stored.L1GasUsed</span>
<span class="term-fg32">+	r.L1GasPrice = stored.L1GasPrice</span>
<span class="term-fg32">+	r.L1Fee = stored.L1Fee</span>
<span class="term-fg32">+	r.FeeScalar = scalar</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func decodeStoredReceiptRLP(r *ReceiptForStorage, blob []byte) error {</span>
 	var stored storedReceiptRLP
<span class="term-fg31">-	if err := s.Decode(&amp;stored); err != nil {</span>
<span class="term-fg32">+	if err := rlp.DecodeBytes(blob, &amp;stored); err != nil {</span>
 		return err
 	}
 	if err := (*Receipt)(r).setStatus(stored.PostStateOrStatus); err != nil {
<span class="term-fg36">@@ -281,7 +438,9 @@</span> 	}
 	r.CumulativeGasUsed = stored.CumulativeGasUsed
 	r.Logs = stored.Logs
 	r.Bloom = CreateBloom(Receipts{(*Receipt)(r)})
<span class="term-fg31">-</span>
<span class="term-fg32">+	if stored.DepositNonce != nil {</span>
<span class="term-fg32">+		r.DepositNonce = stored.DepositNonce</span>
<span class="term-fg32">+	}</span>
 	return nil
 }
&nbsp;
<span class="term-fg36">@@ -304,6 +463,9 @@</span> 		rlp.Encode(w, data)
 	case DynamicFeeTxType:
 		w.WriteByte(DynamicFeeTxType)
 		rlp.Encode(w, data)
<span class="term-fg32">+	case DepositTxType:</span>
<span class="term-fg32">+		w.WriteByte(DepositTxType)</span>
<span class="term-fg32">+		rlp.Encode(w, data)</span>
 	default:
 		&#47;&#47; For unsupported types, write nothing. Since this is for
 		&#47;&#47; DeriveSha, the error will be caught matching the derived hash
<span class="term-fg36">@@ -313,7 +475,7 @@</span> }
&nbsp;
 &#47;&#47; DeriveFields fills the receipts with their computed fields based on consensus
 &#47;&#47; data and contextual infos like containing block and transactions.
<span class="term-fg31">-func (rs Receipts) DeriveFields(config *params.ChainConfig, hash common.Hash, number uint64, txs Transactions) error {</span>
<span class="term-fg32">+func (rs Receipts) DeriveFields(config *params.ChainConfig, hash common.Hash, number uint64, time uint64, baseFee *big.Int, txs Transactions) error {</span>
 	signer := MakeSigner(config, new(big.Int).SetUint64(number))
&nbsp;
 	logIndex := uint(0)
<span class="term-fg36">@@ -324,6 +486,8 @@</span> 	for i := 0; i &lt; len(rs); i++ {
 		&#47;&#47; The transaction type and hash can be retrieved from the transaction itself
 		rs[i].Type = txs[i].Type()
 		rs[i].TxHash = txs[i].Hash()
<span class="term-fg32">+</span>
<span class="term-fg32">+		rs[i].EffectiveGasPrice = txs[i].inner.effectiveGasPrice(new(big.Int), baseFee)</span>
&nbsp;
 		&#47;&#47; block location fields
 		rs[i].BlockHash = hash
<span class="term-fg36">@@ -334,14 +498,22 @@</span> 		&#47;&#47; The contract address can be derived from the transaction itself
 		if txs[i].To() == nil {
 			&#47;&#47; Deriving the signer is expensive, only do if it&#39;s actually needed
 			from, _ := Sender(signer, txs[i])
<span class="term-fg31">-			rs[i].ContractAddress = crypto.CreateAddress(from, txs[i].Nonce())</span>
<span class="term-fg32">+			nonce := txs[i].Nonce()</span>
<span class="term-fg32">+			if rs[i].DepositNonce != nil {</span>
<span class="term-fg32">+				nonce = *rs[i].DepositNonce</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			rs[i].ContractAddress = crypto.CreateAddress(from, nonce)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			rs[i].ContractAddress = common.Address{}</span>
 		}
<span class="term-fg32">+</span>
 		&#47;&#47; The used gas can be calculated based on previous r
 		if i == 0 {
 			rs[i].GasUsed = rs[i].CumulativeGasUsed
 		} else {
 			rs[i].GasUsed = rs[i].CumulativeGasUsed - rs[i-1].CumulativeGasUsed
 		}
<span class="term-fg32">+</span>
 		&#47;&#47; The derived log fields can simply be set from the block and transaction
 		for j := 0; j &lt; len(rs[i].Logs); j++ {
 			rs[i].Logs[j].BlockNumber = number
<span class="term-fg36">@@ -352,5 +524,27 @@</span> 			rs[i].Logs[j].Index = logIndex
 			logIndex++
 		}
 	}
<span class="term-fg32">+	if config.Optimism != nil &amp;&amp; len(txs) &gt;= 2 { &#47;&#47; need at least an info tx and a non-info tx</span>
<span class="term-fg32">+		if data := txs[0].Data(); len(data) &gt;= 4+32*8 { &#47;&#47; function selector + 8 arguments to setL1BlockValues</span>
<span class="term-fg32">+			l1Basefee := new(big.Int).SetBytes(data[4+32*2 : 4+32*3]) &#47;&#47; arg index 2</span>
<span class="term-fg32">+			overhead := new(big.Int).SetBytes(data[4+32*6 : 4+32*7])  &#47;&#47; arg index 6</span>
<span class="term-fg32">+			scalar := new(big.Int).SetBytes(data[4+32*7 : 4+32*8])    &#47;&#47; arg index 7</span>
<span class="term-fg32">+			fscalar := new(big.Float).SetInt(scalar)                  &#47;&#47; legacy: format fee scalar as big Float</span>
<span class="term-fg32">+			fdivisor := new(big.Float).SetUint64(1_000_000)           &#47;&#47; 10**6, i.e. 6 decimals</span>
<span class="term-fg32">+			feeScalar := new(big.Float).Quo(fscalar, fdivisor)</span>
<span class="term-fg32">+			for i := 0; i &lt; len(rs); i++ {</span>
<span class="term-fg32">+				if !txs[i].IsDepositTx() {</span>
<span class="term-fg32">+					gas := txs[i].RollupDataGas().DataGas(time, config)</span>
<span class="term-fg32">+					rs[i].L1GasPrice = l1Basefee</span>
<span class="term-fg32">+					rs[i].L1GasUsed = new(big.Int).SetUint64(gas)</span>
<span class="term-fg32">+					rs[i].L1Fee = L1Cost(gas, l1Basefee, overhead, scalar)</span>
<span class="term-fg32">+					rs[i].FeeScalar = feeScalar</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;L1 info tx only has %d bytes, cannot read gas price parameters&quot;, len(data))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b1432e67366e0d10bb3ca873" role="button"
                   aria-expanded="false" aria-controls="id-b1432e67366e0d10bb3ca873">
                    <code>core/types/gen_receipt_json.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/gen_receipt_json.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/gen_receipt_json.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+34</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b1432e67366e0d10bb3ca873"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;gen_receipt_json.go op-geth&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg1">index bb892f85bec8cbfe34d3896a8075990bc6c51d61..9fd74009becf231aa3596aeb22f657abfb6a964a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;gen_receipt_json.go</span>
<span class="term-fg36">@@ -25,9 +25,14 @@</span> 		Logs              []*Log         `json:&quot;logs&quot;              gencodec:&quot;required&quot;`
 		TxHash            common.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`
 		ContractAddress   common.Address `json:&quot;contractAddress&quot;`
 		GasUsed           hexutil.Uint64 `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`
<span class="term-fg32">+		EffectiveGasPrice *hexutil.Big   `json:&quot;effectiveGasPrice,omitempty&quot;`</span>
 		BlockHash         common.Hash    `json:&quot;blockHash,omitempty&quot;`
 		BlockNumber       *hexutil.Big   `json:&quot;blockNumber,omitempty&quot;`
 		TransactionIndex  hexutil.Uint   `json:&quot;transactionIndex&quot;`
<span class="term-fg32">+		L1GasPrice        *hexutil.Big   `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+		L1GasUsed         *hexutil.Big   `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		L1Fee             *hexutil.Big   `json:&quot;l1Fee,omitempty&quot;`</span>
<span class="term-fg32">+		FeeScalar         *big.Float     `json:&quot;l1FeeScalar,omitempty&quot;`</span>
 	}
 	var enc Receipt
 	enc.Type = hexutil.Uint64(r.Type)
<span class="term-fg36">@@ -39,9 +44,14 @@</span> 	enc.Logs = r.Logs
 	enc.TxHash = r.TxHash
 	enc.ContractAddress = r.ContractAddress
 	enc.GasUsed = hexutil.Uint64(r.GasUsed)
<span class="term-fg32">+	enc.EffectiveGasPrice = (*hexutil.Big)(r.EffectiveGasPrice)</span>
 	enc.BlockHash = r.BlockHash
 	enc.BlockNumber = (*hexutil.Big)(r.BlockNumber)
 	enc.TransactionIndex = hexutil.Uint(r.TransactionIndex)
<span class="term-fg32">+	enc.L1GasPrice = (*hexutil.Big)(r.L1GasPrice)</span>
<span class="term-fg32">+	enc.L1GasUsed = (*hexutil.Big)(r.L1GasUsed)</span>
<span class="term-fg32">+	enc.L1Fee = (*hexutil.Big)(r.L1Fee)</span>
<span class="term-fg32">+	enc.FeeScalar = r.FeeScalar</span>
 	return json.Marshal(&amp;enc)
 }
&nbsp;
<span class="term-fg36">@@ -57,9 +67,15 @@</span> 		Logs              []*Log          `json:&quot;logs&quot;              gencodec:&quot;required&quot;`
 		TxHash            *common.Hash    `json:&quot;transactionHash&quot; gencodec:&quot;required&quot;`
 		ContractAddress   *common.Address `json:&quot;contractAddress&quot;`
 		GasUsed           *hexutil.Uint64 `json:&quot;gasUsed&quot; gencodec:&quot;required&quot;`
<span class="term-fg32">+		EffectiveGasPrice *hexutil.Big    `json:&quot;effectiveGasPrice,omitempty&quot;`</span>
 		BlockHash         *common.Hash    `json:&quot;blockHash,omitempty&quot;`
 		BlockNumber       *hexutil.Big    `json:&quot;blockNumber,omitempty&quot;`
 		TransactionIndex  *hexutil.Uint   `json:&quot;transactionIndex&quot;`
<span class="term-fg32">+		L1GasPrice        *hexutil.Big    `json:&quot;l1GasPrice,omitempty&quot;`</span>
<span class="term-fg32">+		L1GasUsed         *hexutil.Big    `json:&quot;l1GasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		L1Fee             *hexutil.Big    `json:&quot;l1Fee,omitempty&quot;`</span>
<span class="term-fg32">+		FeeScalar         *big.Float      `json:&quot;l1FeeScalar,omitempty&quot;`</span>
<span class="term-fg32">+		DepositNonce      *hexutil.Uint64 `json:&quot;depositNonce,omitempty&quot;`</span>
 	}
 	var dec Receipt
 	if err := json.Unmarshal(input, &amp;dec); err != nil {
<span class="term-fg36">@@ -97,6 +113,9 @@</span> 	if dec.GasUsed == nil {
 		return errors.New(&quot;missing required field &#39;gasUsed&#39; for Receipt&quot;)
 	}
 	r.GasUsed = uint64(*dec.GasUsed)
<span class="term-fg32">+	if dec.EffectiveGasPrice != nil {</span>
<span class="term-fg32">+		r.EffectiveGasPrice = (*big.Int)(dec.EffectiveGasPrice)</span>
<span class="term-fg32">+	}</span>
 	if dec.BlockHash != nil {
 		r.BlockHash = *dec.BlockHash
 	}
<span class="term-fg36">@@ -105,6 +124,21 @@</span> 		r.BlockNumber = (*big.Int)(dec.BlockNumber)
 	}
 	if dec.TransactionIndex != nil {
 		r.TransactionIndex = uint(*dec.TransactionIndex)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1GasPrice != nil {</span>
<span class="term-fg32">+		r.L1GasPrice = (*big.Int)(dec.L1GasPrice)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1GasUsed != nil {</span>
<span class="term-fg32">+		r.L1GasUsed = (*big.Int)(dec.L1GasUsed)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.L1Fee != nil {</span>
<span class="term-fg32">+		r.L1Fee = (*big.Int)(dec.L1Fee)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.FeeScalar != nil {</span>
<span class="term-fg32">+		r.FeeScalar = dec.FeeScalar</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.DepositNonce != nil {</span>
<span class="term-fg32">+		r.DepositNonce = (*uint64)(dec.DepositNonce)</span>
 	}
 	return nil
 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-790ed221b0dd15f1691848da"role="button" aria-expanded="false" aria-controls="id-790ed221b0dd15f1691848da">
        
            <div class="col-12 col-sm-9 text-start"><h3>API Backend</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+95</span></div>
                <div class="text-start"><span class="text-danger">-19</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-790ed221b0dd15f1691848da">
        <div><p>Forward transactions to the sequencer if configured.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-711967b096e88582bbe3276e" role="button"
                   aria-expanded="false" aria-controls="id-711967b096e88582bbe3276e">
                    <code>eth/api_backend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/api_backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/api_backend.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+43</span></div>
                        <div class="text-start"><span class="text-danger">-15</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-711967b096e88582bbe3276e"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;api_backend.go op-geth&#47;eth&#47;api_backend.go</span>
<span class="term-fg1">index 8fd3e43300d32f0da988f49e721055d2c799deb8..e2c0bc74e4e003decd8135934180d7bc54d5134f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;api_backend.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;api_backend.go</span>
<span class="term-fg36">@@ -19,12 +19,14 @@</span>
 import (
 	&quot;context&quot;
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&#47;big&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;bloombits&quot;
<span class="term-fg36">@@ -55,7 +57,7 @@</span> func (b *EthAPIBackend) ChainConfig() *params.ChainConfig {
 	return b.eth.blockchain.Config()
 }
&nbsp;
<span class="term-fg31">-func (b *EthAPIBackend) CurrentBlock() *types.Block {</span>
<span class="term-fg32">+func (b *EthAPIBackend) CurrentBlock() *types.Header {</span>
 	return b.eth.blockchain.CurrentBlock()
 }
&nbsp;
<span class="term-fg36">@@ -72,19 +74,19 @@</span> 		return block.Header(), nil
 	}
 	&#47;&#47; Otherwise resolve and return the block
 	if number == rpc.LatestBlockNumber {
<span class="term-fg31">-		return b.eth.blockchain.CurrentBlock().Header(), nil</span>
<span class="term-fg32">+		return b.eth.blockchain.CurrentBlock(), nil</span>
 	}
 	if number == rpc.FinalizedBlockNumber {
<span class="term-fg31">-		block := b.eth.blockchain.CurrentFinalizedBlock()</span>
<span class="term-fg32">+		block := b.eth.blockchain.CurrentFinalBlock()</span>
 		if block != nil {
<span class="term-fg31">-			return block.Header(), nil</span>
<span class="term-fg32">+			return block, nil</span>
 		}
 		return nil, errors.New(&quot;finalized block not found&quot;)
 	}
 	if number == rpc.SafeBlockNumber {
 		block := b.eth.blockchain.CurrentSafeBlock()
 		if block != nil {
<span class="term-fg31">-			return block.Header(), nil</span>
<span class="term-fg32">+			return block, nil</span>
 		}
 		return nil, errors.New(&quot;safe block not found&quot;)
 	}
<span class="term-fg36">@@ -120,13 +122,22 @@</span> 		return block, nil
 	}
 	&#47;&#47; Otherwise resolve and return the block
 	if number == rpc.LatestBlockNumber {
<span class="term-fg31">-		return b.eth.blockchain.CurrentBlock(), nil</span>
<span class="term-fg32">+		header := b.eth.blockchain.CurrentBlock()</span>
<span class="term-fg32">+		return b.eth.blockchain.GetBlock(header.Hash(), header.Number.Uint64()), nil</span>
 	}
 	if number == rpc.FinalizedBlockNumber {
<span class="term-fg31">-		return b.eth.blockchain.CurrentFinalizedBlock(), nil</span>
<span class="term-fg32">+		header := b.eth.blockchain.CurrentFinalBlock()</span>
<span class="term-fg32">+		if header == nil {</span>
<span class="term-fg32">+			return nil, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return b.eth.blockchain.GetBlock(header.Hash(), header.Number.Uint64()), nil</span>
 	}
 	if number == rpc.SafeBlockNumber {
<span class="term-fg31">-		return b.eth.blockchain.CurrentSafeBlock(), nil</span>
<span class="term-fg32">+		header := b.eth.blockchain.CurrentSafeBlock()</span>
<span class="term-fg32">+		if header == nil {</span>
<span class="term-fg32">+			return nil, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return b.eth.blockchain.GetBlock(header.Hash(), header.Number.Uint64()), nil</span>
 	}
 	return b.eth.blockchain.GetBlockByNumber(uint64(number)), nil
 }
<span class="term-fg36">@@ -183,7 +194,7 @@</span> 	if err != nil {
 		return nil, nil, err
 	}
 	if header == nil {
<span class="term-fg31">-		return nil, nil, errors.New(&quot;header not found&quot;)</span>
<span class="term-fg32">+		return nil, nil, fmt.Errorf(&quot;header %w&quot;, ethereum.NotFound)</span>
 	}
 	stateDb, err := b.eth.BlockChain().StateAt(header.Root)
 	return stateDb, header, err
<span class="term-fg36">@@ -199,7 +210,7 @@</span> 		if err != nil {
 			return nil, nil, err
 		}
 		if header == nil {
<span class="term-fg31">-			return nil, nil, errors.New(&quot;header for hash not found&quot;)</span>
<span class="term-fg32">+			return nil, nil, fmt.Errorf(&quot;header for hash %w&quot;, ethereum.NotFound)</span>
 		}
 		if blockNrOrHash.RequireCanonical &amp;&amp; b.eth.blockchain.GetCanonicalHash(header.Number.Uint64()) != hash {
 			return nil, nil, errors.New(&quot;hash is not currently canonical&quot;)
<span class="term-fg36">@@ -225,12 +236,12 @@</span> 	}
 	return nil
 }
&nbsp;
<span class="term-fg31">-func (b *EthAPIBackend) GetEVM(ctx context.Context, msg core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
<span class="term-fg32">+func (b *EthAPIBackend) GetEVM(ctx context.Context, msg *core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
 	if vmConfig == nil {
 		vmConfig = b.eth.blockchain.GetVMConfig()
 	}
 	txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-	context := core.NewEVMBlockContext(header, b.eth.BlockChain(), nil)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(header, b.eth.BlockChain(), nil, b.eth.blockchain.Config(), state)</span>
 	return vm.NewEVM(context, txContext, state, b.eth.blockchain.Config(), *vmConfig), state.Error, nil
 }
&nbsp;
<span class="term-fg36">@@ -258,8 +269,17 @@</span> func (b *EthAPIBackend) SubscribeLogsEvent(ch chan&lt;- []*types.Log) event.Subscription {
 	return b.eth.BlockChain().SubscribeLogsEvent(ch)
 }
&nbsp;
<span class="term-fg31">-func (b *EthAPIBackend) SendTx(ctx context.Context, signedTx *types.Transaction) error {</span>
<span class="term-fg31">-	return b.eth.txPool.AddLocal(signedTx)</span>
<span class="term-fg32">+func (b *EthAPIBackend) SendTx(ctx context.Context, tx *types.Transaction) error {</span>
<span class="term-fg32">+	if b.eth.seqRPCService != nil {</span>
<span class="term-fg32">+		data, err := tx.MarshalBinary()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if err := b.eth.seqRPCService.CallContext(ctx, nil, &quot;eth_sendRawTransaction&quot;, hexutil.Encode(data)); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return b.eth.txPool.AddLocal(tx)</span>
 }
&nbsp;
 func (b *EthAPIBackend) GetPoolTransactions() (types.Transactions, error) {
<span class="term-fg36">@@ -379,6 +399,14 @@</span> func (b *EthAPIBackend) StateAtBlock(ctx context.Context, block *types.Block, reexec uint64, base *state.StateDB, readOnly bool, preferDisk bool) (*state.StateDB, tracers.StateReleaseFunc, error) {
 	return b.eth.StateAtBlock(ctx, block, reexec, base, readOnly, preferDisk)
 }
&nbsp;
<span class="term-fg31">-func (b *EthAPIBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
<span class="term-fg32">+func (b *EthAPIBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
 	return b.eth.stateAtTransaction(ctx, block, txIndex, reexec)
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *EthAPIBackend) HistoricalRPCService() *rpc.Client {</span>
<span class="term-fg32">+	return b.eth.historicalRPCService</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *EthAPIBackend) Genesis() *types.Block {</span>
<span class="term-fg32">+	return b.eth.blockchain.Genesis()</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2daa4550784b3f91e2a0aa93" role="button"
                   aria-expanded="false" aria-controls="id-2daa4550784b3f91e2a0aa93">
                    <code>eth/backend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/backend.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+48</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2daa4550784b3f91e2a0aa93"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;backend.go op-geth&#47;eth&#47;backend.go</span>
<span class="term-fg1">index 6368c0e03c564cdc5e457883b7f81e0d8d9c7431..89055016103f4be6461ae7d9638dba9fe2aee9e2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;backend.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;backend.go</span>
<span class="term-fg36">@@ -18,12 +18,14 @@</span> &#47;&#47; Package eth implements the Ethereum protocol.
 package eth
&nbsp;
 import (
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
 	&quot;runtime&quot;
 	&quot;sync&quot;
 	&quot;sync&#47;atomic&quot;
<span class="term-fg32">+	&quot;time&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg36">@@ -74,6 +76,9 @@</span> 	ethDialCandidates  enode.Iterator
 	snapDialCandidates enode.Iterator
 	merger             *consensus.Merger
&nbsp;
<span class="term-fg32">+	seqRPCService        *rpc.Client</span>
<span class="term-fg32">+	historicalRPCService *rpc.Client</span>
<span class="term-fg32">+</span>
 	&#47;&#47; DB interfaces
 	chainDb ethdb.Database &#47;&#47; Block chain database
&nbsp;
<span class="term-fg36">@@ -165,7 +170,6 @@</span> 	var dbVer = &quot;&lt;nil&gt;&quot;
 	if bcVersion != nil {
 		dbVer = fmt.Sprintf(&quot;%d&quot;, *bcVersion)
 	}
<span class="term-fg31">-	log.Info(&quot;Initialising Ethereum protocol&quot;, &quot;network&quot;, config.NetworkId, &quot;dbversion&quot;, dbVer)</span>
&nbsp;
 	if !config.SkipBcVersionCheck {
 		if bcVersion != nil &amp;&amp; *bcVersion &gt; core.BlockChainVersion {
<span class="term-fg36">@@ -198,10 +202,25 @@</span> 	var overrides core.ChainOverrides
 	if config.OverrideShanghai != nil {
 		overrides.OverrideShanghai = config.OverrideShanghai
 	}
<span class="term-fg32">+	if config.OverrideOptimismBedrock != nil {</span>
<span class="term-fg32">+		overrides.OverrideOptimismBedrock = config.OverrideOptimismBedrock</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if config.OverrideOptimismRegolith != nil {</span>
<span class="term-fg32">+		overrides.OverrideOptimismRegolith = config.OverrideOptimismRegolith</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if config.OverrideOptimism != nil {</span>
<span class="term-fg32">+		overrides.OverrideOptimism = config.OverrideOptimism</span>
<span class="term-fg32">+	}</span>
 	eth.blockchain, err = core.NewBlockChain(chainDb, cacheConfig, config.Genesis, &amp;overrides, eth.engine, vmConfig, eth.shouldPreserve, &amp;config.TxLookupLimit)
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg32">+	if chainConfig := eth.blockchain.Config(); chainConfig.Optimism != nil { &#47;&#47; config.Genesis.Config.ChainID cannot be used because it&#39;s based on CLI flags only, thus default to mainnet L1</span>
<span class="term-fg32">+		config.NetworkId = chainConfig.ChainID.Uint64() &#47;&#47; optimism defaults eth network ID to chain ID</span>
<span class="term-fg32">+		eth.networkID = config.NetworkId</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Initialising Ethereum protocol&quot;, &quot;network&quot;, config.NetworkId, &quot;dbversion&quot;, dbVer)</span>
<span class="term-fg32">+</span>
 	eth.bloomIndexer.Start(eth.blockchain)
&nbsp;
 	if config.TxPool.Journal != &quot;&quot; {
<span class="term-fg36">@@ -226,6 +245,7 @@</span> 		BloomCache:     uint64(cacheLimit),
 		EventMux:       eth.eventMux,
 		Checkpoint:     checkpoint,
 		RequiredBlocks: config.RequiredBlocks,
<span class="term-fg32">+		NoTxGossip:     config.RollupDisableTxPoolGossip,</span>
 	}); err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -254,6 +274,26 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg32">+	if config.RollupSequencerHTTP != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupSequencerHTTP)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		eth.seqRPCService = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if config.RollupHistoricalRPC != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), config.RollupHistoricalRPCTimeout)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupHistoricalRPC)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		eth.historicalRPCService = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Start the RPC service
 	eth.netRPCService = ethapi.NewNetAPI(eth.p2pServer, config.NetworkId)
&nbsp;
<span class="term-fg36">@@ -272,7 +312,7 @@</span> func makeExtraData(extra []byte) []byte {
 	if len(extra) == 0 {
 		&#47;&#47; create default extradata
 		extra, _ = rlp.EncodeToBytes([]interface{}{
<span class="term-fg31">-			uint(params.VersionMajor&lt;&lt;16 | params.VersionMinor&lt;&lt;8 | params.VersionPatch),</span>
<span class="term-fg32">+			uint(params.OPVersionMajor&lt;&lt;16 | params.OPVersionMinor&lt;&lt;8 | params.OPVersionPatch),</span>
 			&quot;geth&quot;,
 			runtime.Version(),
 			runtime.GOOS,
<span class="term-fg36">@@ -533,6 +573,12 @@</span> 	s.txPool.Stop()
 	s.miner.Close()
 	s.blockchain.Stop()
 	s.engine.Close()
<span class="term-fg32">+	if s.seqRPCService != nil {</span>
<span class="term-fg32">+		s.seqRPCService.Close()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if s.historicalRPCService != nil {</span>
<span class="term-fg32">+		s.historicalRPCService.Close()</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	&#47;&#47; Clean shutdown marker as the last thing before closing db
 	s.shutdownTracker.Stop()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-47424476194be4110c245297" role="button"
                   aria-expanded="false" aria-controls="id-47424476194be4110c245297">
                    <code>internal/ethapi/backend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/ethapi/backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/ethapi/backend.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-47424476194be4110c245297"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;backend.go op-geth&#47;internal&#47;ethapi&#47;backend.go</span>
<span class="term-fg1">index 0c1763472f2de2caeaa79e01ace1010d5a0c39e8..cbb488027aa30389cf47de71f3e12298a2bde9be 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;backend.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;ethapi&#47;backend.go</span>
<span class="term-fg36">@@ -59,7 +59,7 @@</span> 	HeaderByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Header, error)
 	HeaderByHash(ctx context.Context, hash common.Hash) (*types.Header, error)
 	HeaderByNumberOrHash(ctx context.Context, blockNrOrHash rpc.BlockNumberOrHash) (*types.Header, error)
 	CurrentHeader() *types.Header
<span class="term-fg31">-	CurrentBlock() *types.Block</span>
<span class="term-fg32">+	CurrentBlock() *types.Header</span>
 	BlockByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Block, error)
 	BlockByHash(ctx context.Context, hash common.Hash) (*types.Block, error)
 	BlockByNumberOrHash(ctx context.Context, blockNrOrHash rpc.BlockNumberOrHash) (*types.Block, error)
<span class="term-fg36">@@ -68,7 +68,7 @@</span> 	StateAndHeaderByNumberOrHash(ctx context.Context, blockNrOrHash rpc.BlockNumberOrHash) (*state.StateDB, *types.Header, error)
 	PendingBlockAndReceipts() (*types.Block, types.Receipts)
 	GetReceipts(ctx context.Context, hash common.Hash) (types.Receipts, error)
 	GetTd(ctx context.Context, hash common.Hash) *big.Int
<span class="term-fg31">-	GetEVM(ctx context.Context, msg core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error)</span>
<span class="term-fg32">+	GetEVM(ctx context.Context, msg *core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error)</span>
 	SubscribeChainEvent(ch chan&lt;- core.ChainEvent) event.Subscription
 	SubscribeChainHeadEvent(ch chan&lt;- core.ChainHeadEvent) event.Subscription
 	SubscribeChainSideEvent(ch chan&lt;- core.ChainSideEvent) event.Subscription
<span class="term-fg36">@@ -86,6 +86,8 @@</span> 	SubscribeNewTxsEvent(chan&lt;- core.NewTxsEvent) event.Subscription
&nbsp;
 	ChainConfig() *params.ChainConfig
 	Engine() consensus.Engine
<span class="term-fg32">+	HistoricalRPCService() *rpc.Client</span>
<span class="term-fg32">+	Genesis() *types.Block</span>
&nbsp;
 	&#47;&#47; This is copied from filters.Backend
 	&#47;&#47; eth&#47;filters needs to be initialized from this backend type, so methods needed by</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-cb9f022a72047340538c8366"role="button" aria-expanded="false" aria-controls="id-cb9f022a72047340538c8366">
        
            <div class="col-12 col-sm-9 text-start"><h3>Apply L1 cost in API responses</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+3</span></div>
                <div class="text-start"><span class="text-danger">-3</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-cb9f022a72047340538c8366">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ca873dd8f512af8bb2b3ce45" role="button"
                   aria-expanded="false" aria-controls="id-ca873dd8f512af8bb2b3ce45">
                    <code>eth/state_accessor.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/state_accessor.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/state_accessor.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ca873dd8f512af8bb2b3ce45"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;state_accessor.go op-geth&#47;eth&#47;state_accessor.go</span>
<span class="term-fg1">index 3bb1464952a0c07026e987b4b5e4fda7bdccaa46..c5f34822e15410bb772ad9f6771e8809b894cdd7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;state_accessor.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;state_accessor.go</span>
<span class="term-fg36">@@ -189,7 +189,7 @@</span> 	return statedb, func() { database.TrieDB().Dereference(block.Root()) }, nil
 }
&nbsp;
 &#47;&#47; stateAtTransaction returns the execution environment of a certain transaction.
<span class="term-fg31">-func (eth *Ethereum) stateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
<span class="term-fg32">+func (eth *Ethereum) stateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
 	&#47;&#47; Short circuit if it&#39;s genesis block.
 	if block.NumberU64() == 0 {
 		return nil, vm.BlockContext{}, nil, nil, errors.New(&quot;no transaction in genesis&quot;)
<span class="term-fg36">@@ -212,9 +212,9 @@</span> 	&#47;&#47; Recompute transactions up to the target index.
 	signer := types.MakeSigner(eth.blockchain.Config(), block.Number())
 	for idx, tx := range block.Transactions() {
 		&#47;&#47; Assemble the transaction call message and return if the requested offset
<span class="term-fg31">-		msg, _ := tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(block.Header(), eth.blockchain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(block.Header(), eth.blockchain, nil, eth.blockchain.Config(), statedb)</span>
 		if idx == txIndex {
 			return msg, context, statedb, release, nil
 		}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-82d24c82106bc5364fdb3702"role="button" aria-expanded="false" aria-controls="id-82d24c82106bc5364fdb3702">
        
            <div class="col-12 col-sm-9 text-start"><h3>API frontend</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+233</span></div>
                <div class="text-start"><span class="text-danger">-26</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-82d24c82106bc5364fdb3702">
        <div><p>Format deposit and L1-cost data in transaction responses.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fa4f73ff32a19ae1d3f0e269" role="button"
                   aria-expanded="false" aria-controls="id-fa4f73ff32a19ae1d3f0e269">
                    <code>internal/ethapi/api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/ethapi/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/ethapi/api.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+223</span></div>
                        <div class="text-start"><span class="text-danger">-26</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fa4f73ff32a19ae1d3f0e269"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;api.go op-geth&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg1">index 58f65f86d794d3e20e12f21a6b3e4774940086fc..42539772f3faff81a43644f953ed0a25eeafbc7b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg36">@@ -25,7 +25,11 @@</span> 	&quot;math&#47;big&quot;
 	&quot;strings&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+</span>
 	&quot;github.com&#47;davecgh&#47;go-spew&#47;spew&quot;
<span class="term-fg32">+	&quot;github.com&#47;tyler-smith&#47;go-bip39&quot;</span>
<span class="term-fg32">+</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;
<span class="term-fg36">@@ -46,7 +50,6 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg31">-	&quot;github.com&#47;tyler-smith&#47;go-bip39&quot;</span>
 )
&nbsp;
 &#47;&#47; EthereumAPI provides an API to access Ethereum related information.
<span class="term-fg36">@@ -630,10 +633,29 @@</span> &#47;&#47; GetBalance returns the amount of wei for the given address in the state of the
 &#47;&#47; given block number. The rpc.LatestBlockNumber and rpc.PendingBlockNumber meta
 &#47;&#47; block numbers are also allowed.
 func (s *BlockChainAPI) GetBalance(ctx context.Context, address common.Address, blockNrOrHash rpc.BlockNumberOrHash) (*hexutil.Big, error) {
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Big</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_getBalance&quot;, address, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	state, _, err := s.b.StateAndHeaderByNumberOrHash(ctx, blockNrOrHash)
 	if state == nil || err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
 	return (*hexutil.Big)(state.GetBalance(address)), state.Error()
 }
&nbsp;
<span class="term-fg36">@@ -656,6 +678,22 @@</span> }
&nbsp;
 &#47;&#47; GetProof returns the Merkle-proof for a given account and optionally some storage keys.
 func (s *BlockChainAPI) GetProof(ctx context.Context, address common.Address, storageKeys []string, blockNrOrHash rpc.BlockNumberOrHash) (*AccountResult, error) {
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res AccountResult</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_getProof&quot;, address, storageKeys, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	state, _, err := s.b.StateAndHeaderByNumberOrHash(ctx, blockNrOrHash)
 	if state == nil || err != nil {
 		return nil, err
<span class="term-fg36">@@ -836,10 +874,29 @@</span> }
&nbsp;
 &#47;&#47; GetCode returns the code stored at the given address in the state for the given block number.
 func (s *BlockChainAPI) GetCode(ctx context.Context, address common.Address, blockNrOrHash rpc.BlockNumberOrHash) (hexutil.Bytes, error) {
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Bytes</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_getCode&quot;, address, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	state, _, err := s.b.StateAndHeaderByNumberOrHash(ctx, blockNrOrHash)
 	if state == nil || err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
 	code := state.GetCode(address)
 	return code, state.Error()
 }
<span class="term-fg36">@@ -848,16 +905,47 @@</span> &#47;&#47; GetStorageAt returns the storage from the state at the given address, key and
 &#47;&#47; block number. The rpc.LatestBlockNumber and rpc.PendingBlockNumber meta block
 &#47;&#47; numbers are also allowed.
 func (s *BlockChainAPI) GetStorageAt(ctx context.Context, address common.Address, hexKey string, blockNrOrHash rpc.BlockNumberOrHash) (hexutil.Bytes, error) {
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Bytes</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_getStorageAt&quot;, address, hexKey, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	state, _, err := s.b.StateAndHeaderByNumberOrHash(ctx, blockNrOrHash)
 	if state == nil || err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
 	key, err := decodeHash(hexKey)
 	if err != nil {
 		return nil, fmt.Errorf(&quot;unable to decode storage key: %s&quot;, err)
 	}
 	res := state.GetState(address, key)
 	return res[:], state.Error()
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; The HeaderByNumberOrHash method returns a nil error and nil header</span>
<span class="term-fg32">+&#47;&#47; if the header is not found, but only for nonexistent block numbers. This is</span>
<span class="term-fg32">+&#47;&#47; different from StateAndHeaderByNumberOrHash. To account for this discrepancy,</span>
<span class="term-fg32">+&#47;&#47; headerOrNumberByHash will properly convert the error into an ethereum.NotFound.</span>
<span class="term-fg32">+func headerByNumberOrHash(ctx context.Context, b Backend, blockNrOrHash rpc.BlockNumberOrHash) (*types.Header, error) {</span>
<span class="term-fg32">+	header, err := b.HeaderByNumberOrHash(ctx, blockNrOrHash)</span>
<span class="term-fg32">+	if header == nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;header %w&quot;, ethereum.NotFound)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return header, err</span>
 }
&nbsp;
 &#47;&#47; OverrideAccount indicates the overriding fields of account during the execution
<span class="term-fg36">@@ -1005,7 +1093,7 @@</span> 	if evm.Cancelled() {
 		return nil, fmt.Errorf(&quot;execution aborted (timeout = %v)&quot;, timeout)
 	}
 	if err != nil {
<span class="term-fg31">-		return result, fmt.Errorf(&quot;err: %w (supplied gas %d)&quot;, err, msg.Gas())</span>
<span class="term-fg32">+		return result, fmt.Errorf(&quot;err: %w (supplied gas %d)&quot;, err, msg.GasLimit)</span>
 	}
 	return result, nil
 }
<span class="term-fg36">@@ -1047,6 +1135,24 @@</span> &#47;&#47;
 &#47;&#47; Note, this function doesn&#39;t make and changes in the state&#47;blockchain and is
 &#47;&#47; useful to execute and retrieve values.
 func (s *BlockChainAPI) Call(ctx context.Context, args TransactionArgs, blockNrOrHash rpc.BlockNumberOrHash, overrides *StateOverride) (hexutil.Bytes, error) {
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Bytes</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_call&quot;, args, blockNrOrHash, overrides)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	result, err := DoCall(ctx, s.b, args, blockNrOrHash, overrides, s.b.RPCEVMTimeout(), s.b.RPCGasCap())
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -1185,6 +1291,25 @@</span> 	bNrOrHash := rpc.BlockNumberOrHashWithNumber(rpc.PendingBlockNumber)
 	if blockNrOrHash != nil {
 		bNrOrHash = *blockNrOrHash
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, bNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return 0, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Uint64</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_estimateGas&quot;, args, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return 0, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return 0, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return DoEstimateGas(ctx, s.b, args, bNrOrHash, s.b.RPCGasCap())
 }
&nbsp;
<span class="term-fg36">@@ -1224,7 +1349,7 @@</span>
 &#47;&#47; RPCMarshalBlock converts the given block to the RPC output which depends on fullTx. If inclTx is true transactions are
 &#47;&#47; returned. When fullTx is true the returned block contains full transaction details, otherwise it will only contain
 &#47;&#47; transaction hashes.
<span class="term-fg31">-func RPCMarshalBlock(block *types.Block, inclTx bool, fullTx bool, config *params.ChainConfig) (map[string]interface{}, error) {</span>
<span class="term-fg32">+func RPCMarshalBlock(ctx context.Context, block *types.Block, inclTx bool, fullTx bool, backend Backend) (map[string]interface{}, error) {</span>
 	fields := RPCMarshalHeader(block.Header())
 	fields[&quot;size&quot;] = hexutil.Uint64(block.Size())
&nbsp;
<span class="term-fg36">@@ -1234,7 +1359,7 @@</span> 			return tx.Hash(), nil
 		}
 		if fullTx {
 			formatTx = func(tx *types.Transaction) (interface{}, error) {
<span class="term-fg31">-				return newRPCTransactionFromBlockHash(block, tx.Hash(), config), nil</span>
<span class="term-fg32">+				return newRPCTransactionFromBlockHash(ctx, block, tx.Hash(), backend), nil</span>
 			}
 		}
 		txs := block.Transactions()
<span class="term-fg36">@@ -1270,7 +1395,7 @@</span>
 &#47;&#47; rpcMarshalBlock uses the generalized output filler, then adds the total difficulty field, which requires
 &#47;&#47; a `BlockchainAPI`.
 func (s *BlockChainAPI) rpcMarshalBlock(ctx context.Context, b *types.Block, inclTx bool, fullTx bool) (map[string]interface{}, error) {
<span class="term-fg31">-	fields, err := RPCMarshalBlock(b, inclTx, fullTx, s.b.ChainConfig())</span>
<span class="term-fg32">+	fields, err := RPCMarshalBlock(ctx, b, inclTx, fullTx, s.b)</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -1301,11 +1426,16 @@</span> 	ChainID          *hexutil.Big      `json:&quot;chainId,omitempty&quot;`
 	V                *hexutil.Big      `json:&quot;v&quot;`
 	R                *hexutil.Big      `json:&quot;r&quot;`
 	S                *hexutil.Big      `json:&quot;s&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; deposit-tx only</span>
<span class="term-fg32">+	SourceHash *common.Hash `json:&quot;sourceHash,omitempty&quot;`</span>
<span class="term-fg32">+	Mint       *hexutil.Big `json:&quot;mint,omitempty&quot;`</span>
<span class="term-fg32">+	IsSystemTx *bool        `json:&quot;isSystemTx,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; newRPCTransaction returns a transaction that will serialize to the RPC
 &#47;&#47; representation, with the given location metadata set (if available).
<span class="term-fg31">-func newRPCTransaction(tx *types.Transaction, blockHash common.Hash, blockNumber uint64, index uint64, baseFee *big.Int, config *params.ChainConfig) *RPCTransaction {</span>
<span class="term-fg32">+func newRPCTransaction(tx *types.Transaction, blockHash common.Hash, blockNumber uint64, index uint64, baseFee *big.Int, config *params.ChainConfig, receipt *types.Receipt) *RPCTransaction {</span>
 	signer := types.MakeSigner(config, new(big.Int).SetUint64(blockNumber))
 	from, _ := types.Sender(signer, tx)
 	v, r, s := tx.RawSignatureValues()
<span class="term-fg36">@@ -1328,7 +1458,20 @@</span> 		result.BlockHash = &amp;blockHash
 		result.BlockNumber = (*hexutil.Big)(new(big.Int).SetUint64(blockNumber))
 		result.TransactionIndex = (*hexutil.Uint64)(&amp;index)
 	}
<span class="term-fg32">+</span>
 	switch tx.Type() {
<span class="term-fg32">+	case types.DepositTxType:</span>
<span class="term-fg32">+		srcHash := tx.SourceHash()</span>
<span class="term-fg32">+		isSystemTx := tx.IsSystemTx()</span>
<span class="term-fg32">+		result.SourceHash = &amp;srcHash</span>
<span class="term-fg32">+		if isSystemTx {</span>
<span class="term-fg32">+			&#47;&#47; Only include IsSystemTx when true</span>
<span class="term-fg32">+			result.IsSystemTx = &amp;isSystemTx</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		result.Mint = (*hexutil.Big)(tx.Mint())</span>
<span class="term-fg32">+		if receipt != nil &amp;&amp; receipt.DepositNonce != nil {</span>
<span class="term-fg32">+			result.Nonce = hexutil.Uint64(*receipt.DepositNonce)</span>
<span class="term-fg32">+		}</span>
 	case types.LegacyTxType:
 		&#47;&#47; if a legacy transaction has an EIP-155 chain id, include it explicitly
 		if id := tx.ChainId(); id.Sign() != 0 {
<span class="term-fg36">@@ -1364,16 +1507,32 @@</span> 	if current != nil {
 		baseFee = misc.CalcBaseFee(config, current)
 		blockNumber = current.Number.Uint64()
 	}
<span class="term-fg31">-	return newRPCTransaction(tx, common.Hash{}, blockNumber, 0, baseFee, config)</span>
<span class="term-fg32">+	return newRPCTransaction(tx, common.Hash{}, blockNumber, 0, baseFee, config, nil)</span>
 }
&nbsp;
 &#47;&#47; newRPCTransactionFromBlockIndex returns a transaction that will serialize to the RPC representation.
<span class="term-fg31">-func newRPCTransactionFromBlockIndex(b *types.Block, index uint64, config *params.ChainConfig) *RPCTransaction {</span>
<span class="term-fg32">+func newRPCTransactionFromBlockIndex(ctx context.Context, b *types.Block, index uint64, backend Backend) *RPCTransaction {</span>
 	txs := b.Transactions()
 	if index &gt;= uint64(len(txs)) {
 		return nil
 	}
<span class="term-fg31">-	return newRPCTransaction(txs[index], b.Hash(), b.NumberU64(), index, b.BaseFee(), config)</span>
<span class="term-fg32">+	tx := txs[index]</span>
<span class="term-fg32">+	rcpt := depositTxReceipt(ctx, b.Hash(), index, backend, tx)</span>
<span class="term-fg32">+	return newRPCTransaction(tx, b.Hash(), b.NumberU64(), index, b.BaseFee(), backend.ChainConfig(), rcpt)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func depositTxReceipt(ctx context.Context, blockHash common.Hash, index uint64, backend Backend, tx *types.Transaction) *types.Receipt {</span>
<span class="term-fg32">+	if tx.Type() != types.DepositTxType {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	receipts, err := backend.GetReceipts(ctx, blockHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if index &gt;= uint64(len(receipts)) {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return receipts[index]</span>
 }
&nbsp;
 &#47;&#47; newRPCRawTransactionFromBlockIndex returns the bytes of a transaction given a block and a transaction index.
<span class="term-fg36">@@ -1387,10 +1546,10 @@</span> 	return blob
 }
&nbsp;
 &#47;&#47; newRPCTransactionFromBlockHash returns a transaction that will serialize to the RPC representation.
<span class="term-fg31">-func newRPCTransactionFromBlockHash(b *types.Block, hash common.Hash, config *params.ChainConfig) *RPCTransaction {</span>
<span class="term-fg32">+func newRPCTransactionFromBlockHash(ctx context.Context, b *types.Block, hash common.Hash, backend Backend) *RPCTransaction {</span>
 	for idx, tx := range b.Transactions() {
 		if tx.Hash() == hash {
<span class="term-fg31">-			return newRPCTransactionFromBlockIndex(b, uint64(idx), config)</span>
<span class="term-fg32">+			return newRPCTransactionFromBlockIndex(ctx, b, uint64(idx), backend)</span>
 		}
 	}
 	return nil
<span class="term-fg36">@@ -1412,6 +1571,21 @@</span> 	bNrOrHash := rpc.BlockNumberOrHashWithNumber(rpc.PendingBlockNumber)
 	if blockNrOrHash != nil {
 		bNrOrHash = *blockNrOrHash
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, bNrOrHash)</span>
<span class="term-fg32">+	if err == nil &amp;&amp; header != nil &amp;&amp; s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res accessListResult</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_createAccessList&quot;, args, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	acl, gasUsed, vmerr, err := AccessList(ctx, s.b, bNrOrHash, args)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -1478,7 +1652,7 @@</span> 		vmenv, _, err := b.GetEVM(ctx, msg, statedb, header, &amp;config)
 		if err != nil {
 			return nil, 0, nil, err
 		}
<span class="term-fg31">-		res, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.Gas()))</span>
<span class="term-fg32">+		res, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.GasLimit))</span>
 		if err != nil {
 			return nil, 0, nil, fmt.Errorf(&quot;failed to apply transaction: %v err: %v&quot;, args.toTransaction().Hash(), err)
 		}
<span class="term-fg36">@@ -1525,7 +1699,7 @@</span>
 &#47;&#47; GetTransactionByBlockNumberAndIndex returns the transaction for the given block number and index.
 func (s *TransactionAPI) GetTransactionByBlockNumberAndIndex(ctx context.Context, blockNr rpc.BlockNumber, index hexutil.Uint) *RPCTransaction {
 	if block, _ := s.b.BlockByNumber(ctx, blockNr); block != nil {
<span class="term-fg31">-		return newRPCTransactionFromBlockIndex(block, uint64(index), s.b.ChainConfig())</span>
<span class="term-fg32">+		return newRPCTransactionFromBlockIndex(ctx, block, uint64(index), s.b)</span>
 	}
 	return nil
 }
<span class="term-fg36">@@ -1533,7 +1707,7 @@</span>
 &#47;&#47; GetTransactionByBlockHashAndIndex returns the transaction for the given block hash and index.
 func (s *TransactionAPI) GetTransactionByBlockHashAndIndex(ctx context.Context, blockHash common.Hash, index hexutil.Uint) *RPCTransaction {
 	if block, _ := s.b.BlockByHash(ctx, blockHash); block != nil {
<span class="term-fg31">-		return newRPCTransactionFromBlockIndex(block, uint64(index), s.b.ChainConfig())</span>
<span class="term-fg32">+		return newRPCTransactionFromBlockIndex(ctx, block, uint64(index), s.b)</span>
 	}
 	return nil
 }
<span class="term-fg36">@@ -1565,10 +1739,29 @@</span> 		}
 		return (*hexutil.Uint64)(&amp;nonce), nil
 	}
 	&#47;&#47; Resolve block number and use its state to ask for the nonce
<span class="term-fg32">+	header, err := headerByNumberOrHash(ctx, s.b, blockNrOrHash)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().IsOptimismPreBedrock(header.Number) {</span>
<span class="term-fg32">+		if s.b.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var res hexutil.Uint64</span>
<span class="term-fg32">+			err := s.b.HistoricalRPCService().CallContext(ctx, &amp;res, &quot;eth_getTransactionCount&quot;, address, blockNrOrHash)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return &amp;res, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	state, _, err := s.b.StateAndHeaderByNumberOrHash(ctx, blockNrOrHash)
 	if state == nil || err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
 	nonce := state.GetNonce(address)
 	return (*hexutil.Uint64)(&amp;nonce), state.Error()
 }
<span class="term-fg36">@@ -1585,7 +1778,8 @@</span> 		header, err := s.b.HeaderByHash(ctx, blockHash)
 		if err != nil {
 			return nil, err
 		}
<span class="term-fg31">-		return newRPCTransaction(tx, blockHash, blockNumber, index, header.BaseFee, s.b.ChainConfig()), nil</span>
<span class="term-fg32">+		rcpt := depositTxReceipt(ctx, blockHash, index, s.b, tx)</span>
<span class="term-fg32">+		return newRPCTransaction(tx, blockHash, blockNumber, index, header.BaseFee, s.b.ChainConfig(), rcpt), nil</span>
 	}
 	&#47;&#47; No finalized transaction, try to retrieve it from the pool
 	if tx := s.b.GetPoolTransaction(hash); tx != nil {
<span class="term-fg36">@@ -1621,6 +1815,7 @@</span> 		&#47;&#47; When the transaction doesn&#39;t exist, the RPC method should return JSON null
 		&#47;&#47; as per specification.
 		return nil, nil
 	}
<span class="term-fg32">+</span>
 	receipts, err := s.b.GetReceipts(ctx, blockHash)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -1648,18 +1843,19 @@</span> 		&quot;contractAddress&quot;:   nil,
 		&quot;logs&quot;:              receipt.Logs,
 		&quot;logsBloom&quot;:         receipt.Bloom,
 		&quot;type&quot;:              hexutil.Uint(tx.Type()),
<span class="term-fg32">+		&quot;effectiveGasPrice&quot;: (*hexutil.Big)(receipt.EffectiveGasPrice),</span>
 	}
<span class="term-fg31">-	&#47;&#47; Assign the effective gas price paid</span>
<span class="term-fg31">-	if !s.b.ChainConfig().IsLondon(bigblock) {</span>
<span class="term-fg31">-		fields[&quot;effectiveGasPrice&quot;] = hexutil.Uint64(tx.GasPrice().Uint64())</span>
<span class="term-fg31">-	} else {</span>
<span class="term-fg31">-		header, err := s.b.HeaderByHash(ctx, blockHash)</span>
<span class="term-fg31">-		if err != nil {</span>
<span class="term-fg31">-			return nil, err</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		gasPrice := new(big.Int).Add(header.BaseFee, tx.EffectiveGasTipValue(header.BaseFee))</span>
<span class="term-fg31">-		fields[&quot;effectiveGasPrice&quot;] = hexutil.Uint64(gasPrice.Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if s.b.ChainConfig().Optimism != nil &amp;&amp; !tx.IsDepositTx() {</span>
<span class="term-fg32">+		fields[&quot;l1GasPrice&quot;] = (*hexutil.Big)(receipt.L1GasPrice)</span>
<span class="term-fg32">+		fields[&quot;l1GasUsed&quot;] = (*hexutil.Big)(receipt.L1GasUsed)</span>
<span class="term-fg32">+		fields[&quot;l1Fee&quot;] = (*hexutil.Big)(receipt.L1Fee)</span>
<span class="term-fg32">+		fields[&quot;l1FeeScalar&quot;] = receipt.FeeScalar.String()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if s.b.ChainConfig().Optimism != nil &amp;&amp; tx.IsDepositTx() &amp;&amp; receipt.DepositNonce != nil {</span>
<span class="term-fg32">+		fields[&quot;depositNonce&quot;] = hexutil.Uint64(*receipt.DepositNonce)</span>
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Assign receipt status or post state.
 	if len(receipt.PostState) &gt; 0 {
 		fields[&quot;root&quot;] = hexutil.Bytes(receipt.PostState)
<span class="term-fg36">@@ -1669,6 +1865,7 @@</span> 	}
 	if receipt.Logs == nil {
 		fields[&quot;logs&quot;] = []*types.Log{}
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; If the ContractAddress is 20 0x0 bytes, assume it is not a contract creation
 	if receipt.ContractAddress != (common.Address{}) {
 		fields[&quot;contractAddress&quot;] = receipt.ContractAddress
<span class="term-fg36">@@ -1704,7 +1901,7 @@</span> 	if err := b.SendTx(ctx, tx); err != nil {
 		return common.Hash{}, err
 	}
 	&#47;&#47; Print a log with full tx details for manual investigations and interventions
<span class="term-fg31">-	signer := types.MakeSigner(b.ChainConfig(), b.CurrentBlock().Number())</span>
<span class="term-fg32">+	signer := types.MakeSigner(b.ChainConfig(), b.CurrentBlock().Number)</span>
 	from, err := types.Sender(signer, tx)
 	if err != nil {
 		return common.Hash{}, err</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ef0965993c05583dc5ea4fec" role="button"
                   aria-expanded="false" aria-controls="id-ef0965993c05583dc5ea4fec">
                    <code>rpc/errors.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/rpc/errors.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/rpc/errors.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ef0965993c05583dc5ea4fec"><span class="term-fg1">diff --git go-ethereum&#47;rpc&#47;errors.go op-geth&#47;rpc&#47;errors.go</span>
<span class="term-fg1">index 7188332d551ebdcd541438d7a58daad996b5c70f..4a2dab3d9836494a8618d56bfa204e2339a12491 100644</span>
<span class="term-fg1">--- go-ethereum&#47;rpc&#47;errors.go</span>
<span class="term-fg1">+++ op-geth&#47;rpc&#47;errors.go</span>
<span class="term-fg36">@@ -69,6 +69,16 @@</span> const (
 	errMsgTimeout = &quot;request timed out&quot;
 )
&nbsp;
<span class="term-fg32">+var ErrNoHistoricalFallback = NoHistoricalFallbackError{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type NoHistoricalFallbackError struct{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (e NoHistoricalFallbackError) ErrorCode() int { return -32801 }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (e NoHistoricalFallbackError) Error() string {</span>
<span class="term-fg32">+	return &quot;no historical RPC is available for this historical (pre-bedrock) execution request&quot;</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 type methodNotFoundError struct{ method string }
&nbsp;
 func (e *methodNotFoundError) ErrorCode() int { return -32601 }</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8f649ffe90bcfed68a99f2a7"role="button" aria-expanded="false" aria-controls="id-8f649ffe90bcfed68a99f2a7">
        
            <div class="col-12 col-sm-9 text-start"><h3>Tracer RPC daisy-chain</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+87</span></div>
                <div class="text-start"><span class="text-danger">-36</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8f649ffe90bcfed68a99f2a7">
        <div><p>Forward pre-bedrock tracing calls to legacy node.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-099f797ef90feb2b195e546f" role="button"
                   aria-expanded="false" aria-controls="id-099f797ef90feb2b195e546f">
                    <code>eth/tracers/api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/api.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+87</span></div>
                        <div class="text-start"><span class="text-danger">-36</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-099f797ef90feb2b195e546f"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;api.go op-geth&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg1">index 55c56b40c9f12f7e268126dbb1e3be945bdd94dc..c32f03857748363bafd4fbd5f77ccc00c7905827 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg36">@@ -23,6 +23,7 @@</span> 	&quot;context&quot;
 	&quot;encoding&#47;json&quot;
 	&quot;errors&quot;
 	&quot;fmt&quot;
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
 	&quot;os&quot;
 	&quot;runtime&quot;
 	&quot;sync&quot;
<span class="term-fg36">@@ -68,8 +69,6 @@</span> 	&#47;&#47; trace states exceed this limit.
 	maximumPendingTraceStates = 128
 )
&nbsp;
<span class="term-fg31">-var errTxNotFound = errors.New(&quot;transaction not found&quot;)</span>
<span class="term-fg31">-</span>
 &#47;&#47; StateReleaseFunc is used to deallocate resources held by constructing a
 &#47;&#47; historical state for tracing purposes.
 type StateReleaseFunc func()
<span class="term-fg36">@@ -87,7 +86,8 @@</span> 	ChainConfig() *params.ChainConfig
 	Engine() consensus.Engine
 	ChainDb() ethdb.Database
 	StateAtBlock(ctx context.Context, block *types.Block, reexec uint64, base *state.StateDB, readOnly bool, preferDisk bool) (*state.StateDB, StateReleaseFunc, error)
<span class="term-fg31">-	StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, StateReleaseFunc, error)</span>
<span class="term-fg32">+	StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, StateReleaseFunc, error)</span>
<span class="term-fg32">+	HistoricalRPCService() *rpc.Client</span>
 }
&nbsp;
 &#47;&#47; API is the collection of tracing APIs exposed over the private debugging endpoint.
<span class="term-fg36">@@ -231,6 +231,7 @@</span>
 &#47;&#47; TraceChain returns the structured logs created during the execution of EVM
 &#47;&#47; between two blocks (excluding start) and returns them as a JSON object.
 func (api *API) TraceChain(ctx context.Context, start, end rpc.BlockNumber, config *TraceConfig) (*rpc.Subscription, error) { &#47;&#47; Fetch the block interval that we want to trace
<span class="term-fg32">+	&#47;&#47; TODO: Need to implement a fallback for this</span>
 	from, err := api.blockByNumber(ctx, start)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -289,15 +290,16 @@</span> 			&#47;&#47; Fetch and execute the block trace taskCh
 			for task := range taskCh {
 				var (
 					signer   = types.MakeSigner(api.backend.ChainConfig(), task.block.Number())
<span class="term-fg31">-					blockCtx = core.NewEVMBlockContext(task.block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+					blockCtx = core.NewEVMBlockContext(task.block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig(), task.statedb)</span>
 				)
 				&#47;&#47; Trace all the transactions contained within
 				for i, tx := range task.block.Transactions() {
<span class="term-fg31">-					msg, _ := tx.AsMessage(signer, task.block.BaseFee())</span>
<span class="term-fg32">+					msg, _ := core.TransactionToMessage(tx, signer, task.block.BaseFee())</span>
 					txctx := &amp;Context{
<span class="term-fg31">-						BlockHash: task.block.Hash(),</span>
<span class="term-fg31">-						TxIndex:   i,</span>
<span class="term-fg31">-						TxHash:    tx.Hash(),</span>
<span class="term-fg32">+						BlockHash:   task.block.Hash(),</span>
<span class="term-fg32">+						BlockNumber: task.block.Number(),</span>
<span class="term-fg32">+						TxIndex:     i,</span>
<span class="term-fg32">+						TxHash:      tx.Hash(),</span>
 					}
 					res, err := api.traceTx(ctx, msg, txctx, blockCtx, task.statedb, config)
 					if err != nil {
<span class="term-fg36">@@ -458,6 +460,20 @@</span> 	block, err := api.blockByNumber(ctx, number)
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	if api.backend.ChainConfig().IsOptimismPreBedrock(block.Number()) {</span>
<span class="term-fg32">+		if api.backend.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var histResult []*txTraceResult</span>
<span class="term-fg32">+			err = api.backend.HistoricalRPCService().CallContext(ctx, &amp;histResult, &quot;debug_traceBlockByNumber&quot;, number, config)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return histResult, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return api.traceBlock(ctx, block, config)
 }
&nbsp;
<span class="term-fg36">@@ -468,6 +484,20 @@</span> 	block, err := api.blockByHash(ctx, hash)
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	if api.backend.ChainConfig().IsOptimismPreBedrock(block.Number()) {</span>
<span class="term-fg32">+		if api.backend.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var histResult []*txTraceResult</span>
<span class="term-fg32">+			err = api.backend.HistoricalRPCService().CallContext(ctx, &amp;histResult, &quot;debug_traceBlockByHash&quot;, hash, config)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return histResult, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return api.traceBlock(ctx, block, config)
 }
&nbsp;
<span class="term-fg36">@@ -517,6 +547,7 @@</span> &#47;&#47; IntermediateRoots executes a block (bad- or canon- or side-), and returns a list
 &#47;&#47; of intermediate roots: the stateroot after each transaction.
 func (api *API) IntermediateRoots(ctx context.Context, hash common.Hash, config *TraceConfig) ([]common.Hash, error) {
 	block, _ := api.blockByHash(ctx, hash)
<span class="term-fg32">+	&#47;&#47; TODO: Cannot get intermediate roots for pre-bedrock block without daisy chain</span>
 	if block == nil {
 		&#47;&#47; Check in the bad blocks
 		block = rawdb.ReadBadBlock(api.backend.ChainDb(), hash)
<span class="term-fg36">@@ -545,7 +576,7 @@</span> 	var (
 		roots              []common.Hash
 		signer             = types.MakeSigner(api.backend.ChainConfig(), block.Number())
 		chainConfig        = api.backend.ChainConfig()
<span class="term-fg31">-		vmctx              = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		vmctx              = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, chainConfig, statedb)</span>
 		deleteEmptyObjects = chainConfig.IsEIP158(block.Number())
 	)
 	for i, tx := range block.Transactions() {
<span class="term-fg36">@@ -553,12 +584,12 @@</span> 		if err := ctx.Err(); err != nil {
 			return nil, err
 		}
 		var (
<span class="term-fg31">-			msg, _    = tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+			msg, _    = core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 			txContext = core.NewEVMTxContext(msg)
 			vmenv     = vm.NewEVM(vmctx, txContext, statedb, chainConfig, vm.Config{})
 		)
 		statedb.SetTxContext(tx.Hash(), i)
<span class="term-fg31">-		if _, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.Gas())); err != nil {</span>
<span class="term-fg32">+		if _, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.GasLimit)); err != nil {</span>
 			log.Warn(&quot;Tracing intermediate roots did not complete&quot;, &quot;txindex&quot;, i, &quot;txhash&quot;, tx.Hash(), &quot;err&quot;, err)
 			&#47;&#47; We intentionally don&#39;t return the error here: if we do, then the RPC server will not
 			&#47;&#47; return the roots. Most likely, the caller already knows that a certain transaction fails to
<span class="term-fg36">@@ -621,17 +652,18 @@</span> 	var (
 		txs       = block.Transactions()
 		blockHash = block.Hash()
 		is158     = api.backend.ChainConfig().IsEIP158(block.Number())
<span class="term-fg31">-		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig(), statedb)</span>
 		signer    = types.MakeSigner(api.backend.ChainConfig(), block.Number())
 		results   = make([]*txTraceResult, len(txs))
 	)
 	for i, tx := range txs {
 		&#47;&#47; Generate the next state snapshot fast without tracing
<span class="term-fg31">-		msg, _ := tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 		txctx := &amp;Context{
<span class="term-fg31">-			BlockHash: blockHash,</span>
<span class="term-fg31">-			TxIndex:   i,</span>
<span class="term-fg31">-			TxHash:    tx.Hash(),</span>
<span class="term-fg32">+			BlockHash:   blockHash,</span>
<span class="term-fg32">+			BlockNumber: block.Number(),</span>
<span class="term-fg32">+			TxIndex:     i,</span>
<span class="term-fg32">+			TxHash:      tx.Hash(),</span>
 		}
 		res, err := api.traceTx(ctx, msg, txctx, blockCtx, statedb, config)
 		if err != nil {
<span class="term-fg36">@@ -653,7 +685,6 @@</span> 	&#47;&#47; Execute all the transaction contained within the block concurrently
 	var (
 		txs       = block.Transactions()
 		blockHash = block.Hash()
<span class="term-fg31">-		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
 		signer    = types.MakeSigner(api.backend.ChainConfig(), block.Number())
 		results   = make([]*txTraceResult, len(txs))
 		pend      sync.WaitGroup
<span class="term-fg36">@@ -669,11 +700,13 @@</span> 		go func() {
 			defer pend.Done()
 			&#47;&#47; Fetch and execute the next transaction trace tasks
 			for task := range jobs {
<span class="term-fg31">-				msg, _ := txs[task.index].AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+				blockCtx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig(), task.statedb)</span>
<span class="term-fg32">+				msg, _ := core.TransactionToMessage(txs[task.index], signer, block.BaseFee())</span>
 				txctx := &amp;Context{
<span class="term-fg31">-					BlockHash: blockHash,</span>
<span class="term-fg31">-					TxIndex:   task.index,</span>
<span class="term-fg31">-					TxHash:    txs[task.index].Hash(),</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					BlockNumber: block.Number(),</span>
<span class="term-fg32">+					TxIndex:     task.index,</span>
<span class="term-fg32">+					TxHash:      txs[task.index].Hash(),</span>
 				}
 				res, err := api.traceTx(ctx, msg, txctx, blockCtx, task.statedb, config)
 				if err != nil {
<span class="term-fg36">@@ -687,6 +720,7 @@</span> 	}
&nbsp;
 	&#47;&#47; Feed the transactions into the tracers and return
 	var failed error
<span class="term-fg32">+	blockCtx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig(), statedb)</span>
 txloop:
 	for i, tx := range txs {
 		&#47;&#47; Send the trace task over for execution
<span class="term-fg36">@@ -699,10 +733,10 @@</span> 		case jobs &lt;- task:
 		}
&nbsp;
 		&#47;&#47; Generate the next state snapshot fast without tracing
<span class="term-fg31">-		msg, _ := tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 		statedb.SetTxContext(tx.Hash(), i)
 		vmenv := vm.NewEVM(blockCtx, core.NewEVMTxContext(msg), statedb, api.backend.ChainConfig(), vm.Config{})
<span class="term-fg31">-		if _, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.Gas())); err != nil {</span>
<span class="term-fg32">+		if _, err := core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.GasLimit)); err != nil {</span>
 			failed = err
 			break txloop
 		}
<span class="term-fg36">@@ -764,7 +798,7 @@</span> 	var (
 		dumps       []string
 		signer      = types.MakeSigner(api.backend.ChainConfig(), block.Number())
 		chainConfig = api.backend.ChainConfig()
<span class="term-fg31">-		vmctx       = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		vmctx       = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, chainConfig, statedb)</span>
 		canon       = true
 	)
 	&#47;&#47; Check if there are any overrides: the caller may wish to enable a future
<span class="term-fg36">@@ -779,7 +813,7 @@</span> 	}
 	for i, tx := range block.Transactions() {
 		&#47;&#47; Prepare the transaction for un-traced execution
 		var (
<span class="term-fg31">-			msg, _    = tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+			msg, _    = core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 			txContext = core.NewEVMTxContext(msg)
 			vmConf    vm.Config
 			dump      *os.File
<span class="term-fg36">@@ -810,7 +844,7 @@</span> 		}
 		&#47;&#47; Execute the transaction and flush any traces to disk
 		vmenv := vm.NewEVM(vmctx, txContext, statedb, chainConfig, vmConf)
 		statedb.SetTxContext(tx.Hash(), i)
<span class="term-fg31">-		_, err = core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.Gas()))</span>
<span class="term-fg32">+		_, err = core.ApplyMessage(vmenv, msg, new(core.GasPool).AddGas(msg.GasLimit))</span>
 		if writer != nil {
 			writer.Flush()
 		}
<span class="term-fg36">@@ -847,14 +881,25 @@</span>
 &#47;&#47; TraceTransaction returns the structured logs created during the execution of EVM
 &#47;&#47; and returns them as a JSON object.
 func (api *API) TraceTransaction(ctx context.Context, hash common.Hash, config *TraceConfig) (interface{}, error) {
<span class="term-fg31">-	tx, blockHash, blockNumber, index, err := api.backend.GetTransaction(ctx, hash)</span>
<span class="term-fg32">+	&#47;&#47; GetTransaction returns 0 for the blocknumber if the transaction is not found</span>
<span class="term-fg32">+	_, blockHash, blockNumber, index, err := api.backend.GetTransaction(ctx, hash)</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg31">-	&#47;&#47; Only mined txes are supported</span>
<span class="term-fg31">-	if tx == nil {</span>
<span class="term-fg31">-		return nil, errTxNotFound</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if api.backend.ChainConfig().IsOptimismPreBedrock(new(big.Int).SetUint64(blockNumber)) {</span>
<span class="term-fg32">+		if api.backend.HistoricalRPCService() != nil {</span>
<span class="term-fg32">+			var histResult json.RawMessage</span>
<span class="term-fg32">+			err := api.backend.HistoricalRPCService().CallContext(ctx, &amp;histResult, &quot;debug_traceTransaction&quot;, hash, config)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, fmt.Errorf(&quot;historical backend error: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return histResult, nil</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, rpc.ErrNoHistoricalFallback</span>
<span class="term-fg32">+		}</span>
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; It shouldn&#39;t happen in practice.
 	if blockNumber == 0 {
 		return nil, errors.New(&quot;genesis is not traceable&quot;)
<span class="term-fg36">@@ -874,9 +919,10 @@</span> 	}
 	defer release()
&nbsp;
 	txctx := &amp;Context{
<span class="term-fg31">-		BlockHash: blockHash,</span>
<span class="term-fg31">-		TxIndex:   int(index),</span>
<span class="term-fg31">-		TxHash:    hash,</span>
<span class="term-fg32">+		BlockHash:   blockHash,</span>
<span class="term-fg32">+		BlockNumber: block.Number(),</span>
<span class="term-fg32">+		TxIndex:     int(index),</span>
<span class="term-fg32">+		TxHash:      hash,</span>
 	}
 	return api.traceTx(ctx, msg, txctx, vmctx, statedb, config)
 }
<span class="term-fg36">@@ -908,6 +954,11 @@</span> 	}
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	if api.backend.ChainConfig().IsOptimismPreBedrock(block.Number()) {</span>
<span class="term-fg32">+		return nil, errors.New(&quot;l2geth does not have a debug_traceCall method&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; try to recompute the state
 	reexec := defaultTraceReexec
 	if config != nil &amp;&amp; config.Reexec != nil {
<span class="term-fg36">@@ -919,7 +970,7 @@</span> 		return nil, err
 	}
 	defer release()
&nbsp;
<span class="term-fg31">-	vmctx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+	vmctx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig(), statedb)</span>
 	&#47;&#47; Apply the customization rules if required.
 	if config != nil {
 		if err := config.StateOverrides.Apply(statedb); err != nil {
<span class="term-fg36">@@ -943,7 +994,7 @@</span>
 &#47;&#47; traceTx configures a new tracer according to the provided configuration, and
 &#47;&#47; executes the given message in the provided environment. The return value will
 &#47;&#47; be tracer dependent.
<span class="term-fg31">-func (api *API) traceTx(ctx context.Context, message core.Message, txctx *Context, vmctx vm.BlockContext, statedb *state.StateDB, config *TraceConfig) (interface{}, error) {</span>
<span class="term-fg32">+func (api *API) traceTx(ctx context.Context, message *core.Message, txctx *Context, vmctx vm.BlockContext, statedb *state.StateDB, config *TraceConfig) (interface{}, error) {</span>
 	var (
 		tracer    Tracer
 		err       error
<span class="term-fg36">@@ -982,7 +1033,7 @@</span> 	defer cancel()
&nbsp;
 	&#47;&#47; Call Prepare to clear out the statedb access list
 	statedb.SetTxContext(txctx.TxHash, txctx.TxIndex)
<span class="term-fg31">-	if _, err = core.ApplyMessage(vmenv, message, new(core.GasPool).AddGas(message.Gas())); err != nil {</span>
<span class="term-fg32">+	if _, err = core.ApplyMessage(vmenv, message, new(core.GasPool).AddGas(message.GasLimit)); err != nil {</span>
 		return nil, fmt.Errorf(&quot;tracing failed: %w&quot;, err)
 	}
 	return tracer.GetResult()</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-23b21d4952e25585516588c0"role="button" aria-expanded="false" aria-controls="id-23b21d4952e25585516588c0">
        
            <div class="col-12 col-sm-9 text-start"><h3>Light Ethereum Subprotocol (LES) RPC</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+78</span></div>
                <div class="text-start"><span class="text-danger">-32</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-23b21d4952e25585516588c0">
        <div><p>Match the RPC changes in the LES RPC</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f690ce828a356f3227a3142b" role="button"
                   aria-expanded="false" aria-controls="id-f690ce828a356f3227a3142b">
                    <code>les/api_backend.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/les/api_backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/les/api_backend.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f690ce828a356f3227a3142b"><span class="term-fg1">diff --git go-ethereum&#47;les&#47;api_backend.go op-geth&#47;les&#47;api_backend.go</span>
<span class="term-fg1">index 422ac74b8668177bc161eff50607b8640afb4460..8a5ed1ba754945bc87076b2fffdd3d364312271b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;les&#47;api_backend.go</span>
<span class="term-fg1">+++ op-geth&#47;les&#47;api_backend.go</span>
<span class="term-fg36">@@ -52,8 +52,8 @@</span> func (b *LesApiBackend) ChainConfig() *params.ChainConfig {
 	return b.eth.chainConfig
 }
&nbsp;
<span class="term-fg31">-func (b *LesApiBackend) CurrentBlock() *types.Block {</span>
<span class="term-fg31">-	return types.NewBlockWithHeader(b.eth.BlockChain().CurrentHeader())</span>
<span class="term-fg32">+func (b *LesApiBackend) CurrentBlock() *types.Header {</span>
<span class="term-fg32">+	return b.eth.BlockChain().CurrentHeader()</span>
 }
&nbsp;
 func (b *LesApiBackend) SetHead(number uint64) {
<span class="term-fg36">@@ -184,12 +184,12 @@</span> 	}
 	return nil
 }
&nbsp;
<span class="term-fg31">-func (b *LesApiBackend) GetEVM(ctx context.Context, msg core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
<span class="term-fg32">+func (b *LesApiBackend) GetEVM(ctx context.Context, msg *core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
 	if vmConfig == nil {
 		vmConfig = new(vm.Config)
 	}
 	txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-	context := core.NewEVMBlockContext(header, b.eth.blockchain, nil)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(header, b.eth.blockchain, nil, b.eth.chainConfig, state)</span>
 	return vm.NewEVM(context, txContext, state, b.eth.chainConfig, *vmConfig), state.Error, nil
 }
&nbsp;
<span class="term-fg36">@@ -330,6 +330,14 @@</span> func (b *LesApiBackend) StateAtBlock(ctx context.Context, block *types.Block, reexec uint64, base *state.StateDB, readOnly bool, preferDisk bool) (*state.StateDB, tracers.StateReleaseFunc, error) {
 	return b.eth.stateAtBlock(ctx, block, reexec)
 }
&nbsp;
<span class="term-fg31">-func (b *LesApiBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
<span class="term-fg32">+func (b *LesApiBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
 	return b.eth.stateAtTransaction(ctx, block, txIndex, reexec)
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *LesApiBackend) HistoricalRPCService() *rpc.Client {</span>
<span class="term-fg32">+	return b.eth.historicalRPCService</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *LesApiBackend) Genesis() *types.Block {</span>
<span class="term-fg32">+	return b.eth.blockchain.Genesis()</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-77ba5ae559bce2bd26855a54" role="button"
                   aria-expanded="false" aria-controls="id-77ba5ae559bce2bd26855a54">
                    <code>les/state_accessor.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/les/state_accessor.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/les/state_accessor.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-77ba5ae559bce2bd26855a54"><span class="term-fg1">diff --git go-ethereum&#47;les&#47;state_accessor.go op-geth&#47;les&#47;state_accessor.go</span>
<span class="term-fg1">index 091ec8871eeeb17e2535435c2e3aa89736fdb05c..b6ba7f8f04322a9f714666a65b7e5ac1abb1beb1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;les&#47;state_accessor.go</span>
<span class="term-fg1">+++ op-geth&#47;les&#47;state_accessor.go</span>
<span class="term-fg36">@@ -39,7 +39,7 @@</span> 	return light.NewState(ctx, block.Header(), leth.odr), noopReleaser, nil
 }
&nbsp;
 &#47;&#47; stateAtTransaction returns the execution environment of a certain transaction.
<span class="term-fg31">-func (leth *LightEthereum) stateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
<span class="term-fg32">+func (leth *LightEthereum) stateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, tracers.StateReleaseFunc, error) {</span>
 	&#47;&#47; Short circuit if it&#39;s genesis block.
 	if block.NumberU64() == 0 {
 		return nil, vm.BlockContext{}, nil, nil, errors.New(&quot;no transaction in genesis&quot;)
<span class="term-fg36">@@ -60,9 +60,9 @@</span> 	&#47;&#47; Recompute transactions up to the target index.
 	signer := types.MakeSigner(leth.blockchain.Config(), block.Number())
 	for idx, tx := range block.Transactions() {
 		&#47;&#47; Assemble the transaction call message and return if the requested offset
<span class="term-fg31">-		msg, _ := tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(block.Header(), leth.blockchain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(block.Header(), leth.blockchain, nil, leth.blockchain.Config(), statedb)</span>
 		statedb.SetTxContext(tx.Hash(), idx)
 		if idx == txIndex {
 			return msg, context, statedb, release, nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4d9126d37ef85276cb1e51fb" role="button"
                   aria-expanded="false" aria-controls="id-4d9126d37ef85276cb1e51fb">
                    <code>les/client.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/les/client.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/les/client.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+24</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4d9126d37ef85276cb1e51fb"><span class="term-fg1">diff --git go-ethereum&#47;les&#47;client.go op-geth&#47;les&#47;client.go</span>
<span class="term-fg1">index 9ac85ecdac6fb5d2f41c88f13ad9e5fd37ae09c2..b40f1372bc1594fffb1ae84ed5fd804052b934d1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;les&#47;client.go</span>
<span class="term-fg1">+++ op-geth&#47;les&#47;client.go</span>
<span class="term-fg36">@@ -18,6 +18,7 @@</span> &#47;&#47; Package les implements the Light Ethereum Subprotocol.
 package les
&nbsp;
 import (
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;fmt&quot;
 	&quot;strings&quot;
 	&quot;time&quot;
<span class="term-fg36">@@ -66,6 +67,9 @@</span> 	serverPool         *vfc.ServerPool
 	serverPoolIterator enode.Iterator
 	pruner             *pruner
 	merger             *consensus.Merger
<span class="term-fg32">+</span>
<span class="term-fg32">+	seqRPCService        *rpc.Client</span>
<span class="term-fg32">+	historicalRPCService *rpc.Client</span>
&nbsp;
 	bloomRequests chan chan *bloombits.Retrieval &#47;&#47; Channel receiving bloom data retrieval requests
 	bloomIndexer  *core.ChainIndexer             &#47;&#47; Bloom indexer operating during block imports
<span class="term-fg36">@@ -195,6 +199,26 @@</span> 	leth.handler = newClientHandler(config.UltraLightServers, config.UltraLightFraction, checkpoint, leth)
 	if leth.handler.ulc != nil {
 		log.Warn(&quot;Ultra light client is enabled&quot;, &quot;trustedNodes&quot;, len(leth.handler.ulc.keys), &quot;minTrustedFraction&quot;, leth.handler.ulc.fraction)
 		leth.blockchain.DisableCheckFreq()
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if config.RollupSequencerHTTP != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupSequencerHTTP)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		leth.seqRPCService = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if config.RollupHistoricalRPC != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), config.RollupHistoricalRPCTimeout)</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RollupHistoricalRPC)</span>
<span class="term-fg32">+		cancel()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		leth.historicalRPCService = client</span>
 	}
&nbsp;
 	leth.netRPCService = ethapi.NewNetAPI(leth.p2pServer, leth.config.NetworkId)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-363cc478e61f3478d75bc0b0" role="button"
                   aria-expanded="false" aria-controls="id-363cc478e61f3478d75bc0b0">
                    <code>les/odr_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/les/odr_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/les/odr_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+25</span></div>
                        <div class="text-start"><span class="text-danger">-11</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-363cc478e61f3478d75bc0b0"><span class="term-fg1">diff --git go-ethereum&#47;les&#47;odr_test.go op-geth&#47;les&#47;odr_test.go</span>
<span class="term-fg1">index e028d35e639c1d565d8bbf7f67a94663aba3ba51..8654bb4bdad8c4a6a853f919dbe7431918311abd 100644</span>
<span class="term-fg1">--- go-ethereum&#47;les&#47;odr_test.go</span>
<span class="term-fg1">+++ op-geth&#47;les&#47;odr_test.go</span>
<span class="term-fg36">@@ -116,12 +116,6 @@</span> func TestOdrContractCallLes2(t *testing.T) { testOdr(t, 2, 2, true, odrContractCall) }
 func TestOdrContractCallLes3(t *testing.T) { testOdr(t, 3, 2, true, odrContractCall) }
 func TestOdrContractCallLes4(t *testing.T) { testOdr(t, 4, 2, true, odrContractCall) }
&nbsp;
<span class="term-fg31">-type callmsg struct {</span>
<span class="term-fg31">-	types.Message</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (callmsg) CheckNonce() bool { return false }</span>
<span class="term-fg31">-</span>
 func odrContractCall(ctx context.Context, db ethdb.Database, config *params.ChainConfig, bc *core.BlockChain, lc *light.LightChain, bhash common.Hash) []byte {
 	data := common.Hex2Bytes(&quot;60CD26850000000000000000000000000000000000000000000000000000000000000000&quot;)
&nbsp;
<span class="term-fg36">@@ -136,9 +130,19 @@</span> 			if err == nil {
 				from := statedb.GetOrNewStateObject(bankAddr)
 				from.SetBalance(math.MaxBig256)
&nbsp;
<span class="term-fg31">-				msg := callmsg{types.NewMessage(from.Address(), &amp;testContractAddr, 0, new(big.Int), 100000, big.NewInt(params.InitialBaseFee), big.NewInt(params.InitialBaseFee), new(big.Int), data, nil, true)}</span>
<span class="term-fg32">+				msg := &amp;core.Message{</span>
<span class="term-fg32">+					From:              from.Address(),</span>
<span class="term-fg32">+					To:                &amp;testContractAddr,</span>
<span class="term-fg32">+					Value:             new(big.Int),</span>
<span class="term-fg32">+					GasLimit:          100000,</span>
<span class="term-fg32">+					GasPrice:          big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+					GasFeeCap:         big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+					GasTipCap:         new(big.Int),</span>
<span class="term-fg32">+					Data:              data,</span>
<span class="term-fg32">+					SkipAccountChecks: true,</span>
<span class="term-fg32">+				}</span>
&nbsp;
<span class="term-fg31">-				context := core.NewEVMBlockContext(header, bc, nil)</span>
<span class="term-fg32">+				context := core.NewEVMBlockContext(header, bc, nil, config, statedb)</span>
 				txContext := core.NewEVMTxContext(msg)
 				vmenv := vm.NewEVM(context, txContext, statedb, config, vm.Config{NoBaseFee: true})
&nbsp;
<span class="term-fg36">@@ -151,8 +155,18 @@</span> 		} else {
 			header := lc.GetHeaderByHash(bhash)
 			state := light.NewState(ctx, header, lc.Odr())
 			state.SetBalance(bankAddr, math.MaxBig256)
<span class="term-fg31">-			msg := callmsg{types.NewMessage(bankAddr, &amp;testContractAddr, 0, new(big.Int), 100000, big.NewInt(params.InitialBaseFee), big.NewInt(params.InitialBaseFee), new(big.Int), data, nil, true)}</span>
<span class="term-fg31">-			context := core.NewEVMBlockContext(header, lc, nil)</span>
<span class="term-fg32">+			msg := &amp;core.Message{</span>
<span class="term-fg32">+				From:              bankAddr,</span>
<span class="term-fg32">+				To:                &amp;testContractAddr,</span>
<span class="term-fg32">+				Value:             new(big.Int),</span>
<span class="term-fg32">+				GasLimit:          100000,</span>
<span class="term-fg32">+				GasPrice:          big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+				GasFeeCap:         big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+				GasTipCap:         new(big.Int),</span>
<span class="term-fg32">+				Data:              data,</span>
<span class="term-fg32">+				SkipAccountChecks: true,</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			context := core.NewEVMBlockContext(header, lc, nil, config, state)</span>
 			txContext := core.NewEVMTxContext(msg)
 			vmenv := vm.NewEVM(context, txContext, state, config, vm.Config{NoBaseFee: true})
 			gp := new(core.GasPool).AddGas(math.MaxUint64)
<span class="term-fg36">@@ -281,7 +295,7 @@</span> 		blockNumbers = make(map[common.Hash]uint64)             &#47;&#47; Transaction hash to block number mappings
 		blockHashes  = make(map[common.Hash]common.Hash)        &#47;&#47; Transaction hash to block hash mappings
 		intraIndex   = make(map[common.Hash]uint64)             &#47;&#47; Transaction intra-index in block
 	)
<span class="term-fg31">-	for number := uint64(1); number &lt; server.backend.Blockchain().CurrentBlock().NumberU64(); number++ {</span>
<span class="term-fg32">+	for number := uint64(1); number &lt; server.backend.Blockchain().CurrentBlock().Number.Uint64(); number++ {</span>
 		block := server.backend.Blockchain().GetBlockByNumber(number)
 		if block == nil {
 			t.Fatalf(&quot;Failed to retrieve block %d&quot;, number)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b802fec73083a49e24c51739" role="button"
                   aria-expanded="false" aria-controls="id-b802fec73083a49e24c51739">
                    <code>les/handler_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/les/handler_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/les/handler_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+13</span></div>
                        <div class="text-start"><span class="text-danger">-13</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b802fec73083a49e24c51739"><span class="term-fg1">diff --git go-ethereum&#47;les&#47;handler_test.go op-geth&#47;les&#47;handler_test.go</span>
<span class="term-fg1">index b7be29b862abaeb10ddf2c189bb7070695124a66..c397092596199eb8277bbd44477d9382ac06be76 100644</span>
<span class="term-fg1">--- go-ethereum&#47;les&#47;handler_test.go</span>
<span class="term-fg1">+++ op-geth&#47;les&#47;handler_test.go</span>
<span class="term-fg36">@@ -121,20 +121,20 @@</span> 		{
 			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: 0}, Amount: 1},
 			[]common.Hash{bc.GetBlockByNumber(0).Hash()},
 		}, {
<span class="term-fg31">-			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().NumberU64()}, Amount: 1},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().Number.Uint64()}, Amount: 1},</span>
 			[]common.Hash{bc.CurrentBlock().Hash()},
 		},
 		&#47;&#47; Ensure protocol limits are honored
 		&#47;&#47;{
<span class="term-fg31">-		&#47;&#47;	&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().NumberU64() - 1}, Amount: limit + 10, Reverse: true},</span>
<span class="term-fg32">+		&#47;&#47;	&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().Number.Uint64()() - 1}, Amount: limit + 10, Reverse: true},</span>
 		&#47;&#47;	[]common.Hash{},
 		&#47;&#47;},
 		&#47;&#47; Check that requesting more than available is handled gracefully
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().NumberU64() - 4}, Skip: 3, Amount: 3},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().Number.Uint64() - 4}, Skip: 3, Amount: 3},</span>
 			[]common.Hash{
<span class="term-fg31">-				bc.GetBlockByNumber(bc.CurrentBlock().NumberU64() - 4).Hash(),</span>
<span class="term-fg31">-				bc.GetBlockByNumber(bc.CurrentBlock().NumberU64()).Hash(),</span>
<span class="term-fg32">+				bc.GetBlockByNumber(bc.CurrentBlock().Number.Uint64() - 4).Hash(),</span>
<span class="term-fg32">+				bc.GetBlockByNumber(bc.CurrentBlock().Number.Uint64()).Hash(),</span>
 			},
 		}, {
 			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: 4}, Skip: 3, Amount: 3, Reverse: true},
<span class="term-fg36">@@ -145,10 +145,10 @@</span> 			},
 		},
 		&#47;&#47; Check that requesting more than available is handled gracefully, even if mid skip
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().NumberU64() - 4}, Skip: 2, Amount: 3},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().Number.Uint64() - 4}, Skip: 2, Amount: 3},</span>
 			[]common.Hash{
<span class="term-fg31">-				bc.GetBlockByNumber(bc.CurrentBlock().NumberU64() - 4).Hash(),</span>
<span class="term-fg31">-				bc.GetBlockByNumber(bc.CurrentBlock().NumberU64() - 1).Hash(),</span>
<span class="term-fg32">+				bc.GetBlockByNumber(bc.CurrentBlock().Number.Uint64() - 4).Hash(),</span>
<span class="term-fg32">+				bc.GetBlockByNumber(bc.CurrentBlock().Number.Uint64() - 1).Hash(),</span>
 			},
 		}, {
 			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: 4}, Skip: 2, Amount: 3, Reverse: true},
<span class="term-fg36">@@ -162,7 +162,7 @@</span> 		{
 			&amp;GetBlockHeadersData{Origin: hashOrNumber{Hash: unknown}, Amount: 1},
 			[]common.Hash{},
 		}, {
<span class="term-fg31">-			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().NumberU64() + 1}, Amount: 1},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersData{Origin: hashOrNumber{Number: bc.CurrentBlock().Number.Uint64() + 1}, Amount: 1},</span>
 			[]common.Hash{},
 		},
 	}
<span class="term-fg36">@@ -240,7 +240,7 @@</span> 		var bodies []*types.Body
&nbsp;
 		for j := 0; j &lt; tt.random; j++ {
 			for {
<span class="term-fg31">-				num := rand.Int63n(int64(bc.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+				num := rand.Int63n(int64(bc.CurrentBlock().Number.Uint64()))</span>
 				if !seen[num] {
 					seen[num] = true
&nbsp;
<span class="term-fg36">@@ -292,7 +292,7 @@</span> 	bc := server.handler.blockchain
&nbsp;
 	var codereqs []*CodeReq
 	var codes [][]byte
<span class="term-fg31">-	for i := uint64(0); i &lt;= bc.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+	for i := uint64(0); i &lt;= bc.CurrentBlock().Number.Uint64(); i++ {</span>
 		header := bc.GetHeaderByNumber(i)
 		req := &amp;CodeReq{
 			BHash:  header.Hash(),
<span class="term-fg36">@@ -367,7 +367,7 @@</span>
 	&#47;&#47; Collect the hashes to request, and the response to expect
 	var receipts []types.Receipts
 	var hashes []common.Hash
<span class="term-fg31">-	for i := uint64(0); i &lt;= bc.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+	for i := uint64(0); i &lt;= bc.CurrentBlock().Number.Uint64(); i++ {</span>
 		block := bc.GetBlockByNumber(i)
&nbsp;
 		hashes = append(hashes, block.Hash())
<span class="term-fg36">@@ -404,7 +404,7 @@</span> 	var proofreqs []ProofReq
 	proofsV2 := light.NewNodeSet()
&nbsp;
 	accounts := []common.Address{bankAddr, userAddr1, userAddr2, signerAddr, {}}
<span class="term-fg31">-	for i := uint64(0); i &lt;= bc.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+	for i := uint64(0); i &lt;= bc.CurrentBlock().Number.Uint64(); i++ {</span>
 		header := bc.GetHeaderByNumber(i)
 		trie, _ := trie.New(trie.StateTrieID(header.Root), trie.NewDatabase(server.db))
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-43a06b8a0a4df1769a7711c6"role="button" aria-expanded="false" aria-controls="id-43a06b8a0a4df1769a7711c6">
        
            <div class="col-12 col-sm-9 text-start"><h3>Daisy Chain tests</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+355</span></div>
                <div class="text-start"><span class="text-danger">-23</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-43a06b8a0a4df1769a7711c6">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4a229486999ebe8c005fa576" role="button"
                   aria-expanded="false" aria-controls="id-4a229486999ebe8c005fa576">
                    <code>internal/ethapi/transaction_args_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/ethapi/transaction_args_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/ethapi/transaction_args_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4a229486999ebe8c005fa576"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;transaction_args_test.go op-geth&#47;internal&#47;ethapi&#47;transaction_args_test.go</span>
<span class="term-fg1">index a8f2d5214889ee187d4bbd2c3af82236acd8a871..a62e189e00dc6cefdf75689ffa9a25f2e4a66928 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;transaction_args_test.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;ethapi&#47;transaction_args_test.go</span>
<span class="term-fg36">@@ -278,7 +278,7 @@</span> }
 func (b *backendMock) HeaderByNumberOrHash(ctx context.Context, blockNrOrHash rpc.BlockNumberOrHash) (*types.Header, error) {
 	return nil, nil
 }
<span class="term-fg31">-func (b *backendMock) CurrentBlock() *types.Block { return nil }</span>
<span class="term-fg32">+func (b *backendMock) CurrentBlock() *types.Header { return nil }</span>
 func (b *backendMock) BlockByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Block, error) {
 	return nil, nil
 }
<span class="term-fg36">@@ -305,7 +305,7 @@</span> func (b *backendMock) GetLogs(ctx context.Context, blockHash common.Hash, number uint64) ([][]*types.Log, error) {
 	return nil, nil
 }
 func (b *backendMock) GetTd(ctx context.Context, hash common.Hash) *big.Int { return nil }
<span class="term-fg31">-func (b *backendMock) GetEVM(ctx context.Context, msg core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
<span class="term-fg32">+func (b *backendMock) GetEVM(ctx context.Context, msg *core.Message, state *state.StateDB, header *types.Header, vmConfig *vm.Config) (*vm.EVM, func() error, error) {</span>
 	return nil, nil, nil
 }
 func (b *backendMock) SubscribeChainEvent(ch chan&lt;- core.ChainEvent) event.Subscription { return nil }
<span class="term-fg36">@@ -342,4 +342,6 @@</span> func (b *backendMock) SubscribeRemovedLogsEvent(ch chan&lt;- core.RemovedLogsEvent) event.Subscription {
 	return nil
 }
&nbsp;
<span class="term-fg31">-func (b *backendMock) Engine() consensus.Engine { return nil }</span>
<span class="term-fg32">+func (b *backendMock) Engine() consensus.Engine          { return nil }</span>
<span class="term-fg32">+func (b *backendMock) HistoricalRPCService() *rpc.Client { return nil }</span>
<span class="term-fg32">+func (b *backendMock) Genesis() *types.Block             { return nil }</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a8933c052be49a929340cd93" role="button"
                   aria-expanded="false" aria-controls="id-a8933c052be49a929340cd93">
                    <code>ethclient/ethclient_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/ethclient/ethclient_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/ethclient/ethclient_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+151</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a8933c052be49a929340cd93"><span class="term-fg1">diff --git go-ethereum&#47;ethclient&#47;ethclient_test.go op-geth&#47;ethclient&#47;ethclient_test.go</span>
<span class="term-fg1">index 8bd8b0614c2d6f0fe37b5dd9c0a2da86f57d1892..c22446f6f3bd9a262957877ba2caa54ca1d80cb6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;ethclient&#47;ethclient_test.go</span>
<span class="term-fg1">+++ op-geth&#47;ethclient&#47;ethclient_test.go</span>
<span class="term-fg36">@@ -22,9 +22,14 @@</span> 	&quot;context&quot;
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;net&quot;</span>
<span class="term-fg32">+	&quot;net&#47;http&quot;</span>
 	&quot;reflect&quot;
 	&quot;testing&quot;
 	&quot;time&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;internal&#47;ethapi&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg36">@@ -194,6 +199,14 @@</span> 	Timestamp: 9000,
 	BaseFee:   big.NewInt(params.InitialBaseFee),
 }
&nbsp;
<span class="term-fg32">+var genesisForHistorical = &amp;core.Genesis{</span>
<span class="term-fg32">+	Config:    params.OptimismTestConfig,</span>
<span class="term-fg32">+	Alloc:     core.GenesisAlloc{testAddr: {Balance: testBalance}},</span>
<span class="term-fg32">+	ExtraData: []byte(&quot;test genesis&quot;),</span>
<span class="term-fg32">+	Timestamp: 9000,</span>
<span class="term-fg32">+	BaseFee:   big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 var testTx1 = types.MustSignNewTx(testKey, types.LatestSigner(genesis.Config), &amp;types.LegacyTx{
 	Nonce:    0,
 	Value:    big.NewInt(12),
<span class="term-fg36">@@ -210,9 +223,64 @@</span> 	Gas:      params.TxGas,
 	To:       &amp;common.Address{2},
 })
&nbsp;
<span class="term-fg31">-func newTestBackend(t *testing.T) (*node.Node, []*types.Block) {</span>
<span class="term-fg32">+type mockHistoricalBackend struct{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) Call(ctx context.Context, args ethapi.TransactionArgs, blockNrOrHash rpc.BlockNumberOrHash, overrides *ethapi.StateOverride) (hexutil.Bytes, error) {</span>
<span class="term-fg32">+	num, ok := blockNrOrHash.Number()</span>
<span class="term-fg32">+	if ok &amp;&amp; num == 1 {</span>
<span class="term-fg32">+		return hexutil.Bytes(&quot;test&quot;), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil, ethereum.NotFound</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) EstimateGas(ctx context.Context, args ethapi.TransactionArgs, blockNrOrHash *rpc.BlockNumberOrHash) (hexutil.Uint64, error) {</span>
<span class="term-fg32">+	num, ok := blockNrOrHash.Number()</span>
<span class="term-fg32">+	if ok &amp;&amp; num == 1 {</span>
<span class="term-fg32">+		return hexutil.Uint64(12345), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return 0, ethereum.NotFound</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newMockHistoricalBackend(t *testing.T) string {</span>
<span class="term-fg32">+	s := rpc.NewServer()</span>
<span class="term-fg32">+	err := node.RegisterApis([]rpc.API{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			Namespace:     &quot;eth&quot;,</span>
<span class="term-fg32">+			Service:       new(mockHistoricalBackend),</span>
<span class="term-fg32">+			Public:        true,</span>
<span class="term-fg32">+			Authenticated: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}, nil, s)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;error creating mock historical backend: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	hdlr := node.NewHTTPHandlerStack(s, []string{&quot;*&quot;}, []string{&quot;*&quot;}, nil)</span>
<span class="term-fg32">+	mux := http.NewServeMux()</span>
<span class="term-fg32">+	mux.Handle(&quot;&#47;&quot;, hdlr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	listener, err := net.Listen(&quot;tcp&quot;, &quot;127.0.0.1:0&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;error creating mock historical backend listener: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	go func() {</span>
<span class="term-fg32">+		httpS := &amp;http.Server{Handler: mux}</span>
<span class="term-fg32">+		httpS.Serve(listener)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		t.Cleanup(func() {</span>
<span class="term-fg32">+			httpS.Shutdown(context.Background())</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;http:&#47;&#47;%s&quot;, listener.Addr().String())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newTestBackend(t *testing.T, enableHistoricalState bool) (*node.Node, []*types.Block) {</span>
<span class="term-fg32">+	histAddr := newMockHistoricalBackend(t)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Generate test chain.
<span class="term-fg31">-	blocks := generateTestChain()</span>
<span class="term-fg32">+	blocks := generateTestChain(enableHistoricalState)</span>
&nbsp;
 	&#47;&#47; Create node
 	n, err := node.New(&amp;node.Config{})
<span class="term-fg36">@@ -220,8 +288,18 @@</span> 	if err != nil {
 		t.Fatalf(&quot;can&#39;t create new node: %v&quot;, err)
 	}
 	&#47;&#47; Create Ethereum Service
<span class="term-fg31">-	config := &amp;ethconfig.Config{Genesis: genesis}</span>
<span class="term-fg32">+	var actualGenesis *core.Genesis</span>
<span class="term-fg32">+	if enableHistoricalState {</span>
<span class="term-fg32">+		actualGenesis = genesisForHistorical</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		actualGenesis = genesis</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config := &amp;ethconfig.Config{Genesis: actualGenesis}</span>
 	config.Ethash.PowMode = ethash.ModeFake
<span class="term-fg32">+	if enableHistoricalState {</span>
<span class="term-fg32">+		config.RollupHistoricalRPC = histAddr</span>
<span class="term-fg32">+		config.RollupHistoricalRPCTimeout = time.Second * 5</span>
<span class="term-fg32">+	}</span>
 	ethservice, err := eth.New(n, config)
 	if err != nil {
 		t.Fatalf(&quot;can&#39;t create new ethereum service: %v&quot;, err)
<span class="term-fg36">@@ -236,7 +314,7 @@</span> 	}
 	return n, blocks
 }
&nbsp;
<span class="term-fg31">-func generateTestChain() []*types.Block {</span>
<span class="term-fg32">+func generateTestChain(enableHistoricalState bool) []*types.Block {</span>
 	generate := func(i int, g *core.BlockGen) {
 		g.OffsetTime(5)
 		g.SetExtra([]byte(&quot;test&quot;))
<span class="term-fg36">@@ -246,12 +324,27 @@</span> 			g.AddTx(testTx1)
 			g.AddTx(testTx2)
 		}
 	}
<span class="term-fg31">-	_, blocks, _ := core.GenerateChainWithGenesis(genesis, ethash.NewFaker(), 2, generate)</span>
<span class="term-fg31">-	return append([]*types.Block{genesis.ToBlock()}, blocks...)</span>
<span class="term-fg32">+	var actualGenesis *core.Genesis</span>
<span class="term-fg32">+	if enableHistoricalState {</span>
<span class="term-fg32">+		actualGenesis = genesisForHistorical</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		actualGenesis = genesis</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	_, blocks, _ := core.GenerateChainWithGenesis(actualGenesis, ethash.NewFaker(), 2, generate)</span>
<span class="term-fg32">+	return append([]*types.Block{actualGenesis.ToBlock()}, blocks...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestEthClientHistoricalBackend(t *testing.T) {</span>
<span class="term-fg32">+	backend, _ := newTestBackend(t, true)</span>
<span class="term-fg32">+	client, _ := backend.Attach()</span>
<span class="term-fg32">+	defer backend.Close()</span>
<span class="term-fg32">+	defer client.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testHistoricalRPC(t, client)</span>
 }
&nbsp;
 func TestEthClient(t *testing.T) {
<span class="term-fg31">-	backend, chain := newTestBackend(t)</span>
<span class="term-fg32">+	backend, chain := newTestBackend(t, false)</span>
 	client, _ := backend.Attach()
 	defer backend.Close()
 	defer client.Close()
<span class="term-fg36">@@ -288,6 +381,9 @@</span> 			func(t *testing.T) { testAtFunctions(t, client) },
 		},
 		&quot;TransactionSender&quot;: {
 			func(t *testing.T) { testTransactionSender(t, client) },
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&quot;EstimateGas&quot;: {</span>
<span class="term-fg32">+			func(t *testing.T) { testEstimateGas(t, client) },</span>
 		},
 	}
&nbsp;
<span class="term-fg36">@@ -684,6 +780,54 @@</span> 		t.Fatal(err)
 	}
 	if sender2 != testAddr {
 		t.Fatal(&quot;wrong sender:&quot;, sender2)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testEstimateGas(t *testing.T, client *rpc.Client) {</span>
<span class="term-fg32">+	ec := NewClient(client)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; EstimateGas</span>
<span class="term-fg32">+	msg := ethereum.CallMsg{</span>
<span class="term-fg32">+		From:  testAddr,</span>
<span class="term-fg32">+		To:    &amp;common.Address{},</span>
<span class="term-fg32">+		Gas:   21000,</span>
<span class="term-fg32">+		Value: big.NewInt(1),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	gas, err := ec.EstimateGas(context.Background(), msg)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if gas != 21000 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected gas price: %v&quot;, gas)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testHistoricalRPC(t *testing.T, client *rpc.Client) {</span>
<span class="term-fg32">+	ec := NewClient(client)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Estimate Gas RPC</span>
<span class="term-fg32">+	msg := ethereum.CallMsg{</span>
<span class="term-fg32">+		From:  testAddr,</span>
<span class="term-fg32">+		To:    &amp;common.Address{},</span>
<span class="term-fg32">+		Gas:   21000,</span>
<span class="term-fg32">+		Value: big.NewInt(1),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var res hexutil.Uint64</span>
<span class="term-fg32">+	err := client.CallContext(context.Background(), &amp;res, &quot;eth_estimateGas&quot;, toCallArg(msg), rpc.BlockNumberOrHashWithNumber(1))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if res != 12345 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;invalid result: %d&quot;, res)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Call Contract RPC</span>
<span class="term-fg32">+	histVal, err := ec.CallContract(context.Background(), msg, big.NewInt(1))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if string(histVal) != &quot;test&quot; {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected %s to equal test&quot;, string(histVal))</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7340fc6e9c7a1f931630e311" role="button"
                   aria-expanded="false" aria-controls="id-7340fc6e9c7a1f931630e311">
                    <code>eth/tracers/api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/api_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/api_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+199</span></div>
                        <div class="text-start"><span class="text-danger">-13</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7340fc6e9c7a1f931630e311"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;api_test.go op-geth&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg1">index 29ec80868579a3ae78c2de0c28571b2c16a03ea8..a2d00f3edc2352fcc256af6437e8b2857e0704a6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg36">@@ -24,12 +24,15 @@</span> 	&quot;encoding&#47;json&quot;
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;net&quot;</span>
<span class="term-fg32">+	&quot;net&#47;http&quot;</span>
 	&quot;reflect&quot;
 	&quot;sort&quot;
 	&quot;sync&#47;atomic&quot;
 	&quot;testing&quot;
 	&quot;time&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;davecgh&#47;go-spew&#47;spew&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
<span class="term-fg36">@@ -43,15 +46,78 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&#47;logger&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;internal&#47;ethapi&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;node&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;mock&quot;</span>
 )
&nbsp;
 var (
<span class="term-fg31">-	errStateNotFound = errors.New(&quot;state not found&quot;)</span>
<span class="term-fg31">-	errBlockNotFound = errors.New(&quot;block not found&quot;)</span>
<span class="term-fg32">+	errStateNotFound       = errors.New(&quot;state not found&quot;)</span>
<span class="term-fg32">+	errBlockNotFound       = errors.New(&quot;block not found&quot;)</span>
<span class="term-fg32">+	errTransactionNotFound = errors.New(&quot;transaction not found&quot;)</span>
 )
&nbsp;
<span class="term-fg32">+type mockHistoricalBackend struct {</span>
<span class="term-fg32">+	mock.Mock</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; mockHistoricalBackend does not have a TraceCall, because pre-bedrock there is no debug_traceCall available</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) TraceBlockByNumber(ctx context.Context, number rpc.BlockNumber, config *TraceConfig) ([]*txTraceResult, error) {</span>
<span class="term-fg32">+	ret := m.Mock.MethodCalled(&quot;TraceBlockByNumber&quot;, number, config)</span>
<span class="term-fg32">+	return ret[0].([]*txTraceResult), *ret[1].(*error)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) ExpectTraceBlockByNumber(number rpc.BlockNumber, config *TraceConfig, out []*txTraceResult, err error) {</span>
<span class="term-fg32">+	m.Mock.On(&quot;TraceBlockByNumber&quot;, number, config).Once().Return(out, &amp;err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) TraceTransaction(ctx context.Context, hash common.Hash, config *TraceConfig) (interface{}, error) {</span>
<span class="term-fg32">+	ret := m.Mock.MethodCalled(&quot;TraceTransaction&quot;, hash, config)</span>
<span class="term-fg32">+	return ret[0], *ret[1].(*error)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *mockHistoricalBackend) ExpectTraceTransaction(hash common.Hash, config *TraceConfig, out interface{}, err error) {</span>
<span class="term-fg32">+	jsonOut, _ := json.Marshal(out)</span>
<span class="term-fg32">+	m.Mock.On(&quot;TraceTransaction&quot;, hash, config).Once().Return(json.RawMessage(jsonOut), &amp;err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newMockHistoricalBackend(t *testing.T, backend *mockHistoricalBackend) string {</span>
<span class="term-fg32">+	s := rpc.NewServer()</span>
<span class="term-fg32">+	err := node.RegisterApis([]rpc.API{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			Namespace:     &quot;debug&quot;,</span>
<span class="term-fg32">+			Service:       backend,</span>
<span class="term-fg32">+			Public:        true,</span>
<span class="term-fg32">+			Authenticated: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}, nil, s)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;error creating mock historical backend: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	hdlr := node.NewHTTPHandlerStack(s, []string{&quot;*&quot;}, []string{&quot;*&quot;}, nil)</span>
<span class="term-fg32">+	mux := http.NewServeMux()</span>
<span class="term-fg32">+	mux.Handle(&quot;&#47;&quot;, hdlr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	listener, err := net.Listen(&quot;tcp&quot;, &quot;127.0.0.1:0&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;error creating mock historical backend listener: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	go func() {</span>
<span class="term-fg32">+		httpS := &amp;http.Server{Handler: mux}</span>
<span class="term-fg32">+		httpS.Serve(listener)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		t.Cleanup(func() {</span>
<span class="term-fg32">+			httpS.Shutdown(context.Background())</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;http:&#47;&#47;%s&quot;, listener.Addr().String())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 type testBackend struct {
 	chainConfig *params.ChainConfig
 	engine      consensus.Engine
<span class="term-fg36">@@ -60,15 +126,28 @@</span> 	chain       *core.BlockChain
&nbsp;
 	refHook func() &#47;&#47; Hook is invoked when the requested state is referenced
 	relHook func() &#47;&#47; Hook is invoked when the requested state is released
<span class="term-fg32">+</span>
<span class="term-fg32">+	historical     *rpc.Client</span>
<span class="term-fg32">+	mockHistorical *mockHistoricalBackend</span>
 }
&nbsp;
 &#47;&#47; testBackend creates a new test backend. OBS: After test is done, teardown must be
 &#47;&#47; invoked in order to release associated resources.
 func newTestBackend(t *testing.T, n int, gspec *core.Genesis, generator func(i int, b *core.BlockGen)) *testBackend {
<span class="term-fg32">+	mock := new(mockHistoricalBackend)</span>
<span class="term-fg32">+	historicalAddr := newMockHistoricalBackend(t, mock)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	historicalClient, err := rpc.Dial(historicalAddr)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;error making historical client: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	backend := &amp;testBackend{
<span class="term-fg31">-		chainConfig: gspec.Config,</span>
<span class="term-fg31">-		engine:      ethash.NewFaker(),</span>
<span class="term-fg31">-		chaindb:     rawdb.NewMemoryDatabase(),</span>
<span class="term-fg32">+		chainConfig:    gspec.Config,</span>
<span class="term-fg32">+		engine:         ethash.NewFaker(),</span>
<span class="term-fg32">+		chaindb:        rawdb.NewMemoryDatabase(),</span>
<span class="term-fg32">+		historical:     historicalClient,</span>
<span class="term-fg32">+		mockHistorical: mock,</span>
 	}
 	&#47;&#47; Generate blocks for testing
 	_, blocks, _ := core.GenerateChainWithGenesis(gspec, backend.engine, n, generator)
<span class="term-fg36">@@ -109,13 +188,16 @@</span> }
&nbsp;
 func (b *testBackend) BlockByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Block, error) {
 	if number == rpc.PendingBlockNumber || number == rpc.LatestBlockNumber {
<span class="term-fg31">-		return b.chain.CurrentBlock(), nil</span>
<span class="term-fg32">+		return b.chain.GetBlockByNumber(b.chain.CurrentBlock().Number.Uint64()), nil</span>
 	}
 	return b.chain.GetBlockByNumber(uint64(number)), nil
 }
&nbsp;
 func (b *testBackend) GetTransaction(ctx context.Context, txHash common.Hash) (*types.Transaction, common.Hash, uint64, uint64, error) {
 	tx, hash, blockNumber, index := rawdb.ReadTransaction(b.chaindb, txHash)
<span class="term-fg32">+	if tx == nil {</span>
<span class="term-fg32">+		return nil, common.Hash{}, 0, 0, errTransactionNotFound</span>
<span class="term-fg32">+	}</span>
 	return tx, hash, blockNumber, index, nil
 }
&nbsp;
<span class="term-fg36">@@ -156,7 +238,7 @@</span> 	}
 	return statedb, release, nil
 }
&nbsp;
<span class="term-fg31">-func (b *testBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (core.Message, vm.BlockContext, *state.StateDB, StateReleaseFunc, error) {</span>
<span class="term-fg32">+func (b *testBackend) StateAtTransaction(ctx context.Context, block *types.Block, txIndex int, reexec uint64) (*core.Message, vm.BlockContext, *state.StateDB, StateReleaseFunc, error) {</span>
 	parent := b.chain.GetBlock(block.ParentHash(), block.NumberU64()-1)
 	if parent == nil {
 		return nil, vm.BlockContext{}, nil, nil, errBlockNotFound
<span class="term-fg36">@@ -171,9 +253,9 @@</span> 	}
 	&#47;&#47; Recompute transactions up to the target index.
 	signer := types.MakeSigner(b.chainConfig, block.Number())
 	for idx, tx := range block.Transactions() {
<span class="term-fg31">-		msg, _ := tx.AsMessage(signer, block.BaseFee())</span>
<span class="term-fg32">+		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())</span>
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(block.Header(), b.chain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(block.Header(), b.chain, nil, b.chainConfig, statedb)</span>
 		if idx == txIndex {
 			return msg, context, statedb, release, nil
 		}
<span class="term-fg36">@@ -184,6 +266,10 @@</span> 		}
 		statedb.Finalise(vmenv.ChainConfig().IsEIP158(block.Number()))
 	}
 	return nil, vm.BlockContext{}, nil, nil, fmt.Errorf(&quot;transaction index %d out of range for block %#x&quot;, txIndex, block.Hash())
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testBackend) HistoricalRPCService() *rpc.Client {</span>
<span class="term-fg32">+	return b.historical</span>
 }
&nbsp;
 func TestTraceCall(t *testing.T) {
<span class="term-fg36">@@ -361,11 +447,58 @@</span> 		StructLogs:  []logger.StructLogRes{},
 	}) {
 		t.Error(&quot;Transaction tracing result is different&quot;)
 	}
<span class="term-fg32">+}</span>
<span class="term-fg32">+func TestTraceTransactionHistorical(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
&nbsp;
<span class="term-fg31">-	&#47;&#47; Test non-existent transaction</span>
<span class="term-fg31">-	_, err = api.TraceTransaction(context.Background(), common.Hash{42}, nil)</span>
<span class="term-fg31">-	if !errors.Is(err, errTxNotFound) {</span>
<span class="term-fg31">-		t.Fatalf(&quot;want %v, have %v&quot;, errTxNotFound, err)</span>
<span class="term-fg32">+	&#47;&#47; Initialize test accounts</span>
<span class="term-fg32">+	accounts := newAccounts(2)</span>
<span class="term-fg32">+	genesis := &amp;core.Genesis{</span>
<span class="term-fg32">+		Config: params.OptimismTestConfig,</span>
<span class="term-fg32">+		Alloc: core.GenesisAlloc{</span>
<span class="term-fg32">+			accounts[0].addr: {Balance: big.NewInt(params.Ether)},</span>
<span class="term-fg32">+			accounts[1].addr: {Balance: big.NewInt(params.Ether)},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	target := common.Hash{}</span>
<span class="term-fg32">+	signer := types.HomesteadSigner{}</span>
<span class="term-fg32">+	backend := newTestBackend(t, 1, genesis, func(i int, b *core.BlockGen) {</span>
<span class="term-fg32">+		&#47;&#47; Transfer from account[0] to account[1]</span>
<span class="term-fg32">+		&#47;&#47;    value: 1000 wei</span>
<span class="term-fg32">+		&#47;&#47;    fee:   0 wei</span>
<span class="term-fg32">+		tx, _ := types.SignTx(types.NewTransaction(uint64(i), accounts[1].addr, big.NewInt(1000), params.TxGas, b.BaseFee(), nil), signer, accounts[0].key)</span>
<span class="term-fg32">+		b.AddTx(tx)</span>
<span class="term-fg32">+		target = tx.Hash()</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	defer backend.mockHistorical.AssertExpectations(t)</span>
<span class="term-fg32">+	defer backend.chain.Stop()</span>
<span class="term-fg32">+	backend.mockHistorical.ExpectTraceTransaction(</span>
<span class="term-fg32">+		target,</span>
<span class="term-fg32">+		nil,</span>
<span class="term-fg32">+		logger.ExecutionResult{</span>
<span class="term-fg32">+			Gas:         params.TxGas,</span>
<span class="term-fg32">+			Failed:      false,</span>
<span class="term-fg32">+			ReturnValue: &quot;&quot;,</span>
<span class="term-fg32">+			StructLogs:  []logger.StructLogRes{},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		nil)</span>
<span class="term-fg32">+	api := NewAPI(backend)</span>
<span class="term-fg32">+	result, err := api.TraceTransaction(context.Background(), target, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Errorf(&quot;Failed to trace transaction %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var have *logger.ExecutionResult</span>
<span class="term-fg32">+	spew.Dump(result)</span>
<span class="term-fg32">+	if err := json.Unmarshal(result.(json.RawMessage), &amp;have); err != nil {</span>
<span class="term-fg32">+		t.Errorf(&quot;failed to unmarshal result %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !reflect.DeepEqual(have, &amp;logger.ExecutionResult{</span>
<span class="term-fg32">+		Gas:         params.TxGas,</span>
<span class="term-fg32">+		Failed:      false,</span>
<span class="term-fg32">+		ReturnValue: &quot;&quot;,</span>
<span class="term-fg32">+		StructLogs:  []logger.StructLogRes{},</span>
<span class="term-fg32">+	}) {</span>
<span class="term-fg32">+		t.Error(&quot;Transaction tracing result is different&quot;)</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -447,6 +580,59 @@</span> 		want := tc.want
 		if string(have) != want {
 			t.Errorf(&quot;test %d, result mismatch, have\n%v\n, want\n%v\n&quot;, i, string(have), want)
 		}
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestTraceBlockHistorical(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Initialize test accounts</span>
<span class="term-fg32">+	accounts := newAccounts(3)</span>
<span class="term-fg32">+	genesis := &amp;core.Genesis{</span>
<span class="term-fg32">+		Config: params.OptimismTestConfig,</span>
<span class="term-fg32">+		Alloc: core.GenesisAlloc{</span>
<span class="term-fg32">+			accounts[0].addr: {Balance: big.NewInt(params.Ether)},</span>
<span class="term-fg32">+			accounts[1].addr: {Balance: big.NewInt(params.Ether)},</span>
<span class="term-fg32">+			accounts[2].addr: {Balance: big.NewInt(params.Ether)},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	genBlocks := 10</span>
<span class="term-fg32">+	signer := types.HomesteadSigner{}</span>
<span class="term-fg32">+	backend := newTestBackend(t, genBlocks, genesis, func(i int, b *core.BlockGen) {</span>
<span class="term-fg32">+		&#47;&#47; Transfer from account[0] to account[1]</span>
<span class="term-fg32">+		&#47;&#47;    value: 1000 wei</span>
<span class="term-fg32">+		&#47;&#47;    fee:   0 wei</span>
<span class="term-fg32">+		tx, _ := types.SignTx(types.NewTransaction(uint64(i), accounts[1].addr, big.NewInt(1000), params.TxGas, b.BaseFee(), nil), signer, accounts[0].key)</span>
<span class="term-fg32">+		b.AddTx(tx)</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	defer backend.mockHistorical.AssertExpectations(t)</span>
<span class="term-fg32">+	defer backend.chain.Stop()</span>
<span class="term-fg32">+	api := NewAPI(backend)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var expectErr error</span>
<span class="term-fg32">+	var config *TraceConfig</span>
<span class="term-fg32">+	blockNumber := rpc.BlockNumber(3)</span>
<span class="term-fg32">+	want := `[{&quot;result&quot;:{&quot;failed&quot;:false,&quot;gas&quot;:21000,&quot;returnValue&quot;:&quot;&quot;,&quot;structLogs&quot;:[]}}]`</span>
<span class="term-fg32">+	var ret []*txTraceResult</span>
<span class="term-fg32">+	_ = json.Unmarshal([]byte(want), &amp;ret)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	backend.mockHistorical.ExpectTraceBlockByNumber(blockNumber, config, ret, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	result, err := api.TraceBlockByNumber(context.Background(), blockNumber, config)</span>
<span class="term-fg32">+	if expectErr != nil {</span>
<span class="term-fg32">+		if err == nil {</span>
<span class="term-fg32">+			t.Errorf(&quot;want error %v&quot;, expectErr)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !reflect.DeepEqual(err, expectErr) {</span>
<span class="term-fg32">+			t.Errorf(&quot;error mismatch, want %v, get %v&quot;, expectErr, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Errorf(&quot;want no error, have %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	have, _ := json.Marshal(result)</span>
<span class="term-fg32">+	if string(have) != want {</span>
<span class="term-fg32">+		t.Errorf(&quot;result mismatch, have\n%v\n, want\n%v\n&quot;, string(have), want)</span>
 	}
 }
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-da8826af8ff5431d39a625ae"role="button" aria-expanded="false" aria-controls="id-da8826af8ff5431d39a625ae">
        
            <div class="col-12 col-sm-9 text-start"><h2>Geth extras</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+478</span></div>
                <div class="text-start"><span class="text-danger">-55</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-da8826af8ff5431d39a625ae">
        <div><p>Extend the tools available in geth to improve external testing and tooling.</p>
</div>
        <div>
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-e34777e9f7e43545ef8fef32"role="button" aria-expanded="false" aria-controls="id-e34777e9f7e43545ef8fef32">
        
            <div class="col-12 col-sm-9 text-start"><h3>Simulated Backend</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+122</span></div>
                <div class="text-start"><span class="text-danger">-55</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-e34777e9f7e43545ef8fef32">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b56ebcd24cc71b6be2778ba1" role="button"
                   aria-expanded="false" aria-controls="id-b56ebcd24cc71b6be2778ba1">
                    <code>accounts/abi/bind/backends/simulated.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/accounts/abi/bind/backends/simulated.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/accounts/abi/bind/backends/simulated.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+122</span></div>
                        <div class="text-start"><span class="text-danger">-55</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b56ebcd24cc71b6be2778ba1"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go op-geth&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg1">index 008c71feaa7a232398212a6c366d71a7b739181b..b2892e3cb1932e234aa0919f7703ada91eaf349c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg1">+++ op-geth&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go</span>
<span class="term-fg36">@@ -30,6 +30,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;ethash&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;bloombits&quot;
<span class="term-fg36">@@ -63,6 +64,8 @@</span> type SimulatedBackend struct {
 	database   ethdb.Database   &#47;&#47; In memory database to store our testing data
 	blockchain *core.BlockChain &#47;&#47; Ethereum blockchain to handle the consensus
&nbsp;
<span class="term-fg32">+	consensus consensus.Engine</span>
<span class="term-fg32">+</span>
 	mu              sync.Mutex
 	pendingBlock    *types.Block   &#47;&#47; Currently pending block that will be imported on request
 	pendingState    *state.StateDB &#47;&#47; Currently pending state that will be the active on request
<span class="term-fg36">@@ -78,32 +81,101 @@</span> &#47;&#47; NewSimulatedBackendWithDatabase creates a new binding backend based on the given database
 &#47;&#47; and uses a simulated blockchain for testing purposes.
 &#47;&#47; A simulated backend always uses chainID 1337.
 func NewSimulatedBackendWithDatabase(database ethdb.Database, alloc core.GenesisAlloc, gasLimit uint64) *SimulatedBackend {
<span class="term-fg31">-	genesis := core.Genesis{</span>
<span class="term-fg31">-		Config:   params.AllEthashProtocolChanges,</span>
<span class="term-fg31">-		GasLimit: gasLimit,</span>
<span class="term-fg31">-		Alloc:    alloc,</span>
<span class="term-fg32">+	return NewSimulatedBackendWithOpts(WithDatabase(database), WithAlloc(alloc), WithGasLimit(gasLimit))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSimulatedBackend creates a new binding backend using a simulated blockchain</span>
<span class="term-fg32">+&#47;&#47; for testing purposes.</span>
<span class="term-fg32">+&#47;&#47; A simulated backend always uses chainID 1337.</span>
<span class="term-fg32">+func NewSimulatedBackend(alloc core.GenesisAlloc, gasLimit uint64) *SimulatedBackend {</span>
<span class="term-fg32">+	return NewSimulatedBackendWithOpts(WithGasLimit(gasLimit), WithAlloc(alloc))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type simulatedBackendConfig struct {</span>
<span class="term-fg32">+	genesis     core.Genesis</span>
<span class="term-fg32">+	cacheConfig *core.CacheConfig</span>
<span class="term-fg32">+	database    ethdb.Database</span>
<span class="term-fg32">+	vmConfig    vm.Config</span>
<span class="term-fg32">+	consensus   consensus.Engine</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type SimulatedBackendOpt func(s *simulatedBackendConfig)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithDatabase(database ethdb.Database) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.database = database</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithGasLimit(gasLimit uint64) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.genesis.GasLimit = gasLimit</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithAlloc(alloc core.GenesisAlloc) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.genesis.Alloc = alloc</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithCacheConfig(cacheConfig *core.CacheConfig) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.cacheConfig = cacheConfig</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithGenesis(genesis core.Genesis) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.genesis = genesis</span>
 	}
<span class="term-fg31">-	blockchain, _ := core.NewBlockChain(database, nil, &amp;genesis, nil, ethash.NewFaker(), vm.Config{}, nil, nil)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithVMConfig(vmConfig vm.Config) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.vmConfig = vmConfig</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func WithConsensus(consensus consensus.Engine) SimulatedBackendOpt {</span>
<span class="term-fg32">+	return func(s *simulatedBackendConfig) {</span>
<span class="term-fg32">+		s.consensus = consensus</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSimulatedBackendWithOpts creates a new binding backend based on the given database</span>
<span class="term-fg32">+&#47;&#47; and uses a simulated blockchain for testing purposes. It exposes additional configuration</span>
<span class="term-fg32">+&#47;&#47; options that are useful to</span>
<span class="term-fg32">+func NewSimulatedBackendWithOpts(opts ...SimulatedBackendOpt) *SimulatedBackend {</span>
<span class="term-fg32">+	config := &amp;simulatedBackendConfig{</span>
<span class="term-fg32">+		genesis:   core.Genesis{Config: params.AllEthashProtocolChanges, GasLimit: 100000000, Alloc: make(core.GenesisAlloc)},</span>
<span class="term-fg32">+		database:  rawdb.NewMemoryDatabase(),</span>
<span class="term-fg32">+		consensus: ethash.NewFaker(),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, opt := range opts {</span>
<span class="term-fg32">+		opt(config)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	config.genesis.MustCommit(config.database)</span>
<span class="term-fg32">+	blockchain, _ := core.NewBlockChain(config.database, config.cacheConfig, &amp;config.genesis, nil, config.consensus, config.vmConfig, nil, nil)</span>
&nbsp;
 	backend := &amp;SimulatedBackend{
<span class="term-fg31">-		database:   database,</span>
<span class="term-fg32">+		database:   config.database,</span>
 		blockchain: blockchain,
<span class="term-fg31">-		config:     genesis.Config,</span>
<span class="term-fg32">+		config:     config.genesis.Config,</span>
<span class="term-fg32">+		consensus:  config.consensus,</span>
 	}
&nbsp;
<span class="term-fg31">-	filterBackend := &amp;filterBackend{database, blockchain, backend}</span>
<span class="term-fg32">+	filterBackend := &amp;filterBackend{config.database, blockchain, backend}</span>
 	backend.filterSystem = filters.NewFilterSystem(filterBackend, filters.Config{})
 	backend.events = filters.NewEventSystem(backend.filterSystem, false)
&nbsp;
<span class="term-fg31">-	backend.rollback(blockchain.CurrentBlock())</span>
<span class="term-fg31">-	return backend</span>
<span class="term-fg31">-}</span>
<span class="term-fg32">+	header := backend.blockchain.CurrentBlock()</span>
<span class="term-fg32">+	block := backend.blockchain.GetBlock(header.Hash(), header.Number.Uint64())</span>
&nbsp;
<span class="term-fg31">-&#47;&#47; NewSimulatedBackend creates a new binding backend using a simulated blockchain</span>
<span class="term-fg31">-&#47;&#47; for testing purposes.</span>
<span class="term-fg31">-&#47;&#47; A simulated backend always uses chainID 1337.</span>
<span class="term-fg31">-func NewSimulatedBackend(alloc core.GenesisAlloc, gasLimit uint64) *SimulatedBackend {</span>
<span class="term-fg31">-	return NewSimulatedBackendWithDatabase(rawdb.NewMemoryDatabase(), alloc, gasLimit)</span>
<span class="term-fg32">+	backend.rollback(block)</span>
<span class="term-fg32">+	return backend</span>
 }
&nbsp;
 &#47;&#47; Close terminates the underlying blockchain&#39;s update loop.
<span class="term-fg36">@@ -121,6 +193,8 @@</span>
 	if _, err := b.blockchain.InsertChain([]*types.Block{b.pendingBlock}); err != nil {
 		panic(err) &#47;&#47; This cannot happen unless the simulator is wrong, fail in that case
 	}
<span class="term-fg32">+	&#47;&#47; Don&#39;t wait for the async tx indexing</span>
<span class="term-fg32">+	rawdb.WriteTxLookupEntriesByBlock(b.database, b.pendingBlock)</span>
 	blockHash := b.pendingBlock.Hash()
&nbsp;
 	&#47;&#47; Using the last inserted block here makes it possible to build on a side
<span class="term-fg36">@@ -135,11 +209,14 @@</span> func (b *SimulatedBackend) Rollback() {
 	b.mu.Lock()
 	defer b.mu.Unlock()
&nbsp;
<span class="term-fg31">-	b.rollback(b.blockchain.CurrentBlock())</span>
<span class="term-fg32">+	header := b.blockchain.CurrentBlock()</span>
<span class="term-fg32">+	block := b.blockchain.GetBlock(header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	b.rollback(block)</span>
 }
&nbsp;
 func (b *SimulatedBackend) rollback(parent *types.Block) {
<span class="term-fg31">-	blocks, _ := core.GenerateChain(b.config, parent, ethash.NewFaker(), b.database, 1, func(int, *core.BlockGen) {})</span>
<span class="term-fg32">+	blocks, _ := core.GenerateChain(b.config, parent, b.consensus, b.database, 1, func(int, *core.BlockGen) {})</span>
&nbsp;
 	b.pendingBlock = blocks[0]
 	b.pendingState, _ = state.New(b.pendingBlock.Root(), b.blockchain.StateCache(), nil)
<span class="term-fg36">@@ -174,7 +251,7 @@</span> }
&nbsp;
 &#47;&#47; stateByBlockNumber retrieves a state by a given blocknumber.
 func (b *SimulatedBackend) stateByBlockNumber(ctx context.Context, blockNumber *big.Int) (*state.StateDB, error) {
<span class="term-fg31">-	if blockNumber == nil || blockNumber.Cmp(b.blockchain.CurrentBlock().Number()) == 0 {</span>
<span class="term-fg32">+	if blockNumber == nil || blockNumber.Cmp(b.blockchain.CurrentBlock().Number) == 0 {</span>
 		return b.blockchain.State()
 	}
 	block, err := b.blockByNumber(ctx, blockNumber)
<span class="term-fg36">@@ -303,7 +380,7 @@</span> &#47;&#47; blockByNumber retrieves a block from the database by number, caching it
 &#47;&#47; (associated with its hash) if found without Lock.
 func (b *SimulatedBackend) blockByNumber(ctx context.Context, number *big.Int) (*types.Block, error) {
 	if number == nil || number.Cmp(b.pendingBlock.Number()) == 0 {
<span class="term-fg31">-		return b.blockchain.CurrentBlock(), nil</span>
<span class="term-fg32">+		return b.blockByHash(ctx, b.blockchain.CurrentBlock().Hash())</span>
 	}
&nbsp;
 	block := b.blockchain.GetBlockByNumber(uint64(number.Int64()))
<span class="term-fg36">@@ -431,7 +508,7 @@</span> func (b *SimulatedBackend) CallContract(ctx context.Context, call ethereum.CallMsg, blockNumber *big.Int) ([]byte, error) {
 	b.mu.Lock()
 	defer b.mu.Unlock()
&nbsp;
<span class="term-fg31">-	if blockNumber != nil &amp;&amp; blockNumber.Cmp(b.blockchain.CurrentBlock().Number()) != 0 {</span>
<span class="term-fg32">+	if blockNumber != nil &amp;&amp; blockNumber.Cmp(b.blockchain.CurrentBlock().Number) != 0 {</span>
 		return nil, errBlockNumberUnsupported
 	}
 	stateDB, err := b.blockchain.State()
<span class="term-fg36">@@ -455,7 +532,7 @@</span> 	b.mu.Lock()
 	defer b.mu.Unlock()
 	defer b.pendingState.RevertToSnapshot(b.pendingState.Snapshot())
&nbsp;
<span class="term-fg31">-	res, err := b.callContract(ctx, call, b.pendingBlock, b.pendingState)</span>
<span class="term-fg32">+	res, err := b.callContract(ctx, call, b.pendingBlock.Header(), b.pendingState)</span>
 	if err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -549,7 +626,7 @@</span> 	executable := func(gas uint64) (bool, *core.ExecutionResult, error) {
 		call.Gas = gas
&nbsp;
 		snapshot := b.pendingState.Snapshot()
<span class="term-fg31">-		res, err := b.callContract(ctx, call, b.pendingBlock, b.pendingState)</span>
<span class="term-fg32">+		res, err := b.callContract(ctx, call, b.pendingBlock.Header(), b.pendingState)</span>
 		b.pendingState.RevertToSnapshot(snapshot)
&nbsp;
 		if err != nil {
<span class="term-fg36">@@ -599,7 +676,7 @@</span> }
&nbsp;
 &#47;&#47; callContract implements common code between normal and pending contract calls.
 &#47;&#47; state is modified during execution, make sure to copy it if necessary.
<span class="term-fg31">-func (b *SimulatedBackend) callContract(ctx context.Context, call ethereum.CallMsg, block *types.Block, stateDB *state.StateDB) (*core.ExecutionResult, error) {</span>
<span class="term-fg32">+func (b *SimulatedBackend) callContract(ctx context.Context, call ethereum.CallMsg, header *types.Header, stateDB *state.StateDB) (*core.ExecutionResult, error) {</span>
 	&#47;&#47; Gas prices post 1559 need to be initialized
 	if call.GasPrice != nil &amp;&amp; (call.GasFeeCap != nil || call.GasTipCap != nil) {
 		return nil, errors.New(&quot;both gasPrice and (maxFeePerGas or maxPriorityFeePerGas) specified&quot;)
<span class="term-fg36">@@ -638,20 +715,33 @@</span> 	}
 	if call.Value == nil {
 		call.Value = new(big.Int)
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Set infinite balance to the fake caller account.
 	from := stateDB.GetOrNewStateObject(call.From)
 	from.SetBalance(math.MaxBig256)
<span class="term-fg32">+</span>
 	&#47;&#47; Execute the call.
<span class="term-fg31">-	msg := callMsg{call}</span>
<span class="term-fg32">+	msg := &amp;core.Message{</span>
<span class="term-fg32">+		From:              call.From,</span>
<span class="term-fg32">+		To:                call.To,</span>
<span class="term-fg32">+		Value:             call.Value,</span>
<span class="term-fg32">+		GasLimit:          call.Gas,</span>
<span class="term-fg32">+		GasPrice:          call.GasPrice,</span>
<span class="term-fg32">+		GasFeeCap:         call.GasFeeCap,</span>
<span class="term-fg32">+		GasTipCap:         call.GasTipCap,</span>
<span class="term-fg32">+		Data:              call.Data,</span>
<span class="term-fg32">+		AccessList:        call.AccessList,</span>
<span class="term-fg32">+		SkipAccountChecks: true,</span>
<span class="term-fg32">+	}</span>
&nbsp;
<span class="term-fg31">-	txContext := core.NewEVMTxContext(msg)</span>
<span class="term-fg31">-	evmContext := core.NewEVMBlockContext(block.Header(), b.blockchain, nil)</span>
 	&#47;&#47; Create a new environment which holds all relevant information
 	&#47;&#47; about the transaction and calling mechanisms.
<span class="term-fg32">+	txContext := core.NewEVMTxContext(msg)</span>
<span class="term-fg32">+	evmContext := core.NewEVMBlockContext(header, b.blockchain, nil, b.config, stateDB)</span>
 	vmEnv := vm.NewEVM(evmContext, txContext, stateDB, b.config, vm.Config{NoBaseFee: true})
 	gasPool := new(core.GasPool).AddGas(math.MaxUint64)
&nbsp;
<span class="term-fg31">-	return core.NewStateTransition(vmEnv, msg, gasPool).TransitionDb()</span>
<span class="term-fg32">+	return core.ApplyMessage(vmEnv, msg, gasPool)</span>
 }
&nbsp;
 &#47;&#47; SendTransaction updates the pending block to include the given transaction.
<span class="term-fg36">@@ -675,7 +765,7 @@</span> 	if tx.Nonce() != nonce {
 		return fmt.Errorf(&quot;invalid transaction nonce: got %d, want %d&quot;, tx.Nonce(), nonce)
 	}
 	&#47;&#47; Include tx in chain
<span class="term-fg31">-	blocks, receipts := core.GenerateChain(b.config, block, ethash.NewFaker(), b.database, 1, func(number int, block *core.BlockGen) {</span>
<span class="term-fg32">+	blocks, receipts := core.GenerateChain(b.config, block, b.consensus, b.database, 1, func(number int, block *core.BlockGen) {</span>
 		for _, tx := range b.pendingBlock.Transactions() {
 			block.AddTxWithChain(b.blockchain, tx)
 		}
<span class="term-fg36">@@ -799,7 +889,7 @@</span> 	if block == nil {
 		return fmt.Errorf(&quot;could not find parent&quot;)
 	}
&nbsp;
<span class="term-fg31">-	blocks, _ := core.GenerateChain(b.config, block, ethash.NewFaker(), b.database, 1, func(number int, block *core.BlockGen) {</span>
<span class="term-fg32">+	blocks, _ := core.GenerateChain(b.config, block, b.consensus, b.database, 1, func(number int, block *core.BlockGen) {</span>
 		block.OffsetTime(int64(adjustment.Seconds()))
 	})
 	stateDB, _ := b.blockchain.State()
<span class="term-fg36">@@ -815,23 +905,6 @@</span> func (b *SimulatedBackend) Blockchain() *core.BlockChain {
 	return b.blockchain
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; callMsg implements core.Message to allow passing it as a transaction simulator.</span>
<span class="term-fg31">-type callMsg struct {</span>
<span class="term-fg31">-	ethereum.CallMsg</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (m callMsg) From() common.Address         { return m.CallMsg.From }</span>
<span class="term-fg31">-func (m callMsg) Nonce() uint64                { return 0 }</span>
<span class="term-fg31">-func (m callMsg) IsFake() bool                 { return true }</span>
<span class="term-fg31">-func (m callMsg) To() *common.Address          { return m.CallMsg.To }</span>
<span class="term-fg31">-func (m callMsg) GasPrice() *big.Int           { return m.CallMsg.GasPrice }</span>
<span class="term-fg31">-func (m callMsg) GasFeeCap() *big.Int          { return m.CallMsg.GasFeeCap }</span>
<span class="term-fg31">-func (m callMsg) GasTipCap() *big.Int          { return m.CallMsg.GasTipCap }</span>
<span class="term-fg31">-func (m callMsg) Gas() uint64                  { return m.CallMsg.Gas }</span>
<span class="term-fg31">-func (m callMsg) Value() *big.Int              { return m.CallMsg.Value }</span>
<span class="term-fg31">-func (m callMsg) Data() []byte                 { return m.CallMsg.Data }</span>
<span class="term-fg31">-func (m callMsg) AccessList() types.AccessList { return m.CallMsg.AccessList }</span>
<span class="term-fg31">-</span>
 &#47;&#47; filterBackend implements filters.Backend to support filtering for logs without
 &#47;&#47; taking bloom-bits acceleration structures into account.
 type filterBackend struct {
<span class="term-fg36">@@ -854,15 +927,9 @@</span> 		return nil, nil
 	case rpc.LatestBlockNumber:
 		return fb.bc.CurrentHeader(), nil
 	case rpc.FinalizedBlockNumber:
<span class="term-fg31">-		if block := fb.bc.CurrentFinalizedBlock(); block != nil {</span>
<span class="term-fg31">-			return block.Header(), nil</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		return nil, errors.New(&quot;finalized block not found&quot;)</span>
<span class="term-fg32">+		return fb.bc.CurrentFinalBlock(), nil</span>
 	case rpc.SafeBlockNumber:
<span class="term-fg31">-		if block := fb.bc.CurrentSafeBlock(); block != nil {</span>
<span class="term-fg31">-			return block.Header(), nil</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		return nil, errors.New(&quot;safe block not found&quot;)</span>
<span class="term-fg32">+		return fb.bc.CurrentSafeBlock(), nil</span>
 	default:
 		return fb.bc.GetHeaderByNumber(uint64(number.Int64())), nil
 	}</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d9bc39af6a0b34ffa1623ad7"role="button" aria-expanded="false" aria-controls="id-d9bc39af6a0b34ffa1623ad7">
        
            <div class="col-12 col-sm-9 text-start"><h3>diff-included testing testing</h3></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+356</span></div>
                <div class="text-start"><span class="text-danger">-0</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d9bc39af6a0b34ffa1623ad7">
        <div><p>Most of the op-geth changes are tested in the Optimism Monorepo and not part of the geth diff,
but some testing like the Deposit TX encoding and API interactions are embedded in the op-geth diff instead.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bf85b44f4a382c615ff80454" role="button"
                   aria-expanded="false" aria-controls="id-bf85b44f4a382c615ff80454">
                    <code>core/types/transaction_marshalling_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/transaction_marshalling_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+80</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bf85b44f4a382c615ff80454"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;transaction_marshalling_test.go op-geth&#47;core&#47;types&#47;transaction_marshalling_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..497dd8b0207c35db1c7d1bff22a9404966050222</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;transaction_marshalling_test.go</span>
<span class="term-fg36">@@ -0,0 +1,80 @@</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestTransactionUnmarshalJsonDeposit(t *testing.T) {</span>
<span class="term-fg32">+	tx := NewTx(&amp;DepositTx{</span>
<span class="term-fg32">+		SourceHash:          common.HexToHash(&quot;0x1234&quot;),</span>
<span class="term-fg32">+		IsSystemTransaction: true,</span>
<span class="term-fg32">+		Mint:                big.NewInt(34),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	json, err := tx.MarshalJSON()</span>
<span class="term-fg32">+	require.NoError(t, err, &quot;Failed to marshal tx JSON&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	got := &amp;Transaction{}</span>
<span class="term-fg32">+	err = got.UnmarshalJSON(json)</span>
<span class="term-fg32">+	require.NoError(t, err, &quot;Failed to unmarshal tx JSON&quot;)</span>
<span class="term-fg32">+	require.Equal(t, tx.Hash(), got.Hash())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestTransactionUnmarshalJSON(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name          string</span>
<span class="term-fg32">+		json          string</span>
<span class="term-fg32">+		expectedError string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;No gas&quot;,</span>
<span class="term-fg32">+			json:          `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			expectedError: &quot;missing required field &#39;gas&#39;&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;No value&quot;,</span>
<span class="term-fg32">+			json:          `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			expectedError: &quot;missing required field &#39;value&#39;&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;No input&quot;,</span>
<span class="term-fg32">+			json:          `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			expectedError: &quot;missing required field &#39;input&#39;&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;No from&quot;,</span>
<span class="term-fg32">+			json:          `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			expectedError: &quot;missing required field &#39;from&#39;&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;No sourceHash&quot;,</span>
<span class="term-fg32">+			json:          `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			expectedError: &quot;missing required field &#39;sourceHash&#39;&quot;,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;No mint&quot;,</span>
<span class="term-fg32">+			json: `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;isSystemTx&quot;:false,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			&#47;&#47; Allowed</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;No IsSystemTx&quot;,</span>
<span class="term-fg32">+			json: `{&quot;type&quot;:&quot;0x7e&quot;,&quot;nonce&quot;:null,&quot;gas&quot;: &quot;0x1234&quot;, &quot;gasPrice&quot;:null,&quot;maxPriorityFeePerGas&quot;:null,&quot;maxFeePerGas&quot;:null,&quot;value&quot;:&quot;0x1&quot;,&quot;input&quot;:&quot;0x616263646566&quot;,&quot;v&quot;:null,&quot;r&quot;:null,&quot;s&quot;:null,&quot;to&quot;:null,&quot;sourceHash&quot;:&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,&quot;from&quot;:&quot;0x0000000000000000000000000000000000000001&quot;,&quot;hash&quot;:&quot;0xa4341f3db4363b7ca269a8538bd027b2f8784f84454ca917668642d5f6dffdf9&quot;}`,</span>
<span class="term-fg32">+			&#47;&#47; Allowed</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			var parsedTx = &amp;Transaction{}</span>
<span class="term-fg32">+			err := json.Unmarshal([]byte(test.json), &amp;parsedTx)</span>
<span class="term-fg32">+			if test.expectedError == &quot;&quot; {</span>
<span class="term-fg32">+				require.NoError(t, err)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.ErrorContains(t, err, test.expectedError)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-01e7d5185398f2b115d5ce79" role="button"
                   aria-expanded="false" aria-controls="id-01e7d5185398f2b115d5ce79">
                    <code>internal/ethapi/api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/ethapi/api_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+276</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-01e7d5185398f2b115d5ce79"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;api_test.go op-geth&#47;internal&#47;ethapi&#47;api_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f950ce4011d05372c6907c945d775f4236c1cc85</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;ethapi&#47;api_test.go</span>
<span class="term-fg36">@@ -0,0 +1,276 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2023 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package ethapi</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tx := types.NewTx(&amp;types.DepositTx{</span>
<span class="term-fg32">+		SourceHash:          common.HexToHash(&quot;0x1234&quot;),</span>
<span class="term-fg32">+		IsSystemTransaction: true,</span>
<span class="term-fg32">+		Mint:                big.NewInt(34),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	nonce := uint64(7)</span>
<span class="term-fg32">+	receipt := &amp;types.Receipt{</span>
<span class="term-fg32">+		DepositNonce: &amp;nonce,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), &amp;params.ChainConfig{}, receipt)</span>
<span class="term-fg32">+	&#47;&#47; Should provide zero values for unused fields that are required in other transactions</span>
<span class="term-fg32">+	require.Equal(t, got.GasPrice, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().GasPrice = %v, want 0x0&quot;, got.GasPrice)</span>
<span class="term-fg32">+	require.Equal(t, got.V, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().V = %v, want 0x0&quot;, got.V)</span>
<span class="term-fg32">+	require.Equal(t, got.R, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().R = %v, want 0x0&quot;, got.R)</span>
<span class="term-fg32">+	require.Equal(t, got.S, (*hexutil.Big)(big.NewInt(0)), &quot;newRPCTransaction().S = %v, want 0x0&quot;, got.S)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Should include deposit tx specific fields</span>
<span class="term-fg32">+	require.Equal(t, *got.SourceHash, tx.SourceHash(), &quot;newRPCTransaction().SourceHash = %v, want %v&quot;, got.SourceHash, tx.SourceHash())</span>
<span class="term-fg32">+	require.Equal(t, *got.IsSystemTx, tx.IsSystemTx(), &quot;newRPCTransaction().IsSystemTx = %v, want %v&quot;, got.IsSystemTx, tx.IsSystemTx())</span>
<span class="term-fg32">+	require.Equal(t, got.Mint, (*hexutil.Big)(tx.Mint()), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Mint, tx.Mint())</span>
<span class="term-fg32">+	require.Equal(t, got.Nonce, (hexutil.Uint64)(nonce), &quot;newRPCTransaction().Mint = %v, want %v&quot;, got.Nonce, nonce)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestNewRPCTransactionOmitIsSystemTxFalse(t *testing.T) {</span>
<span class="term-fg32">+	tx := types.NewTx(&amp;types.DepositTx{</span>
<span class="term-fg32">+		IsSystemTransaction: false,</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	got := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), &amp;params.ChainConfig{}, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.Nil(t, got.IsSystemTx, &quot;should omit IsSystemTx when false&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestUnmarshalRpcDepositTx(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name     string</span>
<span class="term-fg32">+		modifier func(tx *RPCTransaction)</span>
<span class="term-fg32">+		valid    bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:     &quot;Unmodified&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {},</span>
<span class="term-fg32">+			valid:    true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Zero Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(common.Big0)</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Nil Values&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = nil</span>
<span class="term-fg32">+				tx.R = nil</span>
<span class="term-fg32">+				tx.S = nil</span>
<span class="term-fg32">+				tx.GasPrice = nil</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero GasPrice&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.GasPrice = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero V&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.V = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero R&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.R = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name: &quot;Non-Zero S&quot;,</span>
<span class="term-fg32">+			modifier: func(tx *RPCTransaction) {</span>
<span class="term-fg32">+				tx.S = (*hexutil.Big)(big.NewInt(43))</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			valid: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			tx := types.NewTx(&amp;types.DepositTx{</span>
<span class="term-fg32">+				SourceHash:          common.HexToHash(&quot;0x1234&quot;),</span>
<span class="term-fg32">+				IsSystemTransaction: true,</span>
<span class="term-fg32">+				Mint:                big.NewInt(34),</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+			rpcTx := newRPCTransaction(tx, common.Hash{}, uint64(12), uint64(1), big.NewInt(0), &amp;params.ChainConfig{}, nil)</span>
<span class="term-fg32">+			test.modifier(rpcTx)</span>
<span class="term-fg32">+			json, err := json.Marshal(rpcTx)</span>
<span class="term-fg32">+			require.NoError(t, err, &quot;marshalling failed: %w&quot;, err)</span>
<span class="term-fg32">+			parsed := &amp;types.Transaction{}</span>
<span class="term-fg32">+			err = parsed.UnmarshalJSON(json)</span>
<span class="term-fg32">+			if test.valid {</span>
<span class="term-fg32">+				require.NoError(t, err, &quot;unmarshal failed: %w&quot;, err)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				require.Error(t, err, &quot;unmarshal should have failed but did not&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestTransaction_RoundTripRpcJSON(t *testing.T) {</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		config = params.AllEthashProtocolChanges</span>
<span class="term-fg32">+		signer = types.LatestSigner(config)</span>
<span class="term-fg32">+		key, _ = crypto.HexToECDSA(&quot;b71c71a67e1177ad4e901695e1b4b9ee17ae16c6668d313eac2f96dbcda3f291&quot;)</span>
<span class="term-fg32">+		tests  = allTransactionTypes(common.Address{0xde, 0xad}, config)</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+	for i, tt := range tests {</span>
<span class="term-fg32">+		var tx2 types.Transaction</span>
<span class="term-fg32">+		tx, err := types.SignNewTx(key, signer, tt)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: signing failed: %v&quot;, i, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Regular transaction</span>
<span class="term-fg32">+		if data, err := json.Marshal(tx); err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: marshalling failed; %v&quot;, i, err)</span>
<span class="term-fg32">+		} else if err = tx2.UnmarshalJSON(data); err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: sunmarshal failed: %v&quot;, i, err)</span>
<span class="term-fg32">+		} else if want, have := tx.Hash(), tx2.Hash(); want != have {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: stx changed, want %x have %x&quot;, i, want, have)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47;  rpcTransaction</span>
<span class="term-fg32">+		rpcTx := newRPCTransaction(tx, common.Hash{}, 0, 0, nil, config, nil)</span>
<span class="term-fg32">+		if data, err := json.Marshal(rpcTx); err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: marshalling failed; %v&quot;, i, err)</span>
<span class="term-fg32">+		} else if err = tx2.UnmarshalJSON(data); err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: unmarshal failed: %v&quot;, i, err)</span>
<span class="term-fg32">+		} else if want, have := tx.Hash(), tx2.Hash(); want != have {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: tx changed, want %x have %x&quot;, i, want, have)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func allTransactionTypes(addr common.Address, config *params.ChainConfig) []types.TxData {</span>
<span class="term-fg32">+	return []types.TxData{</span>
<span class="term-fg32">+		&amp;types.LegacyTx{</span>
<span class="term-fg32">+			Nonce:    5,</span>
<span class="term-fg32">+			GasPrice: big.NewInt(6),</span>
<span class="term-fg32">+			Gas:      7,</span>
<span class="term-fg32">+			To:       &amp;addr,</span>
<span class="term-fg32">+			Value:    big.NewInt(8),</span>
<span class="term-fg32">+			Data:     []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			V:        big.NewInt(9),</span>
<span class="term-fg32">+			R:        big.NewInt(10),</span>
<span class="term-fg32">+			S:        big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;types.LegacyTx{</span>
<span class="term-fg32">+			Nonce:    5,</span>
<span class="term-fg32">+			GasPrice: big.NewInt(6),</span>
<span class="term-fg32">+			Gas:      7,</span>
<span class="term-fg32">+			To:       nil,</span>
<span class="term-fg32">+			Value:    big.NewInt(8),</span>
<span class="term-fg32">+			Data:     []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			V:        big.NewInt(32),</span>
<span class="term-fg32">+			R:        big.NewInt(10),</span>
<span class="term-fg32">+			S:        big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;types.AccessListTx{</span>
<span class="term-fg32">+			ChainID:  config.ChainID,</span>
<span class="term-fg32">+			Nonce:    5,</span>
<span class="term-fg32">+			GasPrice: big.NewInt(6),</span>
<span class="term-fg32">+			Gas:      7,</span>
<span class="term-fg32">+			To:       &amp;addr,</span>
<span class="term-fg32">+			Value:    big.NewInt(8),</span>
<span class="term-fg32">+			Data:     []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			AccessList: types.AccessList{</span>
<span class="term-fg32">+				types.AccessTuple{</span>
<span class="term-fg32">+					Address:     common.Address{0x2},</span>
<span class="term-fg32">+					StorageKeys: []common.Hash{types.EmptyRootHash},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			V: big.NewInt(32),</span>
<span class="term-fg32">+			R: big.NewInt(10),</span>
<span class="term-fg32">+			S: big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;types.AccessListTx{</span>
<span class="term-fg32">+			ChainID:  config.ChainID,</span>
<span class="term-fg32">+			Nonce:    5,</span>
<span class="term-fg32">+			GasPrice: big.NewInt(6),</span>
<span class="term-fg32">+			Gas:      7,</span>
<span class="term-fg32">+			To:       nil,</span>
<span class="term-fg32">+			Value:    big.NewInt(8),</span>
<span class="term-fg32">+			Data:     []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			AccessList: types.AccessList{</span>
<span class="term-fg32">+				types.AccessTuple{</span>
<span class="term-fg32">+					Address:     common.Address{0x2},</span>
<span class="term-fg32">+					StorageKeys: []common.Hash{types.EmptyRootHash},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			V: big.NewInt(32),</span>
<span class="term-fg32">+			R: big.NewInt(10),</span>
<span class="term-fg32">+			S: big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+			ChainID:   config.ChainID,</span>
<span class="term-fg32">+			Nonce:     5,</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(6),</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(9),</span>
<span class="term-fg32">+			Gas:       7,</span>
<span class="term-fg32">+			To:        &amp;addr,</span>
<span class="term-fg32">+			Value:     big.NewInt(8),</span>
<span class="term-fg32">+			Data:      []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			AccessList: types.AccessList{</span>
<span class="term-fg32">+				types.AccessTuple{</span>
<span class="term-fg32">+					Address:     common.Address{0x2},</span>
<span class="term-fg32">+					StorageKeys: []common.Hash{types.EmptyRootHash},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			V: big.NewInt(32),</span>
<span class="term-fg32">+			R: big.NewInt(10),</span>
<span class="term-fg32">+			S: big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+			ChainID:    config.ChainID,</span>
<span class="term-fg32">+			Nonce:      5,</span>
<span class="term-fg32">+			GasTipCap:  big.NewInt(6),</span>
<span class="term-fg32">+			GasFeeCap:  big.NewInt(9),</span>
<span class="term-fg32">+			Gas:        7,</span>
<span class="term-fg32">+			To:         nil,</span>
<span class="term-fg32">+			Value:      big.NewInt(8),</span>
<span class="term-fg32">+			Data:       []byte{0, 1, 2, 3, 4},</span>
<span class="term-fg32">+			AccessList: types.AccessList{},</span>
<span class="term-fg32">+			V:          big.NewInt(32),</span>
<span class="term-fg32">+			R:          big.NewInt(10),</span>
<span class="term-fg32">+			S:          big.NewInt(11),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-24db5f0e4d73de812f990a27"role="button" aria-expanded="false" aria-controls="id-24db5f0e4d73de812f990a27">
        
            <div class="col-12 col-sm-9 text-start"><h2>Other changes</h2></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+7059</span></div>
                <div class="text-start"><span class="text-danger">-1237</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-24db5f0e4d73de812f990a27">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f1e873f2ba3fe243ef0c3e2a" role="button"
                   aria-expanded="false" aria-controls="id-f1e873f2ba3fe243ef0c3e2a">
                    <code>.travis.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/.travis.yml" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/.travis.yml" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+28</span></div>
                        <div class="text-start"><span class="text-danger">-29</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f1e873f2ba3fe243ef0c3e2a"><span class="term-fg1">diff --git go-ethereum&#47;.travis.yml op-geth&#47;.travis.yml</span>
<span class="term-fg1">index f3c7a67832167356421119961239c527f6a955ee..db21bd5d96aeb7f1e36fe1efc5f676eca1f9db69 100644</span>
<span class="term-fg1">--- go-ethereum&#47;.travis.yml</span>
<span class="term-fg1">+++ op-geth&#47;.travis.yml</span>
<span class="term-fg36">@@ -5,7 +5,6 @@</span> jobs:
   allow_failures:
     - stage: build
       os: osx
<span class="term-fg31">-      go: 1.17.x</span>
       env:
         - azure-osx
&nbsp;
<span class="term-fg36">@@ -58,30 +57,6 @@</span>         - export DOCKER_CLI_EXPERIMENTAL=enabled
       script:
         - go run build&#47;ci.go docker -image -manifest amd64,arm64 -upload ethereum&#47;client-go
&nbsp;
<span class="term-fg31">-    # This builder does the Ubuntu PPA upload</span>
<span class="term-fg31">-    - stage: build</span>
<span class="term-fg31">-      if: type = push</span>
<span class="term-fg31">-      os: linux</span>
<span class="term-fg31">-      dist: bionic</span>
<span class="term-fg31">-      go: 1.20.x</span>
<span class="term-fg31">-      env:</span>
<span class="term-fg31">-        - ubuntu-ppa</span>
<span class="term-fg31">-        - GO111MODULE=on</span>
<span class="term-fg31">-      git:</span>
<span class="term-fg31">-        submodules: false # avoid cloning ethereum&#47;tests</span>
<span class="term-fg31">-      addons:</span>
<span class="term-fg31">-        apt:</span>
<span class="term-fg31">-          packages:</span>
<span class="term-fg31">-            - devscripts</span>
<span class="term-fg31">-            - debhelper</span>
<span class="term-fg31">-            - dput</span>
<span class="term-fg31">-            - fakeroot</span>
<span class="term-fg31">-            - python-bzrlib</span>
<span class="term-fg31">-            - python-paramiko</span>
<span class="term-fg31">-      script:</span>
<span class="term-fg31">-        - echo &#39;|1|7SiYPr9xl3uctzovOTj4gMwAC1M=|t6ReES75Bo&#47;PxlOPJ6&#47;GsGbTrM0= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA0aKz5UTUndYgIGG7dQBV+HaeuEZJ2xPHo2DS2iSKvUL4xNMSAY4UguNW+pX56nAQmZKIZZ8MaEvSj6zMEDiq6HFfn5JcTlM80UwlnyKe8B8p7Nk06PPQLrnmQt5fh0HmEcZx+JU9TZsfCHPnX7MNz4ELfZE6cFsclClrKim3BHUIGq&#47;&#47;t93DllB+h4O9LHjEUsQ1Sr63irDLSutkLJD6RXchjROXkNirlcNVHH&#47;jwLWR5RcYilNX7S5bIkK8NlWPjsn&#47;8Ua5O7I9&#47;YoE97PpO6i73DTGLh5H9JN&#47;SITwCKBkgSDWUt61uPK3Y11Gty7o2lWsBjhBUm2Y38CBsoGmBw==&#39; &gt;&gt; ~&#47;.ssh&#47;known_hosts</span>
<span class="term-fg31">-        - go run build&#47;ci.go debsrc -upload ethereum&#47;ethereum -sftp-user geth-ci -signer &quot;Go Ethereum Linux Builder &lt;geth-ci@ethereum.org&gt;&quot;</span>
<span class="term-fg31">-</span>
     # This builder does the Linux Azure uploads
     - stage: build
       if: type = push
<span class="term-fg36">@@ -141,7 +116,7 @@</span>       go: 1.20.x
       env:
         - GO111MODULE=on
       script:
<span class="term-fg31">-        - go run build&#47;ci.go test -coverage $TEST_PACKAGES</span>
<span class="term-fg32">+        - go run build&#47;ci.go test $TEST_PACKAGES</span>
&nbsp;
     - stage: build
       if: type = pull_request
<span class="term-fg36">@@ -152,7 +127,7 @@</span>       go: 1.19.x
       env:
         - GO111MODULE=on
       script:
<span class="term-fg31">-        - go run build&#47;ci.go test -coverage $TEST_PACKAGES</span>
<span class="term-fg32">+        - go run build&#47;ci.go test $TEST_PACKAGES</span>
&nbsp;
     - stage: build
       os: linux
<span class="term-fg36">@@ -161,7 +136,31 @@</span>       go: 1.19.x
       env:
         - GO111MODULE=on
       script:
<span class="term-fg31">-        - go run build&#47;ci.go test -coverage $TEST_PACKAGES</span>
<span class="term-fg32">+        - go run build&#47;ci.go test $TEST_PACKAGES</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    # This builder does the Ubuntu PPA nightly uploads</span>
<span class="term-fg32">+    - stage: build</span>
<span class="term-fg32">+      if: type = cron</span>
<span class="term-fg32">+      os: linux</span>
<span class="term-fg32">+      dist: bionic</span>
<span class="term-fg32">+      go: 1.20.x</span>
<span class="term-fg32">+      env:</span>
<span class="term-fg32">+        - ubuntu-ppa</span>
<span class="term-fg32">+        - GO111MODULE=on</span>
<span class="term-fg32">+      git:</span>
<span class="term-fg32">+        submodules: false # avoid cloning ethereum&#47;tests</span>
<span class="term-fg32">+      addons:</span>
<span class="term-fg32">+        apt:</span>
<span class="term-fg32">+          packages:</span>
<span class="term-fg32">+            - devscripts</span>
<span class="term-fg32">+            - debhelper</span>
<span class="term-fg32">+            - dput</span>
<span class="term-fg32">+            - fakeroot</span>
<span class="term-fg32">+            - python-bzrlib</span>
<span class="term-fg32">+            - python-paramiko</span>
<span class="term-fg32">+      script:</span>
<span class="term-fg32">+        - echo &#39;|1|7SiYPr9xl3uctzovOTj4gMwAC1M=|t6ReES75Bo&#47;PxlOPJ6&#47;GsGbTrM0= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA0aKz5UTUndYgIGG7dQBV+HaeuEZJ2xPHo2DS2iSKvUL4xNMSAY4UguNW+pX56nAQmZKIZZ8MaEvSj6zMEDiq6HFfn5JcTlM80UwlnyKe8B8p7Nk06PPQLrnmQt5fh0HmEcZx+JU9TZsfCHPnX7MNz4ELfZE6cFsclClrKim3BHUIGq&#47;&#47;t93DllB+h4O9LHjEUsQ1Sr63irDLSutkLJD6RXchjROXkNirlcNVHH&#47;jwLWR5RcYilNX7S5bIkK8NlWPjsn&#47;8Ua5O7I9&#47;YoE97PpO6i73DTGLh5H9JN&#47;SITwCKBkgSDWUt61uPK3Y11Gty7o2lWsBjhBUm2Y38CBsoGmBw==&#39; &gt;&gt; ~&#47;.ssh&#47;known_hosts</span>
<span class="term-fg32">+        - go run build&#47;ci.go debsrc -upload ethereum&#47;ethereum -sftp-user geth-ci -signer &quot;Go Ethereum Linux Builder &lt;geth-ci@ethereum.org&gt;&quot;</span>
&nbsp;
     # This builder does the Azure archive purges to avoid accumulating junk
     - stage: build
<span class="term-fg36">@@ -186,5 +185,5 @@</span>       go: 1.20.x
       env:
         - GO111MODULE=on
       script:
<span class="term-fg31">-        - go run build&#47;ci.go test  -race -coverage $TEST_PACKAGES</span>
<span class="term-fg32">+        - go run build&#47;ci.go test  -race $TEST_PACKAGES</span>
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-59ee4425cbd257f59d27608f" role="button"
                   aria-expanded="false" aria-controls="id-59ee4425cbd257f59d27608f">
                    <code>README.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/README.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/README.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-59ee4425cbd257f59d27608f"><span class="term-fg1">diff --git go-ethereum&#47;README.md op-geth&#47;README.md</span>
<span class="term-fg1">index 9835b00458951632ae2e170dfd2e0488bb6ccf6c..325f796a3e3b67c5c0fded26ff62a6cebe564136 100644</span>
<span class="term-fg1">--- go-ethereum&#47;README.md</span>
<span class="term-fg1">+++ op-geth&#47;README.md</span>
<span class="term-fg36">@@ -16,7 +16,7 @@</span> ## Building the source
&nbsp;
 For prerequisites and detailed build instructions please read the [Installation Instructions](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;getting-started&#47;installing-geth).
&nbsp;
<span class="term-fg31">-Building `geth` requires both a Go (version 1.18 or later) and a C compiler. You can install</span>
<span class="term-fg32">+Building `geth` requires both a Go (version 1.19 or later) and a C compiler. You can install</span>
 them using your favourite package manager. Once the dependencies are installed, run
&nbsp;
 ```shell</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d1087eff143c7ebded1e7b59" role="button"
                   aria-expanded="false" aria-controls="id-d1087eff143c7ebded1e7b59">
                    <code>accounts/abi/bind/backends/simulated_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/accounts/abi/bind/backends/simulated_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/accounts/abi/bind/backends/simulated_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d1087eff143c7ebded1e7b59"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated_test.go op-geth&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated_test.go</span>
<span class="term-fg1">index 40699e01163693f84355a7f79b64b4ad18748b39..698bfc57657331e64bef86c82582c718bcfd3ded 100644</span>
<span class="term-fg1">--- go-ethereum&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated_test.go</span>
<span class="term-fg1">+++ op-geth&#47;accounts&#47;abi&#47;bind&#47;backends&#47;simulated_test.go</span>
<span class="term-fg36">@@ -1189,7 +1189,7 @@</span> 	for i := 0; i &lt; n; i++ {
 		sim.Commit()
 	}
 	&#47;&#47; 3.
<span class="term-fg31">-	if sim.blockchain.CurrentBlock().NumberU64() != uint64(n) {</span>
<span class="term-fg32">+	if sim.blockchain.CurrentBlock().Number.Uint64() != uint64(n) {</span>
 		t.Error(&quot;wrong chain length&quot;)
 	}
 	&#47;&#47; 4.
<span class="term-fg36">@@ -1199,7 +1199,7 @@</span> 	for i := 0; i &lt; n+1; i++ {
 		sim.Commit()
 	}
 	&#47;&#47; 6.
<span class="term-fg31">-	if sim.blockchain.CurrentBlock().NumberU64() != uint64(n+1) {</span>
<span class="term-fg32">+	if sim.blockchain.CurrentBlock().Number.Uint64() != uint64(n+1) {</span>
 		t.Error(&quot;wrong chain length&quot;)
 	}
 }
<span class="term-fg36">@@ -1344,7 +1344,7 @@</span> 	testAddr := crypto.PubkeyToAddress(testKey.PublicKey)
 	sim := simTestBackend(testAddr)
 	defer sim.Close()
&nbsp;
<span class="term-fg31">-	startBlockHeight := sim.blockchain.CurrentBlock().NumberU64()</span>
<span class="term-fg32">+	startBlockHeight := sim.blockchain.CurrentBlock().Number.Uint64()</span>
&nbsp;
 	&#47;&#47; Test if Commit returns the correct block hash
 	h1 := sim.Commit()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ad44816b06cb92d5bcbbb404" role="button"
                   aria-expanded="false" aria-controls="id-ad44816b06cb92d5bcbbb404">
                    <code>accounts/usbwallet/ledger.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/accounts/usbwallet/ledger.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/accounts/usbwallet/ledger.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+9</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ad44816b06cb92d5bcbbb404"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;usbwallet&#47;ledger.go op-geth&#47;accounts&#47;usbwallet&#47;ledger.go</span>
<span class="term-fg1">index cda94280fdd20735d95d0ab69ec3ea5ececcb1ef..723df0f2b352c7a8fe9b6e54726e8a3997bbece7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;accounts&#47;usbwallet&#47;ledger.go</span>
<span class="term-fg1">+++ op-geth&#47;accounts&#47;usbwallet&#47;ledger.go</span>
<span class="term-fg36">@@ -59,6 +59,8 @@</span> 	ledgerP1InitTypedMessageData    ledgerParam1 = 0x00 &#47;&#47; First chunk of Typed Message data
 	ledgerP1InitTransactionData     ledgerParam1 = 0x00 &#47;&#47; First transaction data block for signing
 	ledgerP1ContTransactionData     ledgerParam1 = 0x80 &#47;&#47; Subsequent transaction data block for signing
 	ledgerP2DiscardAddressChainCode ledgerParam2 = 0x00 &#47;&#47; Do not return the chain code along with the address
<span class="term-fg32">+</span>
<span class="term-fg32">+	ledgerEip155Size int = 3 &#47;&#47; Size of the EIP-155 chain_id,r,s in unsigned transactions</span>
 )
&nbsp;
 &#47;&#47; errLedgerReplyInvalidHeader is the error message returned by a Ledger data exchange
<span class="term-fg36">@@ -347,9 +349,15 @@</span> 	var (
 		op    = ledgerP1InitTransactionData
 		reply []byte
 	)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Chunk size selection to mitigate an underlying RLP deserialization issue on the ledger app.</span>
<span class="term-fg32">+	&#47;&#47; https:&#47;&#47;github.com&#47;LedgerHQ&#47;app-ethereum&#47;issues&#47;409</span>
<span class="term-fg32">+	chunk := 255</span>
<span class="term-fg32">+	for ; len(payload)%chunk &lt;= ledgerEip155Size; chunk-- {</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	for len(payload) &gt; 0 {
 		&#47;&#47; Calculate the size of the next data chunk
<span class="term-fg31">-		chunk := 255</span>
 		if chunk &gt; len(payload) {
 			chunk = len(payload)
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6cacc7ea34285919ffced859" role="button"
                   aria-expanded="false" aria-controls="id-6cacc7ea34285919ffced859">
                    <code>appveyor.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/appveyor.yml" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/appveyor.yml" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6cacc7ea34285919ffced859"><span class="term-fg1">diff --git go-ethereum&#47;appveyor.yml op-geth&#47;appveyor.yml</span>
<span class="term-fg1">index d477e6db9f56ee13687cb94204627da5419c394b..114aec644b27a712ffc25f5d1442df702cd9de27 100644</span>
<span class="term-fg1">--- go-ethereum&#47;appveyor.yml</span>
<span class="term-fg1">+++ op-geth&#47;appveyor.yml</span>
<span class="term-fg36">@@ -26,7 +26,7 @@</span>     build_script:
       - go run build&#47;ci.go lint
       - go run build&#47;ci.go install -dlgo
     test_script:
<span class="term-fg31">-      - go run build&#47;ci.go test -dlgo -coverage</span>
<span class="term-fg32">+      - go run build&#47;ci.go test -dlgo</span>
&nbsp;
   # linux&#47;386 is disabled.
   - matrix:
<span class="term-fg36">@@ -54,4 +54,4 @@</span>       # Upload builds. Note that ci.go makes this a no-op PR builds.
       - go run build&#47;ci.go archive -arch %GETH_ARCH% -type zip -signer WINDOWS_SIGNING_KEY -upload gethstore&#47;builds
       - go run build&#47;ci.go nsis -arch %GETH_ARCH% -signer WINDOWS_SIGNING_KEY -upload gethstore&#47;builds
     test_script:
<span class="term-fg31">-      - go run build&#47;ci.go test -dlgo -arch %GETH_ARCH% -cc %GETH_CC% -coverage</span>
<span class="term-fg32">+      - go run build&#47;ci.go test -dlgo -arch %GETH_ARCH% -cc %GETH_CC%</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-26d4e5dc0305426cbcc60d3b" role="button"
                   aria-expanded="false" aria-controls="id-26d4e5dc0305426cbcc60d3b">
                    <code>build/checksums.txt</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/build/checksums.txt" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/build/checksums.txt" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-26d4e5dc0305426cbcc60d3b"><span class="term-fg1">diff --git go-ethereum&#47;build&#47;checksums.txt op-geth&#47;build&#47;checksums.txt</span>
<span class="term-fg1">index 1fb85d62667b2c2b1fcedd8c2ca8b5217fea9b89..e349d3eba03b89d2a482f541f272ec11b4e631a0 100644</span>
<span class="term-fg1">--- go-ethereum&#47;build&#47;checksums.txt</span>
<span class="term-fg1">+++ op-geth&#47;build&#47;checksums.txt</span>
<span class="term-fg36">@@ -1,19 +1,19 @@</span>
 # This file contains sha256 checksums of optional build dependencies.
&nbsp;
<span class="term-fg31">-b5c1a3af52c385a6d1c76aed5361cf26459023980d0320de7658bae3915831a2  go1.20.1.src.tar.gz</span>
<span class="term-fg31">-a300a45e801ab459f3008aae5bb9efbe9a6de9bcd12388f5ca9bbd14f70236de  go1.20.1.darwin-amd64.tar.gz</span>
<span class="term-fg31">-f1a8e06c7f1ba1c008313577f3f58132eb166a41ceb95ce6e9af30bc5a3efca4  go1.20.1.darwin-arm64.tar.gz</span>
<span class="term-fg31">-57d80349dc4fbf692f8cd85a5971f97841aedafcf211e367e59d3ae812292660  go1.20.1.freebsd-386.tar.gz</span>
<span class="term-fg31">-6e124d54d5850a15fdb15754f782986f06af23c5ddb6690849417b9c74f05f98  go1.20.1.freebsd-amd64.tar.gz</span>
<span class="term-fg31">-3a7345036ebd92455b653e4b4f6aaf4f7e1f91f4ced33b23d7059159cec5f4d7  go1.20.1.linux-386.tar.gz</span>
<span class="term-fg31">-000a5b1fca4f75895f78befeb2eecf10bfff3c428597f3f1e69133b63b911b02  go1.20.1.linux-amd64.tar.gz</span>
<span class="term-fg31">-5e5e2926733595e6f3c5b5ad1089afac11c1490351855e87849d0e7702b1ec2e  go1.20.1.linux-arm64.tar.gz</span>
<span class="term-fg31">-e4edc05558ab3657ba3dddb909209463cee38df9c1996893dd08cde274915003  go1.20.1.linux-armv6l.tar.gz</span>
<span class="term-fg31">-85cfd4b89b48c94030783b6e9e619e35557862358b846064636361421d0b0c52  go1.20.1.linux-ppc64le.tar.gz</span>
<span class="term-fg31">-ba3a14381ed4538216dec3ea72b35731750597edd851cece1eb120edf7d60149  go1.20.1.linux-s390x.tar.gz</span>
<span class="term-fg31">-61259b5a346193e30b7b3c3f8d108062db25bbb80cf290ee251eeb855965f6ee  go1.20.1.windows-386.zip</span>
<span class="term-fg31">-3b493969196a6de8d9762d09f5bc5ae7a3e5814b0cfbf9cc26838c2bc1314f9c  go1.20.1.windows-amd64.zip</span>
<span class="term-fg31">-62d14ddb44bcda27c9b1f5ad9ffd4463013374ed325d762417e2adefd59a802f  go1.20.1.windows-arm64.zip</span>
<span class="term-fg32">+4d0e2850d197b4ddad3bdb0196300179d095bb3aefd4dfbc3b36702c3728f8ab  go1.20.2.src.tar.gz</span>
<span class="term-fg32">+c93b8ced9517d07e1cd4c362c6e2d5242cb139e29b417a328fbf19aded08764c  go1.20.2.darwin-amd64.tar.gz</span>
<span class="term-fg32">+7343c87f19e79c0063532e82e1c4d6f42175a32d99f7a4d15e658e88bf97f885  go1.20.2.darwin-arm64.tar.gz</span>
<span class="term-fg32">+14f9be2004e042b3a64d0facb0c020756a9084a5c7333e33b0752b393b6016ea  go1.20.2.freebsd-386.tar.gz</span>
<span class="term-fg32">+b41b67b4f1b56797a7cecf6ee7f47fcf4f93960b2788a3683c07dd009d30b2a4  go1.20.2.freebsd-amd64.tar.gz</span>
<span class="term-fg32">+ee240ed33ae57504c41f04c12236aeaa17fbeb6ea9fcd096cd9dc7a89d10d4db  go1.20.2.linux-386.tar.gz</span>
<span class="term-fg32">+4eaea32f59cde4dc635fbc42161031d13e1c780b87097f4b4234cfce671f1768  go1.20.2.linux-amd64.tar.gz</span>
<span class="term-fg32">+78d632915bb75e9a6356a47a42625fd1a785c83a64a643fedd8f61e31b1b3bef  go1.20.2.linux-arm64.tar.gz</span>
<span class="term-fg32">+d79d56bafd6b52b8d8cbe3f8e967caaac5383a23d7a4fa9ac0e89778cd16a076  go1.20.2.linux-armv6l.tar.gz</span>
<span class="term-fg32">+850564ddb760cb703db63bf20182dc4407abd2ff090a95fa66d6634d172fd095  go1.20.2.linux-ppc64le.tar.gz</span>
<span class="term-fg32">+8da24c5c4205fe8115f594237e5db7bcb1d23df67bc1fa9a999954b1976896e8  go1.20.2.linux-s390x.tar.gz</span>
<span class="term-fg32">+31838b291117495bbb93683603e98d5118bfabd2eb318b4d07540bfd524bab86  go1.20.2.windows-386.zip</span>
<span class="term-fg32">+fe439f0e438f7555a7f5f7194ddb6f4a07b0de1fa414385d19f2aeb26d9f43db  go1.20.2.windows-amd64.zip</span>
<span class="term-fg32">+ac5010c8b8b22849228a8dea698d58b9c7be2195d30c6d778cce0f709858fa64  go1.20.2.windows-arm64.zip</span>
&nbsp;
 fba08acc4027f69f07cef48fbff70b8a7ecdfaa1c2aba9ad3fb31d60d9f5d4bc  golangci-lint-1.51.1-darwin-amd64.tar.gz
 75b8f0ff3a4e68147156be4161a49d4576f1be37a0b506473f8c482140c1e7f2  golangci-lint-1.51.1-darwin-arm64.tar.gz</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-61e077d630a3e80010509207" role="button"
                   aria-expanded="false" aria-controls="id-61e077d630a3e80010509207">
                    <code>cmd/devp2p/crawl.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/devp2p/crawl.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/devp2p/crawl.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+51</span></div>
                        <div class="text-start"><span class="text-danger">-26</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-61e077d630a3e80010509207"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;devp2p&#47;crawl.go op-geth&#47;cmd&#47;devp2p&#47;crawl.go</span>
<span class="term-fg1">index 0d8127684e669ed6e8543a5447a37953e7492a04..8c9755ac1cd47bde9bf83ea74f872cb9aed085fe 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;devp2p&#47;crawl.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;devp2p&#47;crawl.go</span>
<span class="term-fg36">@@ -17,6 +17,8 @@</span>
 package main
&nbsp;
 import (
<span class="term-fg32">+	&quot;sync&quot;</span>
<span class="term-fg32">+	&quot;sync&#47;atomic&quot;</span>
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
<span class="term-fg36">@@ -34,6 +36,7 @@</span> 	closed    chan struct{}
&nbsp;
 	&#47;&#47; settings
 	revalidateInterval time.Duration
<span class="term-fg32">+	mu                 sync.RWMutex</span>
 }
&nbsp;
 const (
<span class="term-fg36">@@ -67,7 +70,7 @@</span> 	}
 	return c
 }
&nbsp;
<span class="term-fg31">-func (c *crawler) run(timeout time.Duration) nodeSet {</span>
<span class="term-fg32">+func (c *crawler) run(timeout time.Duration, nthreads int) nodeSet {</span>
 	var (
 		timeoutTimer = time.NewTimer(timeout)
 		timeoutCh    &lt;-chan time.Time
<span class="term-fg36">@@ -75,35 +78,51 @@</span> 		statusTicker = time.NewTicker(time.Second * 8)
 		doneCh       = make(chan enode.Iterator, len(c.iters))
 		liveIters    = len(c.iters)
 	)
<span class="term-fg32">+	if nthreads &lt; 1 {</span>
<span class="term-fg32">+		nthreads = 1</span>
<span class="term-fg32">+	}</span>
 	defer timeoutTimer.Stop()
 	defer statusTicker.Stop()
 	for _, it := range c.iters {
 		go c.runIterator(doneCh, it)
 	}
<span class="term-fg31">-</span>
 	var (
<span class="term-fg31">-		added   int</span>
<span class="term-fg31">-		updated int</span>
<span class="term-fg31">-		skipped int</span>
<span class="term-fg31">-		recent  int</span>
<span class="term-fg31">-		removed int</span>
<span class="term-fg32">+		added   uint64</span>
<span class="term-fg32">+		updated uint64</span>
<span class="term-fg32">+		skipped uint64</span>
<span class="term-fg32">+		recent  uint64</span>
<span class="term-fg32">+		removed uint64</span>
<span class="term-fg32">+		wg      sync.WaitGroup</span>
 	)
<span class="term-fg32">+	wg.Add(nthreads)</span>
<span class="term-fg32">+	for i := 0; i &lt; nthreads; i++ {</span>
<span class="term-fg32">+		go func() {</span>
<span class="term-fg32">+			defer wg.Done()</span>
<span class="term-fg32">+			for {</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case n := &lt;-c.ch:</span>
<span class="term-fg32">+					switch c.updateNode(n) {</span>
<span class="term-fg32">+					case nodeSkipIncompat:</span>
<span class="term-fg32">+						atomic.AddUint64(&amp;skipped, 1)</span>
<span class="term-fg32">+					case nodeSkipRecent:</span>
<span class="term-fg32">+						atomic.AddUint64(&amp;recent, 1)</span>
<span class="term-fg32">+					case nodeRemoved:</span>
<span class="term-fg32">+						atomic.AddUint64(&amp;removed, 1)</span>
<span class="term-fg32">+					case nodeAdded:</span>
<span class="term-fg32">+						atomic.AddUint64(&amp;added, 1)</span>
<span class="term-fg32">+					default:</span>
<span class="term-fg32">+						atomic.AddUint64(&amp;updated, 1)</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+				case &lt;-c.closed:</span>
<span class="term-fg32">+					return</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 loop:
 	for {
 		select {
<span class="term-fg31">-		case n := &lt;-c.ch:</span>
<span class="term-fg31">-			switch c.updateNode(n) {</span>
<span class="term-fg31">-			case nodeSkipIncompat:</span>
<span class="term-fg31">-				skipped++</span>
<span class="term-fg31">-			case nodeSkipRecent:</span>
<span class="term-fg31">-				recent++</span>
<span class="term-fg31">-			case nodeRemoved:</span>
<span class="term-fg31">-				removed++</span>
<span class="term-fg31">-			case nodeAdded:</span>
<span class="term-fg31">-				added++</span>
<span class="term-fg31">-			default:</span>
<span class="term-fg31">-				updated++</span>
<span class="term-fg31">-			}</span>
 		case it := &lt;-doneCh:
 			if it == c.inputIter {
 				&#47;&#47; Enable timeout when we&#39;re done revalidating the input nodes.
<span class="term-fg36">@@ -119,8 +138,11 @@</span> 		case &lt;-timeoutCh:
 			break loop
 		case &lt;-statusTicker.C:
 			log.Info(&quot;Crawling in progress&quot;,
<span class="term-fg31">-				&quot;added&quot;, added, &quot;updated&quot;, updated, &quot;removed&quot;, removed,</span>
<span class="term-fg31">-				&quot;ignored(recent)&quot;, recent, &quot;ignored(incompatible)&quot;, skipped)</span>
<span class="term-fg32">+				&quot;added&quot;, atomic.LoadUint64(&amp;added),</span>
<span class="term-fg32">+				&quot;updated&quot;, atomic.LoadUint64(&amp;updated),</span>
<span class="term-fg32">+				&quot;removed&quot;, atomic.LoadUint64(&amp;removed),</span>
<span class="term-fg32">+				&quot;ignored(recent)&quot;, atomic.LoadUint64(&amp;removed),</span>
<span class="term-fg32">+				&quot;ignored(incompatible)&quot;, atomic.LoadUint64(&amp;skipped))</span>
 		}
 	}
&nbsp;
<span class="term-fg36">@@ -131,6 +153,7 @@</span> 	}
 	for ; liveIters &gt; 0; liveIters-- {
 		&lt;-doneCh
 	}
<span class="term-fg32">+	wg.Wait()</span>
 	return c.output
 }
&nbsp;
<span class="term-fg36">@@ -148,7 +171,9 @@</span>
 &#47;&#47; updateNode updates the info about the given node, and returns a status
 &#47;&#47; about what changed
 func (c *crawler) updateNode(n *enode.Node) int {
<span class="term-fg32">+	c.mu.RLock()</span>
 	node, ok := c.output[n.ID()]
<span class="term-fg32">+	c.mu.RUnlock()</span>
&nbsp;
 	&#47;&#47; Skip validation of recently-seen nodes.
 	if ok &amp;&amp; time.Since(node.LastCheck) &lt; c.revalidateInterval {
<span class="term-fg36">@@ -156,10 +181,9 @@</span> 		return nodeSkipRecent
 	}
&nbsp;
 	&#47;&#47; Request the node record.
<span class="term-fg31">-	nn, err := c.disc.RequestENR(n)</span>
<span class="term-fg32">+	status := nodeUpdated</span>
 	node.LastCheck = truncNow()
<span class="term-fg31">-	status := nodeUpdated</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg32">+	if nn, err := c.disc.RequestENR(n); err != nil {</span>
 		if node.Score == 0 {
 			&#47;&#47; Node doesn&#39;t implement EIP-868.
 			log.Debug(&quot;Skipping node&quot;, &quot;id&quot;, n.ID())
<span class="term-fg36">@@ -176,8 +200,9 @@</span> 			status = nodeAdded
 		}
 		node.LastResponse = node.LastCheck
 	}
<span class="term-fg31">-</span>
 	&#47;&#47; Store&#47;update node in output set.
<span class="term-fg32">+	c.mu.Lock()</span>
<span class="term-fg32">+	defer c.mu.Unlock()</span>
 	if node.Score &lt;= 0 {
 		log.Debug(&quot;Removing node&quot;, &quot;id&quot;, n.ID())
 		delete(c.output, n.ID())</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-249522b716c764f42dd2a4b7" role="button"
                   aria-expanded="false" aria-controls="id-249522b716c764f42dd2a4b7">
                    <code>cmd/devp2p/discv4cmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/devp2p/discv4cmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/devp2p/discv4cmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+8</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-249522b716c764f42dd2a4b7"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;devp2p&#47;discv4cmd.go op-geth&#47;cmd&#47;devp2p&#47;discv4cmd.go</span>
<span class="term-fg1">index 94e61c36f3253edec3d5f1e9335dd8774d725e4b..63122634780da490c6398ae4eb60b75191b606c2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;devp2p&#47;discv4cmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;devp2p&#47;discv4cmd.go</span>
<span class="term-fg36">@@ -78,7 +78,7 @@</span> 	discv4CrawlCommand = &amp;cli.Command{
 		Name:   &quot;crawl&quot;,
 		Usage:  &quot;Updates a nodes.json file with random nodes found in the DHT&quot;,
 		Action: discv4Crawl,
<span class="term-fg31">-		Flags:  flags.Merge(discoveryNodeFlags, []cli.Flag{crawlTimeoutFlag}),</span>
<span class="term-fg32">+		Flags:  flags.Merge(discoveryNodeFlags, []cli.Flag{crawlTimeoutFlag, crawlParallelismFlag}),</span>
 	}
 	discv4TestCommand = &amp;cli.Command{
 		Name:   &quot;test&quot;,
<span class="term-fg36">@@ -119,6 +119,11 @@</span> 	crawlTimeoutFlag = &amp;cli.DurationFlag{
 		Name:  &quot;timeout&quot;,
 		Usage: &quot;Time limit for the crawl.&quot;,
 		Value: 30 * time.Minute,
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	crawlParallelismFlag = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:  &quot;parallel&quot;,</span>
<span class="term-fg32">+		Usage: &quot;How many parallel discoveries to attempt.&quot;,</span>
<span class="term-fg32">+		Value: 16,</span>
 	}
 	remoteEnodeFlag = &amp;cli.StringFlag{
 		Name:    &quot;remote&quot;,
<span class="term-fg36">@@ -195,7 +200,7 @@</span> 	disc := startV4(ctx)
 	defer disc.Close()
 	c := newCrawler(inputSet, disc, enode.IterNodes(nodeargs))
 	c.revalidateInterval = 0
<span class="term-fg31">-	output := c.run(0)</span>
<span class="term-fg32">+	output := c.run(0, 1)</span>
 	writeNodesJSON(nodesFile, output)
 	return nil
 }
<span class="term-fg36">@@ -214,7 +219,7 @@</span> 	disc := startV4(ctx)
 	defer disc.Close()
 	c := newCrawler(inputSet, disc, disc.RandomNodes())
 	c.revalidateInterval = 10 * time.Minute
<span class="term-fg31">-	output := c.run(ctx.Duration(crawlTimeoutFlag.Name))</span>
<span class="term-fg32">+	output := c.run(ctx.Duration(crawlTimeoutFlag.Name), ctx.Int(crawlParallelismFlag.Name))</span>
 	writeNodesJSON(nodesFile, output)
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-824090dfbc51efd2b2107bc6" role="button"
                   aria-expanded="false" aria-controls="id-824090dfbc51efd2b2107bc6">
                    <code>cmd/devp2p/discv5cmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/devp2p/discv5cmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/devp2p/discv5cmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-824090dfbc51efd2b2107bc6"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;devp2p&#47;discv5cmd.go op-geth&#47;cmd&#47;devp2p&#47;discv5cmd.go</span>
<span class="term-fg1">index 343e2a0d5d4277067f12356b7965b6b9691b9368..832a4bc1f426be9a80a2cc4c996b6c4153cb9467 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;devp2p&#47;discv5cmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;devp2p&#47;discv5cmd.go</span>
<span class="term-fg36">@@ -110,7 +110,7 @@</span> 	disc := startV5(ctx)
 	defer disc.Close()
 	c := newCrawler(inputSet, disc, disc.RandomNodes())
 	c.revalidateInterval = 10 * time.Minute
<span class="term-fg31">-	output := c.run(ctx.Duration(crawlTimeoutFlag.Name))</span>
<span class="term-fg32">+	output := c.run(ctx.Duration(crawlTimeoutFlag.Name), ctx.Int(crawlParallelismFlag.Name))</span>
 	writeNodesJSON(nodesFile, output)
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-10668a36ddacdcc6fe10cb24" role="button"
                   aria-expanded="false" aria-controls="id-10668a36ddacdcc6fe10cb24">
                    <code>cmd/devp2p/dns_cloudflare.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/devp2p/dns_cloudflare.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/devp2p/dns_cloudflare.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-10668a36ddacdcc6fe10cb24"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;devp2p&#47;dns_cloudflare.go op-geth&#47;cmd&#47;devp2p&#47;dns_cloudflare.go</span>
<span class="term-fg1">index 92c6faf272ec4bfca5d77dbd678eae201e64fd4f..bfe92257ee5a1185576ca9a094cff96965fe3bef 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;devp2p&#47;dns_cloudflare.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;devp2p&#47;dns_cloudflare.go</span>
<span class="term-fg36">@@ -126,11 +126,16 @@</span> 		existing[strings.ToLower(entry.Name)] = entry
 	}
&nbsp;
 	&#47;&#47; Iterate over the new records and inject anything missing.
<span class="term-fg32">+	log.Info(&quot;Updating DNS entries&quot;)</span>
<span class="term-fg32">+	created := 0</span>
<span class="term-fg32">+	updated := 0</span>
<span class="term-fg32">+	skipped := 0</span>
 	for path, val := range records {
 		old, exists := existing[path]
 		if !exists {
 			&#47;&#47; Entry is unknown, push a new one to Cloudflare.
<span class="term-fg31">-			log.Info(fmt.Sprintf(&quot;Creating %s = %q&quot;, path, val))</span>
<span class="term-fg32">+			log.Debug(fmt.Sprintf(&quot;Creating %s = %q&quot;, path, val))</span>
<span class="term-fg32">+			created++</span>
 			ttl := rootTTL
 			if path != name {
 				ttl = treeNodeTTLCloudflare &#47;&#47; Max TTL permitted by Cloudflare
<span class="term-fg36">@@ -139,27 +144,33 @@</span> 			record := cloudflare.DNSRecord{Type: &quot;TXT&quot;, Name: path, Content: val, TTL: ttl}
 			_, err = c.CreateDNSRecord(context.Background(), c.zoneID, record)
 		} else if old.Content != val {
 			&#47;&#47; Entry already exists, only change its content.
<span class="term-fg31">-			log.Info(fmt.Sprintf(&quot;Updating %s from %q to %q&quot;, path, old.Content, val))</span>
<span class="term-fg32">+			log.Debug(fmt.Sprintf(&quot;Updating %s from %q to %q&quot;, path, old.Content, val))</span>
<span class="term-fg32">+			updated++</span>
 			old.Content = val
 			err = c.UpdateDNSRecord(context.Background(), c.zoneID, old.ID, old)
 		} else {
<span class="term-fg32">+			skipped++</span>
 			log.Debug(fmt.Sprintf(&quot;Skipping %s = %q&quot;, path, val))
 		}
 		if err != nil {
 			return fmt.Errorf(&quot;failed to publish %s: %v&quot;, path, err)
 		}
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	log.Info(&quot;Updated DNS entries&quot;, &quot;new&quot;, created, &quot;updated&quot;, updated, &quot;untouched&quot;, skipped)</span>
 	&#47;&#47; Iterate over the old records and delete anything stale.
<span class="term-fg32">+	deleted := 0</span>
<span class="term-fg32">+	log.Info(&quot;Deleting stale DNS entries&quot;)</span>
 	for path, entry := range existing {
 		if _, ok := records[path]; ok {
 			continue
 		}
 		&#47;&#47; Stale entry, nuke it.
<span class="term-fg31">-		log.Info(fmt.Sprintf(&quot;Deleting %s = %q&quot;, path, entry.Content))</span>
<span class="term-fg32">+		log.Debug(fmt.Sprintf(&quot;Deleting %s = %q&quot;, path, entry.Content))</span>
<span class="term-fg32">+		deleted++</span>
 		if err := c.DeleteDNSRecord(context.Background(), c.zoneID, entry.ID); err != nil {
 			return fmt.Errorf(&quot;failed to delete %s: %v&quot;, path, err)
 		}
 	}
<span class="term-fg32">+	log.Info(&quot;Deleted stale DNS entries&quot;, &quot;count&quot;, deleted)</span>
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5bc4c5dafb41f0efd42bffb2" role="button"
                   aria-expanded="false" aria-controls="id-5bc4c5dafb41f0efd42bffb2">
                    <code>cmd/devp2p/dns_route53.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/devp2p/dns_route53.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/devp2p/dns_route53.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5bc4c5dafb41f0efd42bffb2"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;devp2p&#47;dns_route53.go op-geth&#47;cmd&#47;devp2p&#47;dns_route53.go</span>
<span class="term-fg1">index 4aab0856ff9092b9001b872386342d14a0b1dfc4..81734eb2ad877404920b417b43b5d9528980192f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;devp2p&#47;dns_route53.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;devp2p&#47;dns_route53.go</span>
<span class="term-fg36">@@ -329,8 +329,9 @@</span> func (c *route53Client) collectRecords(name string) (map[string]recordSet, error) {
 	var req route53.ListResourceRecordSetsInput
 	req.HostedZoneId = &amp;c.zoneID
 	existing := make(map[string]recordSet)
<span class="term-fg32">+	log.Info(&quot;Loading existing TXT records&quot;, &quot;name&quot;, name, &quot;zone&quot;, c.zoneID)</span>
 	for page := 0; ; page++ {
<span class="term-fg31">-		log.Info(&quot;Loading existing TXT records&quot;, &quot;name&quot;, name, &quot;zone&quot;, c.zoneID, &quot;page&quot;, page)</span>
<span class="term-fg32">+		log.Debug(&quot;Loading existing TXT records&quot;, &quot;name&quot;, name, &quot;zone&quot;, c.zoneID, &quot;page&quot;, page)</span>
 		resp, err := c.api.ListResourceRecordSets(context.TODO(), &amp;req)
 		if err != nil {
 			return existing, err
<span class="term-fg36">@@ -360,7 +361,7 @@</span> 		req.StartRecordIdentifier = resp.NextRecordIdentifier
 		req.StartRecordName = resp.NextRecordName
 		req.StartRecordType = resp.NextRecordType
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	log.Info(&quot;Loaded existing TXT records&quot;, &quot;name&quot;, name, &quot;zone&quot;, c.zoneID, &quot;records&quot;, len(existing))</span>
 	return existing, nil
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-dfcec035bd1d2825cb48eccd" role="button"
                   aria-expanded="false" aria-controls="id-dfcec035bd1d2825cb48eccd">
                    <code>cmd/evm/internal/t8ntool/execution.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/internal/t8ntool/execution.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/internal/t8ntool/execution.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-dfcec035bd1d2825cb48eccd"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go op-geth&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg1">index 2c68659945ebdce0691ce4ceb0fc6c00db9f9d3d..5f796c1d6639786896f988903f9cdc5e542137ec 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg36">@@ -163,7 +163,7 @@</span> 		misc.ApplyDAOHardFork(statedb)
 	}
&nbsp;
 	for i, tx := range txs {
<span class="term-fg31">-		msg, err := tx.AsMessage(signer, pre.Env.BaseFee)</span>
<span class="term-fg32">+		msg, err := core.TransactionToMessage(tx, signer, pre.Env.BaseFee)</span>
 		if err != nil {
 			log.Warn(&quot;rejected tx&quot;, &quot;index&quot;, i, &quot;hash&quot;, tx.Hash(), &quot;error&quot;, err)
 			rejectedTxs = append(rejectedTxs, &amp;rejectedTx{i, err.Error()})
<span class="term-fg36">@@ -176,16 +176,21 @@</span> 		}
 		vmConfig.Tracer = tracer
 		vmConfig.Debug = (tracer != nil)
 		statedb.SetTxContext(tx.Hash(), txIndex)
<span class="term-fg31">-		txContext := core.NewEVMTxContext(msg)</span>
<span class="term-fg31">-		snapshot := statedb.Snapshot()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		var (</span>
<span class="term-fg32">+			txContext = core.NewEVMTxContext(msg)</span>
<span class="term-fg32">+			snapshot  = statedb.Snapshot()</span>
<span class="term-fg32">+			prevGas   = gaspool.Gas()</span>
<span class="term-fg32">+		)</span>
 		evm := vm.NewEVM(vmContext, txContext, statedb, chainConfig, vmConfig)
&nbsp;
 		&#47;&#47; (ret []byte, usedGas uint64, failed bool, err error)
 		msgResult, err := core.ApplyMessage(evm, msg, gaspool)
 		if err != nil {
 			statedb.RevertToSnapshot(snapshot)
<span class="term-fg31">-			log.Info(&quot;rejected tx&quot;, &quot;index&quot;, i, &quot;hash&quot;, tx.Hash(), &quot;from&quot;, msg.From(), &quot;error&quot;, err)</span>
<span class="term-fg32">+			log.Info(&quot;rejected tx&quot;, &quot;index&quot;, i, &quot;hash&quot;, tx.Hash(), &quot;from&quot;, msg.From, &quot;error&quot;, err)</span>
 			rejectedTxs = append(rejectedTxs, &amp;rejectedTx{i, err.Error()})
<span class="term-fg32">+			gaspool.SetGas(prevGas)</span>
 			continue
 		}
 		includedTxs = append(includedTxs, tx)
<span class="term-fg36">@@ -215,7 +220,7 @@</span> 			receipt.TxHash = tx.Hash()
 			receipt.GasUsed = msgResult.UsedGas
&nbsp;
 			&#47;&#47; If the transaction created a contract, store the creation address in the receipt.
<span class="term-fg31">-			if msg.To() == nil {</span>
<span class="term-fg32">+			if msg.To == nil {</span>
 				receipt.ContractAddress = crypto.CreateAddress(evm.TxContext.Origin, tx.Nonce())
 			}
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8b1ef1b7fe46daabc987eae9" role="button"
                   aria-expanded="false" aria-controls="id-8b1ef1b7fe46daabc987eae9">
                    <code>cmd/evm/testdata/10/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/10/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/10/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+70</span></div>
                        <div class="text-start"><span class="text-danger">-64</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8b1ef1b7fe46daabc987eae9"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;10&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;10&#47;readme.md</span>
<span class="term-fg1">index c34be80bb71c4b7d3e17a0f036e3d01cb53c13e1..afa378723814cdbb25299a2e3524fa99709e5f14 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;10&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;10&#47;readme.md</span>
<span class="term-fg36">@@ -9,71 +9,77 @@</span> ```
 Output:
 ```json
 {
<span class="term-fg31">- &quot;alloc&quot;: {</span>
<span class="term-fg31">-  &quot;0x1111111111111111111111111111111111111111&quot;: {</span>
<span class="term-fg31">-   &quot;code&quot;: &quot;0xfe&quot;,</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0x10000000000&quot;,</span>
<span class="term-fg31">-   &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg31">-  },</span>
<span class="term-fg31">-  &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0x10000000000&quot;,</span>
<span class="term-fg31">-   &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg32">+  &quot;alloc&quot;: {</span>
<span class="term-fg32">+    &quot;0x1111111111111111111111111111111111111111&quot;: {</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0xfe&quot;,</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x10000000000&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x10000000000&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd02d72e067e77158444ef2020ff2d325f929b363&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0xff5beffffc95&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0x4&quot;</span>
<span class="term-fg32">+    }</span>
   },
<span class="term-fg31">-  &quot;0xd02d72e067e77158444ef2020ff2d325f929b363&quot;: {</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0xff5beffffc95&quot;,</span>
<span class="term-fg31">-   &quot;nonce&quot;: &quot;0x4&quot;</span>
<span class="term-fg31">-  }</span>
<span class="term-fg31">- },</span>
<span class="term-fg31">- &quot;result&quot;: {</span>
<span class="term-fg31">-  &quot;stateRoot&quot;: &quot;0xf91a7ec08e4bfea88719aab34deabb000c86902360532b52afa9599d41f2bb8b&quot;,</span>
<span class="term-fg31">-  &quot;txRoot&quot;: &quot;0xda925f2306a52fa24c15d5cd212d736ee016415fd8dd0c45fd368de7917d64bb&quot;,</span>
<span class="term-fg31">-  &quot;receiptRoot&quot;: &quot;0x439a25f7fc424c10fb1f89800e4aa1df74156b137239d9ac3eaa7c911c353cd5&quot;,</span>
<span class="term-fg31">-  &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span>
<span class="term-fg31">-  &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-  &quot;receipts&quot;: [</span>
<span class="term-fg31">-   {</span>
<span class="term-fg31">-    &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg31">-    &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg31">-    &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg31">-    &quot;cumulativeGasUsed&quot;: &quot;0x10000001&quot;,</span>
<span class="term-fg31">-    &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;logs&quot;: null,</span>
<span class="term-fg31">-    &quot;transactionHash&quot;: &quot;0x88980f6efcc5358d9c359663e7b9414722d430497637340ea056b076bc206701&quot;,</span>
<span class="term-fg31">-    &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;gasUsed&quot;: &quot;0x10000001&quot;,</span>
<span class="term-fg31">-    &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;transactionIndex&quot;: &quot;0x0&quot;</span>
<span class="term-fg31">-   },</span>
<span class="term-fg31">-   {</span>
<span class="term-fg31">-    &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg31">-    &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg31">-    &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg31">-    &quot;cumulativeGasUsed&quot;: &quot;0x20000001&quot;,</span>
<span class="term-fg31">-    &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;logs&quot;: null,</span>
<span class="term-fg31">-    &quot;transactionHash&quot;: &quot;0xd7bf3886f4e2aef74d525ae072c680f3846f550254401b67cbfda4a233757582&quot;,</span>
<span class="term-fg31">-    &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;gasUsed&quot;: &quot;0x10000000&quot;,</span>
<span class="term-fg31">-    &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;transactionIndex&quot;: &quot;0x1&quot;</span>
<span class="term-fg31">-   },</span>
<span class="term-fg31">-   {</span>
<span class="term-fg31">-    &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg31">-    &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg31">-    &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg31">-    &quot;cumulativeGasUsed&quot;: &quot;0x30000001&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: {</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xf91a7ec08e4bfea88719aab34deabb000c86902360532b52afa9599d41f2bb8b&quot;,</span>
<span class="term-fg32">+    &quot;txRoot&quot;: &quot;0xda925f2306a52fa24c15d5cd212d736ee016415fd8dd0c45fd368de7917d64bb&quot;,</span>
<span class="term-fg32">+    &quot;receiptsRoot&quot;: &quot;0x439a25f7fc424c10fb1f89800e4aa1df74156b137239d9ac3eaa7c911c353cd5&quot;,</span>
<span class="term-fg32">+    &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span>
     &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,
<span class="term-fg31">-    &quot;logs&quot;: null,</span>
<span class="term-fg31">-    &quot;transactionHash&quot;: &quot;0x50308296760f01f1eeec7500e9e73cad67469249b1f59e9a9f55e6625a4923db&quot;,</span>
<span class="term-fg31">-    &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;gasUsed&quot;: &quot;0x10000000&quot;,</span>
<span class="term-fg31">-    &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-    &quot;transactionIndex&quot;: &quot;0x2&quot;</span>
<span class="term-fg31">-   }</span>
<span class="term-fg31">-  ],</span>
<span class="term-fg31">-  &quot;rejected&quot;: [</span>
<span class="term-fg31">-   3</span>
<span class="term-fg31">-  ]</span>
<span class="term-fg31">- }</span>
<span class="term-fg32">+    &quot;receipts&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg32">+        &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;cumulativeGasUsed&quot;: &quot;0x10000001&quot;,</span>
<span class="term-fg32">+        &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;logs&quot;: null,</span>
<span class="term-fg32">+        &quot;transactionHash&quot;: &quot;0x88980f6efcc5358d9c359663e7b9414722d430497637340ea056b076bc206701&quot;,</span>
<span class="term-fg32">+        &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x10000001&quot;,</span>
<span class="term-fg32">+        &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;transactionIndex&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg32">+        &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;cumulativeGasUsed&quot;: &quot;0x20000001&quot;,</span>
<span class="term-fg32">+        &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;logs&quot;: null,</span>
<span class="term-fg32">+        &quot;transactionHash&quot;: &quot;0xd7bf3886f4e2aef74d525ae072c680f3846f550254401b67cbfda4a233757582&quot;,</span>
<span class="term-fg32">+        &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x10000000&quot;,</span>
<span class="term-fg32">+        &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;transactionIndex&quot;: &quot;0x1&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;0x2&quot;,</span>
<span class="term-fg32">+        &quot;root&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;status&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;cumulativeGasUsed&quot;: &quot;0x30000001&quot;,</span>
<span class="term-fg32">+        &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;logs&quot;: null,</span>
<span class="term-fg32">+        &quot;transactionHash&quot;: &quot;0x50308296760f01f1eeec7500e9e73cad67469249b1f59e9a9f55e6625a4923db&quot;,</span>
<span class="term-fg32">+        &quot;contractAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x10000000&quot;,</span>
<span class="term-fg32">+        &quot;blockHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;transactionIndex&quot;: &quot;0x2&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;rejected&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;index&quot;: 3,</span>
<span class="term-fg32">+        &quot;error&quot;: &quot;gas limit reached&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;currentDifficulty&quot;: &quot;0x20000&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x30000001&quot;,</span>
<span class="term-fg32">+    &quot;currentBaseFee&quot;: &quot;0x36b&quot;</span>
<span class="term-fg32">+  }</span>
 }
 ```</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4e58be0b17eae5225bf01f1c" role="button"
                   aria-expanded="false" aria-controls="id-4e58be0b17eae5225bf01f1c">
                    <code>cmd/evm/testdata/12/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/12/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/12/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+24</span></div>
                        <div class="text-start"><span class="text-danger">-21</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4e58be0b17eae5225bf01f1c"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;12&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;12&#47;readme.md</span>
<span class="term-fg1">index b0177ecc24b6971ae91d8001479e444b5b9cf736..e3195be48ba502201f68101daa608657d7d8fc80 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;12&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;12&#47;readme.md</span>
<span class="term-fg36">@@ -11,29 +11,32 @@</span>
 With the fix applied, the result is:
 ```
 dir=.&#47;testdata&#47;12 &amp;&amp; .&#47;evm t8n --state.fork=London --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --output.alloc=stdout --output.result=stdout
<span class="term-fg31">-INFO [07-21|19:03:50.276] rejected tx                              index=0 hash=ccc996..d83435 from=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B error=&quot;insufficient funds for gas * price + value: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B have 84000000 want 84000032&quot;</span>
<span class="term-fg31">-INFO [07-21|19:03:50.276] Trie dumping started                     root=e05f81..6597a5</span>
<span class="term-fg31">-INFO [07-21|19:03:50.276] Trie dumping complete                    accounts=1 elapsed=&quot;39.549µs&quot;</span>
<span class="term-fg32">+INFO [03-09|10:43:12.649] rejected tx                              index=0 hash=ccc996..d83435 from=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B error=&quot;insufficient funds for gas * price + value: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B have 84000000 want 84000032&quot;</span>
<span class="term-fg32">+INFO [03-09|10:43:12.650] Trie dumping started                     root=e05f81..6597a5</span>
<span class="term-fg32">+INFO [03-09|10:43:12.650] Trie dumping complete                    accounts=1 elapsed=&quot;46.393µs&quot;</span>
 {
<span class="term-fg31">- &quot;alloc&quot;: {</span>
<span class="term-fg31">-  &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0x501bd00&quot;</span>
<span class="term-fg32">+  &quot;alloc&quot;: {</span>
<span class="term-fg32">+    &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x501bd00&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;result&quot;: {</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xe05f81f8244a76503ceec6f88abfcd03047a612a1001217f37d30984536597a5&quot;,</span>
<span class="term-fg32">+    &quot;txRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;receiptsRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span>
<span class="term-fg32">+    &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;receipts&quot;: [],</span>
<span class="term-fg32">+    &quot;rejected&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;index&quot;: 0,</span>
<span class="term-fg32">+        &quot;error&quot;: &quot;insufficient funds for gas * price + value: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B have 84000000 want 84000032&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;currentDifficulty&quot;: &quot;0x20000&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;currentBaseFee&quot;: &quot;0x20&quot;</span>
   }
<span class="term-fg31">- },</span>
<span class="term-fg31">- &quot;result&quot;: {</span>
<span class="term-fg31">-  &quot;stateRoot&quot;: &quot;0xe05f81f8244a76503ceec6f88abfcd03047a612a1001217f37d30984536597a5&quot;,</span>
<span class="term-fg31">-  &quot;txRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg31">-  &quot;receiptRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg31">-  &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span>
<span class="term-fg31">-  &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-  &quot;receipts&quot;: [],</span>
<span class="term-fg31">-  &quot;rejected&quot;: [</span>
<span class="term-fg31">-   {</span>
<span class="term-fg31">-    &quot;index&quot;: 0,</span>
<span class="term-fg31">-    &quot;error&quot;: &quot;insufficient funds for gas * price + value: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B have 84000000 want 84000032&quot;</span>
<span class="term-fg31">-   }</span>
<span class="term-fg31">-  ]</span>
<span class="term-fg31">- }</span>
 }
 ```
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-27181f7ad7217729cb6aac31" role="button"
                   aria-expanded="false" aria-controls="id-27181f7ad7217729cb6aac31">
                    <code>cmd/evm/testdata/14/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/14/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/14/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-27181f7ad7217729cb6aac31"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;14&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;14&#47;readme.md</span>
<span class="term-fg1">index 9d0dc9569c671c5d22120d440943deb40d1bfe01..40dd75486ee8d92ec4fe9ee71dd8e43afc9095b8 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;14&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;14&#47;readme.md</span>
<span class="term-fg36">@@ -5,36 +5,40 @@</span>
 Calculating it (with an empty set of txs) using `London` rules (and no provided unclehash for the parent block):
 ```
 [user@work evm]$ .&#47;evm t8n --input.alloc=.&#47;testdata&#47;14&#47;alloc.json --input.txs=.&#47;testdata&#47;14&#47;txs.json --input.env=.&#47;testdata&#47;14&#47;env.json --output.result=stdout --state.fork=London
<span class="term-fg31">-INFO [08-30|20:43:09.352] Trie dumping started                     root=6f0588..7f4bdc</span>
<span class="term-fg31">-INFO [08-30|20:43:09.352] Trie dumping complete                    accounts=2 elapsed=&quot;82.533µs&quot;</span>
<span class="term-fg31">-INFO [08-30|20:43:09.352] Wrote file                               file=alloc.json</span>
<span class="term-fg32">+INFO [03-09|10:43:57.070] Trie dumping started                     root=6f0588..7f4bdc</span>
<span class="term-fg32">+INFO [03-09|10:43:57.070] Trie dumping complete                    accounts=2 elapsed=&quot;214.663µs&quot;</span>
<span class="term-fg32">+INFO [03-09|10:43:57.071] Wrote file                               file=alloc.json</span>
 {
   &quot;result&quot;: {
     &quot;stateRoot&quot;: &quot;0x6f058887ca01549716789c380ede95aecc510e6d1fdc4dbf67d053c7c07f4bdc&quot;,
     &quot;txRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,
<span class="term-fg31">-    &quot;receiptRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;receiptsRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
     &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,
     &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,
     &quot;receipts&quot;: [],
<span class="term-fg31">-    &quot;currentDifficulty&quot;: &quot;0x2000020000000&quot;</span>
<span class="term-fg32">+    &quot;currentDifficulty&quot;: &quot;0x2000020000000&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;currentBaseFee&quot;: &quot;0x500&quot;</span>
   }
 }
 ```
 Same thing, but this time providing a non-empty (and non-`emptyKeccak`) unclehash, which leads to a slightly different result:
 ```
 [user@work evm]$ .&#47;evm t8n --input.alloc=.&#47;testdata&#47;14&#47;alloc.json --input.txs=.&#47;testdata&#47;14&#47;txs.json --input.env=.&#47;testdata&#47;14&#47;env.uncles.json --output.result=stdout --state.fork=London
<span class="term-fg31">-INFO [08-30|20:44:33.102] Trie dumping started                     root=6f0588..7f4bdc</span>
<span class="term-fg31">-INFO [08-30|20:44:33.102] Trie dumping complete                    accounts=2 elapsed=&quot;72.91µs&quot;</span>
<span class="term-fg31">-INFO [08-30|20:44:33.102] Wrote file                               file=alloc.json</span>
<span class="term-fg32">+INFO [03-09|10:44:20.511] Trie dumping started                     root=6f0588..7f4bdc</span>
<span class="term-fg32">+INFO [03-09|10:44:20.511] Trie dumping complete                    accounts=2 elapsed=&quot;184.319µs&quot;</span>
<span class="term-fg32">+INFO [03-09|10:44:20.512] Wrote file                               file=alloc.json</span>
 {
   &quot;result&quot;: {
     &quot;stateRoot&quot;: &quot;0x6f058887ca01549716789c380ede95aecc510e6d1fdc4dbf67d053c7c07f4bdc&quot;,
     &quot;txRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,
<span class="term-fg31">-    &quot;receiptRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;receiptsRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
     &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,
     &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,
     &quot;receipts&quot;: [],
<span class="term-fg31">-    &quot;currentDifficulty&quot;: &quot;0x1ff8020000000&quot;</span>
<span class="term-fg32">+    &quot;currentDifficulty&quot;: &quot;0x1ff8020000000&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;currentBaseFee&quot;: &quot;0x500&quot;</span>
   }
 }
 ```</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b977474bcc4c280e53a5ccfc" role="button"
                   aria-expanded="false" aria-controls="id-b977474bcc4c280e53a5ccfc">
                    <code>cmd/evm/testdata/19/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/19/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/19/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+16</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b977474bcc4c280e53a5ccfc"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;19&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;19&#47;readme.md</span>
<span class="term-fg1">index 095d4525d4fe9407e0f7b9ff00dbcdc7ec17a32c..9c7c4b3656b0b11ec3a697a4aa7169d58042455e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;19&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;19&#47;readme.md</span>
<span class="term-fg36">@@ -6,4 +6,20 @@</span>
 Calculating it (with an empty set of txs) using `GrayGlacier` rules (and no provided unclehash for the parent block):
 ```
 [user@work evm]$ .&#47;evm t8n --input.alloc=.&#47;testdata&#47;19&#47;alloc.json --input.txs=.&#47;testdata&#47;19&#47;txs.json --input.env=.&#47;testdata&#47;19&#47;env.json --output.result=stdout --state.fork=GrayGlacier
<span class="term-fg32">+INFO [03-09|10:45:26.777] Trie dumping started                     root=6f0588..7f4bdc</span>
<span class="term-fg32">+INFO [03-09|10:45:26.777] Trie dumping complete                    accounts=2 elapsed=&quot;176.471µs&quot;</span>
<span class="term-fg32">+INFO [03-09|10:45:26.777] Wrote file                               file=alloc.json</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;result&quot;: {</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x6f058887ca01549716789c380ede95aecc510e6d1fdc4dbf67d053c7c07f4bdc&quot;,</span>
<span class="term-fg32">+    &quot;txRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;receiptsRoot&quot;: &quot;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&quot;,</span>
<span class="term-fg32">+    &quot;logsHash&quot;: &quot;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&quot;,</span>
<span class="term-fg32">+    &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;receipts&quot;: [],</span>
<span class="term-fg32">+    &quot;currentDifficulty&quot;: &quot;0x2000000004000&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;currentBaseFee&quot;: &quot;0x500&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+}</span>
 ```
\ No newline at end of file</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cda12b0f708a245dae2ddc4f" role="button"
                   aria-expanded="false" aria-controls="id-cda12b0f708a245dae2ddc4f">
                    <code>cmd/evm/testdata/7/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/7/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/7/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+369</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cda12b0f708a245dae2ddc4f"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;7&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;7&#47;readme.md</span>
<span class="term-fg1">index c9826e0ba67eda9d2f192b193e0b23f65f388ebe..59e0dbef99b0d616d34167f346dd10be607dc80b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;7&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;7&#47;readme.md</span>
<span class="term-fg36">@@ -3,5 +3,373 @@</span> DAO-transition works
&nbsp;
 Example:
 ```
<span class="term-fg31">-.&#47;statet8n --input.alloc=.&#47;testdata&#47;7&#47;alloc.json  --input.txs=.&#47;testdata&#47;7&#47;txs.json --input.env=.&#47;testdata&#47;7&#47;env.json --output.alloc=stdout --state.fork=HomesteadToDaoAt5</span>
<span class="term-fg32">+ .&#47;evm t8n --input.alloc=.&#47;testdata&#47;7&#47;alloc.json  --input.txs=.&#47;testdata&#47;7&#47;txs.json --input.env=.&#47;testdata&#47;7&#47;env.json --output.alloc=stdout --state.fork=HomesteadToDaoAt5</span>
<span class="term-fg32">+INFO [03-09|10:47:37.255] Trie dumping started                     root=157847..2891b7</span>
<span class="term-fg32">+INFO [03-09|10:47:37.256] Trie dumping complete                    accounts=120 elapsed=&quot;715.635µs&quot;</span>
<span class="term-fg32">+INFO [03-09|10:47:37.256] Wrote file                               file=result.json</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;alloc&quot;: {</span>
<span class="term-fg32">+    &quot;0x005f5cee7a43331d5a3d3eec71305925a62f34b6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x0101f3be8ebb4bbd39a2e3b9a3639d4259832fd9&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x057b56736d32b86616a10f619859c6cd6f59092a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x06706dd3f2c9abf0a21ddcc6941d9b86f0596936&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x0737a6b837f97f46ebade41b9bc3e1c509c85c53&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x07f5c1e1bc2c93e0402f23341973a0e043f7bf8a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x0e0da70933f4c7849fc0d203f5d1d43b9ae4532d&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x0ff30d6de14a8224aa97b78aea5388d1c51c1f00&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x12e626b0eebfe86a56d633b9864e389b45dcb260&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x1591fc0f688c81fbeb17f5426a162a7024d430c2&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x17802f43a0137c506ba92291391a8a8f207f487d&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x1975bd06d486162d5dc297798dfc41edd5d160a7&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x1ca6abd14d30affe533b24d7a21bff4c2d5e1f3b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x1cba23d343a983e9b5cfd19496b9a9701ada385f&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x200450f06520bdd6c527622a273333384d870efb&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x21c7fdb9ed8d291d79ffd82eb2c4356ec0d81241&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x23b75c2f6791eef49c69684db4c6c1f93bf49a50&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x24c4d950dfd4dd1902bbed3508144a54542bba94&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x253488078a4edf4d6f42f113d1e62836a942cf1a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x27b137a85656544b1ccb5a0f2e561a5703c6a68f&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x2a5ed960395e2a49b1c758cef4aa15213cfd874c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x2b3455ec7fedf16e646268bf88846bd7a2319bb2&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x2c19c7f9ae8b751e37aeb2d93a699722395ae18f&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x304a554a310c7e546dfe434669c62820b7d83490&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x319f70bab6845585f412ec7724b744fec6095c85&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x35a051a0010aba705c9008d7a7eff6fb88f6ea7b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x3ba4d81db016dc2890c81f3acec2454bff5aada5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x3c02a7bc0391e86d91b7d144e61c2c01a25a79c5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x40b803a9abce16f50f36a77ba41180eb90023925&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x440c59b325d2997a134c2c7c60a8c61611212bad&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4486a3d68fac6967006d7a517b889fd3f98c102b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4613f3bca5c44ea06337a9e439fbc6d42e501d0a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x47e7aa56d6bdf3f36be34619660de61275420af8&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4863226780fe7c0356454236d3b1c8792785748d&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x492ea3bb0f3315521c31f273e565b868fc090f17&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4cb31628079fb14e4bc3cd5e30c2f7489b00960c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4deb0033bb26bc534b197e61d19e0733e5679784&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4fa802324e929786dbda3b8820dc7834e9134a2a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x4fd6ace747f06ece9c49699c7cabc62d02211f75&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x51e0ddd9998364a2eb38588679f0d2c42653e4a6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x52c5317c848ba20c7504cb2c8052abd1fde29d03&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x542a9515200d14b68e934e9830d91645a980dd7a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5524c55fb03cf21f549444ccbecb664d0acad706&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x579a80d909f346fbfb1189493f521d7f48d52238&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x58b95c9a9d5d26825e70a82b6adb139d3fd829eb&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5c6e67ccd5849c0d29219c4f95f1a7a93b3f5dc5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5c8536898fbb74fc7445814902fd08422eac56d0&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5d2b2e6fcbe3b11d26b525e085ff818dae332479&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5dc28b15dffed94048d73806ce4b7a4612a1d48f&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x5f9f3392e9f62f63b8eac0beb55541fc8627f42c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6131c42fa982e56929107413a9d526fd99405560&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6231b6d0d5e77fe001c2a460bd9584fee60d409b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x627a0a960c079c21c34f7612d5d230e01b4ad4c7&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x63ed5a272de2f6d968408b4acb9024f4cc208ebf&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6966ab0d485353095148a2155858910e0965b6f9&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6b0c4d41ba9ab8d8cfb5d379c69a612f2ced8ecb&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6d87578288b6cb5549d5076a207456a1f6a63dc0&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x6f6704e5a10332af6672e50b3d9754dc460dfa4d&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x7602b46df5390e432ef1c307d4f2c9ff6d65cc97&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x779543a0491a837ca36ce8c635d6154e3c4911a6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x77ca7b50b6cd7e2f3fa008e24ab793fd56cb15f6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x782495b7b3355efb2833d56ecb34dc22ad7dfcc4&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x807640a13483f8ac783c557fcdf27be11ea4ac7a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x8163e7fb499e90f8544ea62bbf80d21cd26d9efd&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x84ef4b2357079cd7a7c69fd7a37cd0609a679106&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x86af3e9626fce1957c82e88cbf04ddf3a2ed7915&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x8a8eafb1cf62bfbeb1741769dae1a9dd47996192&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0xfeedbead&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x8d9edb3054ce5c5774a420ac37ebae0ac02343c6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x914d1b8b43e92723e64fd0a06f5bdb8dd9b10c79&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x97f43a37f595ab5dd318fb46e7a155eae057317a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9aa008f65de0b923a2a4f02012ad034a5e2e2192&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9c15b54878ba618f494b38f0ae7443db6af648ba&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9c50426be05db97f5d64fc54bf89eff947f0a321&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9da397b9e80755301a3b32173283a91c0ef6c87e&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9ea779f907f0b315b364b0cfc39a0fde5b02a416&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9f27daea7aca0aa0446220b98d028715e3bc803d&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x9fcd2deaff372a39cc679d5c5e4de7bafb0b1339&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa2f1ccba9395d7fcb155bba8bc92db9bafaeade7&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa3acf3a1e16b1d7c315e23510fdd7847b48234f6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa5dc5acd6a7968a4554d89d65e59b7fd3bff0f90&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa82f360a8d3455c5c41366975bde739c37bfeb8a&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x5ffd4878be161d74&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0xac&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xac1ecab32727358dba8962a0f3b261731aad9723&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xaccc230e8a6e5be9160b8cdf2864dd2a001c28b6&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xacd87e28b0c9d1254e868b81cba4cc20d9a32225&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xadf80daec7ba8dcf15392f1ac611fff65d94f880&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xaeeb8ff27288bdabc0fa5ebb731b6f409507516c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xb136707642a4ea12fb4bae820f03d2562ebff487&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xb2c6f0dfbb716ac562e2d85d6cb2f8d5ee87603e&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xb3fb0e5aba0e20e5c49d252dfd30e102b171a425&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xb52042c8ca3f8aa246fa79c3feaa3d959347c0ab&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xb9637156d330c0d605a791f1c31ba5890582fe1c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xbb9bc244d798123fde783fcc1c72d3bb8c189413&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xbc07118b9ac290e4622f5e77a0853539789effbe&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xbcf899e6c7d9d5a215ab1e3444c86806fa854c76&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xbe8539bfe837b67d1282b2b1d61c3f723966f049&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xbf4ed7b27f1d666546e30d74d50d173d20bca754&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xc4bbd073882dd2add2424cf47d35213405b01324&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xc94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xca544e5c4687d109611d0f8f928b53a25af72448&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xcbb9d3703e651b0d496cdefb8b92c25aeb2171f7&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xcc34673c6c40e791051898567a1222daf90be287&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xceaeb481747ca6c540a000c1f3641f8cef161fa7&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd131637d5275fd1a68a3200f4ad25c71a2a9522e&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd164b088bd9108b60d0ca3751da4bceb207b0782&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd1ac8b1ef1b69ff51d1d401a476e7e612414f091&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd343b217de44030afaa275f54d31a9317c7f441e&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd4fe7bc31cedb7bfb8a345f31e668033056b2728&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xd9aef3a1e38a39c16b31d1ace71bca8ef58d315b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xda2fef9e4a3230988ff17df2165440f37e8b1708&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xdbe9b615a3ae8709af8b93336ce9b477e4ac0940&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xe308bd1ac5fda103967359b2712dd89deffb7973&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xe4ae1efdfc53b73893af49113d8694a057b9c0d1&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xec8e57756626fdc07c63ad2eafbd28d08e7b0ca5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xecd135fa4f61a655311e86238c92adcd779555d2&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xf0b1aa0eb660754448a7937c022e30aa692fe0c5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xf1385fb24aad0cd7432824085e42aff90886fef5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xf14c14075d6c4ed84b86798af0956deef67365b5&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xf4c64518ea10f995918a454158c6b61407ea345c&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xfe24cdd8648121a43a7c86d289be4dd2951ed49f&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+}</span>
 ```
\ No newline at end of file</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d06759d89666c1c8afd7a82d" role="button"
                   aria-expanded="false" aria-controls="id-d06759d89666c1c8afd7a82d">
                    <code>cmd/evm/testdata/8/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/8/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/8/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+17</span></div>
                        <div class="text-start"><span class="text-danger">-20</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d06759d89666c1c8afd7a82d"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg1">index e021cd7e2ee46e3ee59a427e7a35bd31ac6bfc56..c991fb217799e3ac6e70ca0572b9a2e5afbd4d51 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;8&#47;readme.md</span>
<span class="term-fg36">@@ -23,41 +23,37 @@</span> ## Execution
&nbsp;
 Running it yields:
 ```
<span class="term-fg31">-dir=.&#47;testdata&#47;8 &amp;&amp; .&#47;evm t8n --state.fork=Berlin --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --trace &amp;&amp; cat trace-* | grep SLOAD</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x47c86&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf6&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-</span>
<span class="term-fg32">+dir=.&#47;testdata&#47;8 &amp;&amp; .&#47;evm t8n --state.fork=Berlin --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --trace 2&gt;&#47;dev&#47;null &amp;&amp; cat trace-* | grep SLOAD</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x47c86&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf6&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
 ```
&nbsp;
 Simlarly, we can provide the input transactions via `stdin` instead of as file:
&nbsp;
 ```
<span class="term-fg31">-dir=.&#47;testdata&#47;8 \</span>
<span class="term-fg32">+$ dir=.&#47;testdata&#47;8 \</span>
   &amp;&amp; cat $dir&#47;txs.json | jq &quot;{txs: .}&quot; \
   | .&#47;evm t8n --state.fork=Berlin \
      --input.alloc=$dir&#47;alloc.json \
      --input.txs=stdin \
      --input.env=$dir&#47;env.json \
      --trace  \
<span class="term-fg32">+     2&gt;&#47;dev&#47;null \</span>
   &amp;&amp; cat trace-* | grep SLOAD
<span class="term-fg31">-</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x47c86&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf6&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;returnStack&quot;:[],&quot;returnData&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x47c86&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf6&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
 ```
&nbsp;
 If we try to execute it on older rules:
 ```
<span class="term-fg31">-dir=.&#47;testdata&#47;8 &amp;&amp; .&#47;evm t8n --state.fork=Istanbul --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json </span>
<span class="term-fg31">-INFO [01-21|23:21:51.265] rejected tx                              index=0 hash=d2818d..6ab3da error=&quot;tx type not supported&quot;</span>
<span class="term-fg31">-INFO [01-21|23:21:51.265] rejected tx                              index=1 hash=26ea00..81c01b from=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B error=&quot;nonce too high: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B, tx: 1 state: 0&quot;</span>
<span class="term-fg31">-INFO [01-21|23:21:51.265] rejected tx                              index=2 hash=698d01..369cee error=&quot;tx type not supported&quot;</span>
<span class="term-fg32">+$ dir=.&#47;testdata&#47;8 &amp;&amp; .&#47;evm t8n --state.fork=Istanbul --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json </span>
<span class="term-fg32">+ERROR(10): failed signing transactions: ERROR(10): tx 0: failed to sign tx: transaction type not supported</span>
 ```
<span class="term-fg31">-Number `1` and `3` are not applicable, and therefore number `2` has wrong nonce. </span>
<span class="term-fg31">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-533911c7d9e27501c920b844" role="button"
                   aria-expanded="false" aria-controls="id-533911c7d9e27501c920b844">
                    <code>cmd/evm/testdata/9/env.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/9/env.json" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/9/env.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-533911c7d9e27501c920b844"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;9&#47;env.json op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;env.json</span>
<span class="term-fg1">index ec5164b9952eafcf55f76ee0b4c7ef6bdd50d60c..082bff778a3ab2e333767a5c2801477122e7ca33 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;9&#47;env.json</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;env.json</span>
<span class="term-fg36">@@ -1,7 +1,7 @@</span>
 {
   &quot;currentCoinbase&quot;: &quot;0x2adc25665018aa1fe0e6bc666dac8fc2697ff9ba&quot;,
   &quot;currentDifficulty&quot;: &quot;0x20000&quot;,
<span class="term-fg31">-  &quot;currentGasTarget&quot;: &quot;0x1000000000&quot;,</span>
<span class="term-fg32">+  &quot;currentGasLimit&quot;: &quot;0x1000000000&quot;,</span>
   &quot;currentBaseFee&quot;: &quot;0x3B9ACA00&quot;,
   &quot;currentNumber&quot;: &quot;0x1000000&quot;,
   &quot;currentTimestamp&quot;: &quot;0x04&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-65befccd11e76f45e6bf5011" role="button"
                   aria-expanded="false" aria-controls="id-65befccd11e76f45e6bf5011">
                    <code>cmd/evm/testdata/9/readme.md</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/evm/testdata/9/readme.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/9/readme.md" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+31</span></div>
                        <div class="text-start"><span class="text-danger">-27</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-65befccd11e76f45e6bf5011"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;9&#47;readme.md op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;readme.md</span>
<span class="term-fg1">index 88f0f12aaaa5731f0b873c5d7ab4a064457d0358..b1446446554739a21c4fcffbefbfbbe1671a42cf 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;9&#47;readme.md</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;readme.md</span>
<span class="term-fg36">@@ -22,35 +22,37 @@</span> ## Execution
&nbsp;
 Running it yields:
 ```
<span class="term-fg31">-$ dir=.&#47;testdata&#47;9 &amp;&amp; .&#47;evm t8n --state.fork=London --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --trace &amp;&amp; cat trace-* | grep SLOAD</span>
<span class="term-fg31">-{&quot;pc&quot;:2,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48c28&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x1&quot;],&quot;returnStack&quot;:null,&quot;returnD</span>
<span class="term-fg31">-ata&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:3,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x483f4&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x0&quot;],&quot;returnStack&quot;:null,&quot;returnDa</span>
<span class="term-fg31">-ta&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:2,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf4&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x1&quot;],&quot;returnStack&quot;:null,&quot;returnD</span>
<span class="term-fg31">-ata&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg31">-{&quot;pc&quot;:3,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494c0&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memory&quot;:&quot;0x&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x0&quot;],&quot;returnStack&quot;:null,&quot;returnD</span>
<span class="term-fg31">-ata&quot;:&quot;0x&quot;,&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;,&quot;error&quot;:&quot;&quot;}</span>
<span class="term-fg32">+$ dir=.&#47;testdata&#47;9 &amp;&amp; .&#47;evm t8n --state.fork=London --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --trace 2&gt;&#47;dev&#47;null  &amp;&amp; cat trace-*  | grep SLOAD</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x47c86&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:2,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48c28&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x1&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:3,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x483f4&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf6&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494be&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:2,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x49cf4&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x1&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:3,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x494c0&quot;,&quot;gasCost&quot;:&quot;0x834&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;,&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:1,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x484be&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x0&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
<span class="term-fg32">+{&quot;pc&quot;:4,&quot;op&quot;:84,&quot;gas&quot;:&quot;0x48456&quot;,&quot;gasCost&quot;:&quot;0x64&quot;,&quot;memSize&quot;:0,&quot;stack&quot;:[&quot;0x3&quot;],&quot;depth&quot;:1,&quot;refund&quot;:0,&quot;opName&quot;:&quot;SLOAD&quot;}</span>
 ```
&nbsp;
 We can also get the post-alloc:
 ```
<span class="term-fg31">-$ dir=.&#47;testdata&#47;9 &amp;&amp; .&#47;evm t8n --state.fork=London --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --output.alloc=stdout</span>
<span class="term-fg32">+$ dir=.&#47;testdata&#47;9 &amp;&amp; .&#47;evm t8n --state.fork=London --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs.json --input.env=$dir&#47;env.json --output.alloc=stdout 2&gt;&#47;dev&#47;null</span>
 {
<span class="term-fg31">- &quot;alloc&quot;: {</span>
<span class="term-fg31">-  &quot;0x000000000000000000000000000000000000aaaa&quot;: {</span>
<span class="term-fg31">-   &quot;code&quot;: &quot;0x58585454&quot;,</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0x3&quot;,</span>
<span class="term-fg31">-   &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg31">-  },</span>
<span class="term-fg31">-  &quot;0x2adc25665018aa1fe0e6bc666dac8fc2697ff9ba&quot;: {</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0xbfc02677a000&quot;</span>
<span class="term-fg31">-  },</span>
<span class="term-fg31">-  &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg31">-   &quot;balance&quot;: &quot;0xff104fcfea7800&quot;,</span>
<span class="term-fg31">-   &quot;nonce&quot;: &quot;0x2&quot;</span>
<span class="term-fg32">+  &quot;alloc&quot;: {</span>
<span class="term-fg32">+    &quot;0x000000000000000000000000000000000000aaaa&quot;: {</span>
<span class="term-fg32">+      &quot;code&quot;: &quot;0x58585454&quot;,</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x3&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0x1&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0x2adc25665018aa1fe0e6bc666dac8fc2697ff9ba&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0x5bb10ddef6e0&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b&quot;: {</span>
<span class="term-fg32">+      &quot;balance&quot;: &quot;0xff745ee8832120&quot;,</span>
<span class="term-fg32">+      &quot;nonce&quot;: &quot;0x2&quot;</span>
<span class="term-fg32">+    }</span>
   }
<span class="term-fg31">- }</span>
 }
 ```
&nbsp;
<span class="term-fg36">@@ -65,10 +67,12 @@</span> by feeding it presigned transactions, located in `txs_signed.json`.
&nbsp;
 ```
 dir=.&#47;testdata&#47;9 &amp;&amp; .&#47;evm t8n --state.fork=Berlin --input.alloc=$dir&#47;alloc.json --input.txs=$dir&#47;txs_signed.json --input.env=$dir&#47;env.json
<span class="term-fg31">-INFO [05-07|12:28:42.072] rejected tx                              index=0 hash=b4821e..536819 error=&quot;transaction type not supported&quot;</span>
<span class="term-fg31">-INFO [05-07|12:28:42.072] rejected tx                              index=1 hash=a9c6c6..fa4036 from=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B error=&quot;nonce too high: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B, tx: 1 state: 0&quot;</span>
<span class="term-fg31">-INFO [05-07|12:28:42.073] Wrote file                               file=alloc.json</span>
<span class="term-fg31">-INFO [05-07|12:28:42.073] Wrote file                               file=result.json</span>
<span class="term-fg32">+WARN [03-09|11:06:22.065] rejected tx                              index=0 hash=334e09..f8dce5 error=&quot;transaction type not supported&quot;</span>
<span class="term-fg32">+INFO [03-09|11:06:22.066] rejected tx                              index=1 hash=a9c6c6..fa4036 from=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B error=&quot;nonce too high: address 0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B, tx: 1 state: 0&quot;</span>
<span class="term-fg32">+INFO [03-09|11:06:22.066] Trie dumping started                     root=6eebe9..a0fda5</span>
<span class="term-fg32">+INFO [03-09|11:06:22.066] Trie dumping complete                    accounts=2 elapsed=&quot;55.844µs&quot;</span>
<span class="term-fg32">+INFO [03-09|11:06:22.066] Wrote file                               file=alloc.json</span>
<span class="term-fg32">+INFO [03-09|11:06:22.066] Wrote file                               file=result.json</span>
 ```
&nbsp;
 Number `0` is not applicable, and therefore number `1` has wrong nonce, and both are rejected.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-98ef433e2a7f30d164958a4b" role="button"
                   aria-expanded="false" aria-controls="id-98ef433e2a7f30d164958a4b">
                    <code>cmd/evm/testdata/9/txs_signed.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/evm/testdata/9/txs_signed.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+37</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-98ef433e2a7f30d164958a4b"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;testdata&#47;9&#47;txs_signed.json op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;txs_signed.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..dcddf011b44990737604a6445a57e0df492e24be</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;evm&#47;testdata&#47;9&#47;txs_signed.json</span>
<span class="term-fg36">@@ -0,0 +1,37 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;gas&quot;: &quot;0x4ef00&quot;,</span>
<span class="term-fg32">+    &quot;maxFeePerGas&quot;: &quot;0x2&quot;,</span>
<span class="term-fg32">+    &quot;maxPriorityFeePerGas&quot;: &quot;0x12A05F200&quot;,</span>
<span class="term-fg32">+    &quot;chainId&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;to&quot;: &quot;0x000000000000000000000000000000000000aaaa&quot;,</span>
<span class="term-fg32">+    &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;type&quot; : &quot;0x2&quot;,</span>
<span class="term-fg32">+    &quot;accessList&quot;: [</span>
<span class="term-fg32">+      {&quot;address&quot;: &quot;0x000000000000000000000000000000000000aaaa&quot;,</span>
<span class="term-fg32">+        &quot;storageKeys&quot;: [</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        ]</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;v&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;r&quot;: &quot;0xd77c8ff989789b5d9d99254cbae2e2996dc7e6215cba4d55254c14e6d6b9f314&quot;,</span>
<span class="term-fg32">+    &quot;s&quot;: &quot;0x5cc021481e7e6bb444bbb87ab32071e8fd0a8d1e125c7bb352d2879bd7ff5c0a&quot;,</span>
<span class="term-fg32">+    &quot;secretKey&quot;: &quot;0x45a915e4d060149eb4365960e6a7a45f334393093061116b197e3240065ff2d8&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;gas&quot;: &quot;0x4ef00&quot;,</span>
<span class="term-fg32">+    &quot;gasPrice&quot;: &quot;0x12A05F200&quot;,</span>
<span class="term-fg32">+    &quot;chainId&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;to&quot;: &quot;0x000000000000000000000000000000000000aaaa&quot;,</span>
<span class="term-fg32">+    &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;v&quot;: &quot;0x25&quot;,</span>
<span class="term-fg32">+    &quot;r&quot;: &quot;0xbee5ec9f6650020266bf3455a852eece2b073a2fa918c4d1836a1af69c2aa50c&quot;,</span>
<span class="term-fg32">+    &quot;s&quot;: &quot;0x556c897a58dbc007a6b09814e1fba7502adb76effd2146da4365816926f387ce&quot;,</span>
<span class="term-fg32">+    &quot;secretKey&quot;: &quot;0x45a915e4d060149eb4365960e6a7a45f334393093061116b197e3240065ff2d8&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fc5994ecdefc7af81c21f1d3" role="button"
                   aria-expanded="false" aria-controls="id-fc5994ecdefc7af81c21f1d3">
                    <code>cmd/geth/chaincmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/geth/chaincmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/geth/chaincmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fc5994ecdefc7af81c21f1d3"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;chaincmd.go op-geth&#47;cmd&#47;geth&#47;chaincmd.go</span>
<span class="term-fg1">index 10af6f32f49a95d1005bcfae3d9bb593551f8d68..96999075a3167bbf434e76e4606d3909ce897d8e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;chaincmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;geth&#47;chaincmd.go</span>
<span class="term-fg36">@@ -349,8 +349,8 @@</span> 		}
 		if first &lt; 0 || last &lt; 0 {
 			utils.Fatalf(&quot;Export error: block number must be greater than 0\n&quot;)
 		}
<span class="term-fg31">-		if head := chain.CurrentFastBlock(); uint64(last) &gt; head.NumberU64() {</span>
<span class="term-fg31">-			utils.Fatalf(&quot;Export error: block number %d larger than head block %d\n&quot;, uint64(last), head.NumberU64())</span>
<span class="term-fg32">+		if head := chain.CurrentSnapBlock(); uint64(last) &gt; head.Number.Uint64() {</span>
<span class="term-fg32">+			utils.Fatalf(&quot;Export error: block number %d larger than head block %d\n&quot;, uint64(last), head.Number.Uint64())</span>
 		}
 		err = utils.ExportAppendChain(chain, fp, uint64(first), uint64(last))
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-00bd3e2329ce60d331df39cb" role="button"
                   aria-expanded="false" aria-controls="id-00bd3e2329ce60d331df39cb">
                    <code>cmd/geth/dbcmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/geth/dbcmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/geth/dbcmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-25</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-00bd3e2329ce60d331df39cb"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;dbcmd.go op-geth&#47;cmd&#47;geth&#47;dbcmd.go</span>
<span class="term-fg1">index 4deb081ed8f6caf4ee70c70f4b165ecc889be7f1..b409b19260e0e95744b3a15a0b5af74e51b26459 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;dbcmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;geth&#47;dbcmd.go</span>
<span class="term-fg36">@@ -694,41 +694,19 @@</span> 	ancients, err := db.Ancients()
 	if err != nil {
 		fmt.Fprintf(os.Stderr, &quot;Error accessing ancients: %v&quot;, err)
 	}
<span class="term-fg31">-	pp := func(val *uint64) string {</span>
<span class="term-fg31">-		if val == nil {</span>
<span class="term-fg31">-			return &quot;&lt;nil&gt;&quot;</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		return fmt.Sprintf(&quot;%d (%#x)&quot;, *val, *val)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	data := [][]string{</span>
<span class="term-fg31">-		{&quot;databaseVersion&quot;, pp(rawdb.ReadDatabaseVersion(db))},</span>
<span class="term-fg31">-		{&quot;headBlockHash&quot;, fmt.Sprintf(&quot;%v&quot;, rawdb.ReadHeadBlockHash(db))},</span>
<span class="term-fg31">-		{&quot;headFastBlockHash&quot;, fmt.Sprintf(&quot;%v&quot;, rawdb.ReadHeadFastBlockHash(db))},</span>
<span class="term-fg31">-		{&quot;headHeaderHash&quot;, fmt.Sprintf(&quot;%v&quot;, rawdb.ReadHeadHeaderHash(db))}}</span>
<span class="term-fg32">+	data := rawdb.ReadChainMetadata(db)</span>
<span class="term-fg32">+	data = append(data, []string{&quot;frozen&quot;, fmt.Sprintf(&quot;%d items&quot;, ancients)})</span>
<span class="term-fg32">+	data = append(data, []string{&quot;snapshotGenerator&quot;, snapshot.ParseGeneratorStatus(rawdb.ReadSnapshotGenerator(db))})</span>
 	if b := rawdb.ReadHeadBlock(db); b != nil {
 		data = append(data, []string{&quot;headBlock.Hash&quot;, fmt.Sprintf(&quot;%v&quot;, b.Hash())})
 		data = append(data, []string{&quot;headBlock.Root&quot;, fmt.Sprintf(&quot;%v&quot;, b.Root())})
 		data = append(data, []string{&quot;headBlock.Number&quot;, fmt.Sprintf(&quot;%d (%#x)&quot;, b.Number(), b.Number())})
 	}
<span class="term-fg31">-	if b := rawdb.ReadSkeletonSyncStatus(db); b != nil {</span>
<span class="term-fg31">-		data = append(data, []string{&quot;SkeletonSyncStatus&quot;, string(b)})</span>
<span class="term-fg31">-	}</span>
 	if h := rawdb.ReadHeadHeader(db); h != nil {
 		data = append(data, []string{&quot;headHeader.Hash&quot;, fmt.Sprintf(&quot;%v&quot;, h.Hash())})
 		data = append(data, []string{&quot;headHeader.Root&quot;, fmt.Sprintf(&quot;%v&quot;, h.Root)})
 		data = append(data, []string{&quot;headHeader.Number&quot;, fmt.Sprintf(&quot;%d (%#x)&quot;, h.Number, h.Number)})
 	}
<span class="term-fg31">-	data = append(data, [][]string{{&quot;frozen&quot;, fmt.Sprintf(&quot;%d items&quot;, ancients)},</span>
<span class="term-fg31">-		{&quot;lastPivotNumber&quot;, pp(rawdb.ReadLastPivotNumber(db))},</span>
<span class="term-fg31">-		{&quot;len(snapshotSyncStatus)&quot;, fmt.Sprintf(&quot;%d bytes&quot;, len(rawdb.ReadSnapshotSyncStatus(db)))},</span>
<span class="term-fg31">-		{&quot;snapshotGenerator&quot;, snapshot.ParseGeneratorStatus(rawdb.ReadSnapshotGenerator(db))},</span>
<span class="term-fg31">-		{&quot;snapshotDisabled&quot;, fmt.Sprintf(&quot;%v&quot;, rawdb.ReadSnapshotDisabled(db))},</span>
<span class="term-fg31">-		{&quot;snapshotJournal&quot;, fmt.Sprintf(&quot;%d bytes&quot;, len(rawdb.ReadSnapshotJournal(db)))},</span>
<span class="term-fg31">-		{&quot;snapshotRecoveryNumber&quot;, pp(rawdb.ReadSnapshotRecoveryNumber(db))},</span>
<span class="term-fg31">-		{&quot;snapshotRoot&quot;, fmt.Sprintf(&quot;%v&quot;, rawdb.ReadSnapshotRoot(db))},</span>
<span class="term-fg31">-		{&quot;txIndexTail&quot;, pp(rawdb.ReadTxIndexTail(db))},</span>
<span class="term-fg31">-		{&quot;fastTxLookupLimit&quot;, pp(rawdb.ReadFastTxLookupLimit(db))},</span>
<span class="term-fg31">-	}...)</span>
 	table := tablewriter.NewWriter(os.Stdout)
 	table.SetHeader([]string{&quot;Field&quot;, &quot;Value&quot;})
 	table.AppendBulk(data)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-31007ee340a03245d3a2943f" role="button"
                   aria-expanded="false" aria-controls="id-31007ee340a03245d3a2943f">
                    <code>cmd/utils/cmd.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/cmd/utils/cmd.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/cmd/utils/cmd.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-31007ee340a03245d3a2943f"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;utils&#47;cmd.go op-geth&#47;cmd&#47;utils&#47;cmd.go</span>
<span class="term-fg1">index d1d900a6da9d320ba1b1704939df63a4dea81e76..e1bafc53c3194dd82a67151f5e7fca8697b95da0 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;utils&#47;cmd.go</span>
<span class="term-fg1">+++ op-geth&#47;cmd&#47;utils&#47;cmd.go</span>
<span class="term-fg36">@@ -222,7 +222,7 @@</span> func missingBlocks(chain *core.BlockChain, blocks []*types.Block) []*types.Block {
 	head := chain.CurrentBlock()
 	for i, block := range blocks {
 		&#47;&#47; If we&#39;re behind the chain head, only check block, state is available at head
<span class="term-fg31">-		if head.NumberU64() &gt; block.NumberU64() {</span>
<span class="term-fg32">+		if head.Number.Uint64() &gt; block.NumberU64() {</span>
 			if !chain.HasBlock(block.Hash(), block.NumberU64()) {
 				return blocks[i:]
 			}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2360cba60c3c5358fb769fb5" role="button"
                   aria-expanded="false" aria-controls="id-2360cba60c3c5358fb769fb5">
                    <code>common/math/modexp_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/common/math/modexp_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-53</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2360cba60c3c5358fb769fb5"><span class="term-fg1">diff --git go-ethereum&#47;common&#47;math&#47;modexp_test.go op-geth&#47;common&#47;math&#47;modexp_test.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index bd90076f84f62809549a6b1f35c5805e4f6f9d78..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- go-ethereum&#47;common&#47;math&#47;modexp_test.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,53 +0,0 @@</span>
<span class="term-fg31">-&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg31">-&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg31">-&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg31">-&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg31">-&#47;&#47; (at your option) any later version.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg31">-&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg31">-&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg31">-&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg31">-&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-package math</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-import (</span>
<span class="term-fg31">-	&quot;math&#47;big&quot;</span>
<span class="term-fg31">-	&quot;testing&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	big2 &quot;github.com&#47;holiman&#47;big&quot;</span>
<span class="term-fg31">-)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; TestFastModexp tests some cases found during fuzzing.</span>
<span class="term-fg31">-func TestFastModexp(t *testing.T) {</span>
<span class="term-fg31">-	for i, tc := range []struct {</span>
<span class="term-fg31">-		base string</span>
<span class="term-fg31">-		exp  string</span>
<span class="term-fg31">-		mod  string</span>
<span class="term-fg31">-	}{</span>
<span class="term-fg31">-		{&quot;0xeffffff900002f00&quot;, &quot;0x40000000000000&quot;, &quot;0x200&quot;},</span>
<span class="term-fg31">-		{&quot;0xf000&quot;, &quot;0x4f900b400080000&quot;, &quot;0x400000d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9d9ffffff005aeffd310000000000000000000000000000000000009f9f9f9f0000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000befffa5a5a5fff900002f000040000000000000000000000000000000029d9d9d000000000000009f9f9f00000000000000009f9f9f000000f3a080ab00000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f0000000000002900009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f000000cf000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f000000000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000befffff0000c0800000000800000000000000000000000000000002000000000000009f9f9f0000000000000000008000ff000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000befffa5a5a5fff900002f000040000000000000000000000000000000029d9d9d000000000000009f9f9f00000000000000009f9f9f000000f3a080ab00000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f0000000000002900009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f000000000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f000000000000000000000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000beffffff900002f0000400000c100000000000000000000000000000000000000006160600000000000000000008000ff0000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f00000000000000009f9f0000&quot;},</span>
<span class="term-fg31">-		{&quot;5&quot;, &quot;1435700818&quot;, &quot;72&quot;},</span>
<span class="term-fg31">-		{&quot;0xffff&quot;, &quot;0x300030003000300030003000300030003000302a3000300030003000300030003000300030003000300030003000300030003030623066307f3030783062303430383064303630343036&quot;, &quot;0x300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;},</span>
<span class="term-fg31">-		{&quot;0x3133&quot;, &quot;0x667f00000000000000000000000000ff002a000000000000000000000000000000000000000000000000000000000000667fff30783362773057ee756a6c266134643831646230313630&quot;, &quot;0x3030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;},</span>
<span class="term-fg31">-	} {</span>
<span class="term-fg31">-		var (</span>
<span class="term-fg31">-			base, _  = new(big.Int).SetString(tc.base, 0)</span>
<span class="term-fg31">-			exp, _   = new(big.Int).SetString(tc.exp, 0)</span>
<span class="term-fg31">-			mod, _   = new(big.Int).SetString(tc.mod, 0)</span>
<span class="term-fg31">-			base2, _ = new(big2.Int).SetString(tc.base, 0)</span>
<span class="term-fg31">-			exp2, _  = new(big2.Int).SetString(tc.exp, 0)</span>
<span class="term-fg31">-			mod2, _  = new(big2.Int).SetString(tc.mod, 0)</span>
<span class="term-fg31">-		)</span>
<span class="term-fg31">-		var a = new(big2.Int).Exp(base2, exp2, mod2).String()</span>
<span class="term-fg31">-		var b = new(big.Int).Exp(base, exp, mod).String()</span>
<span class="term-fg31">-		if a != b {</span>
<span class="term-fg31">-			t.Errorf(&quot;test %d: %#x ^ %#x mod %#x \n have %x\n want %x&quot;, i, base, exp, mod, a, b)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-239197a41e9dee1d5a99a450" role="button"
                   aria-expanded="false" aria-controls="id-239197a41e9dee1d5a99a450">
                    <code>consensus/clique/clique_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/consensus/clique/clique_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/consensus/clique/clique_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-239197a41e9dee1d5a99a450"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;clique&#47;clique_test.go op-geth&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg1">index f213bc8247d632e58fe3a8b982890ec75515d22c..f2c6d740c08aa85301f3adf1211e99d0e52674e4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg1">+++ op-geth&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg36">@@ -93,7 +93,7 @@</span>
 	if _, err := chain.InsertChain(blocks[:2]); err != nil {
 		t.Fatalf(&quot;failed to insert initial blocks: %v&quot;, err)
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock().NumberU64(); head != 2 {</span>
<span class="term-fg32">+	if head := chain.CurrentBlock().Number.Uint64(); head != 2 {</span>
 		t.Fatalf(&quot;chain head mismatch: have %d, want %d&quot;, head, 2)
 	}
&nbsp;
<span class="term-fg36">@@ -106,7 +106,7 @@</span>
 	if _, err := chain.InsertChain(blocks[2:]); err != nil {
 		t.Fatalf(&quot;failed to insert final block: %v&quot;, err)
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock().NumberU64(); head != 3 {</span>
<span class="term-fg32">+	if head := chain.CurrentBlock().Number.Uint64(); head != 3 {</span>
 		t.Fatalf(&quot;chain head mismatch: have %d, want %d&quot;, head, 3)
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d1b7e7560fcf1e7858783278" role="button"
                   aria-expanded="false" aria-controls="id-d1b7e7560fcf1e7858783278">
                    <code>core/blockchain.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+127</span></div>
                        <div class="text-start"><span class="text-danger">-99</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d1b7e7560fcf1e7858783278"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain.go op-geth&#47;core&#47;blockchain.go</span>
<span class="term-fg1">index 38a129d4eec569624d4c231754148a34b5389f87..85cafed911bde2dc49d9cc99af45bd611ef5871f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain.go</span>
<span class="term-fg36">@@ -199,10 +199,10 @@</span> 	&#47;&#47; This mutex synchronizes chain write operations.
 	&#47;&#47; Readers don&#39;t need to take it, they can just read the database.
 	chainmu *syncx.ClosableMutex
&nbsp;
<span class="term-fg31">-	currentBlock          atomic.Value &#47;&#47; Current head of the block chain</span>
<span class="term-fg31">-	currentFastBlock      atomic.Value &#47;&#47; Current head of the fast-sync chain (may be above the block chain!)</span>
<span class="term-fg31">-	currentFinalizedBlock atomic.Value &#47;&#47; Current finalized head</span>
<span class="term-fg31">-	currentSafeBlock      atomic.Value &#47;&#47; Current safe head</span>
<span class="term-fg32">+	currentBlock      atomic.Pointer[types.Header] &#47;&#47; Current head of the chain</span>
<span class="term-fg32">+	currentSnapBlock  atomic.Pointer[types.Header] &#47;&#47; Current head of snap-sync</span>
<span class="term-fg32">+	currentFinalBlock atomic.Pointer[types.Header] &#47;&#47; Latest (consensus) finalized block</span>
<span class="term-fg32">+	currentSafeBlock  atomic.Pointer[types.Header] &#47;&#47; Latest (consensus) safe block</span>
&nbsp;
 	bodyCache     *lru.Cache[common.Hash, *types.Body]
 	bodyRLPCache  *lru.Cache[common.Hash, rlp.RawValue]
<span class="term-fg36">@@ -255,6 +255,10 @@</span> 	}
 	log.Info(strings.Repeat(&quot;-&quot;, 153))
 	log.Info(&quot;&quot;)
&nbsp;
<span class="term-fg32">+	if chainConfig.IsOptimism() &amp;&amp; chainConfig.RegolithTime == nil {</span>
<span class="term-fg32">+		log.Warn(&quot;Optimism RegolithTime has not been set&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	bc := &amp;BlockChain{
 		chainConfig:   chainConfig,
 		cacheConfig:   cacheConfig,
<span class="term-fg36">@@ -289,11 +293,10 @@</span> 	if bc.genesisBlock == nil {
 		return nil, ErrNoGenesis
 	}
&nbsp;
<span class="term-fg31">-	var nilBlock *types.Block</span>
<span class="term-fg31">-	bc.currentBlock.Store(nilBlock)</span>
<span class="term-fg31">-	bc.currentFastBlock.Store(nilBlock)</span>
<span class="term-fg31">-	bc.currentFinalizedBlock.Store(nilBlock)</span>
<span class="term-fg31">-	bc.currentSafeBlock.Store(nilBlock)</span>
<span class="term-fg32">+	bc.currentBlock.Store(nil)</span>
<span class="term-fg32">+	bc.currentSnapBlock.Store(nil)</span>
<span class="term-fg32">+	bc.currentFinalBlock.Store(nil)</span>
<span class="term-fg32">+	bc.currentSafeBlock.Store(nil)</span>
&nbsp;
 	&#47;&#47; If Geth is initialized with an external ancient store, re-initialize the
 	&#47;&#47; missing chain indexes and chain flags. This procedure can survive crash
<span class="term-fg36">@@ -307,7 +310,7 @@</span> 		return nil, err
 	}
 	&#47;&#47; Make sure the state associated with the block is available
 	head := bc.CurrentBlock()
<span class="term-fg31">-	if !bc.HasState(head.Root()) {</span>
<span class="term-fg32">+	if !bc.HasState(head.Root) {</span>
 		&#47;&#47; Head state is missing, before the state recovery, find out the
 		&#47;&#47; disk layer point of snapshot(if it&#39;s enabled). Make sure the
 		&#47;&#47; rewound point is lower than disk layer.
<span class="term-fg36">@@ -316,9 +319,9 @@</span> 		if bc.cacheConfig.SnapshotLimit &gt; 0 {
 			diskRoot = rawdb.ReadSnapshotRoot(bc.db)
 		}
 		if diskRoot != (common.Hash{}) {
<span class="term-fg31">-			log.Warn(&quot;Head state missing, repairing&quot;, &quot;number&quot;, head.Number(), &quot;hash&quot;, head.Hash(), &quot;snaproot&quot;, diskRoot)</span>
<span class="term-fg32">+			log.Warn(&quot;Head state missing, repairing&quot;, &quot;number&quot;, head.Number, &quot;hash&quot;, head.Hash(), &quot;snaproot&quot;, diskRoot)</span>
&nbsp;
<span class="term-fg31">-			snapDisk, err := bc.setHeadBeyondRoot(head.NumberU64(), 0, diskRoot, true)</span>
<span class="term-fg32">+			snapDisk, err := bc.setHeadBeyondRoot(head.Number.Uint64(), 0, diskRoot, true)</span>
 			if err != nil {
 				return nil, err
 			}
<span class="term-fg36">@@ -327,13 +330,12 @@</span> 			if snapDisk != 0 {
 				rawdb.WriteSnapshotRecoveryNumber(bc.db, snapDisk)
 			}
 		} else {
<span class="term-fg31">-			log.Warn(&quot;Head state missing, repairing&quot;, &quot;number&quot;, head.Number(), &quot;hash&quot;, head.Hash())</span>
<span class="term-fg31">-			if _, err := bc.setHeadBeyondRoot(head.NumberU64(), 0, common.Hash{}, true); err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;Head state missing, repairing&quot;, &quot;number&quot;, head.Number, &quot;hash&quot;, head.Hash())</span>
<span class="term-fg32">+			if _, err := bc.setHeadBeyondRoot(head.Number.Uint64(), 0, common.Hash{}, true); err != nil {</span>
 				return nil, err
 			}
 		}
 	}
<span class="term-fg31">-</span>
 	&#47;&#47; Ensure that a previous crash in SetHead doesn&#39;t leave extra ancients
 	if frozen, err := bc.db.Ancients(); err == nil &amp;&amp; frozen &gt; 0 {
 		var (
<span class="term-fg36">@@ -344,18 +346,18 @@</span> 		&#47;&#47; The head full block may be rolled back to a very low height due to
 		&#47;&#47; blockchain repair. If the head full block is even lower than the ancient
 		&#47;&#47; chain, truncate the ancient store.
 		fullBlock := bc.CurrentBlock()
<span class="term-fg31">-		if fullBlock != nil &amp;&amp; fullBlock.Hash() != bc.genesisBlock.Hash() &amp;&amp; fullBlock.NumberU64() &lt; frozen-1 {</span>
<span class="term-fg32">+		if fullBlock != nil &amp;&amp; fullBlock.Hash() != bc.genesisBlock.Hash() &amp;&amp; fullBlock.Number.Uint64() &lt; frozen-1 {</span>
 			needRewind = true
<span class="term-fg31">-			low = fullBlock.NumberU64()</span>
<span class="term-fg32">+			low = fullBlock.Number.Uint64()</span>
 		}
 		&#47;&#47; In fast sync, it may happen that ancient data has been written to the
 		&#47;&#47; ancient store, but the LastFastBlock has not been updated, truncate the
 		&#47;&#47; extra data here.
<span class="term-fg31">-		fastBlock := bc.CurrentFastBlock()</span>
<span class="term-fg31">-		if fastBlock != nil &amp;&amp; fastBlock.NumberU64() &lt; frozen-1 {</span>
<span class="term-fg32">+		snapBlock := bc.CurrentSnapBlock()</span>
<span class="term-fg32">+		if snapBlock != nil &amp;&amp; snapBlock.Number.Uint64() &lt; frozen-1 {</span>
 			needRewind = true
<span class="term-fg31">-			if fastBlock.NumberU64() &lt; low || low == 0 {</span>
<span class="term-fg31">-				low = fastBlock.NumberU64()</span>
<span class="term-fg32">+			if snapBlock.Number.Uint64() &lt; low || low == 0 {</span>
<span class="term-fg32">+				low = snapBlock.Number.Uint64()</span>
 			}
 		}
 		if needRewind {
<span class="term-fg36">@@ -395,8 +397,8 @@</span> 		&#47;&#47; head mismatch.
 		var recover bool
&nbsp;
 		head := bc.CurrentBlock()
<span class="term-fg31">-		if layer := rawdb.ReadSnapshotRecoveryNumber(bc.db); layer != nil &amp;&amp; *layer &gt;= head.NumberU64() {</span>
<span class="term-fg31">-			log.Warn(&quot;Enabling snapshot recovery&quot;, &quot;chainhead&quot;, head.NumberU64(), &quot;diskbase&quot;, *layer)</span>
<span class="term-fg32">+		if layer := rawdb.ReadSnapshotRecoveryNumber(bc.db); layer != nil &amp;&amp; *layer &gt;= head.Number.Uint64() {</span>
<span class="term-fg32">+			log.Warn(&quot;Enabling snapshot recovery&quot;, &quot;chainhead&quot;, head.Number, &quot;diskbase&quot;, *layer)</span>
 			recover = true
 		}
 		snapconfig := snapshot.Config{
<span class="term-fg36">@@ -405,7 +407,7 @@</span> 			Recovery:   recover,
 			NoBuild:    bc.cacheConfig.SnapshotNoBuild,
 			AsyncBuild: !bc.cacheConfig.SnapshotWait,
 		}
<span class="term-fg31">-		bc.snaps, _ = snapshot.New(snapconfig, bc.db, bc.triedb, head.Root())</span>
<span class="term-fg32">+		bc.snaps, _ = snapshot.New(snapconfig, bc.db, bc.triedb, head.Root)</span>
 	}
&nbsp;
 	&#47;&#47; Start future block processor.
<span class="term-fg36">@@ -469,32 +471,32 @@</span> 		log.Warn(&quot;Empty database, resetting chain&quot;)
 		return bc.Reset()
 	}
 	&#47;&#47; Make sure the entire head block is available
<span class="term-fg31">-	currentBlock := bc.GetBlockByHash(head)</span>
<span class="term-fg31">-	if currentBlock == nil {</span>
<span class="term-fg32">+	headBlock := bc.GetBlockByHash(head)</span>
<span class="term-fg32">+	if headBlock == nil {</span>
 		&#47;&#47; Corrupt or empty database, init from scratch
 		log.Warn(&quot;Head block missing, resetting chain&quot;, &quot;hash&quot;, head)
 		return bc.Reset()
 	}
 	&#47;&#47; Everything seems to be fine, set as the head block
<span class="term-fg31">-	bc.currentBlock.Store(currentBlock)</span>
<span class="term-fg31">-	headBlockGauge.Update(int64(currentBlock.NumberU64()))</span>
<span class="term-fg32">+	bc.currentBlock.Store(headBlock.Header())</span>
<span class="term-fg32">+	headBlockGauge.Update(int64(headBlock.NumberU64()))</span>
&nbsp;
 	&#47;&#47; Restore the last known head header
<span class="term-fg31">-	currentHeader := currentBlock.Header()</span>
<span class="term-fg32">+	headHeader := headBlock.Header()</span>
 	if head := rawdb.ReadHeadHeaderHash(bc.db); head != (common.Hash{}) {
 		if header := bc.GetHeaderByHash(head); header != nil {
<span class="term-fg31">-			currentHeader = header</span>
<span class="term-fg32">+			headHeader = header</span>
 		}
 	}
<span class="term-fg31">-	bc.hc.SetCurrentHeader(currentHeader)</span>
<span class="term-fg32">+	bc.hc.SetCurrentHeader(headHeader)</span>
&nbsp;
 	&#47;&#47; Restore the last known head fast block
<span class="term-fg31">-	bc.currentFastBlock.Store(currentBlock)</span>
<span class="term-fg31">-	headFastBlockGauge.Update(int64(currentBlock.NumberU64()))</span>
<span class="term-fg32">+	bc.currentSnapBlock.Store(headBlock.Header())</span>
<span class="term-fg32">+	headFastBlockGauge.Update(int64(headBlock.NumberU64()))</span>
&nbsp;
 	if head := rawdb.ReadHeadFastBlockHash(bc.db); head != (common.Hash{}) {
 		if block := bc.GetBlockByHash(head); block != nil {
<span class="term-fg31">-			bc.currentFastBlock.Store(block)</span>
<span class="term-fg32">+			bc.currentSnapBlock.Store(block.Header())</span>
 			headFastBlockGauge.Update(int64(block.NumberU64()))
 		}
 	}
<span class="term-fg36">@@ -504,27 +506,31 @@</span> 	&#47;&#47; Note: the safe block is not stored on disk and it is set to the last
 	&#47;&#47; known finalized block on startup
 	if head := rawdb.ReadFinalizedBlockHash(bc.db); head != (common.Hash{}) {
 		if block := bc.GetBlockByHash(head); block != nil {
<span class="term-fg31">-			bc.currentFinalizedBlock.Store(block)</span>
<span class="term-fg32">+			bc.currentFinalBlock.Store(block.Header())</span>
 			headFinalizedBlockGauge.Update(int64(block.NumberU64()))
<span class="term-fg31">-			bc.currentSafeBlock.Store(block)</span>
<span class="term-fg32">+			bc.currentSafeBlock.Store(block.Header())</span>
 			headSafeBlockGauge.Update(int64(block.NumberU64()))
 		}
 	}
 	&#47;&#47; Issue a status log for the user
<span class="term-fg31">-	currentFastBlock := bc.CurrentFastBlock()</span>
<span class="term-fg31">-	currentFinalizedBlock := bc.CurrentFinalizedBlock()</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	headerTd := bc.GetTd(currentHeader.Hash(), currentHeader.Number.Uint64())</span>
<span class="term-fg31">-	blockTd := bc.GetTd(currentBlock.Hash(), currentBlock.NumberU64())</span>
<span class="term-fg31">-	fastTd := bc.GetTd(currentFastBlock.Hash(), currentFastBlock.NumberU64())</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	log.Info(&quot;Loaded most recent local header&quot;, &quot;number&quot;, currentHeader.Number, &quot;hash&quot;, currentHeader.Hash(), &quot;td&quot;, headerTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentHeader.Time), 0)))</span>
<span class="term-fg31">-	log.Info(&quot;Loaded most recent local full block&quot;, &quot;number&quot;, currentBlock.Number(), &quot;hash&quot;, currentBlock.Hash(), &quot;td&quot;, blockTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentBlock.Time()), 0)))</span>
<span class="term-fg31">-	log.Info(&quot;Loaded most recent local fast block&quot;, &quot;number&quot;, currentFastBlock.Number(), &quot;hash&quot;, currentFastBlock.Hash(), &quot;td&quot;, fastTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentFastBlock.Time()), 0)))</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		currentSnapBlock  = bc.CurrentSnapBlock()</span>
<span class="term-fg32">+		currentFinalBlock = bc.CurrentFinalBlock()</span>
&nbsp;
<span class="term-fg31">-	if currentFinalizedBlock != nil {</span>
<span class="term-fg31">-		finalTd := bc.GetTd(currentFinalizedBlock.Hash(), currentFinalizedBlock.NumberU64())</span>
<span class="term-fg31">-		log.Info(&quot;Loaded most recent local finalized block&quot;, &quot;number&quot;, currentFinalizedBlock.Number(), &quot;hash&quot;, currentFinalizedBlock.Hash(), &quot;td&quot;, finalTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentFinalizedBlock.Time()), 0)))</span>
<span class="term-fg32">+		headerTd = bc.GetTd(headHeader.Hash(), headHeader.Number.Uint64())</span>
<span class="term-fg32">+		blockTd  = bc.GetTd(headBlock.Hash(), headBlock.NumberU64())</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if headHeader.Hash() != headBlock.Hash() {</span>
<span class="term-fg32">+		log.Info(&quot;Loaded most recent local header&quot;, &quot;number&quot;, headHeader.Number, &quot;hash&quot;, headHeader.Hash(), &quot;td&quot;, headerTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(headHeader.Time), 0)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Loaded most recent local block&quot;, &quot;number&quot;, headBlock.Number(), &quot;hash&quot;, headBlock.Hash(), &quot;td&quot;, blockTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(headBlock.Time()), 0)))</span>
<span class="term-fg32">+	if headBlock.Hash() != currentSnapBlock.Hash() {</span>
<span class="term-fg32">+		fastTd := bc.GetTd(currentSnapBlock.Hash(), currentSnapBlock.Number.Uint64())</span>
<span class="term-fg32">+		log.Info(&quot;Loaded most recent local snap block&quot;, &quot;number&quot;, currentSnapBlock.Number, &quot;hash&quot;, currentSnapBlock.Hash(), &quot;td&quot;, fastTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentSnapBlock.Time), 0)))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if currentFinalBlock != nil {</span>
<span class="term-fg32">+		finalTd := bc.GetTd(currentFinalBlock.Hash(), currentFinalBlock.Number.Uint64())</span>
<span class="term-fg32">+		log.Info(&quot;Loaded most recent local finalized block&quot;, &quot;number&quot;, currentFinalBlock.Number, &quot;hash&quot;, currentFinalBlock.Hash(), &quot;td&quot;, finalTd, &quot;age&quot;, common.PrettyAge(time.Unix(int64(currentFinalBlock.Time), 0)))</span>
 	}
 	if pivot := rawdb.ReadLastPivotNumber(bc.db); pivot != nil {
 		log.Info(&quot;Loaded last fast-sync pivot marker&quot;, &quot;number&quot;, *pivot)
<span class="term-fg36">@@ -540,7 +546,16 @@</span> 	if _, err := bc.setHeadBeyondRoot(head, 0, common.Hash{}, false); err != nil {
 		return err
 	}
 	&#47;&#47; Send chain head event to update the transaction pool
<span class="term-fg31">-	bc.chainHeadFeed.Send(ChainHeadEvent{Block: bc.CurrentBlock()})</span>
<span class="term-fg32">+	header := bc.CurrentBlock()</span>
<span class="term-fg32">+	block := bc.GetBlock(header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+	if block == nil {</span>
<span class="term-fg32">+		&#47;&#47; This should never happen. In practice, previsouly currentBlock</span>
<span class="term-fg32">+		&#47;&#47; contained the entire block whereas now only a &quot;marker&quot;, so there</span>
<span class="term-fg32">+		&#47;&#47; is an ever so slight chance for a race we should handle.</span>
<span class="term-fg32">+		log.Error(&quot;Current block not found in database&quot;, &quot;block&quot;, header.Number, &quot;hash&quot;, header.Hash())</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;current block missing: #%d [%x..]&quot;, header.Number, header.Hash().Bytes()[:4])</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	bc.chainHeadFeed.Send(ChainHeadEvent{Block: block})</span>
 	return nil
 }
&nbsp;
<span class="term-fg36">@@ -553,16 +568,25 @@</span> 	if _, err := bc.setHeadBeyondRoot(0, timestamp, common.Hash{}, false); err != nil {
 		return err
 	}
 	&#47;&#47; Send chain head event to update the transaction pool
<span class="term-fg31">-	bc.chainHeadFeed.Send(ChainHeadEvent{Block: bc.CurrentBlock()})</span>
<span class="term-fg32">+	header := bc.CurrentBlock()</span>
<span class="term-fg32">+	block := bc.GetBlock(header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+	if block == nil {</span>
<span class="term-fg32">+		&#47;&#47; This should never happen. In practice, previsouly currentBlock</span>
<span class="term-fg32">+		&#47;&#47; contained the entire block whereas now only a &quot;marker&quot;, so there</span>
<span class="term-fg32">+		&#47;&#47; is an ever so slight chance for a race we should handle.</span>
<span class="term-fg32">+		log.Error(&quot;Current block not found in database&quot;, &quot;block&quot;, header.Number, &quot;hash&quot;, header.Hash())</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;current block missing: #%d [%x..]&quot;, header.Number, header.Hash().Bytes()[:4])</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	bc.chainHeadFeed.Send(ChainHeadEvent{Block: block})</span>
 	return nil
 }
&nbsp;
 &#47;&#47; SetFinalized sets the finalized block.
<span class="term-fg31">-func (bc *BlockChain) SetFinalized(block *types.Block) {</span>
<span class="term-fg31">-	bc.currentFinalizedBlock.Store(block)</span>
<span class="term-fg31">-	if block != nil {</span>
<span class="term-fg31">-		rawdb.WriteFinalizedBlockHash(bc.db, block.Hash())</span>
<span class="term-fg31">-		headFinalizedBlockGauge.Update(int64(block.NumberU64()))</span>
<span class="term-fg32">+func (bc *BlockChain) SetFinalized(header *types.Header) {</span>
<span class="term-fg32">+	bc.currentFinalBlock.Store(header)</span>
<span class="term-fg32">+	if header != nil {</span>
<span class="term-fg32">+		rawdb.WriteFinalizedBlockHash(bc.db, header.Hash())</span>
<span class="term-fg32">+		headFinalizedBlockGauge.Update(int64(header.Number.Uint64()))</span>
 	} else {
 		rawdb.WriteFinalizedBlockHash(bc.db, common.Hash{})
 		headFinalizedBlockGauge.Update(0)
<span class="term-fg36">@@ -570,10 +594,10 @@</span> 	}
 }
&nbsp;
 &#47;&#47; SetSafe sets the safe block.
<span class="term-fg31">-func (bc *BlockChain) SetSafe(block *types.Block) {</span>
<span class="term-fg31">-	bc.currentSafeBlock.Store(block)</span>
<span class="term-fg31">-	if block != nil {</span>
<span class="term-fg31">-		headSafeBlockGauge.Update(int64(block.NumberU64()))</span>
<span class="term-fg32">+func (bc *BlockChain) SetSafe(header *types.Header) {</span>
<span class="term-fg32">+	bc.currentSafeBlock.Store(header)</span>
<span class="term-fg32">+	if header != nil {</span>
<span class="term-fg32">+		headSafeBlockGauge.Update(int64(header.Number.Uint64()))</span>
 	} else {
 		headSafeBlockGauge.Update(0)
 	}
<span class="term-fg36">@@ -609,7 +633,7 @@</span> 	updateFn := func(db ethdb.KeyValueWriter, header *types.Header) (*types.Header, bool) {
 		&#47;&#47; Rewind the blockchain, ensuring we don&#39;t end up with a stateless head
 		&#47;&#47; block. Note, depth equality is permitted to allow using SetHead as a
 		&#47;&#47; chain reparation mechanism without deleting any data!
<span class="term-fg31">-		if currentBlock := bc.CurrentBlock(); currentBlock != nil &amp;&amp; header.Number.Uint64() &lt;= currentBlock.NumberU64() {</span>
<span class="term-fg32">+		if currentBlock := bc.CurrentBlock(); currentBlock != nil &amp;&amp; header.Number.Uint64() &lt;= currentBlock.Number.Uint64() {</span>
 			newHeadBlock := bc.GetBlock(header.Hash(), header.Number.Uint64())
 			if newHeadBlock == nil {
 				log.Error(&quot;Gap in the chain, rewinding to genesis&quot;, &quot;number&quot;, header.Number, &quot;hash&quot;, header.Hash())
<span class="term-fg36">@@ -667,27 +691,27 @@</span> 			&#47;&#47; Degrade the chain markers if they are explicitly reverted.
 			&#47;&#47; In theory we should update all in-memory markers in the
 			&#47;&#47; last step, however the direction of SetHead is from high
 			&#47;&#47; to low, so it&#39;s safe to update in-memory markers directly.
<span class="term-fg31">-			bc.currentBlock.Store(newHeadBlock)</span>
<span class="term-fg32">+			bc.currentBlock.Store(newHeadBlock.Header())</span>
 			headBlockGauge.Update(int64(newHeadBlock.NumberU64()))
 		}
 		&#47;&#47; Rewind the fast block in a simpleton way to the target head
<span class="term-fg31">-		if currentFastBlock := bc.CurrentFastBlock(); currentFastBlock != nil &amp;&amp; header.Number.Uint64() &lt; currentFastBlock.NumberU64() {</span>
<span class="term-fg31">-			newHeadFastBlock := bc.GetBlock(header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+		if currentSnapBlock := bc.CurrentSnapBlock(); currentSnapBlock != nil &amp;&amp; header.Number.Uint64() &lt; currentSnapBlock.Number.Uint64() {</span>
<span class="term-fg32">+			newHeadSnapBlock := bc.GetBlock(header.Hash(), header.Number.Uint64())</span>
 			&#47;&#47; If either blocks reached nil, reset to the genesis state
<span class="term-fg31">-			if newHeadFastBlock == nil {</span>
<span class="term-fg31">-				newHeadFastBlock = bc.genesisBlock</span>
<span class="term-fg32">+			if newHeadSnapBlock == nil {</span>
<span class="term-fg32">+				newHeadSnapBlock = bc.genesisBlock</span>
 			}
<span class="term-fg31">-			rawdb.WriteHeadFastBlockHash(db, newHeadFastBlock.Hash())</span>
<span class="term-fg32">+			rawdb.WriteHeadFastBlockHash(db, newHeadSnapBlock.Hash())</span>
&nbsp;
 			&#47;&#47; Degrade the chain markers if they are explicitly reverted.
 			&#47;&#47; In theory we should update all in-memory markers in the
 			&#47;&#47; last step, however the direction of SetHead is from high
 			&#47;&#47; to low, so it&#39;s safe the update in-memory markers directly.
<span class="term-fg31">-			bc.currentFastBlock.Store(newHeadFastBlock)</span>
<span class="term-fg31">-			headFastBlockGauge.Update(int64(newHeadFastBlock.NumberU64()))</span>
<span class="term-fg32">+			bc.currentSnapBlock.Store(newHeadSnapBlock.Header())</span>
<span class="term-fg32">+			headFastBlockGauge.Update(int64(newHeadSnapBlock.NumberU64()))</span>
 		}
 		var (
<span class="term-fg31">-			headHeader = bc.CurrentBlock().Header()</span>
<span class="term-fg32">+			headHeader = bc.CurrentBlock()</span>
 			headNumber = headHeader.Number.Uint64()
 		)
 		&#47;&#47; If setHead underflown the freezer threshold and the block processing
<span class="term-fg36">@@ -723,7 +747,7 @@</span> 	}
 	&#47;&#47; If SetHead was only called as a chain reparation method, try to skip
 	&#47;&#47; touching the header chain altogether, unless the freezer is broken
 	if repair {
<span class="term-fg31">-		if target, force := updateFn(bc.db, bc.CurrentBlock().Header()); force {</span>
<span class="term-fg32">+		if target, force := updateFn(bc.db, bc.CurrentBlock()); force {</span>
 			bc.hc.SetHead(target.Number.Uint64(), updateFn, delFn)
 		}
 	} else {
<span class="term-fg36">@@ -746,15 +770,14 @@</span> 	bc.txLookupCache.Purge()
 	bc.futureBlocks.Purge()
&nbsp;
 	&#47;&#47; Clear safe block, finalized block if needed
<span class="term-fg31">-	if safe := bc.CurrentSafeBlock(); safe != nil &amp;&amp; head &lt; safe.NumberU64() {</span>
<span class="term-fg32">+	if safe := bc.CurrentSafeBlock(); safe != nil &amp;&amp; head &lt; safe.Number.Uint64() {</span>
 		log.Warn(&quot;SetHead invalidated safe block&quot;)
 		bc.SetSafe(nil)
 	}
<span class="term-fg31">-	if finalized := bc.CurrentFinalizedBlock(); finalized != nil &amp;&amp; head &lt; finalized.NumberU64() {</span>
<span class="term-fg32">+	if finalized := bc.CurrentFinalBlock(); finalized != nil &amp;&amp; head &lt; finalized.Number.Uint64() {</span>
 		log.Error(&quot;SetHead invalidated finalized block&quot;)
 		bc.SetFinalized(nil)
 	}
<span class="term-fg31">-</span>
 	return rootNumber, bc.loadLastState()
 }
&nbsp;
<span class="term-fg36">@@ -774,7 +797,7 @@</span> 	&#47;&#47; If all checks out, manually set the head block.
 	if !bc.chainmu.TryLock() {
 		return errChainStopped
 	}
<span class="term-fg31">-	bc.currentBlock.Store(block)</span>
<span class="term-fg32">+	bc.currentBlock.Store(block.Header())</span>
 	headBlockGauge.Update(int64(block.NumberU64()))
 	bc.chainmu.Unlock()
&nbsp;
<span class="term-fg36">@@ -815,18 +838,18 @@</span> 	bc.writeHeadBlock(genesis)
&nbsp;
 	&#47;&#47; Last update all in-memory chain markers
 	bc.genesisBlock = genesis
<span class="term-fg31">-	bc.currentBlock.Store(bc.genesisBlock)</span>
<span class="term-fg32">+	bc.currentBlock.Store(bc.genesisBlock.Header())</span>
 	headBlockGauge.Update(int64(bc.genesisBlock.NumberU64()))
 	bc.hc.SetGenesis(bc.genesisBlock.Header())
 	bc.hc.SetCurrentHeader(bc.genesisBlock.Header())
<span class="term-fg31">-	bc.currentFastBlock.Store(bc.genesisBlock)</span>
<span class="term-fg32">+	bc.currentSnapBlock.Store(bc.genesisBlock.Header())</span>
 	headFastBlockGauge.Update(int64(bc.genesisBlock.NumberU64()))
 	return nil
 }
&nbsp;
 &#47;&#47; Export writes the active chain to the given writer.
 func (bc *BlockChain) Export(w io.Writer) error {
<span class="term-fg31">-	return bc.ExportN(w, uint64(0), bc.CurrentBlock().NumberU64())</span>
<span class="term-fg32">+	return bc.ExportN(w, uint64(0), bc.CurrentBlock().Number.Uint64())</span>
 }
&nbsp;
 &#47;&#47; ExportN writes a subset of the active chain to the given writer.
<span class="term-fg36">@@ -883,10 +906,10 @@</span> 	}
 	&#47;&#47; Update all in-memory chain markers in the last step
 	bc.hc.SetCurrentHeader(block.Header())
&nbsp;
<span class="term-fg31">-	bc.currentFastBlock.Store(block)</span>
<span class="term-fg32">+	bc.currentSnapBlock.Store(block.Header())</span>
 	headFastBlockGauge.Update(int64(block.NumberU64()))
&nbsp;
<span class="term-fg31">-	bc.currentBlock.Store(block)</span>
<span class="term-fg32">+	bc.currentBlock.Store(block.Header())</span>
 	headBlockGauge.Update(int64(block.NumberU64()))
 }
&nbsp;
<span class="term-fg36">@@ -927,7 +950,7 @@</span> 	&#47;&#47; Ensure that the entirety of the state snapshot is journalled to disk.
 	var snapBase common.Hash
 	if bc.snaps != nil {
 		var err error
<span class="term-fg31">-		if snapBase, err = bc.snaps.Journal(bc.CurrentBlock().Root()); err != nil {</span>
<span class="term-fg32">+		if snapBase, err = bc.snaps.Journal(bc.CurrentBlock().Root); err != nil {</span>
 			log.Error(&quot;Failed to journal state snapshot&quot;, &quot;err&quot;, err)
 		}
 	}
<span class="term-fg36">@@ -941,7 +964,7 @@</span> 	if !bc.cacheConfig.TrieDirtyDisabled {
 		triedb := bc.triedb
&nbsp;
 		for _, offset := range []uint64{0, 1, TriesInMemory - 1} {
<span class="term-fg31">-			if number := bc.CurrentBlock().NumberU64(); number &gt; offset {</span>
<span class="term-fg32">+			if number := bc.CurrentBlock().Number.Uint64(); number &gt; offset {</span>
 				recent := bc.GetBlockByNumber(number - offset)
&nbsp;
 				log.Info(&quot;Writing cached state to disk&quot;, &quot;block&quot;, recent.Number(), &quot;hash&quot;, recent.Hash(), &quot;root&quot;, recent.Root())
<span class="term-fg36">@@ -1059,7 +1082,7 @@</span> 		defer bc.chainmu.Unlock()
&nbsp;
 		&#47;&#47; Rewind may have occurred, skip in that case.
 		if bc.CurrentHeader().Number.Cmp(head.Number()) &gt;= 0 {
<span class="term-fg31">-			reorg, err := bc.forker.ReorgNeeded(bc.CurrentFastBlock().Header(), head.Header())</span>
<span class="term-fg32">+			reorg, err := bc.forker.ReorgNeeded(bc.CurrentSnapBlock(), head.Header())</span>
 			if err != nil {
 				log.Warn(&quot;Reorg failed&quot;, &quot;err&quot;, err)
 				return false
<span class="term-fg36">@@ -1067,13 +1090,12 @@</span> 			} else if !reorg {
 				return false
 			}
 			rawdb.WriteHeadFastBlockHash(bc.db, head.Hash())
<span class="term-fg31">-			bc.currentFastBlock.Store(head)</span>
<span class="term-fg32">+			bc.currentSnapBlock.Store(head.Header())</span>
 			headFastBlockGauge.Update(int64(head.NumberU64()))
 			return true
 		}
 		return false
 	}
<span class="term-fg31">-</span>
 	&#47;&#47; writeAncient writes blockchain and corresponding receipt chain into ancient store.
 	&#47;&#47;
 	&#47;&#47; this function only accepts canonical chain data. All side chain will be reverted
<span class="term-fg36">@@ -1135,8 +1157,8 @@</span>
 			if batch.ValueSize() &gt; ethdb.IdealBatchSize || i == len(blockChain)-1 {
 				size += int64(batch.ValueSize())
 				if err = batch.Write(); err != nil {
<span class="term-fg31">-					fastBlock := bc.CurrentFastBlock().NumberU64()</span>
<span class="term-fg31">-					if err := bc.db.TruncateHead(fastBlock + 1); err != nil {</span>
<span class="term-fg32">+					snapBlock := bc.CurrentSnapBlock().Number.Uint64()</span>
<span class="term-fg32">+					if err := bc.db.TruncateHead(snapBlock + 1); err != nil {</span>
 						log.Error(&quot;Can&#39;t truncate ancient store after failed insert&quot;, &quot;err&quot;, err)
 					}
 					return 0, err
<span class="term-fg36">@@ -1150,11 +1172,11 @@</span> 		if err := bc.db.Sync(); err != nil {
 			return 0, err
 		}
 		&#47;&#47; Update the current fast block because all block data is now present in DB.
<span class="term-fg31">-		previousFastBlock := bc.CurrentFastBlock().NumberU64()</span>
<span class="term-fg32">+		previousSnapBlock := bc.CurrentSnapBlock().Number.Uint64()</span>
 		if !updateHead(blockChain[len(blockChain)-1]) {
 			&#47;&#47; We end up here if the header chain has reorg&#39;ed, and the blocks&#47;receipts
 			&#47;&#47; don&#39;t match the canonical chain.
<span class="term-fg31">-			if err := bc.db.TruncateHead(previousFastBlock + 1); err != nil {</span>
<span class="term-fg32">+			if err := bc.db.TruncateHead(previousSnapBlock + 1); err != nil {</span>
 				log.Error(&quot;Can&#39;t truncate ancient store after failed insert&quot;, &quot;err&quot;, err)
 			}
 			return 0, errSideChainReceipts
<span class="term-fg36">@@ -1414,7 +1436,7 @@</span> 	if err := bc.writeBlockWithState(block, receipts, state); err != nil {
 		return NonStatTy, err
 	}
 	currentBlock := bc.CurrentBlock()
<span class="term-fg31">-	reorg, err := bc.forker.ReorgNeeded(currentBlock.Header(), block.Header())</span>
<span class="term-fg32">+	reorg, err := bc.forker.ReorgNeeded(currentBlock, block.Header())</span>
 	if err != nil {
 		return NonStatTy, err
 	}
<span class="term-fg36">@@ -1562,7 +1584,7 @@</span> 			reorg   bool
 			current = bc.CurrentBlock()
 		)
 		for block != nil &amp;&amp; bc.skipBlock(err, it) {
<span class="term-fg31">-			reorg, err = bc.forker.ReorgNeeded(current.Header(), block.Header())</span>
<span class="term-fg32">+			reorg, err = bc.forker.ReorgNeeded(current, block.Header())</span>
 			if err != nil {
 				return it.index, err
 			}
<span class="term-fg36">@@ -1572,7 +1594,7 @@</span> 				&#47;&#47; and also the block is not on the canonical chain.
 				&#47;&#47; In eth2 the forker always returns true for reorg decision (blindly trusting
 				&#47;&#47; the external consensus engine), but in order to prevent the unnecessary
 				&#47;&#47; reorgs when importing known blocks, the special case is handled here.
<span class="term-fg31">-				if block.NumberU64() &gt; current.NumberU64() || bc.GetCanonicalHash(block.NumberU64()) != block.Hash() {</span>
<span class="term-fg32">+				if block.NumberU64() &gt; current.Number.Uint64() || bc.GetCanonicalHash(block.NumberU64()) != block.Hash() {</span>
 					break
 				}
 			}
<span class="term-fg36">@@ -1872,7 +1894,7 @@</span> 	&#47;&#47; to disk.
 	err := consensus.ErrPrunedAncestor
 	for ; block != nil &amp;&amp; errors.Is(err, consensus.ErrPrunedAncestor); block, err = it.next() {
 		&#47;&#47; Check the canonical state root for that number
<span class="term-fg31">-		if number := block.NumberU64(); current.NumberU64() &gt;= number {</span>
<span class="term-fg32">+		if number := block.NumberU64(); current.Number.Uint64() &gt;= number {</span>
 			canonical := bc.GetBlockByNumber(number)
 			if canonical != nil &amp;&amp; canonical.Hash() == block.Hash() {
 				&#47;&#47; Not a sidechain block, this is a re-import of a canon block which has it&#39;s state pruned
<span class="term-fg36">@@ -1922,12 +1944,12 @@</span> 	&#47;&#47; error, we can ignore the rest of those blocks.
 	&#47;&#47;
 	&#47;&#47; If the externTd was larger than our local TD, we now need to reimport the previous
 	&#47;&#47; blocks to regenerate the required state
<span class="term-fg31">-	reorg, err := bc.forker.ReorgNeeded(current.Header(), lastBlock.Header())</span>
<span class="term-fg32">+	reorg, err := bc.forker.ReorgNeeded(current, lastBlock.Header())</span>
 	if err != nil {
 		return it.index, err
 	}
 	if !reorg {
<span class="term-fg31">-		localTd := bc.GetTd(current.Hash(), current.NumberU64())</span>
<span class="term-fg32">+		localTd := bc.GetTd(current.Hash(), current.Number.Uint64())</span>
 		log.Info(&quot;Sidechain written to disk&quot;, &quot;start&quot;, it.first().NumberU64(), &quot;end&quot;, it.previous().Number, &quot;sidetd&quot;, externTd, &quot;localtd&quot;, localTd)
 		return it.index, err
 	}
<span class="term-fg36">@@ -2031,7 +2053,7 @@</span> &#47;&#47; collectLogs collects the logs that were generated or removed during
 &#47;&#47; the processing of a block. These logs are later announced as deleted or reborn.
 func (bc *BlockChain) collectLogs(b *types.Block, removed bool) []*types.Log {
 	receipts := rawdb.ReadRawReceipts(bc.db, b.Hash(), b.NumberU64())
<span class="term-fg31">-	receipts.DeriveFields(bc.chainConfig, b.Hash(), b.NumberU64(), b.Transactions())</span>
<span class="term-fg32">+	receipts.DeriveFields(bc.chainConfig, b.Hash(), b.NumberU64(), b.Time(), b.BaseFee(), b.Transactions())</span>
&nbsp;
 	var logs []*types.Log
 	for _, receipt := range receipts {
<span class="term-fg36">@@ -2051,7 +2073,7 @@</span> &#47;&#47; blocks and inserts them to be part of the new canonical chain and accumulates
 &#47;&#47; potential missing transactions and post an event about them.
 &#47;&#47; Note the new head block won&#39;t be processed here, callers need to handle it
 &#47;&#47; externally.
<span class="term-fg31">-func (bc *BlockChain) reorg(oldBlock, newBlock *types.Block) error {</span>
<span class="term-fg32">+func (bc *BlockChain) reorg(oldHead *types.Header, newHead *types.Block) error {</span>
 	var (
 		newChain    types.Blocks
 		oldChain    types.Blocks
<span class="term-fg36">@@ -2060,6 +2082,12 @@</span>
 		deletedTxs []common.Hash
 		addedTxs   []common.Hash
 	)
<span class="term-fg32">+	oldBlock := bc.GetBlock(oldHead.Hash(), oldHead.Number.Uint64())</span>
<span class="term-fg32">+	if oldBlock == nil {</span>
<span class="term-fg32">+		return errors.New(&quot;current head block missing&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	newBlock := newHead</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Reduce the longer chain to the same number as the shorter one
 	if oldBlock.NumberU64() &gt; newBlock.NumberU64() {
 		&#47;&#47; Old chain is longer, gather all transactions and logs as deleted ones
<span class="term-fg36">@@ -2076,10 +2104,10 @@</span> 			newChain = append(newChain, newBlock)
 		}
 	}
 	if oldBlock == nil {
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid old chain&quot;)</span>
<span class="term-fg32">+		return errors.New(&quot;invalid old chain&quot;)</span>
 	}
 	if newBlock == nil {
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid new chain&quot;)</span>
<span class="term-fg32">+		return errors.New(&quot;invalid new chain&quot;)</span>
 	}
 	&#47;&#47; Both sides of the reorg are at the same number, reduce both until the common
 	&#47;&#47; ancestor is found</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-423d9763db23439efd589a34" role="button"
                   aria-expanded="false" aria-controls="id-423d9763db23439efd589a34">
                    <code>core/blockchain_reader.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain_reader.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain_reader.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-423d9763db23439efd589a34"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_reader.go op-geth&#47;core&#47;blockchain_reader.go</span>
<span class="term-fg1">index e8a5d952a240a77bd05ebacba7c6b2ac11d4098e..21a9c6676bd504218a71f9113112a2aed7e47175 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_reader.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain_reader.go</span>
<span class="term-fg36">@@ -40,26 +40,26 @@</span> }
&nbsp;
 &#47;&#47; CurrentBlock retrieves the current head block of the canonical chain. The
 &#47;&#47; block is retrieved from the blockchain&#39;s internal cache.
<span class="term-fg31">-func (bc *BlockChain) CurrentBlock() *types.Block {</span>
<span class="term-fg31">-	return bc.currentBlock.Load().(*types.Block)</span>
<span class="term-fg32">+func (bc *BlockChain) CurrentBlock() *types.Header {</span>
<span class="term-fg32">+	return bc.currentBlock.Load()</span>
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; CurrentFastBlock retrieves the current fast-sync head block of the canonical</span>
<span class="term-fg32">+&#47;&#47; CurrentSnapBlock retrieves the current snap-sync head block of the canonical</span>
 &#47;&#47; chain. The block is retrieved from the blockchain&#39;s internal cache.
<span class="term-fg31">-func (bc *BlockChain) CurrentFastBlock() *types.Block {</span>
<span class="term-fg31">-	return bc.currentFastBlock.Load().(*types.Block)</span>
<span class="term-fg32">+func (bc *BlockChain) CurrentSnapBlock() *types.Header {</span>
<span class="term-fg32">+	return bc.currentSnapBlock.Load()</span>
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; CurrentFinalizedBlock retrieves the current finalized block of the canonical</span>
<span class="term-fg32">+&#47;&#47; CurrentFinalBlock retrieves the current finalized block of the canonical</span>
 &#47;&#47; chain. The block is retrieved from the blockchain&#39;s internal cache.
<span class="term-fg31">-func (bc *BlockChain) CurrentFinalizedBlock() *types.Block {</span>
<span class="term-fg31">-	return bc.currentFinalizedBlock.Load().(*types.Block)</span>
<span class="term-fg32">+func (bc *BlockChain) CurrentFinalBlock() *types.Header {</span>
<span class="term-fg32">+	return bc.currentFinalBlock.Load()</span>
 }
&nbsp;
 &#47;&#47; CurrentSafeBlock retrieves the current safe block of the canonical
 &#47;&#47; chain. The block is retrieved from the blockchain&#39;s internal cache.
<span class="term-fg31">-func (bc *BlockChain) CurrentSafeBlock() *types.Block {</span>
<span class="term-fg31">-	return bc.currentSafeBlock.Load().(*types.Block)</span>
<span class="term-fg32">+func (bc *BlockChain) CurrentSafeBlock() *types.Header {</span>
<span class="term-fg32">+	return bc.currentSafeBlock.Load()</span>
 }
&nbsp;
 &#47;&#47; HasHeader checks if a block header is present in the database or not, caching
<span class="term-fg36">@@ -315,7 +315,7 @@</span> }
&nbsp;
 &#47;&#47; State returns a new mutable state based on the current HEAD block.
 func (bc *BlockChain) State() (*state.StateDB, error) {
<span class="term-fg31">-	return bc.StateAt(bc.CurrentBlock().Root())</span>
<span class="term-fg32">+	return bc.StateAt(bc.CurrentBlock().Root)</span>
 }
&nbsp;
 &#47;&#47; StateAt returns a new mutable state based on a particular point in time.
<span class="term-fg36">@@ -351,7 +351,7 @@</span> }
&nbsp;
 &#47;&#47; GasLimit returns the gas limit of the current HEAD block.
 func (bc *BlockChain) GasLimit() uint64 {
<span class="term-fg31">-	return bc.CurrentBlock().GasLimit()</span>
<span class="term-fg32">+	return bc.CurrentBlock().GasLimit</span>
 }
&nbsp;
 &#47;&#47; Genesis retrieves the chain&#39;s genesis block.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-23ae8b12eaea2da694d868e9" role="button"
                   aria-expanded="false" aria-controls="id-23ae8b12eaea2da694d868e9">
                    <code>core/blockchain_repair_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain_repair_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain_repair_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-23ae8b12eaea2da694d868e9"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_repair_test.go op-geth&#47;core&#47;blockchain_repair_test.go</span>
<span class="term-fg1">index 5db0fb5703d36bda4c16220da41ddef92a2c0373..6a4a9c9d22bd14847283a63a1457e03dc333aac4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_repair_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain_repair_test.go</span>
<span class="term-fg36">@@ -1857,11 +1857,11 @@</span>
 	if head := newChain.CurrentHeader(); head.Number.Uint64() != tt.expHeadHeader {
 		t.Errorf(&quot;Head header mismatch: have %d, want %d&quot;, head.Number, tt.expHeadHeader)
 	}
<span class="term-fg31">-	if head := newChain.CurrentFastBlock(); head.NumberU64() != tt.expHeadFastBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.NumberU64(), tt.expHeadFastBlock)</span>
<span class="term-fg32">+	if head := newChain.CurrentSnapBlock(); head.Number.Uint64() != tt.expHeadFastBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.Number, tt.expHeadFastBlock)</span>
 	}
<span class="term-fg31">-	if head := newChain.CurrentBlock(); head.NumberU64() != tt.expHeadBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.NumberU64(), tt.expHeadBlock)</span>
<span class="term-fg32">+	if head := newChain.CurrentBlock(); head.Number.Uint64() != tt.expHeadBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.Number, tt.expHeadBlock)</span>
 	}
 	if frozen, err := db.(freezer).Ancients(); err != nil {
 		t.Errorf(&quot;Failed to retrieve ancient count: %v\n&quot;, err)
<span class="term-fg36">@@ -1973,11 +1973,11 @@</span>
 	if head := chain.CurrentHeader(); head.Number.Uint64() != uint64(4) {
 		t.Errorf(&quot;Head header mismatch: have %d, want %d&quot;, head.Number, 4)
 	}
<span class="term-fg31">-	if head := chain.CurrentFastBlock(); head.NumberU64() != uint64(4) {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.NumberU64(), uint64(4))</span>
<span class="term-fg32">+	if head := chain.CurrentSnapBlock(); head.Number.Uint64() != uint64(4) {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.Number, uint64(4))</span>
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock(); head.NumberU64() != uint64(1) {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.NumberU64(), uint64(1))</span>
<span class="term-fg32">+	if head := chain.CurrentBlock(); head.Number.Uint64() != uint64(1) {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.Number, uint64(1))</span>
 	}
&nbsp;
 	&#47;&#47; Reinsert B2-B4
<span class="term-fg36">@@ -1987,11 +1987,11 @@</span> 	}
 	if head := chain.CurrentHeader(); head.Number.Uint64() != uint64(4) {
 		t.Errorf(&quot;Head header mismatch: have %d, want %d&quot;, head.Number, 4)
 	}
<span class="term-fg31">-	if head := chain.CurrentFastBlock(); head.NumberU64() != uint64(4) {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.NumberU64(), uint64(4))</span>
<span class="term-fg32">+	if head := chain.CurrentSnapBlock(); head.Number.Uint64() != uint64(4) {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.Number, uint64(4))</span>
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock(); head.NumberU64() != uint64(4) {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.NumberU64(), uint64(4))</span>
<span class="term-fg32">+	if head := chain.CurrentBlock(); head.Number.Uint64() != uint64(4) {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.Number, uint64(4))</span>
 	}
 	if layer := chain.Snapshots().Snapshot(blocks[2].Root()); layer == nil {
 		t.Error(&quot;Failed to regenerate the snapshot of known state&quot;)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-38ad7c7817da6b6c377ba38c" role="button"
                   aria-expanded="false" aria-controls="id-38ad7c7817da6b6c377ba38c">
                    <code>core/blockchain_sethead_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain_sethead_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain_sethead_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-38ad7c7817da6b6c377ba38c"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_sethead_test.go op-geth&#47;core&#47;blockchain_sethead_test.go</span>
<span class="term-fg1">index 825a0e16b4306a225bff21cc1cdf315ffc537dc1..9dc350db849e4d8d08c680c1b497ccae235f2b9b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_sethead_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain_sethead_test.go</span>
<span class="term-fg36">@@ -2047,11 +2047,11 @@</span>
 	if head := chain.CurrentHeader(); head.Number.Uint64() != tt.expHeadHeader {
 		t.Errorf(&quot;Head header mismatch: have %d, want %d&quot;, head.Number, tt.expHeadHeader)
 	}
<span class="term-fg31">-	if head := chain.CurrentFastBlock(); head.NumberU64() != tt.expHeadFastBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.NumberU64(), tt.expHeadFastBlock)</span>
<span class="term-fg32">+	if head := chain.CurrentSnapBlock(); head.Number.Uint64() != tt.expHeadFastBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.Number, tt.expHeadFastBlock)</span>
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock(); head.NumberU64() != tt.expHeadBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.NumberU64(), tt.expHeadBlock)</span>
<span class="term-fg32">+	if head := chain.CurrentBlock(); head.Number.Uint64() != tt.expHeadBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.Number, tt.expHeadBlock)</span>
 	}
 	if frozen, err := db.(freezer).Ancients(); err != nil {
 		t.Errorf(&quot;Failed to retrieve ancient count: %v\n&quot;, err)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2e10799595c516402b39d109" role="button"
                   aria-expanded="false" aria-controls="id-2e10799595c516402b39d109">
                    <code>core/blockchain_snapshot_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain_snapshot_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain_snapshot_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2e10799595c516402b39d109"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_snapshot_test.go op-geth&#47;core&#47;blockchain_snapshot_test.go</span>
<span class="term-fg1">index b34ea573c1aed1f30180aaa7a7e2ac13cdf82103..3bd876a58ec7ca319a74778e8c1c5b50c6c4cd5c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_snapshot_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain_snapshot_test.go</span>
<span class="term-fg36">@@ -136,11 +136,11 @@</span>
 	if head := chain.CurrentHeader(); head.Number.Uint64() != basic.expHeadHeader {
 		t.Errorf(&quot;Head header mismatch: have %d, want %d&quot;, head.Number, basic.expHeadHeader)
 	}
<span class="term-fg31">-	if head := chain.CurrentFastBlock(); head.NumberU64() != basic.expHeadFastBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.NumberU64(), basic.expHeadFastBlock)</span>
<span class="term-fg32">+	if head := chain.CurrentSnapBlock(); head.Number.Uint64() != basic.expHeadFastBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head fast block mismatch: have %d, want %d&quot;, head.Number, basic.expHeadFastBlock)</span>
 	}
<span class="term-fg31">-	if head := chain.CurrentBlock(); head.NumberU64() != basic.expHeadBlock {</span>
<span class="term-fg31">-		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.NumberU64(), basic.expHeadBlock)</span>
<span class="term-fg32">+	if head := chain.CurrentBlock(); head.Number.Uint64() != basic.expHeadBlock {</span>
<span class="term-fg32">+		t.Errorf(&quot;Head block mismatch: have %d, want %d&quot;, head.Number, basic.expHeadBlock)</span>
 	}
&nbsp;
 	&#47;&#47; Check the disk layer, ensure they are matched</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3a1abc9f2c092a2f2bcc6a74" role="button"
                   aria-expanded="false" aria-controls="id-3a1abc9f2c092a2f2bcc6a74">
                    <code>core/blockchain_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/blockchain_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/blockchain_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+43</span></div>
                        <div class="text-start"><span class="text-danger">-42</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3a1abc9f2c092a2f2bcc6a74"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_test.go op-geth&#47;core&#47;blockchain_test.go</span>
<span class="term-fg1">index ae77d0b7f669e3425226a1530d9364b4d53f9876..0f9ef6a1921a51af022926c8075ba8808f011480 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;blockchain_test.go</span>
<span class="term-fg36">@@ -109,7 +109,7 @@</span> 		blockChainB  []*types.Block
 		headerChainB []*types.Header
 	)
 	if full {
<span class="term-fg31">-		blockChainB = makeBlockChain(blockchain2.chainConfig, blockchain2.CurrentBlock(), n, ethash.NewFaker(), genDb, forkSeed)</span>
<span class="term-fg32">+		blockChainB = makeBlockChain(blockchain2.chainConfig, blockchain2.GetBlockByHash(blockchain2.CurrentBlock().Hash()), n, ethash.NewFaker(), genDb, forkSeed)</span>
 		if _, err := blockchain2.InsertChain(blockChainB); err != nil {
 			t.Fatalf(&quot;failed to insert forking chain: %v&quot;, err)
 		}
<span class="term-fg36">@@ -124,7 +124,7 @@</span> 	var tdPre, tdPost *big.Int
&nbsp;
 	if full {
 		cur := blockchain.CurrentBlock()
<span class="term-fg31">-		tdPre = blockchain.GetTd(cur.Hash(), cur.NumberU64())</span>
<span class="term-fg32">+		tdPre = blockchain.GetTd(cur.Hash(), cur.Number.Uint64())</span>
 		if err := testBlockChainImport(blockChainB, blockchain); err != nil {
 			t.Fatalf(&quot;failed to import forked block chain: %v&quot;, err)
 		}
<span class="term-fg36">@@ -206,7 +206,7 @@</span> 		t.Fatalf(&quot;failed to create pristine chain: %v&quot;, err)
 	}
 	defer blockchain.Stop()
&nbsp;
<span class="term-fg31">-	blocks := makeBlockChain(blockchain.chainConfig, blockchain.CurrentBlock(), 1, ethash.NewFullFaker(), genDb, 0)</span>
<span class="term-fg32">+	blocks := makeBlockChain(blockchain.chainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), 1, ethash.NewFullFaker(), genDb, 0)</span>
 	if _, err := blockchain.InsertChain(blocks); err != nil {
 		t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 	}
<span class="term-fg36">@@ -240,11 +240,11 @@</span> 	}
&nbsp;
 	&#47;&#47; Extend the newly created chain
 	if full {
<span class="term-fg31">-		blockChainB := makeBlockChain(blockchain2.chainConfig, blockchain2.CurrentBlock(), n, ethash.NewFaker(), genDb, forkSeed)</span>
<span class="term-fg32">+		blockChainB := makeBlockChain(blockchain2.chainConfig, blockchain2.GetBlockByHash(blockchain2.CurrentBlock().Hash()), n, ethash.NewFaker(), genDb, forkSeed)</span>
 		if _, err := blockchain2.InsertChain(blockChainB); err != nil {
 			t.Fatalf(&quot;failed to insert forking chain: %v&quot;, err)
 		}
<span class="term-fg31">-		if blockchain2.CurrentBlock().NumberU64() != blockChainB[len(blockChainB)-1].NumberU64() {</span>
<span class="term-fg32">+		if blockchain2.CurrentBlock().Number.Uint64() != blockChainB[len(blockChainB)-1].NumberU64() {</span>
 			t.Fatalf(&quot;failed to reorg to the given chain&quot;)
 		}
 		if blockchain2.CurrentBlock().Hash() != blockChainB[len(blockChainB)-1].Hash() {
<span class="term-fg36">@@ -477,7 +477,7 @@</span> 	defer blockchain.Stop()
&nbsp;
 	&#47;&#47; Create a forked chain, and try to insert with a missing link
 	if full {
<span class="term-fg31">-		chain := makeBlockChain(blockchain.chainConfig, blockchain.CurrentBlock(), 5, ethash.NewFaker(), genDb, forkSeed)[1:]</span>
<span class="term-fg32">+		chain := makeBlockChain(blockchain.chainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), 5, ethash.NewFaker(), genDb, forkSeed)[1:]</span>
 		if err := testBlockChainImport(chain, blockchain); err == nil {
 			t.Errorf(&quot;broken block chain not reported&quot;)
 		}
<span class="term-fg36">@@ -527,10 +527,10 @@</span> 	}
 	defer blockchain.Stop()
&nbsp;
 	&#47;&#47; Insert an easy and a difficult chain afterwards
<span class="term-fg31">-	easyBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.CurrentBlock(), ethash.NewFaker(), genDb, len(first), func(i int, b *BlockGen) {</span>
<span class="term-fg32">+	easyBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), ethash.NewFaker(), genDb, len(first), func(i int, b *BlockGen) {</span>
 		b.OffsetTime(first[i])
 	})
<span class="term-fg31">-	diffBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.CurrentBlock(), ethash.NewFaker(), genDb, len(second), func(i int, b *BlockGen) {</span>
<span class="term-fg32">+	diffBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), ethash.NewFaker(), genDb, len(second), func(i int, b *BlockGen) {</span>
 		b.OffsetTime(second[i])
 	})
 	if full {
<span class="term-fg36">@@ -559,9 +559,9 @@</span> 	}
 	&#47;&#47; Check that the chain is valid number and link wise
 	if full {
 		prev := blockchain.CurrentBlock()
<span class="term-fg31">-		for block := blockchain.GetBlockByNumber(blockchain.CurrentBlock().NumberU64() - 1); block.NumberU64() != 0; prev, block = block, blockchain.GetBlockByNumber(block.NumberU64()-1) {</span>
<span class="term-fg31">-			if prev.ParentHash() != block.Hash() {</span>
<span class="term-fg31">-				t.Errorf(&quot;parent block hash mismatch: have %x, want %x&quot;, prev.ParentHash(), block.Hash())</span>
<span class="term-fg32">+		for block := blockchain.GetBlockByNumber(blockchain.CurrentBlock().Number.Uint64() - 1); block.NumberU64() != 0; prev, block = block.Header(), blockchain.GetBlockByNumber(block.NumberU64()-1) {</span>
<span class="term-fg32">+			if prev.ParentHash != block.Hash() {</span>
<span class="term-fg32">+				t.Errorf(&quot;parent block hash mismatch: have %x, want %x&quot;, prev.ParentHash, block.Hash())</span>
 			}
 		}
 	} else {
<span class="term-fg36">@@ -576,7 +576,7 @@</span> 	&#47;&#47; Make sure the chain total difficulty is the correct one
 	want := new(big.Int).Add(blockchain.genesisBlock.Difficulty(), big.NewInt(td))
 	if full {
 		cur := blockchain.CurrentBlock()
<span class="term-fg31">-		if have := blockchain.GetTd(cur.Hash(), cur.NumberU64()); have.Cmp(want) != 0 {</span>
<span class="term-fg32">+		if have := blockchain.GetTd(cur.Hash(), cur.Number.Uint64()); have.Cmp(want) != 0 {</span>
 			t.Errorf(&quot;total difficulty mismatch: have %v, want %v&quot;, have, want)
 		}
 	} else {
<span class="term-fg36">@@ -601,7 +601,7 @@</span> 	defer blockchain.Stop()
&nbsp;
 	&#47;&#47; Create a chain, ban a hash and try to import
 	if full {
<span class="term-fg31">-		blocks := makeBlockChain(blockchain.chainConfig, blockchain.CurrentBlock(), 3, ethash.NewFaker(), genDb, 10)</span>
<span class="term-fg32">+		blocks := makeBlockChain(blockchain.chainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), 3, ethash.NewFaker(), genDb, 10)</span>
&nbsp;
 		BadHashes[blocks[2].Header().Hash()] = true
 		defer func() { delete(BadHashes, blocks[2].Header().Hash()) }()
<span class="term-fg36">@@ -633,7 +633,7 @@</span> 		t.Fatalf(&quot;failed to create pristine chain: %v&quot;, err)
 	}
 	&#47;&#47; Create a chain, import and ban afterwards
 	headers := makeHeaderChain(blockchain.chainConfig, blockchain.CurrentHeader(), 4, ethash.NewFaker(), genDb, 10)
<span class="term-fg31">-	blocks := makeBlockChain(blockchain.chainConfig, blockchain.CurrentBlock(), 4, ethash.NewFaker(), genDb, 10)</span>
<span class="term-fg32">+	blocks := makeBlockChain(blockchain.chainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), 4, ethash.NewFaker(), genDb, 10)</span>
&nbsp;
 	if full {
 		if _, err = blockchain.InsertChain(blocks); err != nil {
<span class="term-fg36">@@ -696,7 +696,7 @@</span> 			failRes int
 			failNum uint64
 		)
 		if full {
<span class="term-fg31">-			blocks := makeBlockChain(blockchain.chainConfig, blockchain.CurrentBlock(), i, ethash.NewFaker(), genDb, 0)</span>
<span class="term-fg32">+			blocks := makeBlockChain(blockchain.chainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), i, ethash.NewFaker(), genDb, 0)</span>
&nbsp;
 			failAt = rand.Int() % len(blocks)
 			failNum = blocks[failAt].NumberU64()
<span class="term-fg36">@@ -894,11 +894,11 @@</span> 	&#47;&#47; Create a small assertion method to check the three heads
 	assert := func(t *testing.T, kind string, chain *BlockChain, header uint64, fast uint64, block uint64) {
 		t.Helper()
&nbsp;
<span class="term-fg31">-		if num := chain.CurrentBlock().NumberU64(); num != block {</span>
<span class="term-fg32">+		if num := chain.CurrentBlock().Number.Uint64(); num != block {</span>
 			t.Errorf(&quot;%s head block mismatch: have #%v, want #%v&quot;, kind, num, block)
 		}
<span class="term-fg31">-		if num := chain.CurrentFastBlock().NumberU64(); num != fast {</span>
<span class="term-fg31">-			t.Errorf(&quot;%s head fast-block mismatch: have #%v, want #%v&quot;, kind, num, fast)</span>
<span class="term-fg32">+		if num := chain.CurrentSnapBlock().Number.Uint64(); num != fast {</span>
<span class="term-fg32">+			t.Errorf(&quot;%s head snap-block mismatch: have #%v, want #%v&quot;, kind, num, fast)</span>
 		}
 		if num := chain.CurrentHeader().Number.Uint64(); num != header {
 			t.Errorf(&quot;%s head header mismatch: have #%v, want #%v&quot;, kind, num, header)
<span class="term-fg36">@@ -1649,13 +1649,13 @@</span> 		if _, err := chain.InsertChain(blocks[i : i+1]); err != nil {
 			t.Fatalf(&quot;block %d: failed to insert into chain: %v&quot;, i, err)
 		}
 		if chain.CurrentBlock().Hash() != chain.CurrentHeader().Hash() {
<span class="term-fg31">-			t.Errorf(&quot;block %d: current block&#47;header mismatch: block #%d [%x..], header #%d [%x..]&quot;, i, chain.CurrentBlock().Number(), chain.CurrentBlock().Hash().Bytes()[:4], chain.CurrentHeader().Number, chain.CurrentHeader().Hash().Bytes()[:4])</span>
<span class="term-fg32">+			t.Errorf(&quot;block %d: current block&#47;header mismatch: block #%d [%x..], header #%d [%x..]&quot;, i, chain.CurrentBlock().Number, chain.CurrentBlock().Hash().Bytes()[:4], chain.CurrentHeader().Number, chain.CurrentHeader().Hash().Bytes()[:4])</span>
 		}
 		if _, err := chain.InsertChain(forks[i : i+1]); err != nil {
 			t.Fatalf(&quot; fork %d: failed to insert into chain: %v&quot;, i, err)
 		}
 		if chain.CurrentBlock().Hash() != chain.CurrentHeader().Hash() {
<span class="term-fg31">-			t.Errorf(&quot; fork %d: current block&#47;header mismatch: block #%d [%x..], header #%d [%x..]&quot;, i, chain.CurrentBlock().Number(), chain.CurrentBlock().Hash().Bytes()[:4], chain.CurrentHeader().Number, chain.CurrentHeader().Hash().Bytes()[:4])</span>
<span class="term-fg32">+			t.Errorf(&quot; fork %d: current block&#47;header mismatch: block #%d [%x..], header #%d [%x..]&quot;, i, chain.CurrentBlock().Number, chain.CurrentBlock().Hash().Bytes()[:4], chain.CurrentHeader().Number, chain.CurrentHeader().Hash().Bytes()[:4])</span>
 		}
 	}
 }
<span class="term-fg36">@@ -1797,11 +1797,11 @@</span>
 	&#47;&#47; Reopen broken blockchain again
 	ancient, _ = NewBlockChain(ancientDb, nil, gspec, nil, ethash.NewFaker(), vm.Config{}, nil, nil)
 	defer ancient.Stop()
<span class="term-fg31">-	if num := ancient.CurrentBlock().NumberU64(); num != 0 {</span>
<span class="term-fg32">+	if num := ancient.CurrentBlock().Number.Uint64(); num != 0 {</span>
 		t.Errorf(&quot;head block mismatch: have #%v, want #%v&quot;, num, 0)
 	}
<span class="term-fg31">-	if num := ancient.CurrentFastBlock().NumberU64(); num != midBlock.NumberU64() {</span>
<span class="term-fg31">-		t.Errorf(&quot;head fast-block mismatch: have #%v, want #%v&quot;, num, midBlock.NumberU64())</span>
<span class="term-fg32">+	if num := ancient.CurrentSnapBlock().Number.Uint64(); num != midBlock.NumberU64() {</span>
<span class="term-fg32">+		t.Errorf(&quot;head snap-block mismatch: have #%v, want #%v&quot;, num, midBlock.NumberU64())</span>
 	}
 	if num := ancient.CurrentHeader().Number.Uint64(); num != midBlock.NumberU64() {
 		t.Errorf(&quot;head header mismatch: have #%v, want #%v&quot;, num, midBlock.NumberU64())
<span class="term-fg36">@@ -1820,7 +1820,7 @@</span> 	&#47;&#47; Get the side chain receipts.
 	if _, err := tmpChain.InsertChain(sideblocks); err != nil {
 		t.Fatal(&quot;processing side chain failed:&quot;, err)
 	}
<span class="term-fg31">-	t.Log(&quot;sidechain head:&quot;, tmpChain.CurrentBlock().Number(), tmpChain.CurrentBlock().Hash())</span>
<span class="term-fg32">+	t.Log(&quot;sidechain head:&quot;, tmpChain.CurrentBlock().Number, tmpChain.CurrentBlock().Hash())</span>
 	sidechainReceipts := make([]types.Receipts, len(sideblocks))
 	for i, block := range sideblocks {
 		sidechainReceipts[i] = tmpChain.GetReceiptsByHash(block.Hash())
<span class="term-fg36">@@ -1829,7 +1829,7 @@</span> 	&#47;&#47; Get the canon chain receipts.
 	if _, err := tmpChain.InsertChain(canonblocks); err != nil {
 		t.Fatal(&quot;processing canon chain failed:&quot;, err)
 	}
<span class="term-fg31">-	t.Log(&quot;canon head:&quot;, tmpChain.CurrentBlock().Number(), tmpChain.CurrentBlock().Hash())</span>
<span class="term-fg32">+	t.Log(&quot;canon head:&quot;, tmpChain.CurrentBlock().Number, tmpChain.CurrentBlock().Hash())</span>
 	canonReceipts := make([]types.Receipts, len(canonblocks))
 	for i, block := range canonblocks {
 		canonReceipts[i] = tmpChain.GetReceiptsByHash(block.Hash())
<span class="term-fg36">@@ -1859,8 +1859,8 @@</span> 	_, err = ancientChain.InsertReceiptChain(sideblocks, sidechainReceipts, uint64(len(sideblocks)))
 	if err == nil {
 		t.Fatal(&quot;expected error from InsertReceiptChain.&quot;)
 	}
<span class="term-fg31">-	if ancientChain.CurrentFastBlock().NumberU64() != 0 {</span>
<span class="term-fg31">-		t.Fatalf(&quot;failed to rollback ancient data, want %d, have %d&quot;, 0, ancientChain.CurrentFastBlock().NumberU64())</span>
<span class="term-fg32">+	if ancientChain.CurrentSnapBlock().Number.Uint64() != 0 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to rollback ancient data, want %d, have %d&quot;, 0, ancientChain.CurrentSnapBlock().Number)</span>
 	}
 	if frozen, err := ancientChain.db.Ancients(); err != nil || frozen != 1 {
 		t.Fatalf(&quot;failed to truncate ancient data, frozen index is %d&quot;, frozen)
<span class="term-fg36">@@ -1871,7 +1871,7 @@</span> 	_, err = ancientChain.InsertReceiptChain(canonblocks, canonReceipts, uint64(len(canonblocks)))
 	if err != nil {
 		t.Fatalf(&quot;can&#39;t import canon chain receipts: %v&quot;, err)
 	}
<span class="term-fg31">-	if ancientChain.CurrentFastBlock().NumberU64() != canonblocks[len(canonblocks)-1].NumberU64() {</span>
<span class="term-fg32">+	if ancientChain.CurrentSnapBlock().Number.Uint64() != canonblocks[len(canonblocks)-1].NumberU64() {</span>
 		t.Fatalf(&quot;failed to insert ancient recept chain after rollback&quot;)
 	}
 	if frozen, _ := ancientChain.db.Ancients(); frozen != uint64(len(canonblocks))+1 {
<span class="term-fg36">@@ -1926,7 +1926,7 @@</span> 		t.Fatalf(&quot;head wrong, expected %x got %x&quot;, head.Hash(), got)
 	}
 	&#47;&#47; Sanity check that all the canonical numbers are present
 	header := chain.CurrentHeader()
<span class="term-fg31">-	for number := head.NumberU64(); number &gt; 0; number-- {</span>
<span class="term-fg32">+	for number := head.Number.Uint64(); number &gt; 0; number-- {</span>
 		if hash := chain.GetHeaderByNumber(number).Hash(); hash != header.Hash() {
 			t.Fatalf(&quot;header %d: canonical hash mismatch: have %x, want %x&quot;, number, hash, header.Hash())
 		}
<span class="term-fg36">@@ -2150,8 +2150,8 @@</span> 			_, err = chain.InsertReceiptChain(blocks, receipts, 0)
 			return err
 		}
 		asserter = func(t *testing.T, block *types.Block) {
<span class="term-fg31">-			if chain.CurrentFastBlock().Hash() != block.Hash() {</span>
<span class="term-fg31">-				t.Fatalf(&quot;current head fast block mismatch, have %v, want %v&quot;, chain.CurrentFastBlock().Hash().Hex(), block.Hash().Hex())</span>
<span class="term-fg32">+			if chain.CurrentSnapBlock().Hash() != block.Hash() {</span>
<span class="term-fg32">+				t.Fatalf(&quot;current head fast block mismatch, have %v, want %v&quot;, chain.CurrentSnapBlock().Hash().Hex(), block.Hash().Hex())</span>
 			}
 		}
 	} else {
<span class="term-fg36">@@ -2324,8 +2324,8 @@</span> 			_, err = chain.InsertReceiptChain(blocks, receipts, 0)
 			return err
 		}
 		asserter = func(t *testing.T, block *types.Block) {
<span class="term-fg31">-			if chain.CurrentFastBlock().Hash() != block.Hash() {</span>
<span class="term-fg31">-				t.Fatalf(&quot;current head fast block mismatch, have %v, want %v&quot;, chain.CurrentFastBlock().Hash().Hex(), block.Hash().Hex())</span>
<span class="term-fg32">+			if chain.CurrentSnapBlock().Hash() != block.Hash() {</span>
<span class="term-fg32">+				t.Fatalf(&quot;current head fast block mismatch, have %v, want %v&quot;, chain.CurrentSnapBlock().Hash().Hex(), block.Hash().Hex())</span>
 			}
 		}
 	} else {
<span class="term-fg36">@@ -2452,7 +2452,7 @@</span>
 	if n, err := chain.InsertChain(canonblocks); err != nil {
 		t.Fatalf(&quot;block %d: failed to insert into chain: %v&quot;, n, err)
 	}
<span class="term-fg31">-	canonNum := chain.CurrentBlock().NumberU64()</span>
<span class="term-fg32">+	canonNum := chain.CurrentBlock().Number.Uint64()</span>
 	canonHash := chain.CurrentBlock().Hash()
 	_, err = chain.InsertChain(sideblocks)
 	if err != nil {
<span class="term-fg36">@@ -2467,7 +2467,7 @@</span> 	if blockByNum := chain.GetBlockByNumber(canonNum); blockByNum != nil {
 		t.Errorf(&quot;expected block to be gone: %v&quot;, blockByNum.NumberU64())
 	}
 	if headerByNum := chain.GetHeaderByNumber(canonNum); headerByNum != nil {
<span class="term-fg31">-		t.Errorf(&quot;expected header to be gone: %v&quot;, headerByNum.Number.Uint64())</span>
<span class="term-fg32">+		t.Errorf(&quot;expected header to be gone: %v&quot;, headerByNum.Number)</span>
 	}
 	if blockByHash := chain.GetBlockByHash(canonHash); blockByHash == nil {
 		t.Errorf(&quot;expected block to be present: %x&quot;, blockByHash.Hash())
<span class="term-fg36">@@ -2553,7 +2553,7 @@</span> 		if tail != nil &amp;&amp; *stored != *tail {
 			t.Fatalf(&quot;Oldest indexded block mismatch, want %d, have %d&quot;, *tail, *stored)
 		}
 		if tail != nil {
<span class="term-fg31">-			for i := *tail; i &lt;= chain.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+			for i := *tail; i &lt;= chain.CurrentBlock().Number.Uint64(); i++ {</span>
 				block := rawdb.ReadBlock(chain.db, rawdb.ReadCanonicalHash(chain.db, i), i)
 				if block.Transactions().Len() == 0 {
 					continue
<span class="term-fg36">@@ -2649,7 +2649,7 @@</span> 		if tail != nil &amp;&amp; *stored != *tail {
 			t.Fatalf(&quot;Oldest indexded block mismatch, want %d, have %d&quot;, *tail, *stored)
 		}
 		if tail != nil {
<span class="term-fg31">-			for i := *tail; i &lt;= chain.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+			for i := *tail; i &lt;= chain.CurrentBlock().Number.Uint64(); i++ {</span>
 				block := rawdb.ReadBlock(chain.db, rawdb.ReadCanonicalHash(chain.db, i), i)
 				if block.Transactions().Len() == 0 {
 					continue
<span class="term-fg36">@@ -2752,7 +2752,8 @@</span> 		if _, err := chain.InsertChain(shared); err != nil {
 			b.Fatalf(&quot;failed to insert shared chain: %v&quot;, err)
 		}
 		b.StopTimer()
<span class="term-fg31">-		if got := chain.CurrentBlock().Transactions().Len(); got != numTxs*numBlocks {</span>
<span class="term-fg32">+		block := chain.GetBlockByHash(chain.CurrentBlock().Hash())</span>
<span class="term-fg32">+		if got := block.Transactions().Len(); got != numTxs*numBlocks {</span>
 			b.Fatalf(&quot;Transactions were not included, expected %d, got %d&quot;, numTxs*numBlocks, got)
 		}
 	}
<span class="term-fg36">@@ -3715,8 +3716,8 @@</span> 	verify := func(head *types.Block) {
 		if chain.CurrentBlock().Hash() != head.Hash() {
 			t.Fatalf(&quot;Unexpected block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentBlock().Hash())
 		}
<span class="term-fg31">-		if chain.CurrentFastBlock().Hash() != head.Hash() {</span>
<span class="term-fg31">-			t.Fatalf(&quot;Unexpected fast block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentFastBlock().Hash())</span>
<span class="term-fg32">+		if chain.CurrentSnapBlock().Hash() != head.Hash() {</span>
<span class="term-fg32">+			t.Fatalf(&quot;Unexpected fast block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentSnapBlock().Hash())</span>
 		}
 		if chain.CurrentHeader().Hash() != head.Hash() {
 			t.Fatalf(&quot;Unexpected head header, want %x, got %x&quot;, head.Hash(), chain.CurrentHeader().Hash())
<span class="term-fg36">@@ -3799,8 +3800,8 @@</span> 		verify := func(head *types.Block) {
 			if chain.CurrentBlock().Hash() != head.Hash() {
 				t.Fatalf(&quot;Unexpected block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentBlock().Hash())
 			}
<span class="term-fg31">-			if chain.CurrentFastBlock().Hash() != head.Hash() {</span>
<span class="term-fg31">-				t.Fatalf(&quot;Unexpected fast block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentFastBlock().Hash())</span>
<span class="term-fg32">+			if chain.CurrentSnapBlock().Hash() != head.Hash() {</span>
<span class="term-fg32">+				t.Fatalf(&quot;Unexpected fast block hash, want %x, got %x&quot;, head.Hash(), chain.CurrentSnapBlock().Hash())</span>
 			}
 			if chain.CurrentHeader().Hash() != head.Hash() {
 				t.Fatalf(&quot;Unexpected head header, want %x, got %x&quot;, head.Hash(), chain.CurrentHeader().Hash())</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-56482d66bd4b730874355c0a" role="button"
                   aria-expanded="false" aria-controls="id-56482d66bd4b730874355c0a">
                    <code>core/chain_makers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/chain_makers.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/chain_makers.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+22</span></div>
                        <div class="text-start"><span class="text-danger">-9</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-56482d66bd4b730874355c0a"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;chain_makers.go op-geth&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">index 3518929f8e717f27e7fb1ea814b05a02c990aaf8..61d0098af3f6bef6d814bc8fa20af195f8d5d543 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;chain_makers.go</span>
<span class="term-fg36">@@ -156,6 +156,11 @@</span> func (b *BlockGen) Number() *big.Int {
 	return new(big.Int).Set(b.header.Number)
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; Timestamp returns the timestamp of the block being generated.</span>
<span class="term-fg32">+func (b *BlockGen) Timestamp() uint64 {</span>
<span class="term-fg32">+	return b.header.Time</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; BaseFee returns the EIP-1559 base fee of the block being generated.
 func (b *BlockGen) BaseFee() *big.Int {
 	return new(big.Int).Set(b.header.BaseFee)
<span class="term-fg36">@@ -207,23 +212,31 @@</span> 	b.uncles = append(b.uncles, h)
 }
&nbsp;
 &#47;&#47; AddWithdrawal adds a withdrawal to the generated block.
<span class="term-fg31">-func (b *BlockGen) AddWithdrawal(w *types.Withdrawal) {</span>
<span class="term-fg31">-	&#47;&#47; The withdrawal will be assigned the next valid index.</span>
<span class="term-fg31">-	var idx uint64</span>
<span class="term-fg32">+&#47;&#47; It returns the withdrawal index.</span>
<span class="term-fg32">+func (b *BlockGen) AddWithdrawal(w *types.Withdrawal) uint64 {</span>
<span class="term-fg32">+	cpy := *w</span>
<span class="term-fg32">+	cpy.Index = b.nextWithdrawalIndex()</span>
<span class="term-fg32">+	b.withdrawals = append(b.withdrawals, &amp;cpy)</span>
<span class="term-fg32">+	return cpy.Index</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; nextWithdrawalIndex computes the index of the next withdrawal.</span>
<span class="term-fg32">+func (b *BlockGen) nextWithdrawalIndex() uint64 {</span>
<span class="term-fg32">+	if len(b.withdrawals) != 0 {</span>
<span class="term-fg32">+		return b.withdrawals[len(b.withdrawals)-1].Index + 1</span>
<span class="term-fg32">+	}</span>
 	for i := b.i - 1; i &gt;= 0; i-- {
 		if wd := b.chain[i].Withdrawals(); len(wd) != 0 {
<span class="term-fg31">-			idx = wd[len(wd)-1].Index + 1</span>
<span class="term-fg31">-			break</span>
<span class="term-fg32">+			return wd[len(wd)-1].Index + 1</span>
 		}
 		if i == 0 {
<span class="term-fg31">-			&#47;&#47; Correctly set the index if no parent had withdrawals</span>
<span class="term-fg32">+			&#47;&#47; Correctly set the index if no parent had withdrawals.</span>
 			if wd := b.parent.Withdrawals(); len(wd) != 0 {
<span class="term-fg31">-				idx = wd[len(wd)-1].Index + 1</span>
<span class="term-fg32">+				return wd[len(wd)-1].Index + 1</span>
 			}
 		}
 	}
<span class="term-fg31">-	w.Index = idx</span>
<span class="term-fg31">-	b.withdrawals = append(b.withdrawals, w)</span>
<span class="term-fg32">+	return 0</span>
 }
&nbsp;
 &#47;&#47; PrevBlock returns a previously generated block by number. It panics if</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fcc5132feaeac07e7e60dc3d" role="button"
                   aria-expanded="false" aria-controls="id-fcc5132feaeac07e7e60dc3d">
                    <code>core/chain_makers_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/chain_makers_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/chain_makers_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+110</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fcc5132feaeac07e7e60dc3d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;chain_makers_test.go op-geth&#47;core&#47;chain_makers_test.go</span>
<span class="term-fg1">index 166ac3f227fc93073809e0567a6f779ed0e35c6f..4f73555275534784327b61d24dd2aa7a1f11498a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;chain_makers_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;chain_makers_test.go</span>
<span class="term-fg36">@@ -19,7 +19,10 @@</span>
 import (
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;testing&quot;</span>
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;beacon&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;ethash&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
<span class="term-fg36">@@ -28,6 +31,112 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 )
&nbsp;
<span class="term-fg32">+func TestGenerateWithdrawalChain(t *testing.T) {</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		keyHex  = &quot;9c647b8b7c4e7c3490668fb6c11473619db80c93704c70893d3813af4090c39c&quot;</span>
<span class="term-fg32">+		key, _  = crypto.HexToECDSA(keyHex)</span>
<span class="term-fg32">+		address = crypto.PubkeyToAddress(key.PublicKey) &#47;&#47; 658bdf435d810c91414ec09147daa6db62406379</span>
<span class="term-fg32">+		aa      = common.Address{0xaa}</span>
<span class="term-fg32">+		bb      = common.Address{0xbb}</span>
<span class="term-fg32">+		funds   = big.NewInt(0).Mul(big.NewInt(1337), big.NewInt(params.Ether))</span>
<span class="term-fg32">+		config  = *params.AllEthashProtocolChanges</span>
<span class="term-fg32">+		gspec   = &amp;Genesis{</span>
<span class="term-fg32">+			Config:     &amp;config,</span>
<span class="term-fg32">+			Alloc:      GenesisAlloc{address: {Balance: funds}},</span>
<span class="term-fg32">+			BaseFee:    big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+			Difficulty: common.Big1,</span>
<span class="term-fg32">+			GasLimit:   5_000_000,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		gendb  = rawdb.NewMemoryDatabase()</span>
<span class="term-fg32">+		signer = types.LatestSigner(gspec.Config)</span>
<span class="term-fg32">+		db     = rawdb.NewMemoryDatabase()</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	config.TerminalTotalDifficultyPassed = true</span>
<span class="term-fg32">+	config.TerminalTotalDifficulty = common.Big0</span>
<span class="term-fg32">+	config.ShanghaiTime = u64(0)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; init 0xaa with some storage elements</span>
<span class="term-fg32">+	storage := make(map[common.Hash]common.Hash)</span>
<span class="term-fg32">+	storage[common.Hash{0x00}] = common.Hash{0x00}</span>
<span class="term-fg32">+	storage[common.Hash{0x01}] = common.Hash{0x01}</span>
<span class="term-fg32">+	storage[common.Hash{0x02}] = common.Hash{0x02}</span>
<span class="term-fg32">+	storage[common.Hash{0x03}] = common.HexToHash(&quot;0303&quot;)</span>
<span class="term-fg32">+	gspec.Alloc[aa] = GenesisAccount{</span>
<span class="term-fg32">+		Balance: common.Big1,</span>
<span class="term-fg32">+		Nonce:   1,</span>
<span class="term-fg32">+		Storage: storage,</span>
<span class="term-fg32">+		Code:    common.Hex2Bytes(&quot;6042&quot;),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	gspec.Alloc[bb] = GenesisAccount{</span>
<span class="term-fg32">+		Balance: common.Big2,</span>
<span class="term-fg32">+		Nonce:   1,</span>
<span class="term-fg32">+		Storage: storage,</span>
<span class="term-fg32">+		Code:    common.Hex2Bytes(&quot;600154600354&quot;),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	genesis := gspec.MustCommit(gendb)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	chain, _ := GenerateChain(gspec.Config, genesis, beacon.NewFaker(), gendb, 4, func(i int, gen *BlockGen) {</span>
<span class="term-fg32">+		tx, _ := types.SignTx(types.NewTransaction(gen.TxNonce(address), address, big.NewInt(1000), params.TxGas, new(big.Int).Add(gen.BaseFee(), common.Big1), nil), signer, key)</span>
<span class="term-fg32">+		gen.AddTx(tx)</span>
<span class="term-fg32">+		if i == 1 {</span>
<span class="term-fg32">+			gen.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Validator: 42,</span>
<span class="term-fg32">+				Address:   common.Address{0xee},</span>
<span class="term-fg32">+				Amount:    1337,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+			gen.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Validator: 13,</span>
<span class="term-fg32">+				Address:   common.Address{0xee},</span>
<span class="term-fg32">+				Amount:    1,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if i == 3 {</span>
<span class="term-fg32">+			gen.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Validator: 42,</span>
<span class="term-fg32">+				Address:   common.Address{0xee},</span>
<span class="term-fg32">+				Amount:    1337,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+			gen.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Validator: 13,</span>
<span class="term-fg32">+				Address:   common.Address{0xee},</span>
<span class="term-fg32">+				Amount:    1,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Import the chain. This runs all block validation rules.</span>
<span class="term-fg32">+	blockchain, _ := NewBlockChain(db, nil, gspec, nil, beacon.NewFaker(), vm.Config{}, nil, nil)</span>
<span class="term-fg32">+	defer blockchain.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if i, err := blockchain.InsertChain(chain); err != nil {</span>
<span class="term-fg32">+		fmt.Printf(&quot;insert error (block %d): %v\n&quot;, chain[i].NumberU64(), err)</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; enforce that withdrawal indexes are monotonically increasing from 0</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		withdrawalIndex uint64</span>
<span class="term-fg32">+		head            = blockchain.CurrentBlock().Number.Uint64()</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	for i := 0; i &lt; int(head); i++ {</span>
<span class="term-fg32">+		block := blockchain.GetBlockByNumber(uint64(i))</span>
<span class="term-fg32">+		if block == nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;block %d not found&quot;, i)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if len(block.Withdrawals()) == 0 {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		for j := 0; j &lt; len(block.Withdrawals()); j++ {</span>
<span class="term-fg32">+			if block.Withdrawals()[j].Index != withdrawalIndex {</span>
<span class="term-fg32">+				t.Fatalf(&quot;withdrawal index %d does not equal expected index %d&quot;, block.Withdrawals()[j].Index, withdrawalIndex)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			withdrawalIndex += 1</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func ExampleGenerateChain() {
 	var (
 		key1, _ = crypto.HexToECDSA(&quot;b71c71a67e1177ad4e901695e1b4b9ee17ae16c6668d313eac2f96dbcda3f291&quot;)
<span class="term-fg36">@@ -88,7 +197,7 @@</span> 		return
 	}
&nbsp;
 	state, _ := blockchain.State()
<span class="term-fg31">-	fmt.Printf(&quot;last block: #%d\n&quot;, blockchain.CurrentBlock().Number())</span>
<span class="term-fg32">+	fmt.Printf(&quot;last block: #%d\n&quot;, blockchain.CurrentBlock().Number)</span>
 	fmt.Println(&quot;balance of addr1:&quot;, state.GetBalance(addr1))
 	fmt.Println(&quot;balance of addr2:&quot;, state.GetBalance(addr2))
 	fmt.Println(&quot;balance of addr3:&quot;, state.GetBalance(addr3))</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-958849028153868f9d75d7fc" role="button"
                   aria-expanded="false" aria-controls="id-958849028153868f9d75d7fc">
                    <code>core/dao_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/dao_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/dao_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-958849028153868f9d75d7fc"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;dao_test.go op-geth&#47;core&#47;dao_test.go</span>
<span class="term-fg1">index 4ae86b50ff1fe75a0314e85eaa7e6cc92d992264..f2e8dfe8f9aa3bdd784d558e817e494fb2a845a6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;dao_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;dao_test.go</span>
<span class="term-fg36">@@ -76,7 +76,7 @@</span> 	for i := int64(0); i &lt; params.DAOForkExtraRange.Int64(); i++ {
 		&#47;&#47; Create a pro-fork block, and try to feed into the no-fork chain
 		bc, _ := NewBlockChain(rawdb.NewMemoryDatabase(), nil, congspec, nil, ethash.NewFaker(), vm.Config{}, nil, nil)
&nbsp;
<span class="term-fg31">-		blocks := conBc.GetBlocksFromHash(conBc.CurrentBlock().Hash(), int(conBc.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+		blocks := conBc.GetBlocksFromHash(conBc.CurrentBlock().Hash(), int(conBc.CurrentBlock().Number.Uint64()))</span>
 		for j := 0; j &lt; len(blocks)&#47;2; j++ {
 			blocks[j], blocks[len(blocks)-1-j] = blocks[len(blocks)-1-j], blocks[j]
 		}
<span class="term-fg36">@@ -87,19 +87,19 @@</span> 		if err := bc.stateCache.TrieDB().Commit(bc.CurrentHeader().Root, false); err != nil {
 			t.Fatalf(&quot;failed to commit contra-fork head for expansion: %v&quot;, err)
 		}
 		bc.Stop()
<span class="term-fg31">-		blocks, _ = GenerateChain(&amp;proConf, conBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+		blocks, _ = GenerateChain(&amp;proConf, conBc.GetBlockByHash(conBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 		if _, err := conBc.InsertChain(blocks); err == nil {
 			t.Fatalf(&quot;contra-fork chain accepted pro-fork block: %v&quot;, blocks[0])
 		}
 		&#47;&#47; Create a proper no-fork block for the contra-forker
<span class="term-fg31">-		blocks, _ = GenerateChain(&amp;conConf, conBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+		blocks, _ = GenerateChain(&amp;conConf, conBc.GetBlockByHash(conBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 		if _, err := conBc.InsertChain(blocks); err != nil {
 			t.Fatalf(&quot;contra-fork chain didn&#39;t accepted no-fork block: %v&quot;, err)
 		}
 		&#47;&#47; Create a no-fork block, and try to feed into the pro-fork chain
 		bc, _ = NewBlockChain(rawdb.NewMemoryDatabase(), nil, progspec, nil, ethash.NewFaker(), vm.Config{}, nil, nil)
&nbsp;
<span class="term-fg31">-		blocks = proBc.GetBlocksFromHash(proBc.CurrentBlock().Hash(), int(proBc.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+		blocks = proBc.GetBlocksFromHash(proBc.CurrentBlock().Hash(), int(proBc.CurrentBlock().Number.Uint64()))</span>
 		for j := 0; j &lt; len(blocks)&#47;2; j++ {
 			blocks[j], blocks[len(blocks)-1-j] = blocks[len(blocks)-1-j], blocks[j]
 		}
<span class="term-fg36">@@ -110,12 +110,12 @@</span> 		if err := bc.stateCache.TrieDB().Commit(bc.CurrentHeader().Root, false); err != nil {
 			t.Fatalf(&quot;failed to commit pro-fork head for expansion: %v&quot;, err)
 		}
 		bc.Stop()
<span class="term-fg31">-		blocks, _ = GenerateChain(&amp;conConf, proBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+		blocks, _ = GenerateChain(&amp;conConf, proBc.GetBlockByHash(proBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 		if _, err := proBc.InsertChain(blocks); err == nil {
 			t.Fatalf(&quot;pro-fork chain accepted contra-fork block: %v&quot;, blocks[0])
 		}
 		&#47;&#47; Create a proper pro-fork block for the pro-forker
<span class="term-fg31">-		blocks, _ = GenerateChain(&amp;proConf, proBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+		blocks, _ = GenerateChain(&amp;proConf, proBc.GetBlockByHash(proBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 		if _, err := proBc.InsertChain(blocks); err != nil {
 			t.Fatalf(&quot;pro-fork chain didn&#39;t accepted pro-fork block: %v&quot;, err)
 		}
<span class="term-fg36">@@ -124,7 +124,7 @@</span> 	&#47;&#47; Verify that contra-forkers accept pro-fork extra-datas after forking finishes
 	bc, _ := NewBlockChain(rawdb.NewMemoryDatabase(), nil, congspec, nil, ethash.NewFaker(), vm.Config{}, nil, nil)
 	defer bc.Stop()
&nbsp;
<span class="term-fg31">-	blocks := conBc.GetBlocksFromHash(conBc.CurrentBlock().Hash(), int(conBc.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+	blocks := conBc.GetBlocksFromHash(conBc.CurrentBlock().Hash(), int(conBc.CurrentBlock().Number.Uint64()))</span>
 	for j := 0; j &lt; len(blocks)&#47;2; j++ {
 		blocks[j], blocks[len(blocks)-1-j] = blocks[len(blocks)-1-j], blocks[j]
 	}
<span class="term-fg36">@@ -134,7 +134,7 @@</span> 	}
 	if err := bc.stateCache.TrieDB().Commit(bc.CurrentHeader().Root, false); err != nil {
 		t.Fatalf(&quot;failed to commit contra-fork head for expansion: %v&quot;, err)
 	}
<span class="term-fg31">-	blocks, _ = GenerateChain(&amp;proConf, conBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+	blocks, _ = GenerateChain(&amp;proConf, conBc.GetBlockByHash(conBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 	if _, err := conBc.InsertChain(blocks); err != nil {
 		t.Fatalf(&quot;contra-fork chain didn&#39;t accept pro-fork block post-fork: %v&quot;, err)
 	}
<span class="term-fg36">@@ -142,7 +142,7 @@</span> 	&#47;&#47; Verify that pro-forkers accept contra-fork extra-datas after forking finishes
 	bc, _ = NewBlockChain(rawdb.NewMemoryDatabase(), nil, progspec, nil, ethash.NewFaker(), vm.Config{}, nil, nil)
 	defer bc.Stop()
&nbsp;
<span class="term-fg31">-	blocks = proBc.GetBlocksFromHash(proBc.CurrentBlock().Hash(), int(proBc.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+	blocks = proBc.GetBlocksFromHash(proBc.CurrentBlock().Hash(), int(proBc.CurrentBlock().Number.Uint64()))</span>
 	for j := 0; j &lt; len(blocks)&#47;2; j++ {
 		blocks[j], blocks[len(blocks)-1-j] = blocks[len(blocks)-1-j], blocks[j]
 	}
<span class="term-fg36">@@ -152,7 +152,7 @@</span> 	}
 	if err := bc.stateCache.TrieDB().Commit(bc.CurrentHeader().Root, false); err != nil {
 		t.Fatalf(&quot;failed to commit pro-fork head for expansion: %v&quot;, err)
 	}
<span class="term-fg31">-	blocks, _ = GenerateChain(&amp;conConf, proBc.CurrentBlock(), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
<span class="term-fg32">+	blocks, _ = GenerateChain(&amp;conConf, proBc.GetBlockByHash(proBc.CurrentBlock().Hash()), ethash.NewFaker(), genDb, 1, func(i int, gen *BlockGen) {})</span>
 	if _, err := proBc.InsertChain(blocks); err != nil {
 		t.Fatalf(&quot;pro-fork chain didn&#39;t accept contra-fork block post-fork: %v&quot;, err)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-43f8974ec0c65fd706264f2d" role="button"
                   aria-expanded="false" aria-controls="id-43f8974ec0c65fd706264f2d">
                    <code>core/error.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/error.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/error.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-43f8974ec0c65fd706264f2d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;error.go op-geth&#47;core&#47;error.go</span>
<span class="term-fg1">index 872ba8d365d8c152641f2dcd32b39343a285bd4d..d99b85e2490725b35c5797c93060ac7009b909d8 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;error.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;error.go</span>
<span class="term-fg36">@@ -100,4 +100,7 @@</span> 	ErrFeeCapTooLow = errors.New(&quot;max fee per gas less than block base fee&quot;)
&nbsp;
 	&#47;&#47; ErrSenderNoEOA is returned if the sender of a transaction is a contract.
 	ErrSenderNoEOA = errors.New(&quot;sender not an eoa&quot;)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; ErrSystemTxNotSupported is returned for any deposit tx with IsSystemTx=true after the Regolith fork</span>
<span class="term-fg32">+	ErrSystemTxNotSupported = errors.New(&quot;system tx not supported&quot;)</span>
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6080260ff0f22088c00ffa63" role="button"
                   aria-expanded="false" aria-controls="id-6080260ff0f22088c00ffa63">
                    <code>core/evm.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/evm.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/evm.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6080260ff0f22088c00ffa63"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;evm.go op-geth&#47;core&#47;evm.go</span>
<span class="term-fg1">index 35e12338ef05f9702c5d7f635865ed7beb45925b..527a81ad29d6d1b2faedb37579fce28d2ad24efd 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;evm.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;evm.go</span>
<span class="term-fg36">@@ -23,6 +23,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
 )
&nbsp;
 &#47;&#47; ChainContext supports retrieving headers and consensus parameters from the
<span class="term-fg36">@@ -36,7 +37,7 @@</span> 	GetHeader(common.Hash, uint64) *types.Header
 }
&nbsp;
 &#47;&#47; NewEVMBlockContext creates a new context for use in the EVM.
<span class="term-fg31">-func NewEVMBlockContext(header *types.Header, chain ChainContext, author *common.Address) vm.BlockContext {</span>
<span class="term-fg32">+func NewEVMBlockContext(header *types.Header, chain ChainContext, author *common.Address, config *params.ChainConfig, statedb types.StateGetter) vm.BlockContext {</span>
 	var (
 		beneficiary common.Address
 		baseFee     *big.Int
<span class="term-fg36">@@ -66,14 +67,15 @@</span> 		Difficulty:  new(big.Int).Set(header.Difficulty),
 		BaseFee:     baseFee,
 		GasLimit:    header.GasLimit,
 		Random:      random,
<span class="term-fg32">+		L1CostFunc:  types.NewL1CostFunc(config, statedb),</span>
 	}
 }
&nbsp;
 &#47;&#47; NewEVMTxContext creates a new transaction context for a single transaction.
<span class="term-fg31">-func NewEVMTxContext(msg Message) vm.TxContext {</span>
<span class="term-fg32">+func NewEVMTxContext(msg *Message) vm.TxContext {</span>
 	return vm.TxContext{
<span class="term-fg31">-		Origin:   msg.From(),</span>
<span class="term-fg31">-		GasPrice: new(big.Int).Set(msg.GasPrice()),</span>
<span class="term-fg32">+		Origin:   msg.From,</span>
<span class="term-fg32">+		GasPrice: new(big.Int).Set(msg.GasPrice),</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4ec53d691562edc61debee10" role="button"
                   aria-expanded="false" aria-controls="id-4ec53d691562edc61debee10">
                    <code>core/forkid/forkid_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/forkid/forkid_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/forkid/forkid_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+11</span></div>
                        <div class="text-start"><span class="text-danger">-9</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4ec53d691562edc61debee10"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;forkid&#47;forkid_test.go op-geth&#47;core&#47;forkid&#47;forkid_test.go</span>
<span class="term-fg1">index 08a1da706d57655d9f82e4765585b3772db7d30b..4dda280e71509e6c4df1dce0190417ae39c019bc 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;forkid&#47;forkid_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;forkid&#47;forkid_test.go</span>
<span class="term-fg36">@@ -107,14 +107,16 @@</span> 		{
 			params.GoerliChainConfig,
 			params.GoerliGenesisHash,
 			[]testcase{
<span class="term-fg31">-				{0, 0, ID{Hash: checksumToBytes(0xa3f5ab08), Next: 1561651}},       &#47;&#47; Unsynced, last Frontier, Homestead, Tangerine, Spurious, Byzantium, Constantinople and first Petersburg block</span>
<span class="term-fg31">-				{1561650, 0, ID{Hash: checksumToBytes(0xa3f5ab08), Next: 1561651}}, &#47;&#47; Last Petersburg block</span>
<span class="term-fg31">-				{1561651, 0, ID{Hash: checksumToBytes(0xc25efa5c), Next: 4460644}}, &#47;&#47; First Istanbul block</span>
<span class="term-fg31">-				{4460643, 0, ID{Hash: checksumToBytes(0xc25efa5c), Next: 4460644}}, &#47;&#47; Last Istanbul block</span>
<span class="term-fg31">-				{4460644, 0, ID{Hash: checksumToBytes(0x757a1c47), Next: 5062605}}, &#47;&#47; First Berlin block</span>
<span class="term-fg31">-				{5000000, 0, ID{Hash: checksumToBytes(0x757a1c47), Next: 5062605}}, &#47;&#47; Last Berlin block</span>
<span class="term-fg31">-				{5062605, 0, ID{Hash: checksumToBytes(0xB8C6299D), Next: 0}},       &#47;&#47; First London block</span>
<span class="term-fg31">-				{6000000, 0, ID{Hash: checksumToBytes(0xB8C6299D), Next: 0}},       &#47;&#47; Future London block</span>
<span class="term-fg32">+				{0, 0, ID{Hash: checksumToBytes(0xa3f5ab08), Next: 1561651}},                   &#47;&#47; Unsynced, last Frontier, Homestead, Tangerine, Spurious, Byzantium, Constantinople and first Petersburg block</span>
<span class="term-fg32">+				{1561650, 0, ID{Hash: checksumToBytes(0xa3f5ab08), Next: 1561651}},             &#47;&#47; Last Petersburg block</span>
<span class="term-fg32">+				{1561651, 0, ID{Hash: checksumToBytes(0xc25efa5c), Next: 4460644}},             &#47;&#47; First Istanbul block</span>
<span class="term-fg32">+				{4460643, 0, ID{Hash: checksumToBytes(0xc25efa5c), Next: 4460644}},             &#47;&#47; Last Istanbul block</span>
<span class="term-fg32">+				{4460644, 0, ID{Hash: checksumToBytes(0x757a1c47), Next: 5062605}},             &#47;&#47; First Berlin block</span>
<span class="term-fg32">+				{5000000, 0, ID{Hash: checksumToBytes(0x757a1c47), Next: 5062605}},             &#47;&#47; Last Berlin block</span>
<span class="term-fg32">+				{5062605, 0, ID{Hash: checksumToBytes(0xB8C6299D), Next: 1678832736}},          &#47;&#47; First London block</span>
<span class="term-fg32">+				{6000000, 1678832735, ID{Hash: checksumToBytes(0xB8C6299D), Next: 1678832736}}, &#47;&#47; Last London block</span>
<span class="term-fg32">+				{6000001, 1678832736, ID{Hash: checksumToBytes(0xf9843abf), Next: 0}},          &#47;&#47; First Shanghai block</span>
<span class="term-fg32">+				{6500000, 2678832736, ID{Hash: checksumToBytes(0xf9843abf), Next: 0}},          &#47;&#47; Future Shanghai block</span>
 			},
 		},
 		&#47;&#47; Sepolia test cases
<span class="term-fg36">@@ -306,7 +308,7 @@</span> 		{&amp;timestampedConfig, 20000000, 1668000000, ID{Hash: checksumToBytes(0xf0afd0e3), Next: 0}, ErrRemoteStale},
&nbsp;
 		&#47;&#47; Local is mainnet Gray Glacier, and isn&#39;t aware of more forks. Remote announces Gray Glacier +
 		&#47;&#47; 0xffffffff. Local needs software update, reject.
<span class="term-fg31">-		{&amp;timestampedConfig, 15050000, 0, ID{Hash: checksumToBytes(checksumUpdate(0xf0afd0e3, math.MaxUint64)), Next: 0}, ErrLocalIncompatibleOrStale},</span>
<span class="term-fg32">+		{params.MainnetChainConfig, 15050000, 0, ID{Hash: checksumToBytes(checksumUpdate(0xf0afd0e3, math.MaxUint64)), Next: 0}, ErrLocalIncompatibleOrStale},</span>
&nbsp;
 		&#47;&#47; Local is mainnet Gray Glacier, and is aware of Shanghai. Remote announces Shanghai +
 		&#47;&#47; 0xffffffff. Local needs software update, reject.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-21a967edcda49769042d2eb4" role="button"
                   aria-expanded="false" aria-controls="id-21a967edcda49769042d2eb4">
                    <code>core/gaspool.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/gaspool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/gaspool.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-21a967edcda49769042d2eb4"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;gaspool.go op-geth&#47;core&#47;gaspool.go</span>
<span class="term-fg1">index e3795c1ee9efc16a1a7c26e3712f73dcf65d976c..767222674f773777a2432d7a91c299e357d2a25d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;gaspool.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;gaspool.go</span>
<span class="term-fg36">@@ -49,6 +49,11 @@</span> func (gp *GasPool) Gas() uint64 {
 	return uint64(*gp)
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; SetGas sets the amount of gas with the provided number.</span>
<span class="term-fg32">+func (gp *GasPool) SetGas(gas uint64) {</span>
<span class="term-fg32">+	*(*uint64)(gp) = gas</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func (gp *GasPool) String() string {
 	return fmt.Sprintf(&quot;%d&quot;, *gp)
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-58d7eb1fe3036fad31781baf" role="button"
                   aria-expanded="false" aria-controls="id-58d7eb1fe3036fad31781baf">
                    <code>core/rawdb/accessors_chain.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/accessors_chain.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/accessors_chain.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-58d7eb1fe3036fad31781baf"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;accessors_chain.go op-geth&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg1">index e4dac3407fc58e7214211d1f0aecf6f1260803e5..7e41476b42e7734471dd99c3223af79979021d6e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;accessors_chain.go</span>
<span class="term-fg36">@@ -636,7 +636,12 @@</span> 	if body == nil {
 		log.Error(&quot;Missing body but have receipt&quot;, &quot;hash&quot;, hash, &quot;number&quot;, number)
 		return nil
 	}
<span class="term-fg31">-	if err := receipts.DeriveFields(config, hash, number, body.Transactions); err != nil {</span>
<span class="term-fg32">+	header := ReadHeader(db, hash, number)</span>
<span class="term-fg32">+	if header == nil {</span>
<span class="term-fg32">+		log.Error(&quot;Missing header but have receipt&quot;, &quot;hash&quot;, hash, &quot;number&quot;, number)</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := receipts.DeriveFields(config, hash, number, header.Time, header.BaseFee, body.Transactions); err != nil {</span>
 		log.Error(&quot;Failed to derive block receipts fields&quot;, &quot;hash&quot;, hash, &quot;number&quot;, number, &quot;err&quot;, err)
 		return nil
 	}
<span class="term-fg36">@@ -674,6 +679,15 @@</span> type storedReceiptRLP struct {
 	PostStateOrStatus []byte
 	CumulativeGasUsed uint64
 	Logs              []*types.Log
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Remaining fields are declared to allow the receipt RLP to be parsed without errors.</span>
<span class="term-fg32">+	&#47;&#47; However, they must not be used as they may not be populated correctly due to multiple receipt formats</span>
<span class="term-fg32">+	&#47;&#47; being combined into a single list of optional fields which can be mistaken for each other.</span>
<span class="term-fg32">+	&#47;&#47; DepositNonce (*uint64) from Regolith deposit tx receipts will be parsed into L1GasUsed</span>
<span class="term-fg32">+	L1GasUsed  *big.Int `rlp:&quot;optional&quot;` &#47;&#47; OVM legacy</span>
<span class="term-fg32">+	L1GasPrice *big.Int `rlp:&quot;optional&quot;` &#47;&#47; OVM legacy</span>
<span class="term-fg32">+	L1Fee      *big.Int `rlp:&quot;optional&quot;` &#47;&#47; OVM legacy</span>
<span class="term-fg32">+	FeeScalar  string   `rlp:&quot;optional&quot;` &#47;&#47; OVM legacy</span>
 }
&nbsp;
 &#47;&#47; ReceiptLogs is a barebone version of ReceiptForStorage which only keeps</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-182592dd9af32f5e75f11a06" role="button"
                   aria-expanded="false" aria-controls="id-182592dd9af32f5e75f11a06">
                    <code>core/rawdb/accessors_chain_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/accessors_chain_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/accessors_chain_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+41</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-182592dd9af32f5e75f11a06"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;accessors_chain_test.go op-geth&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg1">index 84eae1d90d25fc6025854543f97a33a704da031e..a99da4a84bd2ef22eae2d0f7f2af225443993dfa 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;accessors_chain_test.go</span>
<span class="term-fg36">@@ -27,10 +27,12 @@</span> 	&quot;reflect&quot;
 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
 	&quot;golang.org&#47;x&#47;crypto&#47;sha3&quot;
 )
&nbsp;
<span class="term-fg36">@@ -347,6 +349,9 @@</span> 	&#47;&#47; Create a live block since we need metadata to reconstruct the receipt
 	tx1 := types.NewTransaction(1, common.HexToAddress(&quot;0x1&quot;), big.NewInt(1), 1, big.NewInt(1), nil)
 	tx2 := types.NewTransaction(2, common.HexToAddress(&quot;0x2&quot;), big.NewInt(2), 2, big.NewInt(2), nil)
&nbsp;
<span class="term-fg32">+	header := &amp;types.Header{</span>
<span class="term-fg32">+		Number: big.NewInt(0),</span>
<span class="term-fg32">+	}</span>
 	body := &amp;types.Body{Transactions: types.Transactions{tx1, tx2}}
&nbsp;
 	&#47;&#47; Create the two receipts to manage afterwards
<span class="term-fg36">@@ -378,12 +383,15 @@</span> 	receipt2.Bloom = types.CreateBloom(types.Receipts{receipt2})
 	receipts := []*types.Receipt{receipt1, receipt2}
&nbsp;
 	&#47;&#47; Check that no receipt entries are in a pristine database
<span class="term-fg31">-	hash := common.BytesToHash([]byte{0x03, 0x14})</span>
<span class="term-fg32">+	hash := header.Hash()</span>
 	if rs := ReadReceipts(db, hash, 0, params.TestChainConfig); len(rs) != 0 {
 		t.Fatalf(&quot;non existent receipts returned: %v&quot;, rs)
 	}
 	&#47;&#47; Insert the body that corresponds to the receipts
 	WriteBody(db, hash, 0, body)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Insert the header that corresponds to the receipts</span>
<span class="term-fg32">+	WriteHeader(db, header)</span>
&nbsp;
 	&#47;&#47; Insert the receipt slice into the database and check presence
 	WriteReceipts(db, hash, 0, receipts)
<span class="term-fg36">@@ -698,6 +706,7 @@</span>
 	body := &amp;types.Body{Transactions: types.Transactions{tx1, tx2}}
&nbsp;
 	&#47;&#47; Create the two receipts to manage afterwards
<span class="term-fg32">+	depositNonce := uint64(math.MaxUint64)</span>
 	receipt1 := &amp;types.Receipt{
 		Status:            types.ReceiptStatusFailed,
 		CumulativeGasUsed: 1,
<span class="term-fg36">@@ -708,6 +717,7 @@</span> 		},
 		TxHash:          tx1.Hash(),
 		ContractAddress: common.BytesToAddress([]byte{0x01, 0x11, 0x11}),
 		GasUsed:         111111,
<span class="term-fg32">+		DepositNonce:    &amp;depositNonce,</span>
 	}
 	receipt1.Bloom = types.CreateBloom(types.Receipts{receipt1})
&nbsp;
<span class="term-fg36">@@ -765,6 +775,36 @@</span> 				t.Fatalf(&quot;receipt #%d: receipt mismatch: have %s, want %s&quot;, i, hex.EncodeToString(rlpHave), hex.EncodeToString(rlpWant))
 			}
 		}
 	}
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestParseLegacyReceiptRLP(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Create a gasUsed value greater than a uint64 can represent</span>
<span class="term-fg32">+	gasUsed := big.NewInt(0)</span>
<span class="term-fg32">+	gasUsed = gasUsed.SetUint64(math.MaxUint64)</span>
<span class="term-fg32">+	gasUsed = gasUsed.Add(gasUsed, big.NewInt(math.MaxInt64))</span>
<span class="term-fg32">+	sanityCheck := (&amp;big.Int{}).SetUint64(gasUsed.Uint64())</span>
<span class="term-fg32">+	require.NotEqual(t, gasUsed, sanityCheck)</span>
<span class="term-fg32">+	receipt := types.LegacyOptimismStoredReceiptRLP{</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*types.LogForStorage{</span>
<span class="term-fg32">+			{Address: common.BytesToAddress([]byte{0x11})},</span>
<span class="term-fg32">+			{Address: common.BytesToAddress([]byte{0x01, 0x11})},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		L1GasUsed:  gasUsed,</span>
<span class="term-fg32">+		L1GasPrice: gasUsed,</span>
<span class="term-fg32">+		L1Fee:      gasUsed,</span>
<span class="term-fg32">+		FeeScalar:  &quot;6&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	data, err := rlp.EncodeToBytes(receipt)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	var result storedReceiptRLP</span>
<span class="term-fg32">+	err = rlp.DecodeBytes(data, &amp;result)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.L1GasUsed, result.L1GasUsed)</span>
<span class="term-fg32">+	require.Equal(t, receipt.L1GasPrice, result.L1GasPrice)</span>
<span class="term-fg32">+	require.Equal(t, receipt.L1Fee, result.L1Fee)</span>
<span class="term-fg32">+	require.Equal(t, receipt.FeeScalar, result.FeeScalar)</span>
 }
&nbsp;
 func TestDeriveLogFields(t *testing.T) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3b00278df68f1029573f7974" role="button"
                   aria-expanded="false" aria-controls="id-3b00278df68f1029573f7974">
                    <code>core/rawdb/database.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/database.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/database.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+56</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3b00278df68f1029573f7974"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;database.go op-geth&#47;core&#47;rawdb&#47;database.go</span>
<span class="term-fg1">index 5b7299f38f865dabacaaaa758017cde3e0b8605b..6c545032f96992703251c5bbd526e84ef24d8a16 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;database.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;database.go</span>
<span class="term-fg36">@@ -202,6 +202,7 @@</span> func NewDatabaseWithFreezer(db ethdb.KeyValueStore, ancient string, namespace string, readonly bool) (ethdb.Database, error) {
 	&#47;&#47; Create the idle freezer instance
 	frdb, err := newChainFreezer(resolveChainFreezerDir(ancient), namespace, readonly)
 	if err != nil {
<span class="term-fg32">+		printChainMetadata(db)</span>
 		return nil, err
 	}
 	&#47;&#47; Since the freezer can be stored separately from the user&#39;s key-value database,
<span class="term-fg36">@@ -233,8 +234,10 @@</span> 			&#47;&#47; match, otherwise we might mix up freezers across chains and destroy both
 			&#47;&#47; the freezer and the key-value store.
 			frgenesis, err := frdb.Ancient(ChainFreezerHashTable, 0)
 			if err != nil {
<span class="term-fg32">+				printChainMetadata(db)</span>
 				return nil, fmt.Errorf(&quot;failed to retrieve genesis from ancient %v&quot;, err)
 			} else if !bytes.Equal(kvgenesis, frgenesis) {
<span class="term-fg32">+				printChainMetadata(db)</span>
 				return nil, fmt.Errorf(&quot;genesis mismatch: %#x (leveldb) != %#x (ancients)&quot;, kvgenesis, frgenesis)
 			}
 			&#47;&#47; Key-value store and freezer belong to the same network. Ensure that they
<span class="term-fg36">@@ -242,8 +245,19 @@</span> 			&#47;&#47; are contiguous, otherwise we might end up with a non-functional freezer.
 			if kvhash, _ := db.Get(headerHashKey(frozen)); len(kvhash) == 0 {
 				&#47;&#47; Subsequent header after the freezer limit is missing from the database.
 				&#47;&#47; Reject startup if the database has a more recent head.
<span class="term-fg31">-				if ldbNum := *ReadHeaderNumber(db, ReadHeadHeaderHash(db)); ldbNum &gt; frozen-1 {</span>
<span class="term-fg31">-					return nil, fmt.Errorf(&quot;gap in the chain between ancients (#%d) and leveldb (#%d) &quot;, frozen, ldbNum)</span>
<span class="term-fg32">+				if head := *ReadHeaderNumber(db, ReadHeadHeaderHash(db)); head &gt; frozen-1 {</span>
<span class="term-fg32">+					&#47;&#47; Find the smallest block stored in the key-value store</span>
<span class="term-fg32">+					&#47;&#47; in range of [frozen, head]</span>
<span class="term-fg32">+					var number uint64</span>
<span class="term-fg32">+					for number = frozen; number &lt;= head; number++ {</span>
<span class="term-fg32">+						if present, _ := db.Has(headerHashKey(number)); present {</span>
<span class="term-fg32">+							break</span>
<span class="term-fg32">+						}</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+					&#47;&#47; We are about to exit on error. Print database metdata beore exiting</span>
<span class="term-fg32">+					printChainMetadata(db)</span>
<span class="term-fg32">+					return nil, fmt.Errorf(&quot;gap in the chain between ancients [0 - #%d] and leveldb [#%d - #%d] &quot;,</span>
<span class="term-fg32">+						frozen-1, number, head)</span>
 				}
 				&#47;&#47; Database contains only older data than the freezer, this happens if the
 				&#47;&#47; state was wiped and reinited from an existing freezer.
<span class="term-fg36">@@ -260,6 +274,7 @@</span> 			if ReadHeadHeaderHash(db) != common.BytesToHash(kvgenesis) {
 				&#47;&#47; Key-value store contains more data than the genesis block, make sure we
 				&#47;&#47; didn&#39;t freeze anything yet.
 				if kvblob, _ := db.Get(headerHashKey(1)); len(kvblob) == 0 {
<span class="term-fg32">+					printChainMetadata(db)</span>
 					return nil, errors.New(&quot;ancient chain segments already extracted, please set --datadir.ancient to the correct path&quot;)
 				}
 				&#47;&#47; Block #1 is still in the database, we&#39;re allowed to init a new freezer
<span class="term-fg36">@@ -581,3 +596,42 @@</span> 		log.Error(&quot;Database contains unaccounted data&quot;, &quot;size&quot;, unaccounted.size, &quot;count&quot;, unaccounted.count)
 	}
 	return nil
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; printChainMetadata prints out chain metadata to stderr.</span>
<span class="term-fg32">+func printChainMetadata(db ethdb.KeyValueStore) {</span>
<span class="term-fg32">+	fmt.Fprintf(os.Stderr, &quot;Chain metadata\n&quot;)</span>
<span class="term-fg32">+	for _, v := range ReadChainMetadata(db) {</span>
<span class="term-fg32">+		fmt.Fprintf(os.Stderr, &quot;  %s\n&quot;, strings.Join(v, &quot;: &quot;))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	fmt.Fprintf(os.Stderr, &quot;\n\n&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ReadChainMetadata returns a set of key&#47;value pairs that contains informatin</span>
<span class="term-fg32">+&#47;&#47; about the database chain status. This can be used for diagnostic purposes</span>
<span class="term-fg32">+&#47;&#47; when investigating the state of the node.</span>
<span class="term-fg32">+func ReadChainMetadata(db ethdb.KeyValueStore) [][]string {</span>
<span class="term-fg32">+	pp := func(val *uint64) string {</span>
<span class="term-fg32">+		if val == nil {</span>
<span class="term-fg32">+			return &quot;&lt;nil&gt;&quot;</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return fmt.Sprintf(&quot;%d (%#x)&quot;, *val, *val)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	data := [][]string{</span>
<span class="term-fg32">+		{&quot;databaseVersion&quot;, pp(ReadDatabaseVersion(db))},</span>
<span class="term-fg32">+		{&quot;headBlockHash&quot;, fmt.Sprintf(&quot;%v&quot;, ReadHeadBlockHash(db))},</span>
<span class="term-fg32">+		{&quot;headFastBlockHash&quot;, fmt.Sprintf(&quot;%v&quot;, ReadHeadFastBlockHash(db))},</span>
<span class="term-fg32">+		{&quot;headHeaderHash&quot;, fmt.Sprintf(&quot;%v&quot;, ReadHeadHeaderHash(db))},</span>
<span class="term-fg32">+		{&quot;lastPivotNumber&quot;, pp(ReadLastPivotNumber(db))},</span>
<span class="term-fg32">+		{&quot;len(snapshotSyncStatus)&quot;, fmt.Sprintf(&quot;%d bytes&quot;, len(ReadSnapshotSyncStatus(db)))},</span>
<span class="term-fg32">+		{&quot;snapshotDisabled&quot;, fmt.Sprintf(&quot;%v&quot;, ReadSnapshotDisabled(db))},</span>
<span class="term-fg32">+		{&quot;snapshotJournal&quot;, fmt.Sprintf(&quot;%d bytes&quot;, len(ReadSnapshotJournal(db)))},</span>
<span class="term-fg32">+		{&quot;snapshotRecoveryNumber&quot;, pp(ReadSnapshotRecoveryNumber(db))},</span>
<span class="term-fg32">+		{&quot;snapshotRoot&quot;, fmt.Sprintf(&quot;%v&quot;, ReadSnapshotRoot(db))},</span>
<span class="term-fg32">+		{&quot;txIndexTail&quot;, pp(ReadTxIndexTail(db))},</span>
<span class="term-fg32">+		{&quot;fastTxLookupLimit&quot;, pp(ReadFastTxLookupLimit(db))},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if b := ReadSkeletonSyncStatus(db); b != nil {</span>
<span class="term-fg32">+		data = append(data, []string{&quot;SkeletonSyncStatus&quot;, string(b)})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return data</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8447d208d2600fd7b35e1bd8" role="button"
                   aria-expanded="false" aria-controls="id-8447d208d2600fd7b35e1bd8">
                    <code>core/rawdb/databases_64bit.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/databases_64bit.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/databases_64bit.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8447d208d2600fd7b35e1bd8"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;databases_64bit.go op-geth&#47;core&#47;rawdb&#47;databases_64bit.go</span>
<span class="term-fg1">index 139ce7d34777bf21b21daf91fa319e5405678df6..73bfeb20838f1a7af41117afac276712a73ee6b3 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;databases_64bit.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;databases_64bit.go</span>
<span class="term-fg36">@@ -14,7 +14,7 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build arm64 || amd64</span>
<span class="term-fg32">+&#47;&#47;go:build (arm64 || amd64) &amp;&amp; !openbsd</span>
&nbsp;
 package rawdb
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-934df9f935f68982ba340b52" role="button"
                   aria-expanded="false" aria-controls="id-934df9f935f68982ba340b52">
                    <code>core/rawdb/databases_non64bit.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/databases_non64bit.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/databases_non64bit.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-934df9f935f68982ba340b52"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;databases_non64bit.go op-geth&#47;core&#47;rawdb&#47;databases_non64bit.go</span>
<span class="term-fg1">index b8ab2ecada2f231816f8dc49f919432de825e45b..1f10c2f52bd209013f7d5e74539501b0ea13da0a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;databases_non64bit.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;databases_non64bit.go</span>
<span class="term-fg36">@@ -14,7 +14,7 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build !(arm64 || amd64)</span>
<span class="term-fg32">+&#47;&#47;go:build !((arm64 || amd64) &amp;&amp; !openbsd)</span>
&nbsp;
 package rawdb
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4c912ee917a1c24c828c44eb" role="button"
                   aria-expanded="false" aria-controls="id-4c912ee917a1c24c828c44eb">
                    <code>core/rawdb/freezer.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/rawdb/freezer.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/rawdb/freezer.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4c912ee917a1c24c828c44eb"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;rawdb&#47;freezer.go op-geth&#47;core&#47;rawdb&#47;freezer.go</span>
<span class="term-fg1">index 04c326c4f9e4640c26cb2c731c831d9602377583..60e2c56e0ff75bfe94c2598dc3f381b0019f2beb 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;rawdb&#47;freezer.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;rawdb&#47;freezer.go</span>
<span class="term-fg36">@@ -30,7 +30,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;
<span class="term-fg31">-	&quot;github.com&#47;prometheus&#47;tsdb&#47;fileutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;gofrs&#47;flock&quot;</span>
 )
&nbsp;
 var (
<span class="term-fg36">@@ -75,7 +75,7 @@</span> 	writeBatch *freezerBatch
&nbsp;
 	readonly     bool
 	tables       map[string]*freezerTable &#47;&#47; Data tables for storing everything
<span class="term-fg31">-	instanceLock fileutil.Releaser        &#47;&#47; File-system lock to prevent double opens</span>
<span class="term-fg32">+	instanceLock *flock.Flock             &#47;&#47; File-system lock to prevent double opens</span>
 	closeOnce    sync.Once
 }
&nbsp;
<span class="term-fg36">@@ -104,11 +104,17 @@</span> 			log.Warn(&quot;Symbolic link ancient database is not supported&quot;, &quot;path&quot;, datadir)
 			return nil, errSymlinkDatadir
 		}
 	}
<span class="term-fg32">+	flockFile := filepath.Join(datadir, &quot;FLOCK&quot;)</span>
<span class="term-fg32">+	if err := os.MkdirAll(filepath.Dir(flockFile), 0755); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Leveldb uses LOCK as the filelock filename. To prevent the
 	&#47;&#47; name collision, we use FLOCK as the lock name.
<span class="term-fg31">-	lock, _, err := fileutil.Flock(filepath.Join(datadir, &quot;FLOCK&quot;))</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg32">+	lock := flock.New(flockFile)</span>
<span class="term-fg32">+	if locked, err := lock.TryLock(); err != nil {</span>
 		return nil, err
<span class="term-fg32">+	} else if !locked {</span>
<span class="term-fg32">+		return nil, errors.New(&quot;locking failed&quot;)</span>
 	}
 	&#47;&#47; Open all the supported data tables
 	freezer := &amp;Freezer{
<span class="term-fg36">@@ -124,12 +130,12 @@</span> 		if err != nil {
 			for _, table := range freezer.tables {
 				table.Close()
 			}
<span class="term-fg31">-			lock.Release()</span>
<span class="term-fg32">+			lock.Unlock()</span>
 			return nil, err
 		}
 		freezer.tables[name] = table
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	var err error</span>
 	if freezer.readonly {
 		&#47;&#47; In readonly mode only validate, don&#39;t truncate.
 		&#47;&#47; validate also sets `freezer.frozen`.
<span class="term-fg36">@@ -142,7 +148,7 @@</span> 	if err != nil {
 		for _, table := range freezer.tables {
 			table.Close()
 		}
<span class="term-fg31">-		lock.Release()</span>
<span class="term-fg32">+		lock.Unlock()</span>
 		return nil, err
 	}
&nbsp;
<span class="term-fg36">@@ -165,7 +171,7 @@</span> 			if err := table.Close(); err != nil {
 				errs = append(errs, err)
 			}
 		}
<span class="term-fg31">-		if err := f.instanceLock.Release(); err != nil {</span>
<span class="term-fg32">+		if err := f.instanceLock.Unlock(); err != nil {</span>
 			errs = append(errs, err)
 		}
 	})</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4c5f007ae56bf836054dc462" role="button"
                   aria-expanded="false" aria-controls="id-4c5f007ae56bf836054dc462">
                    <code>core/types/block.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/block.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/block.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4c5f007ae56bf836054dc462"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;block.go op-geth&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">index 82ad3ce99cb7d614e01f1fc2f6aaebfb4b537d23..e2c71abebd7056b7ad0c09f72ed673bd8304c0db 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;block.go</span>
<span class="term-fg36">@@ -279,6 +279,7 @@</span> 		cpy.Extra = make([]byte, len(h.Extra))
 		copy(cpy.Extra, h.Extra)
 	}
 	if h.WithdrawalsHash != nil {
<span class="term-fg32">+		cpy.WithdrawalsHash = new(common.Hash)</span>
 		*cpy.WithdrawalsHash = *h.WithdrawalsHash
 	}
 	return &amp;cpy</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0432da56e2becdcb842aaa33" role="button"
                   aria-expanded="false" aria-controls="id-0432da56e2becdcb842aaa33">
                    <code>core/types/receipt_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/types/receipt_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/receipt_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+317</span></div>
                        <div class="text-start"><span class="text-danger">-97</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0432da56e2becdcb842aaa33"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;receipt_test.go op-geth&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg1">index f44bb80b04b4dafc00cf42869b32ffa71a9bac0c..3f3df0398357e71b5915b8f63e6adbdce9327067 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;receipt_test.go</span>
<span class="term-fg36">@@ -18,15 +18,18 @@</span> package types
&nbsp;
 import (
 	&quot;bytes&quot;
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&quot;
 	&quot;math&#47;big&quot;
 	&quot;reflect&quot;
 	&quot;testing&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;
<span class="term-fg32">+	&quot;github.com&#47;kylelemons&#47;godebug&#47;diff&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
 )
&nbsp;
 var (
<span class="term-fg36">@@ -80,6 +83,42 @@</span> 			},
 		},
 		Type: DynamicFeeTxType,
 	}
<span class="term-fg32">+	depositReceiptNoNonce = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: common.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []common.Hash{common.HexToHash(&quot;dead&quot;), common.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: common.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []common.Hash{common.HexToHash(&quot;dead&quot;), common.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: DepositTxType,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nonce                   = uint64(1234)</span>
<span class="term-fg32">+	depositReceiptWithNonce = &amp;Receipt{</span>
<span class="term-fg32">+		Status:            ReceiptStatusFailed,</span>
<span class="term-fg32">+		CumulativeGasUsed: 1,</span>
<span class="term-fg32">+		DepositNonce:      &amp;nonce,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: common.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+				Topics:  []common.Hash{common.HexToHash(&quot;dead&quot;), common.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Address: common.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+				Topics:  []common.Hash{common.HexToHash(&quot;dead&quot;), common.HexToHash(&quot;beef&quot;)},</span>
<span class="term-fg32">+				Data:    []byte{0x01, 0x00, 0xff},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Type: DepositTxType,</span>
<span class="term-fg32">+	}</span>
 )
&nbsp;
 func TestDecodeEmptyTypedReceipt(t *testing.T) {
<span class="term-fg36">@@ -96,122 +135,215 @@</span> func TestDeriveFields(t *testing.T) {
 	&#47;&#47; Create a few transactions to have receipts for
 	to2 := common.HexToAddress(&quot;0x2&quot;)
 	to3 := common.HexToAddress(&quot;0x3&quot;)
<span class="term-fg32">+	to4 := common.HexToAddress(&quot;0x4&quot;)</span>
<span class="term-fg32">+	to5 := common.HexToAddress(&quot;0x5&quot;)</span>
 	txs := Transactions{
 		NewTx(&amp;LegacyTx{
 			Nonce:    1,
 			Value:    big.NewInt(1),
 			Gas:      1,
<span class="term-fg31">-			GasPrice: big.NewInt(1),</span>
<span class="term-fg32">+			GasPrice: big.NewInt(11),</span>
 		}),
 		NewTx(&amp;LegacyTx{
 			To:       &amp;to2,
 			Nonce:    2,
 			Value:    big.NewInt(2),
 			Gas:      2,
<span class="term-fg31">-			GasPrice: big.NewInt(2),</span>
<span class="term-fg32">+			GasPrice: big.NewInt(22),</span>
 		}),
 		NewTx(&amp;AccessListTx{
 			To:       &amp;to3,
 			Nonce:    3,
 			Value:    big.NewInt(3),
 			Gas:      3,
<span class="term-fg31">-			GasPrice: big.NewInt(3),</span>
<span class="term-fg32">+			GasPrice: big.NewInt(33),</span>
<span class="term-fg32">+		}),</span>
<span class="term-fg32">+		&#47;&#47; EIP-1559 transactions.</span>
<span class="term-fg32">+		NewTx(&amp;DynamicFeeTx{</span>
<span class="term-fg32">+			To:        &amp;to4,</span>
<span class="term-fg32">+			Nonce:     4,</span>
<span class="term-fg32">+			Value:     big.NewInt(4),</span>
<span class="term-fg32">+			Gas:       4,</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(44),</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(1045),</span>
<span class="term-fg32">+		}),</span>
<span class="term-fg32">+		NewTx(&amp;DynamicFeeTx{</span>
<span class="term-fg32">+			To:        &amp;to5,</span>
<span class="term-fg32">+			Nonce:     5,</span>
<span class="term-fg32">+			Value:     big.NewInt(5),</span>
<span class="term-fg32">+			Gas:       5,</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(56),</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(1055),</span>
<span class="term-fg32">+		}),</span>
<span class="term-fg32">+		NewTx(&amp;DepositTx{</span>
<span class="term-fg32">+			To:    nil, &#47;&#47; contract creation</span>
<span class="term-fg32">+			Value: big.NewInt(6),</span>
<span class="term-fg32">+			Gas:   50,</span>
 		}),
 	}
<span class="term-fg32">+	depNonce := uint64(7)</span>
<span class="term-fg32">+	blockNumber := big.NewInt(1)</span>
<span class="term-fg32">+	blockHash := common.BytesToHash([]byte{0x03, 0x14})</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Create the corresponding receipts
 	receipts := Receipts{
 		&amp;Receipt{
 			Status:            ReceiptStatusFailed,
 			CumulativeGasUsed: 1,
 			Logs: []*Log{
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x11})},</span>
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x01, 0x11})},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x11}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[0].Hash(),</span>
<span class="term-fg32">+					TxIndex:     0,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       0,</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x01, 0x11}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[0].Hash(),</span>
<span class="term-fg32">+					TxIndex:     0,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       1,</span>
<span class="term-fg32">+				},</span>
 			},
<span class="term-fg31">-			TxHash:          txs[0].Hash(),</span>
<span class="term-fg31">-			ContractAddress: common.BytesToAddress([]byte{0x01, 0x11, 0x11}),</span>
<span class="term-fg31">-			GasUsed:         1,</span>
<span class="term-fg32">+			&#47;&#47; derived fields:</span>
<span class="term-fg32">+			TxHash:            txs[0].Hash(),</span>
<span class="term-fg32">+			ContractAddress:   common.HexToAddress(&quot;0x5a443704dd4b594b382c22a083e2bd3090a6fef3&quot;),</span>
<span class="term-fg32">+			GasUsed:           1,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(11),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  0,</span>
 		},
 		&amp;Receipt{
 			PostState:         common.Hash{2}.Bytes(),
 			CumulativeGasUsed: 3,
 			Logs: []*Log{
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x22})},</span>
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x02, 0x22})},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x22}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[1].Hash(),</span>
<span class="term-fg32">+					TxIndex:     1,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       2,</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x02, 0x22}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[1].Hash(),</span>
<span class="term-fg32">+					TxIndex:     1,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       3,</span>
<span class="term-fg32">+				},</span>
 			},
<span class="term-fg31">-			TxHash:          txs[1].Hash(),</span>
<span class="term-fg31">-			ContractAddress: common.BytesToAddress([]byte{0x02, 0x22, 0x22}),</span>
<span class="term-fg31">-			GasUsed:         2,</span>
<span class="term-fg32">+			&#47;&#47; derived fields:</span>
<span class="term-fg32">+			TxHash:            txs[1].Hash(),</span>
<span class="term-fg32">+			GasUsed:           2,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(22),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  1,</span>
 		},
 		&amp;Receipt{
 			Type:              AccessListTxType,
 			PostState:         common.Hash{3}.Bytes(),
 			CumulativeGasUsed: 6,
<span class="term-fg32">+			Logs:              []*Log{},</span>
<span class="term-fg32">+			&#47;&#47; derived fields:</span>
<span class="term-fg32">+			TxHash:            txs[2].Hash(),</span>
<span class="term-fg32">+			GasUsed:           3,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(33),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  2,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;Receipt{</span>
<span class="term-fg32">+			Type:              DynamicFeeTxType,</span>
<span class="term-fg32">+			PostState:         common.Hash{4}.Bytes(),</span>
<span class="term-fg32">+			CumulativeGasUsed: 10,</span>
<span class="term-fg32">+			Logs:              []*Log{},</span>
<span class="term-fg32">+			&#47;&#47; derived fields:</span>
<span class="term-fg32">+			TxHash:            txs[3].Hash(),</span>
<span class="term-fg32">+			GasUsed:           4,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(1044),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  3,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;Receipt{</span>
<span class="term-fg32">+			Type:              DynamicFeeTxType,</span>
<span class="term-fg32">+			PostState:         common.Hash{5}.Bytes(),</span>
<span class="term-fg32">+			CumulativeGasUsed: 15,</span>
<span class="term-fg32">+			Logs:              []*Log{},</span>
<span class="term-fg32">+			&#47;&#47; derived fields:</span>
<span class="term-fg32">+			TxHash:            txs[4].Hash(),</span>
<span class="term-fg32">+			GasUsed:           5,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(1055),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  4,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&amp;Receipt{</span>
<span class="term-fg32">+			Type:              DepositTxType,</span>
<span class="term-fg32">+			PostState:         common.Hash{5}.Bytes(),</span>
<span class="term-fg32">+			CumulativeGasUsed: 50 + 15,</span>
 			Logs: []*Log{
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x33})},</span>
<span class="term-fg31">-				{Address: common.BytesToAddress([]byte{0x03, 0x33})},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x33}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[5].Hash(),</span>
<span class="term-fg32">+					TxIndex:     5,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       4,</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				{</span>
<span class="term-fg32">+					Address: common.BytesToAddress([]byte{0x03, 0x33}),</span>
<span class="term-fg32">+					&#47;&#47; derived fields:</span>
<span class="term-fg32">+					BlockNumber: blockNumber.Uint64(),</span>
<span class="term-fg32">+					TxHash:      txs[5].Hash(),</span>
<span class="term-fg32">+					TxIndex:     5,</span>
<span class="term-fg32">+					BlockHash:   blockHash,</span>
<span class="term-fg32">+					Index:       5,</span>
<span class="term-fg32">+				},</span>
 			},
<span class="term-fg31">-			TxHash:          txs[2].Hash(),</span>
<span class="term-fg31">-			ContractAddress: common.BytesToAddress([]byte{0x03, 0x33, 0x33}),</span>
<span class="term-fg31">-			GasUsed:         3,</span>
<span class="term-fg32">+			TxHash:            txs[5].Hash(),</span>
<span class="term-fg32">+			ContractAddress:   common.HexToAddress(&quot;0x3bb898b4bbe24f68a4e9be46cfe72d1787fd74f4&quot;),</span>
<span class="term-fg32">+			GasUsed:           50,</span>
<span class="term-fg32">+			EffectiveGasPrice: big.NewInt(0),</span>
<span class="term-fg32">+			BlockHash:         blockHash,</span>
<span class="term-fg32">+			BlockNumber:       blockNumber,</span>
<span class="term-fg32">+			TransactionIndex:  5,</span>
<span class="term-fg32">+			DepositNonce:      &amp;depNonce,</span>
 		},
 	}
<span class="term-fg31">-	&#47;&#47; Clear all the computed fields and re-derive them</span>
<span class="term-fg31">-	number := big.NewInt(1)</span>
<span class="term-fg31">-	hash := common.BytesToHash([]byte{0x03, 0x14})</span>
&nbsp;
<span class="term-fg31">-	clearComputedFieldsOnReceipts(t, receipts)</span>
<span class="term-fg31">-	if err := receipts.DeriveFields(params.TestChainConfig, hash, number.Uint64(), txs); err != nil {</span>
<span class="term-fg32">+	&#47;&#47; Re-derive receipts.</span>
<span class="term-fg32">+	basefee := big.NewInt(1000)</span>
<span class="term-fg32">+	derivedReceipts := clearComputedFieldsOnReceipts(receipts)</span>
<span class="term-fg32">+	err := Receipts(derivedReceipts).DeriveFields(params.TestChainConfig, blockHash, blockNumber.Uint64(), 0, basefee, txs)</span>
<span class="term-fg32">+	if err != nil {</span>
 		t.Fatalf(&quot;DeriveFields(...) = %v, want &lt;nil&gt;&quot;, err)
 	}
<span class="term-fg31">-	&#47;&#47; Iterate over all the computed fields and check that they&#39;re correct</span>
<span class="term-fg31">-	signer := MakeSigner(params.TestChainConfig, number)</span>
&nbsp;
<span class="term-fg31">-	logIndex := uint(0)</span>
<span class="term-fg31">-	for i := range receipts {</span>
<span class="term-fg31">-		if receipts[i].Type != txs[i].Type() {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].Type = %d, want %d&quot;, i, receipts[i].Type, txs[i].Type())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if receipts[i].TxHash != txs[i].Hash() {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].TxHash = %s, want %s&quot;, i, receipts[i].TxHash.String(), txs[i].Hash().String())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if receipts[i].BlockHash != hash {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].BlockHash = %s, want %s&quot;, i, receipts[i].BlockHash.String(), hash.String())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if receipts[i].BlockNumber.Cmp(number) != 0 {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%c].BlockNumber = %s, want %s&quot;, i, receipts[i].BlockNumber.String(), number.String())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if receipts[i].TransactionIndex != uint(i) {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].TransactionIndex = %d, want %d&quot;, i, receipts[i].TransactionIndex, i)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if receipts[i].GasUsed != txs[i].Gas() {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].GasUsed = %d, want %d&quot;, i, receipts[i].GasUsed, txs[i].Gas())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		if txs[i].To() != nil &amp;&amp; receipts[i].ContractAddress != (common.Address{}) {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].ContractAddress = %s, want %s&quot;, i, receipts[i].ContractAddress.String(), (common.Address{}).String())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		from, _ := Sender(signer, txs[i])</span>
<span class="term-fg31">-		contractAddress := crypto.CreateAddress(from, txs[i].Nonce())</span>
<span class="term-fg31">-		if txs[i].To() == nil &amp;&amp; receipts[i].ContractAddress != contractAddress {</span>
<span class="term-fg31">-			t.Errorf(&quot;receipts[%d].ContractAddress = %s, want %s&quot;, i, receipts[i].ContractAddress.String(), contractAddress.String())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		for j := range receipts[i].Logs {</span>
<span class="term-fg31">-			if receipts[i].Logs[j].BlockNumber != number.Uint64() {</span>
<span class="term-fg31">-				t.Errorf(&quot;receipts[%d].Logs[%d].BlockNumber = %d, want %d&quot;, i, j, receipts[i].Logs[j].BlockNumber, number.Uint64())</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if receipts[i].Logs[j].BlockHash != hash {</span>
<span class="term-fg31">-				t.Errorf(&quot;receipts[%d].Logs[%d].BlockHash = %s, want %s&quot;, i, j, receipts[i].Logs[j].BlockHash.String(), hash.String())</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if receipts[i].Logs[j].TxHash != txs[i].Hash() {</span>
<span class="term-fg31">-				t.Errorf(&quot;receipts[%d].Logs[%d].TxHash = %s, want %s&quot;, i, j, receipts[i].Logs[j].TxHash.String(), txs[i].Hash().String())</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if receipts[i].Logs[j].TxIndex != uint(i) {</span>
<span class="term-fg31">-				t.Errorf(&quot;receipts[%d].Logs[%d].TransactionIndex = %d, want %d&quot;, i, j, receipts[i].Logs[j].TxIndex, i)</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			if receipts[i].Logs[j].Index != logIndex {</span>
<span class="term-fg31">-				t.Errorf(&quot;receipts[%d].Logs[%d].Index = %d, want %d&quot;, i, j, receipts[i].Logs[j].Index, logIndex)</span>
<span class="term-fg31">-			}</span>
<span class="term-fg31">-			logIndex++</span>
<span class="term-fg31">-		}</span>
<span class="term-fg32">+	&#47;&#47; Check diff of receipts against derivedReceipts.</span>
<span class="term-fg32">+	r1, err := json.MarshalIndent(receipts, &quot;&quot;, &quot;  &quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;error marshaling input receipts:&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	r2, err := json.MarshalIndent(derivedReceipts, &quot;&quot;, &quot;  &quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;error marshaling derived receipts:&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	d := diff.Diff(string(r1), string(r2))</span>
<span class="term-fg32">+	if d != &quot;&quot; {</span>
<span class="term-fg32">+		t.Fatal(&quot;receipts differ:&quot;, d)</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -342,41 +474,129 @@</span> 		t.Errorf(&quot;receipt unmarshalled from binary mismatch, got %v want %v&quot;, got1559Receipt, eip1559Receipt)
 	}
 }
&nbsp;
<span class="term-fg31">-func clearComputedFieldsOnReceipts(t *testing.T, receipts Receipts) {</span>
<span class="term-fg31">-	t.Helper()</span>
<span class="term-fg32">+func TestBedrockDepositReceiptUnchanged(t *testing.T) {</span>
<span class="term-fg32">+	expectedRlp := common.FromHex(&quot;7EF90156A003000000000000000000000000000000000000000000000000000000000000000AB9010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F0D7940000000000000000000000000000000000000033C001D7940000000000000000000000000000000000000333C002&quot;)</span>
<span class="term-fg32">+	&#47;&#47; Deposit receipt with no nonce</span>
<span class="term-fg32">+	receipt := &amp;Receipt{</span>
<span class="term-fg32">+		Type:              DepositTxType,</span>
<span class="term-fg32">+		PostState:         common.Hash{3}.Bytes(),</span>
<span class="term-fg32">+		CumulativeGasUsed: 10,</span>
<span class="term-fg32">+		Logs: []*Log{</span>
<span class="term-fg32">+			{Address: common.BytesToAddress([]byte{0x33}), Data: []byte{1}, Topics: []common.Hash{}},</span>
<span class="term-fg32">+			{Address: common.BytesToAddress([]byte{0x03, 0x33}), Data: []byte{2}, Topics: []common.Hash{}},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		TxHash:          common.Hash{},</span>
<span class="term-fg32">+		ContractAddress: common.BytesToAddress([]byte{0x03, 0x33, 0x33}),</span>
<span class="term-fg32">+		GasUsed:         4,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rlp, err := receipt.MarshalBinary()</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, expectedRlp, rlp)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Consensus values should be unchanged after reparsing</span>
<span class="term-fg32">+	parsed := new(Receipt)</span>
<span class="term-fg32">+	err = parsed.UnmarshalBinary(rlp)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Status, parsed.Status)</span>
<span class="term-fg32">+	require.Equal(t, receipt.CumulativeGasUsed, parsed.CumulativeGasUsed)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Bloom, parsed.Bloom)</span>
<span class="term-fg32">+	require.EqualValues(t, receipt.Logs, parsed.Logs)</span>
<span class="term-fg32">+	&#47;&#47; And still shouldn&#39;t have a nonce</span>
<span class="term-fg32">+	require.Nil(t, parsed.DepositNonce)</span>
<span class="term-fg32">+}</span>
&nbsp;
<span class="term-fg31">-	for _, receipt := range receipts {</span>
<span class="term-fg31">-		clearComputedFieldsOnReceipt(t, receipt)</span>
<span class="term-fg32">+func clearComputedFieldsOnReceipts(receipts []*Receipt) []*Receipt {</span>
<span class="term-fg32">+	r := make([]*Receipt, len(receipts))</span>
<span class="term-fg32">+	for i, receipt := range receipts {</span>
<span class="term-fg32">+		r[i] = clearComputedFieldsOnReceipt(receipt)</span>
 	}
<span class="term-fg32">+	return r</span>
 }
&nbsp;
<span class="term-fg31">-func clearComputedFieldsOnReceipt(t *testing.T, receipt *Receipt) {</span>
<span class="term-fg31">-	t.Helper()</span>
<span class="term-fg32">+func clearComputedFieldsOnReceipt(receipt *Receipt) *Receipt {</span>
<span class="term-fg32">+	cpy := *receipt</span>
<span class="term-fg32">+	cpy.TxHash = common.Hash{0xff, 0xff, 0x11}</span>
<span class="term-fg32">+	cpy.BlockHash = common.Hash{0xff, 0xff, 0x22}</span>
<span class="term-fg32">+	cpy.BlockNumber = big.NewInt(math.MaxUint32)</span>
<span class="term-fg32">+	cpy.TransactionIndex = math.MaxUint32</span>
<span class="term-fg32">+	cpy.ContractAddress = common.Address{0xff, 0xff, 0x33}</span>
<span class="term-fg32">+	cpy.GasUsed = 0xffffffff</span>
<span class="term-fg32">+	cpy.Logs = clearComputedFieldsOnLogs(receipt.Logs)</span>
<span class="term-fg32">+	return &amp;cpy</span>
<span class="term-fg32">+}</span>
&nbsp;
<span class="term-fg31">-	receipt.TxHash = common.Hash{}</span>
<span class="term-fg31">-	receipt.BlockHash = common.Hash{}</span>
<span class="term-fg31">-	receipt.BlockNumber = big.NewInt(math.MaxUint32)</span>
<span class="term-fg31">-	receipt.TransactionIndex = math.MaxUint32</span>
<span class="term-fg31">-	receipt.ContractAddress = common.Address{}</span>
<span class="term-fg31">-	receipt.GasUsed = 0</span>
<span class="term-fg32">+func clearComputedFieldsOnLogs(logs []*Log) []*Log {</span>
<span class="term-fg32">+	l := make([]*Log, len(logs))</span>
<span class="term-fg32">+	for i, log := range logs {</span>
<span class="term-fg32">+		cpy := *log</span>
<span class="term-fg32">+		cpy.BlockNumber = math.MaxUint32</span>
<span class="term-fg32">+		cpy.BlockHash = common.Hash{}</span>
<span class="term-fg32">+		cpy.TxHash = common.Hash{}</span>
<span class="term-fg32">+		cpy.TxIndex = math.MaxUint32</span>
<span class="term-fg32">+		cpy.Index = math.MaxUint32</span>
<span class="term-fg32">+		l[i] = &amp;cpy</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return l</span>
<span class="term-fg32">+}</span>
&nbsp;
<span class="term-fg31">-	clearComputedFieldsOnLogs(t, receipt.Logs)</span>
<span class="term-fg31">-}</span>
<span class="term-fg32">+func TestRoundTripReceipt(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name string</span>
<span class="term-fg32">+		rcpt *Receipt</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{name: &quot;Legacy&quot;, rcpt: legacyReceipt},</span>
<span class="term-fg32">+		{name: &quot;AccessList&quot;, rcpt: accessListReceipt},</span>
<span class="term-fg32">+		{name: &quot;EIP1559&quot;, rcpt: eip1559Receipt},</span>
<span class="term-fg32">+		{name: &quot;DepositNoNonce&quot;, rcpt: depositReceiptNoNonce},</span>
<span class="term-fg32">+		{name: &quot;DepositWithNonce&quot;, rcpt: depositReceiptWithNonce},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := test.rcpt.MarshalBinary()</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
&nbsp;
<span class="term-fg31">-func clearComputedFieldsOnLogs(t *testing.T, logs []*Log) {</span>
<span class="term-fg31">-	t.Helper()</span>
<span class="term-fg32">+			d := &amp;Receipt{}</span>
<span class="term-fg32">+			err = d.UnmarshalBinary(data)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt, d)</span>
<span class="term-fg32">+		})</span>
&nbsp;
<span class="term-fg31">-	for _, log := range logs {</span>
<span class="term-fg31">-		clearComputedFieldsOnLog(t, log)</span>
<span class="term-fg32">+		t.Run(fmt.Sprintf(&quot;%sRejectExtraData&quot;, test.name), func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := test.rcpt.MarshalBinary()</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			data = append(data, 1, 2, 3, 4)</span>
<span class="term-fg32">+			d := &amp;Receipt{}</span>
<span class="term-fg32">+			err = d.UnmarshalBinary(data)</span>
<span class="term-fg32">+			require.Error(t, err)</span>
<span class="term-fg32">+		})</span>
 	}
 }
&nbsp;
<span class="term-fg31">-func clearComputedFieldsOnLog(t *testing.T, log *Log) {</span>
<span class="term-fg31">-	t.Helper()</span>
<span class="term-fg32">+func TestRoundTripReceiptForStorage(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name string</span>
<span class="term-fg32">+		rcpt *Receipt</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{name: &quot;Legacy&quot;, rcpt: legacyReceipt},</span>
<span class="term-fg32">+		{name: &quot;AccessList&quot;, rcpt: accessListReceipt},</span>
<span class="term-fg32">+		{name: &quot;EIP1559&quot;, rcpt: eip1559Receipt},</span>
<span class="term-fg32">+		{name: &quot;DepositNoNonce&quot;, rcpt: depositReceiptNoNonce},</span>
<span class="term-fg32">+		{name: &quot;DepositWithNonce&quot;, rcpt: depositReceiptWithNonce},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			data, err := rlp.EncodeToBytes((*ReceiptForStorage)(test.rcpt))</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
&nbsp;
<span class="term-fg31">-	log.BlockNumber = math.MaxUint32</span>
<span class="term-fg31">-	log.BlockHash = common.Hash{}</span>
<span class="term-fg31">-	log.TxHash = common.Hash{}</span>
<span class="term-fg31">-	log.TxIndex = math.MaxUint32</span>
<span class="term-fg31">-	log.Index = math.MaxUint32</span>
<span class="term-fg32">+			d := &amp;ReceiptForStorage{}</span>
<span class="term-fg32">+			err = rlp.DecodeBytes(data, d)</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+			&#47;&#47; Only check the stored fields - the others are derived later</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.Status, d.Status)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.CumulativeGasUsed, d.CumulativeGasUsed)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.Logs, d.Logs)</span>
<span class="term-fg32">+			require.Equal(t, test.rcpt.DepositNonce, d.DepositNonce)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-beae2e8587a37bff1ca18e32" role="button"
                   aria-expanded="false" aria-controls="id-beae2e8587a37bff1ca18e32">
                    <code>core/types/rollup_l1_cost_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/types/rollup_l1_cost_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+30</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-beae2e8587a37bff1ca18e32"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;rollup_l1_cost_test.go op-geth&#47;core&#47;types&#47;rollup_l1_cost_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e43ea967ee87a257cfc2afa58396c2eb6685ed76</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;types&#47;rollup_l1_cost_test.go</span>
<span class="term-fg36">@@ -0,0 +1,30 @@</span>
<span class="term-fg32">+package types</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;rand&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestRollupGasData(t *testing.T) {</span>
<span class="term-fg32">+	for i := 0; i &lt; 100; i++ {</span>
<span class="term-fg32">+		zeroes := rand.Uint64()</span>
<span class="term-fg32">+		ones := rand.Uint64()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		r := RollupGasData{</span>
<span class="term-fg32">+			Zeroes: zeroes,</span>
<span class="term-fg32">+			Ones:   ones,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		time := uint64(1)</span>
<span class="term-fg32">+		cfg := &amp;params.ChainConfig{</span>
<span class="term-fg32">+			RegolithTime: &amp;time,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		gasPreRegolith := r.DataGas(0, cfg)</span>
<span class="term-fg32">+		gasPostRegolith := r.DataGas(1, cfg)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		require.Equal(t, r.Zeroes*params.TxDataZeroGas+(r.Ones+68)*params.TxDataNonZeroGasEIP2028, gasPreRegolith)</span>
<span class="term-fg32">+		require.Equal(t, r.Zeroes*params.TxDataZeroGas+r.Ones*params.TxDataNonZeroGasEIP2028, gasPostRegolith)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6674f505bf45735ef3f30678" role="button"
                   aria-expanded="false" aria-controls="id-6674f505bf45735ef3f30678">
                    <code>core/vm/contracts.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/vm/contracts.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/vm/contracts.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6674f505bf45735ef3f30678"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;vm&#47;contracts.go op-geth&#47;core&#47;vm&#47;contracts.go</span>
<span class="term-fg1">index 9a52616657bbcc993b492e274f6c03c633c1adfa..aa4a3f13df5ec20e88cdf836ba3ca302acc05c56 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;vm&#47;contracts.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;vm&#47;contracts.go</span>
<span class="term-fg36">@@ -29,7 +29,6 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&#47;blake2b&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&#47;bls12381&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&#47;bn256&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg31">-	big2 &quot;github.com&#47;holiman&#47;big&quot;</span>
 	&quot;golang.org&#47;x&#47;crypto&#47;ripemd160&quot;
 )
&nbsp;
<span class="term-fg36">@@ -378,9 +377,9 @@</span> 		return []byte{}, nil
 	}
 	&#47;&#47; Retrieve the operands and execute the exponentiation
 	var (
<span class="term-fg31">-		base = new(big2.Int).SetBytes(getData(input, 0, baseLen))</span>
<span class="term-fg31">-		exp  = new(big2.Int).SetBytes(getData(input, baseLen, expLen))</span>
<span class="term-fg31">-		mod  = new(big2.Int).SetBytes(getData(input, baseLen+expLen, modLen))</span>
<span class="term-fg32">+		base = new(big.Int).SetBytes(getData(input, 0, baseLen))</span>
<span class="term-fg32">+		exp  = new(big.Int).SetBytes(getData(input, baseLen, expLen))</span>
<span class="term-fg32">+		mod  = new(big.Int).SetBytes(getData(input, baseLen+expLen, modLen))</span>
 		v    []byte
 	)
 	switch {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2318df35e03b492eb92b48b0" role="button"
                   aria-expanded="false" aria-controls="id-2318df35e03b492eb92b48b0">
                    <code>core/vm/gas_table.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/core/vm/gas_table.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/core/vm/gas_table.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2318df35e03b492eb92b48b0"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;vm&#47;gas_table.go op-geth&#47;core&#47;vm&#47;gas_table.go</span>
<span class="term-fg1">index 65d46b3436d98673344ad9a7f2787f4994d43cc2..4f961ef4db3fc28472054d67a8e4a34dc8eb635b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;vm&#47;gas_table.go</span>
<span class="term-fg1">+++ op-geth&#47;core&#47;vm&#47;gas_table.go</span>
<span class="term-fg36">@@ -163,7 +163,7 @@</span> 	}
 	return params.NetSstoreDirtyGas, nil
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; Here come the EIP220 rules:</span>
<span class="term-fg32">+&#47;&#47; Here come the EIP2200 rules:</span>
 &#47;&#47;
 &#47;&#47;	(0.) If *gasleft* is less than or equal to 2300, fail the current call.
 &#47;&#47;	(1.) If current value equals new value (this is a no-op), SLOAD_GAS is deducted.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-60e57ecef50e5892160d5a94" role="button"
                   aria-expanded="false" aria-controls="id-60e57ecef50e5892160d5a94">
                    <code>eth/api.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/api.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+24</span></div>
                        <div class="text-start"><span class="text-danger">-16</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-60e57ecef50e5892160d5a94"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;api.go op-geth&#47;eth&#47;api.go</span>
<span class="term-fg1">index ceed85ef576b318d9d1d32c66e44a1f90322fe40..d0f6ba8fa6d0b90ab2dae01c5c9919dbd643bb00 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;api.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;api.go</span>
<span class="term-fg36">@@ -267,20 +267,24 @@</span> 		&#47;&#47; the miner and operate on those
 		_, stateDb := api.eth.miner.Pending()
 		return stateDb.RawDump(opts), nil
 	}
<span class="term-fg31">-	var block *types.Block</span>
<span class="term-fg32">+	var header *types.Header</span>
 	if blockNr == rpc.LatestBlockNumber {
<span class="term-fg31">-		block = api.eth.blockchain.CurrentBlock()</span>
<span class="term-fg32">+		header = api.eth.blockchain.CurrentBlock()</span>
 	} else if blockNr == rpc.FinalizedBlockNumber {
<span class="term-fg31">-		block = api.eth.blockchain.CurrentFinalizedBlock()</span>
<span class="term-fg32">+		header = api.eth.blockchain.CurrentFinalBlock()</span>
 	} else if blockNr == rpc.SafeBlockNumber {
<span class="term-fg31">-		block = api.eth.blockchain.CurrentSafeBlock()</span>
<span class="term-fg32">+		header = api.eth.blockchain.CurrentSafeBlock()</span>
 	} else {
<span class="term-fg31">-		block = api.eth.blockchain.GetBlockByNumber(uint64(blockNr))</span>
<span class="term-fg32">+		block := api.eth.blockchain.GetBlockByNumber(uint64(blockNr))</span>
<span class="term-fg32">+		if block == nil {</span>
<span class="term-fg32">+			return state.Dump{}, fmt.Errorf(&quot;block #%d not found&quot;, blockNr)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		header = block.Header()</span>
 	}
<span class="term-fg31">-	if block == nil {</span>
<span class="term-fg32">+	if header == nil {</span>
 		return state.Dump{}, fmt.Errorf(&quot;block #%d not found&quot;, blockNr)
 	}
<span class="term-fg31">-	stateDb, err := api.eth.BlockChain().StateAt(block.Root())</span>
<span class="term-fg32">+	stateDb, err := api.eth.BlockChain().StateAt(header.Root)</span>
 	if err != nil {
 		return state.Dump{}, err
 	}
<span class="term-fg36">@@ -320,7 +324,7 @@</span> 			blockRlp = err.Error() &#47;&#47; Hacky, but hey, it works
 		} else {
 			blockRlp = fmt.Sprintf(&quot;%#x&quot;, rlpBytes)
 		}
<span class="term-fg31">-		if blockJSON, err = ethapi.RPCMarshalBlock(block, true, true, api.eth.APIBackend.ChainConfig()); err != nil {</span>
<span class="term-fg32">+		if blockJSON, err = ethapi.RPCMarshalBlock(ctx, block, true, true, api.eth.APIBackend); err != nil {</span>
 			blockJSON = map[string]interface{}{&quot;error&quot;: err.Error()}
 		}
 		results = append(results, &amp;BadBlockArgs{
<span class="term-fg36">@@ -347,20 +351,24 @@</span> 			&#47;&#47; both the pending block as well as the pending state from
 			&#47;&#47; the miner and operate on those
 			_, stateDb = api.eth.miner.Pending()
 		} else {
<span class="term-fg31">-			var block *types.Block</span>
<span class="term-fg32">+			var header *types.Header</span>
 			if number == rpc.LatestBlockNumber {
<span class="term-fg31">-				block = api.eth.blockchain.CurrentBlock()</span>
<span class="term-fg32">+				header = api.eth.blockchain.CurrentBlock()</span>
 			} else if number == rpc.FinalizedBlockNumber {
<span class="term-fg31">-				block = api.eth.blockchain.CurrentFinalizedBlock()</span>
<span class="term-fg32">+				header = api.eth.blockchain.CurrentFinalBlock()</span>
 			} else if number == rpc.SafeBlockNumber {
<span class="term-fg31">-				block = api.eth.blockchain.CurrentSafeBlock()</span>
<span class="term-fg32">+				header = api.eth.blockchain.CurrentSafeBlock()</span>
 			} else {
<span class="term-fg31">-				block = api.eth.blockchain.GetBlockByNumber(uint64(number))</span>
<span class="term-fg32">+				block := api.eth.blockchain.GetBlockByNumber(uint64(number))</span>
<span class="term-fg32">+				if block == nil {</span>
<span class="term-fg32">+					return state.IteratorDump{}, fmt.Errorf(&quot;block #%d not found&quot;, number)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				header = block.Header()</span>
 			}
<span class="term-fg31">-			if block == nil {</span>
<span class="term-fg32">+			if header == nil {</span>
 				return state.IteratorDump{}, fmt.Errorf(&quot;block #%d not found&quot;, number)
 			}
<span class="term-fg31">-			stateDb, err = api.eth.BlockChain().StateAt(block.Root())</span>
<span class="term-fg32">+			stateDb, err = api.eth.BlockChain().StateAt(header.Root)</span>
 			if err != nil {
 				return state.IteratorDump{}, err
 			}
<span class="term-fg36">@@ -552,7 +560,7 @@</span> 			block := api.eth.blockchain.CurrentBlock()
 			if block == nil {
 				return 0, fmt.Errorf(&quot;current block missing&quot;)
 			}
<span class="term-fg31">-			return block.NumberU64(), nil</span>
<span class="term-fg32">+			return block.Number.Uint64(), nil</span>
 		}
 		return uint64(num.Int64()), nil
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a914bafbcdb4f1a7f5ffd7cc" role="button"
                   aria-expanded="false" aria-controls="id-a914bafbcdb4f1a7f5ffd7cc">
                    <code>eth/catalyst/api_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/catalyst/api_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/catalyst/api_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+104</span></div>
                        <div class="text-start"><span class="text-danger">-56</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a914bafbcdb4f1a7f5ffd7cc"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;catalyst&#47;api_test.go op-geth&#47;eth&#47;catalyst&#47;api_test.go</span>
<span class="term-fg1">index 4dc0c0ea7ea9962bdd62189ca391d18b6dbf2c09..fb6e6935ee4612fd3fa263734e32330fb1e854d6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;catalyst&#47;api_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;catalyst&#47;api_test.go</span>
<span class="term-fg36">@@ -19,8 +19,11 @@</span>
 import (
 	&quot;bytes&quot;
 	&quot;context&quot;
<span class="term-fg32">+	crand &quot;crypto&#47;rand&quot;</span>
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;math&#47;rand&quot;</span>
<span class="term-fg32">+	&quot;reflect&quot;</span>
 	&quot;sync&quot;
 	&quot;testing&quot;
 	&quot;time&quot;
<span class="term-fg36">@@ -41,7 +44,6 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;miner&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;node&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;trie&quot;
 )
<span class="term-fg36">@@ -248,8 +250,8 @@</span> 		time      uint64
 		shouldErr bool
 	}{
 		{0, true},
<span class="term-fg31">-		{parent.Time(), true},</span>
<span class="term-fg31">-		{parent.Time() - 1, true},</span>
<span class="term-fg32">+		{parent.Time, true},</span>
<span class="term-fg32">+		{parent.Time - 1, true},</span>
&nbsp;
 		&#47;&#47; TODO (MariusVanDerWijden) following tests are currently broken,
 		&#47;&#47; fixed in upcoming merge-kiln-v2 pr
<span class="term-fg36">@@ -262,7 +264,7 @@</span> 		t.Run(fmt.Sprintf(&quot;Timestamp test: %v&quot;, i), func(t *testing.T) {
 			params := engine.PayloadAttributes{
 				Timestamp:             test.time,
 				Random:                crypto.Keccak256Hash([]byte{byte(123)}),
<span class="term-fg31">-				SuggestedFeeRecipient: parent.Coinbase(),</span>
<span class="term-fg32">+				SuggestedFeeRecipient: parent.Coinbase,</span>
 			}
 			fcState := engine.ForkchoiceStateV1{
 				HeadBlockHash:      parent.Hash(),
<span class="term-fg36">@@ -319,7 +321,7 @@</span> 		case err != nil:
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		case newResp.Status != &quot;VALID&quot;:
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, newResp.Status)
<span class="term-fg31">-		case ethservice.BlockChain().CurrentBlock().NumberU64() != block.NumberU64()-1:</span>
<span class="term-fg32">+		case ethservice.BlockChain().CurrentBlock().Number.Uint64() != block.NumberU64()-1:</span>
 			t.Fatalf(&quot;Chain head shouldn&#39;t be updated&quot;)
 		}
 		checkLogEvents(t, newLogCh, rmLogsCh, 0, 0)
<span class="term-fg36">@@ -331,7 +333,7 @@</span> 		}
 		if _, err := api.ForkchoiceUpdatedV1(fcState, nil); err != nil {
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		}
<span class="term-fg31">-		if have, want := ethservice.BlockChain().CurrentBlock().NumberU64(), block.NumberU64(); have != want {</span>
<span class="term-fg32">+		if have, want := ethservice.BlockChain().CurrentBlock().Number.Uint64(), block.NumberU64(); have != want {</span>
 			t.Fatalf(&quot;Chain head should be updated, have %d want %d&quot;, have, want)
 		}
 		checkLogEvents(t, newLogCh, rmLogsCh, 1, 0)
<span class="term-fg36">@@ -341,7 +343,7 @@</span> 	}
&nbsp;
 	&#47;&#47; Introduce fork chain
 	var (
<span class="term-fg31">-		head = ethservice.BlockChain().CurrentBlock().NumberU64()</span>
<span class="term-fg32">+		head = ethservice.BlockChain().CurrentBlock().Number.Uint64()</span>
 	)
 	parent = preMergeBlocks[len(preMergeBlocks)-1]
 	for i := 0; i &lt; 10; i++ {
<span class="term-fg36">@@ -359,7 +361,7 @@</span> 		newResp, err := api.NewPayloadV1(*execData)
 		if err != nil || newResp.Status != &quot;VALID&quot; {
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentBlock().NumberU64() != head {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentBlock().Number.Uint64() != head {</span>
 			t.Fatalf(&quot;Chain head shouldn&#39;t be updated&quot;)
 		}
&nbsp;
<span class="term-fg36">@@ -371,7 +373,7 @@</span> 		}
 		if _, err := api.ForkchoiceUpdatedV1(fcState, nil); err != nil {
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentBlock().NumberU64() != block.NumberU64() {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentBlock().Number.Uint64() != block.NumberU64() {</span>
 			t.Fatalf(&quot;Chain head should be updated&quot;)
 		}
 		parent, head = block, block.NumberU64()
<span class="term-fg36">@@ -389,7 +391,7 @@</span>
 		var (
 			api    = NewConsensusAPI(ethservice, nil)
 			parent = preMergeBlocks[len(preMergeBlocks)-core.TriesInMemory-1]
<span class="term-fg31">-			head   = ethservice.BlockChain().CurrentBlock().NumberU64()</span>
<span class="term-fg32">+			head   = ethservice.BlockChain().CurrentBlock().Number.Uint64()()</span>
 		)
 		if ethservice.BlockChain().HasBlockAndState(parent.Hash(), parent.NumberU64()) {
 			t.Errorf(&quot;Block %d not pruned&quot;, parent.NumberU64())
<span class="term-fg36">@@ -410,13 +412,13 @@</span> 			newResp, err := api.ExecutePayload(*execData)
 			if err != nil || newResp.Status != &quot;VALID&quot; {
 				t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 			}
<span class="term-fg31">-			if ethservice.BlockChain().CurrentBlock().NumberU64() != head {</span>
<span class="term-fg32">+			if ethservice.BlockChain().CurrentBlock().Number.Uint64()() != head {</span>
 				t.Fatalf(&quot;Chain head shouldn&#39;t be updated&quot;)
 			}
 			if err := api.setHead(block.Hash()); err != nil {
 				t.Fatalf(&quot;Failed to set head: %v&quot;, err)
 			}
<span class="term-fg31">-			if ethservice.BlockChain().CurrentBlock().NumberU64() != block.NumberU64() {</span>
<span class="term-fg32">+			if ethservice.BlockChain().CurrentBlock().Number.Uint64()() != block.NumberU64() {</span>
 				t.Fatalf(&quot;Chain head should be updated&quot;)
 			}
 			parent, head = block, block.NumberU64()
<span class="term-fg36">@@ -466,25 +468,28 @@</span> 		&#47;&#47; This EVM code generates a log when the contract is created.
 		logCode = common.Hex2Bytes(&quot;60606040525b7f24ec1d3ff24c2f6ff210738839dbc339cd45a5294d85c79361016243157aae7b60405180905060405180910390a15b600a8060416000396000f360606040526008565b00&quot;)
 	)
&nbsp;
<span class="term-fg31">-	callback := func(parent *types.Block) {</span>
<span class="term-fg31">-		statedb, _ := ethservice.BlockChain().StateAt(parent.Root())</span>
<span class="term-fg32">+	callback := func(parent *types.Header) {</span>
<span class="term-fg32">+		statedb, _ := ethservice.BlockChain().StateAt(parent.Root)</span>
 		nonce := statedb.GetNonce(testAddr)
 		tx, _ := types.SignTx(types.NewContractCreation(nonce, new(big.Int), 1000000, big.NewInt(2*params.InitialBaseFee), logCode), types.LatestSigner(ethservice.BlockChain().Config()), testKey)
 		ethservice.TxPool().AddLocal(tx)
 	}
&nbsp;
<span class="term-fg31">-	setupBlocks(t, ethservice, 10, parent, callback)</span>
<span class="term-fg32">+	setupBlocks(t, ethservice, 10, parent, callback, nil)</span>
 }
&nbsp;
<span class="term-fg31">-func setupBlocks(t *testing.T, ethservice *eth.Ethereum, n int, parent *types.Block, callback func(parent *types.Block)) []*types.Block {</span>
<span class="term-fg32">+func setupBlocks(t *testing.T, ethservice *eth.Ethereum, n int, parent *types.Header, callback func(parent *types.Header), withdrawals [][]*types.Withdrawal) []*types.Header {</span>
 	api := NewConsensusAPI(ethservice)
<span class="term-fg31">-	var blocks []*types.Block</span>
<span class="term-fg32">+	var blocks []*types.Header</span>
 	for i := 0; i &lt; n; i++ {
 		callback(parent)
<span class="term-fg31">-</span>
<span class="term-fg31">-		payload := getNewPayload(t, api, parent)</span>
<span class="term-fg32">+		var w []*types.Withdrawal</span>
<span class="term-fg32">+		if withdrawals != nil {</span>
<span class="term-fg32">+			w = withdrawals[i]</span>
<span class="term-fg32">+		}</span>
&nbsp;
<span class="term-fg31">-		execResp, err := api.NewPayloadV1(*payload)</span>
<span class="term-fg32">+		payload := getNewPayload(t, api, parent, w)</span>
<span class="term-fg32">+		execResp, err := api.NewPayloadV2(*payload)</span>
 		if err != nil {
 			t.Fatalf(&quot;can&#39;t execute payload: %v&quot;, err)
 		}
<span class="term-fg36">@@ -499,10 +504,10 @@</span> 		}
 		if _, err := api.ForkchoiceUpdatedV1(fcState, nil); err != nil {
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentBlock().NumberU64() != payload.Number {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentBlock().Number.Uint64() != payload.Number {</span>
 			t.Fatal(&quot;Chain head should be updated&quot;)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentFinalizedBlock().NumberU64() != payload.Number-1 {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentFinalBlock().Number.Uint64() != payload.Number-1 {</span>
 			t.Fatal(&quot;Finalized block should be updated&quot;)
 		}
 		parent = ethservice.BlockChain().CurrentBlock()
<span class="term-fg36">@@ -585,7 +590,7 @@</span> 		&#47;&#47; This EVM code generates a log when the contract is created.
 		logCode = common.Hex2Bytes(&quot;60606040525b7f24ec1d3ff24c2f6ff210738839dbc339cd45a5294d85c79361016243157aae7b60405180905060405180910390a15b600a8060416000396000f360606040526008565b00&quot;)
 	)
 	for i := 0; i &lt; 10; i++ {
<span class="term-fg31">-		statedb, _ := ethservice.BlockChain().StateAt(parent.Root())</span>
<span class="term-fg32">+		statedb, _ := ethservice.BlockChain().StateAt(parent.Root)</span>
 		tx := types.MustSignNewTx(testKey, signer, &amp;types.LegacyTx{
 			Nonce:    statedb.GetNonce(testAddr),
 			Value:    new(big.Int),
<span class="term-fg36">@@ -596,9 +601,9 @@</span> 		})
 		ethservice.TxPool().AddRemotesSync([]*types.Transaction{tx})
 		var (
 			params = engine.PayloadAttributes{
<span class="term-fg31">-				Timestamp:             parent.Time() + 1,</span>
<span class="term-fg32">+				Timestamp:             parent.Time + 1,</span>
 				Random:                crypto.Keccak256Hash([]byte{byte(i)}),
<span class="term-fg31">-				SuggestedFeeRecipient: parent.Coinbase(),</span>
<span class="term-fg32">+				SuggestedFeeRecipient: parent.Coinbase,</span>
 			}
 			fcState = engine.ForkchoiceStateV1{
 				HeadBlockHash:      parent.Hash(),
<span class="term-fg36">@@ -645,7 +650,7 @@</span> 		}
 		if _, err := api.ForkchoiceUpdatedV1(fcState, nil); err != nil {
 			t.Fatalf(&quot;Failed to insert block: %v&quot;, err)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentBlock().NumberU64() != payload.Number {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentBlock().Number.Uint64() != payload.Number {</span>
 			t.Fatalf(&quot;Chain head should be updated&quot;)
 		}
 		parent = ethservice.BlockChain().CurrentBlock()
<span class="term-fg36">@@ -676,10 +681,10 @@</span> 	commonAncestor := ethservice.BlockChain().CurrentBlock()
 	api := NewConsensusAPI(ethservice)
&nbsp;
 	&#47;&#47; Setup 10 blocks on the canonical chain
<span class="term-fg31">-	setupBlocks(t, ethservice, 10, commonAncestor, func(parent *types.Block) {})</span>
<span class="term-fg32">+	setupBlocks(t, ethservice, 10, commonAncestor, func(parent *types.Header) {}, nil)</span>
&nbsp;
 	&#47;&#47; (1) check LatestValidHash by sending a normal payload (P1&#39;&#39;)
<span class="term-fg31">-	payload := getNewPayload(t, api, commonAncestor)</span>
<span class="term-fg32">+	payload := getNewPayload(t, api, commonAncestor, nil)</span>
&nbsp;
 	status, err := api.NewPayloadV1(*payload)
 	if err != nil {
<span class="term-fg36">@@ -693,7 +698,7 @@</span> 		t.Fatalf(&quot;invalid LVH: got %v want %v&quot;, status.LatestValidHash, payload.BlockHash)
 	}
&nbsp;
 	&#47;&#47; (2) Now send P1&#39; which is invalid
<span class="term-fg31">-	payload = getNewPayload(t, api, commonAncestor)</span>
<span class="term-fg32">+	payload = getNewPayload(t, api, commonAncestor, nil)</span>
 	payload.GasUsed += 1
 	payload = setBlockhash(payload)
 	&#47;&#47; Now latestValidHash should be the common ancestor
<span class="term-fg36">@@ -711,7 +716,7 @@</span> 		t.Fatalf(&quot;invalid LVH: got %v want %v&quot;, status.LatestValidHash, expected)
 	}
&nbsp;
 	&#47;&#47; (3) Now send a payload with unknown parent
<span class="term-fg31">-	payload = getNewPayload(t, api, commonAncestor)</span>
<span class="term-fg32">+	payload = getNewPayload(t, api, commonAncestor, nil)</span>
 	payload.ParentHash = common.Hash{1}
 	payload = setBlockhash(payload)
 	&#47;&#47; Now latestValidHash should be the common ancestor
<span class="term-fg36">@@ -727,11 +732,12 @@</span> 		t.Fatalf(&quot;invalid LVH: got %v wanted nil&quot;, status.LatestValidHash)
 	}
 }
&nbsp;
<span class="term-fg31">-func getNewPayload(t *testing.T, api *ConsensusAPI, parent *types.Block) *engine.ExecutableData {</span>
<span class="term-fg32">+func getNewPayload(t *testing.T, api *ConsensusAPI, parent *types.Header, withdrawals []*types.Withdrawal) *engine.ExecutableData {</span>
 	params := engine.PayloadAttributes{
<span class="term-fg31">-		Timestamp:             parent.Time() + 1,</span>
<span class="term-fg32">+		Timestamp:             parent.Time + 1,</span>
 		Random:                crypto.Keccak256Hash([]byte{byte(1)}),
<span class="term-fg31">-		SuggestedFeeRecipient: parent.Coinbase(),</span>
<span class="term-fg32">+		SuggestedFeeRecipient: parent.Coinbase,</span>
<span class="term-fg32">+		Withdrawals:           withdrawals,</span>
 	}
&nbsp;
 	payload, err := assembleBlock(api, parent.Hash(), &amp;params)
<span class="term-fg36">@@ -799,7 +805,7 @@</span>
 	commonAncestor := ethserviceA.BlockChain().CurrentBlock()
&nbsp;
 	&#47;&#47; Setup 10 blocks on the canonical chain
<span class="term-fg31">-	setupBlocks(t, ethserviceA, 10, commonAncestor, func(parent *types.Block) {})</span>
<span class="term-fg32">+	setupBlocks(t, ethserviceA, 10, commonAncestor, func(parent *types.Header) {}, nil)</span>
 	commonAncestor = ethserviceA.BlockChain().CurrentBlock()
&nbsp;
 	var invalidChain []*engine.ExecutableData
<span class="term-fg36">@@ -808,7 +814,7 @@</span> 	&#47;&#47;payload1 := getNewPayload(t, apiA, commonAncestor)
 	&#47;&#47;invalidChain = append(invalidChain, payload1)
&nbsp;
 	&#47;&#47; create an invalid payload2 (P2)
<span class="term-fg31">-	payload2 := getNewPayload(t, apiA, commonAncestor)</span>
<span class="term-fg32">+	payload2 := getNewPayload(t, apiA, commonAncestor, nil)</span>
 	&#47;&#47;payload2.ParentHash = payload1.BlockHash
 	payload2.GasUsed += 1
 	payload2 = setBlockhash(payload2)
<span class="term-fg36">@@ -817,7 +823,7 @@</span>
 	head := payload2
 	&#47;&#47; create some valid payloads on top
 	for i := 0; i &lt; 10; i++ {
<span class="term-fg31">-		payload := getNewPayload(t, apiA, commonAncestor)</span>
<span class="term-fg32">+		payload := getNewPayload(t, apiA, commonAncestor, nil)</span>
 		payload.ParentHash = head.BlockHash
 		payload = setBlockhash(payload)
 		invalidChain = append(invalidChain, payload)
<span class="term-fg36">@@ -855,10 +861,10 @@</span> 	commonAncestor := ethservice.BlockChain().CurrentBlock()
 	api := NewConsensusAPI(ethservice)
&nbsp;
 	&#47;&#47; Setup 10 blocks on the canonical chain
<span class="term-fg31">-	setupBlocks(t, ethservice, 10, commonAncestor, func(parent *types.Block) {})</span>
<span class="term-fg32">+	setupBlocks(t, ethservice, 10, commonAncestor, func(parent *types.Header) {}, nil)</span>
&nbsp;
 	&#47;&#47; (1) check LatestValidHash by sending a normal payload (P1&#39;&#39;)
<span class="term-fg31">-	payload := getNewPayload(t, api, commonAncestor)</span>
<span class="term-fg32">+	payload := getNewPayload(t, api, commonAncestor, nil)</span>
 	payload.LogsBloom = append(payload.LogsBloom, byte(1))
 	status, err := api.NewPayloadV1(*payload)
 	if err != nil {
<span class="term-fg36">@@ -874,7 +880,7 @@</span> 	genesis, preMergeBlocks := generateMergeChain(100, false)
 	n, ethservice := startEthService(t, genesis, preMergeBlocks)
 	defer n.Close()
&nbsp;
<span class="term-fg31">-	genesis.Config.TerminalTotalDifficulty = preMergeBlocks[0].Difficulty() &#47;&#47;.Sub(genesis.Config.TerminalTotalDifficulty, preMergeBlocks[len(preMergeBlocks)-1].Difficulty())</span>
<span class="term-fg32">+	ethservice.BlockChain().Config().TerminalTotalDifficulty = preMergeBlocks[0].Difficulty() &#47;&#47;.Sub(genesis.Config.TerminalTotalDifficulty, preMergeBlocks[len(preMergeBlocks)-1].Difficulty())</span>
&nbsp;
 	var (
 		api    = NewConsensusAPI(ethservice)
<span class="term-fg36">@@ -966,7 +972,7 @@</span> 		block, err := engine.ExecutableDataToBlock(*execData)
 		if err != nil {
 			t.Fatalf(&quot;Failed to convert executable data to block %v&quot;, err)
 		}
<span class="term-fg31">-		if ethservice.BlockChain().CurrentBlock().NumberU64() != block.NumberU64()-1 {</span>
<span class="term-fg32">+		if ethservice.BlockChain().CurrentBlock().Number.Uint64() != block.NumberU64()-1 {</span>
 			t.Fatalf(&quot;Chain head shouldn&#39;t be updated&quot;)
 		}
 		fcState := engine.ForkchoiceStateV1{
<span class="term-fg36">@@ -997,7 +1003,7 @@</span> 			if testErr != nil {
 				t.Fatal(testErr)
 			}
 		}
<span class="term-fg31">-		if have, want := ethservice.BlockChain().CurrentBlock().NumberU64(), block.NumberU64(); have != want {</span>
<span class="term-fg32">+		if have, want := ethservice.BlockChain().CurrentBlock().Number.Uint64(), block.NumberU64(); have != want {</span>
 			t.Fatalf(&quot;Chain head should be updated, have %d want %d&quot;, have, want)
 		}
 		parent = block
<span class="term-fg36">@@ -1233,8 +1239,10 @@</span> 	}
 }
&nbsp;
 func setupBodies(t *testing.T) (*node.Node, *eth.Ethereum, []*types.Block) {
<span class="term-fg31">-	genesis, preMergeBlocks := generateMergeChain(10, false)</span>
<span class="term-fg31">-	n, ethservice := startEthService(t, genesis, preMergeBlocks)</span>
<span class="term-fg32">+	genesis, blocks := generateMergeChain(10, true)</span>
<span class="term-fg32">+	n, ethservice := startEthService(t, genesis, blocks)</span>
<span class="term-fg32">+	&#47;&#47; enable shanghai on the last block</span>
<span class="term-fg32">+	ethservice.BlockChain().Config().ShanghaiTime = &amp;blocks[len(blocks)-1].Header().Time</span>
&nbsp;
 	var (
 		parent = ethservice.BlockChain().CurrentBlock()
<span class="term-fg36">@@ -1242,15 +1250,45 @@</span> 		&#47;&#47; This EVM code generates a log when the contract is created.
 		logCode = common.Hex2Bytes(&quot;60606040525b7f24ec1d3ff24c2f6ff210738839dbc339cd45a5294d85c79361016243157aae7b60405180905060405180910390a15b600a8060416000396000f360606040526008565b00&quot;)
 	)
&nbsp;
<span class="term-fg31">-	callback := func(parent *types.Block) {</span>
<span class="term-fg31">-		statedb, _ := ethservice.BlockChain().StateAt(parent.Root())</span>
<span class="term-fg32">+	callback := func(parent *types.Header) {</span>
<span class="term-fg32">+		statedb, _ := ethservice.BlockChain().StateAt(parent.Root)</span>
 		nonce := statedb.GetNonce(testAddr)
 		tx, _ := types.SignTx(types.NewContractCreation(nonce, new(big.Int), 1000000, big.NewInt(2*params.InitialBaseFee), logCode), types.LatestSigner(ethservice.BlockChain().Config()), testKey)
 		ethservice.TxPool().AddLocal(tx)
 	}
&nbsp;
<span class="term-fg31">-	postMergeBlocks := setupBlocks(t, ethservice, 10, parent, callback)</span>
<span class="term-fg31">-	return n, ethservice, append(preMergeBlocks, postMergeBlocks...)</span>
<span class="term-fg32">+	withdrawals := make([][]*types.Withdrawal, 10)</span>
<span class="term-fg32">+	withdrawals[0] = nil &#47;&#47; should be filtered out by miner</span>
<span class="term-fg32">+	withdrawals[1] = make([]*types.Withdrawal, 0)</span>
<span class="term-fg32">+	for i := 2; i &lt; len(withdrawals); i++ {</span>
<span class="term-fg32">+		addr := make([]byte, 20)</span>
<span class="term-fg32">+		crand.Read(addr)</span>
<span class="term-fg32">+		withdrawals[i] = []*types.Withdrawal{</span>
<span class="term-fg32">+			{Index: rand.Uint64(), Validator: rand.Uint64(), Amount: rand.Uint64(), Address: common.BytesToAddress(addr)},</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	postShanghaiHeaders := setupBlocks(t, ethservice, 10, parent, callback, withdrawals)</span>
<span class="term-fg32">+	postShanghaiBlocks := make([]*types.Block, len(postShanghaiHeaders))</span>
<span class="term-fg32">+	for i, header := range postShanghaiHeaders {</span>
<span class="term-fg32">+		postShanghaiBlocks[i] = ethservice.BlockChain().GetBlock(header.Hash(), header.Number.Uint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return n, ethservice, append(blocks, postShanghaiBlocks...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func allHashes(blocks []*types.Block) []common.Hash {</span>
<span class="term-fg32">+	var hashes []common.Hash</span>
<span class="term-fg32">+	for _, b := range blocks {</span>
<span class="term-fg32">+		hashes = append(hashes, b.Hash())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return hashes</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func allBodies(blocks []*types.Block) []*types.Body {</span>
<span class="term-fg32">+	var bodies []*types.Body</span>
<span class="term-fg32">+	for _, b := range blocks {</span>
<span class="term-fg32">+		bodies = append(bodies, b.Body())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bodies</span>
 }
&nbsp;
 func TestGetBlockBodiesByHash(t *testing.T) {
<span class="term-fg36">@@ -1291,6 +1329,11 @@</span> 		&#47;&#47; same block multiple times
 		{
 			results: []*types.Body{blocks[0].Body(), nil, blocks[0].Body(), blocks[0].Body()},
 			hashes:  []common.Hash{blocks[0].Hash(), {1, 2}, blocks[0].Hash(), blocks[0].Hash()},
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		&#47;&#47; all blocks</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			results: allBodies(blocks),</span>
<span class="term-fg32">+			hashes:  allHashes(blocks),</span>
 		},
 	}
&nbsp;
<span class="term-fg36">@@ -1360,6 +1403,12 @@</span> 			results: make([]*types.Body, 0),
 			start:   22,
 			count:   2,
 		},
<span class="term-fg32">+		&#47;&#47; allBlocks</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			results: allBodies(blocks),</span>
<span class="term-fg32">+			start:   1,</span>
<span class="term-fg32">+			count:   hexutil.Uint64(len(blocks)),</span>
<span class="term-fg32">+		},</span>
 	}
&nbsp;
 	for k, test := range tests {
<span class="term-fg36">@@ -1430,15 +1479,14 @@</span> 		return true
 	} else if a == nil || b == nil {
 		return false
 	}
<span class="term-fg31">-	var want []hexutil.Bytes</span>
<span class="term-fg31">-	for _, tx := range a.Transactions {</span>
<span class="term-fg32">+	if len(a.Transactions) != len(b.TransactionData) {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for i, tx := range a.Transactions {</span>
 		data, _ := tx.MarshalBinary()
<span class="term-fg31">-		want = append(want, hexutil.Bytes(data))</span>
<span class="term-fg32">+		if !bytes.Equal(data, b.TransactionData[i]) {</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
 	}
<span class="term-fg31">-	aBytes, errA := rlp.EncodeToBytes(want)</span>
<span class="term-fg31">-	bBytes, errB := rlp.EncodeToBytes(b.TransactionData)</span>
<span class="term-fg31">-	if errA != errB {</span>
<span class="term-fg31">-		return false</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return bytes.Equal(aBytes, bBytes)</span>
<span class="term-fg32">+	return reflect.DeepEqual(a.Withdrawals, b.Withdrawals)</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b489523962c0c5493409b821" role="button"
                   aria-expanded="false" aria-controls="id-b489523962c0c5493409b821">
                    <code>eth/catalyst/queue.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/catalyst/queue.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/catalyst/queue.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b489523962c0c5493409b821"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;catalyst&#47;queue.go op-geth&#47;eth&#47;catalyst&#47;queue.go</span>
<span class="term-fg1">index b7213dd591aa461362d899bf98808c9d1f117a2c..e8037aacad83264a18f9f3e5d0a111221949d8be 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;catalyst&#47;queue.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;catalyst&#47;queue.go</span>
<span class="term-fg36">@@ -31,9 +31,12 @@</span> &#47;&#47; latest one; but have a slight wiggle room for non-ideal conditions.
 const maxTrackedPayloads = 10
&nbsp;
 &#47;&#47; maxTrackedHeaders is the maximum number of executed payloads the execution
<span class="term-fg31">-&#47;&#47; engine tracks before evicting old ones. Ideally we should only ever track the</span>
<span class="term-fg31">-&#47;&#47; latest one; but have a slight wiggle room for non-ideal conditions.</span>
<span class="term-fg31">-const maxTrackedHeaders = 10</span>
<span class="term-fg32">+&#47;&#47; engine tracks before evicting old ones. These are tracked outside the chain</span>
<span class="term-fg32">+&#47;&#47; during initial sync to allow ForkchoiceUpdate to reference past blocks via</span>
<span class="term-fg32">+&#47;&#47; hashes only. For the sync target it would be enough to track only the latest</span>
<span class="term-fg32">+&#47;&#47; header, but snap sync also needs the latest finalized height for the ancient</span>
<span class="term-fg32">+&#47;&#47; limit.</span>
<span class="term-fg32">+const maxTrackedHeaders = 96</span>
&nbsp;
 &#47;&#47; payloadQueueItem represents an id-&gt;payload tuple to store until it&#39;s retrieved
 &#47;&#47; or evicted.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-54ede6ef0a6b5178de3405e1" role="button"
                   aria-expanded="false" aria-controls="id-54ede6ef0a6b5178de3405e1">
                    <code>eth/catalyst/tester.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/catalyst/tester.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/catalyst/tester.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-54ede6ef0a6b5178de3405e1"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;catalyst&#47;tester.go op-geth&#47;eth&#47;catalyst&#47;tester.go</span>
<span class="term-fg1">index 05511eaf7a2f6ca5f4ada7d4f5c835c069f330be..c4eafd30d918f9ad69e32eaa2f8f5adddcec2bb8 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;catalyst&#47;tester.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;catalyst&#47;tester.go</span>
<span class="term-fg36">@@ -75,7 +75,7 @@</span> 					return
 				}
 				&#47;&#47; Trigger beacon sync with the provided block header as
 				&#47;&#47; trusted chain head.
<span class="term-fg31">-				err := tester.api.eth.Downloader().BeaconSync(downloader.FullSync, tester.block.Header())</span>
<span class="term-fg32">+				err := tester.api.eth.Downloader().BeaconSync(downloader.FullSync, tester.block.Header(), nil)</span>
 				if err != nil {
 					log.Info(&quot;Failed to beacon sync&quot;, &quot;err&quot;, err)
 				}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6019e9f156c281a6ed7a5c36" role="button"
                   aria-expanded="false" aria-controls="id-6019e9f156c281a6ed7a5c36">
                    <code>eth/downloader/beaconsync.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/downloader/beaconsync.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/downloader/beaconsync.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-12</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6019e9f156c281a6ed7a5c36"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;beaconsync.go op-geth&#47;eth&#47;downloader&#47;beaconsync.go</span>
<span class="term-fg1">index 65d9225f8b511bbde34f89fc190c2e00897b3e3e..ff985e6b035f49c9d7d76274c877447bf777660f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;beaconsync.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;downloader&#47;beaconsync.go</span>
<span class="term-fg36">@@ -76,7 +76,7 @@</span> 	b.downloader.Cancel()
&nbsp;
 	&#47;&#47; Sync cycle was just terminated, retrieve and return the last filled header.
 	&#47;&#47; Can&#39;t use `filled` as that contains a stale value from before cancellation.
<span class="term-fg31">-	return b.downloader.blockchain.CurrentFastBlock().Header()</span>
<span class="term-fg32">+	return b.downloader.blockchain.CurrentSnapBlock()</span>
 }
&nbsp;
 &#47;&#47; resume starts the downloader threads for backfilling state and chain data.
<span class="term-fg36">@@ -101,7 +101,7 @@</span> 		&#47;&#47; Set the backfiller to non-filling when download completes
 		defer func() {
 			b.lock.Lock()
 			b.filling = false
<span class="term-fg31">-			b.filled = b.downloader.blockchain.CurrentFastBlock().Header()</span>
<span class="term-fg32">+			b.filled = b.downloader.blockchain.CurrentSnapBlock()</span>
 			b.lock.Unlock()
 		}()
 		&#47;&#47; If the downloader fails, report an error as in beacon chain mode there
<span class="term-fg36">@@ -151,8 +151,8 @@</span> &#47;&#47; backwards.
 &#47;&#47;
 &#47;&#47; Internally backfilling and state sync is done the same way, but the header
 &#47;&#47; retrieval and scheduling is replaced.
<span class="term-fg31">-func (d *Downloader) BeaconSync(mode SyncMode, head *types.Header) error {</span>
<span class="term-fg31">-	return d.beaconSync(mode, head, true)</span>
<span class="term-fg32">+func (d *Downloader) BeaconSync(mode SyncMode, head *types.Header, final *types.Header) error {</span>
<span class="term-fg32">+	return d.beaconSync(mode, head, final, true)</span>
 }
&nbsp;
 &#47;&#47; BeaconExtend is an optimistic version of BeaconSync, where an attempt is made
<span class="term-fg36">@@ -162,7 +162,7 @@</span> &#47;&#47;
 &#47;&#47; This is useful if a beacon client is feeding us large chunks of payloads to run,
 &#47;&#47; but is not setting the head after each.
 func (d *Downloader) BeaconExtend(mode SyncMode, head *types.Header) error {
<span class="term-fg31">-	return d.beaconSync(mode, head, false)</span>
<span class="term-fg32">+	return d.beaconSync(mode, head, nil, false)</span>
 }
&nbsp;
 &#47;&#47; beaconSync is the post-merge version of the chain synchronization, where the
<span class="term-fg36">@@ -171,7 +171,7 @@</span> &#47;&#47; backwards.
 &#47;&#47;
 &#47;&#47; Internally backfilling and state sync is done the same way, but the header
 &#47;&#47; retrieval and scheduling is replaced.
<span class="term-fg31">-func (d *Downloader) beaconSync(mode SyncMode, head *types.Header, force bool) error {</span>
<span class="term-fg32">+func (d *Downloader) beaconSync(mode SyncMode, head *types.Header, final *types.Header, force bool) error {</span>
 	&#47;&#47; When the downloader starts a sync cycle, it needs to be aware of the sync
 	&#47;&#47; mode to use (full, snap). To keep the skeleton chain oblivious, inject the
 	&#47;&#47; mode into the backfiller directly.
<span class="term-fg36">@@ -181,7 +181,7 @@</span> 	&#47;&#47; different backfiller implementation for skeleton tests.
 	d.skeleton.filler.(*beaconBackfiller).setMode(mode)
&nbsp;
 	&#47;&#47; Signal the skeleton sync to switch to a new head, however it wants
<span class="term-fg31">-	if err := d.skeleton.Sync(head, force); err != nil {</span>
<span class="term-fg32">+	if err := d.skeleton.Sync(head, final, force); err != nil {</span>
 		return err
 	}
 	return nil
<span class="term-fg36">@@ -198,16 +198,16 @@</span> 	var chainHead *types.Header
&nbsp;
 	switch d.getMode() {
 	case FullSync:
<span class="term-fg31">-		chainHead = d.blockchain.CurrentBlock().Header()</span>
<span class="term-fg32">+		chainHead = d.blockchain.CurrentBlock()</span>
 	case SnapSync:
<span class="term-fg31">-		chainHead = d.blockchain.CurrentFastBlock().Header()</span>
<span class="term-fg32">+		chainHead = d.blockchain.CurrentSnapBlock()</span>
 	default:
 		chainHead = d.lightchain.CurrentHeader()
 	}
 	number := chainHead.Number.Uint64()
&nbsp;
 	&#47;&#47; Retrieve the skeleton bounds and ensure they are linked to the local chain
<span class="term-fg31">-	beaconHead, beaconTail, err := d.skeleton.Bounds()</span>
<span class="term-fg32">+	beaconHead, beaconTail, _, err := d.skeleton.Bounds()</span>
 	if err != nil {
 		&#47;&#47; This is a programming error. The chain backfiller was called with an
 		&#47;&#47; invalid beacon sync state. Ideally we would panic here, but erroring
<span class="term-fg36">@@ -272,7 +272,7 @@</span> &#47;&#47; fetchBeaconHeaders feeds skeleton headers to the downloader queue for scheduling
 &#47;&#47; until sync errors or is finished.
 func (d *Downloader) fetchBeaconHeaders(from uint64) error {
 	var head *types.Header
<span class="term-fg31">-	_, tail, err := d.skeleton.Bounds()</span>
<span class="term-fg32">+	_, tail, _, err := d.skeleton.Bounds()</span>
 	if err != nil {
 		return err
 	}
<span class="term-fg36">@@ -292,7 +292,7 @@</span> 	}
 	for {
 		&#47;&#47; Some beacon headers might have appeared since the last cycle, make
 		&#47;&#47; sure we&#39;re always syncing to all available ones
<span class="term-fg31">-		head, _, err = d.skeleton.Bounds()</span>
<span class="term-fg32">+		head, _, _, err = d.skeleton.Bounds()</span>
 		if err != nil {
 			return err
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-da9d5b6208779dc71088ffff" role="button"
                   aria-expanded="false" aria-controls="id-da9d5b6208779dc71088ffff">
                    <code>eth/downloader/downloader.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/downloader/downloader.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/downloader/downloader.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+59</span></div>
                        <div class="text-start"><span class="text-danger">-44</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-da9d5b6208779dc71088ffff"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;downloader.go op-geth&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">index bb74efe754e7e1635b6fa2de990aaff686b287d9..fb9de79912e29765f5f00d885ee53299d8cb8171 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg36">@@ -196,10 +196,10 @@</span> 	&#47;&#47; GetBlockByHash retrieves a block from the local chain.
 	GetBlockByHash(common.Hash) *types.Block
&nbsp;
 	&#47;&#47; CurrentBlock retrieves the head block from the local chain.
<span class="term-fg31">-	CurrentBlock() *types.Block</span>
<span class="term-fg32">+	CurrentBlock() *types.Header</span>
&nbsp;
<span class="term-fg31">-	&#47;&#47; CurrentFastBlock retrieves the head snap block from the local chain.</span>
<span class="term-fg31">-	CurrentFastBlock() *types.Block</span>
<span class="term-fg32">+	&#47;&#47; CurrentSnapBlock retrieves the head snap block from the local chain.</span>
<span class="term-fg32">+	CurrentSnapBlock() *types.Header</span>
&nbsp;
 	&#47;&#47; SnapSyncCommitHead directly commits the head block to a certain entity.
 	SnapSyncCommitHead(common.Hash) error
<span class="term-fg36">@@ -236,7 +236,7 @@</span> 		headerProcCh:   make(chan *headerTask, 1),
 		quitCh:         make(chan struct{}),
 		SnapSyncer:     snap.NewSyncer(stateDb, chain.TrieDB().Scheme()),
 		stateSyncStart: make(chan *stateSync),
<span class="term-fg31">-		syncStartBlock: chain.CurrentFastBlock().NumberU64(),</span>
<span class="term-fg32">+		syncStartBlock: chain.CurrentSnapBlock().Number.Uint64(),</span>
 	}
 	&#47;&#47; Create the post-merge skeleton syncer and start the process
 	dl.skeleton = newSkeleton(stateDb, dl.peers, dropPeer, newBeaconBackfiller(dl, success))
<span class="term-fg36">@@ -261,9 +261,9 @@</span> 	current := uint64(0)
 	mode := d.getMode()
 	switch {
 	case d.blockchain != nil &amp;&amp; mode == FullSync:
<span class="term-fg31">-		current = d.blockchain.CurrentBlock().NumberU64()</span>
<span class="term-fg32">+		current = d.blockchain.CurrentBlock().Number.Uint64()</span>
 	case d.blockchain != nil &amp;&amp; mode == SnapSync:
<span class="term-fg31">-		current = d.blockchain.CurrentFastBlock().NumberU64()</span>
<span class="term-fg32">+		current = d.blockchain.CurrentSnapBlock().Number.Uint64()</span>
 	case d.lightchain != nil:
 		current = d.lightchain.CurrentHeader().Number.Uint64()
 	default:
<span class="term-fg36">@@ -480,7 +480,7 @@</span> 		log.Debug(&quot;Synchronisation terminated&quot;, &quot;elapsed&quot;, common.PrettyDuration(time.Since(start)))
 	}(time.Now())
&nbsp;
 	&#47;&#47; Look up the sync boundaries: the common ancestor and the target block
<span class="term-fg31">-	var latest, pivot *types.Header</span>
<span class="term-fg32">+	var latest, pivot, final *types.Header</span>
 	if !beaconMode {
 		&#47;&#47; In legacy mode, use the master peer to retrieve the headers from
 		latest, pivot, err = d.fetchHead(p)
<span class="term-fg36">@@ -489,7 +489,7 @@</span> 			return err
 		}
 	} else {
 		&#47;&#47; In beacon mode, use the skeleton chain to retrieve the headers from
<span class="term-fg31">-		latest, _, err = d.skeleton.Bounds()</span>
<span class="term-fg32">+		latest, _, final, err = d.skeleton.Bounds()</span>
 		if err != nil {
 			return err
 		}
<span class="term-fg36">@@ -499,7 +499,7 @@</span>
 			&#47;&#47; Retrieve the pivot header from the skeleton chain segment but
 			&#47;&#47; fallback to local chain if it&#39;s not found in skeleton space.
 			if pivot = d.skeleton.Header(number); pivot == nil {
<span class="term-fg31">-				_, oldest, _ := d.skeleton.Bounds() &#47;&#47; error is already checked</span>
<span class="term-fg32">+				_, oldest, _, _ := d.skeleton.Bounds() &#47;&#47; error is already checked</span>
 				if number &lt; oldest.Number.Uint64() {
 					count := int(oldest.Number.Uint64() - number) &#47;&#47; it&#39;s capped by fsMinFullBlocks
 					headers := d.readHeaderRange(oldest, count)
<span class="term-fg36">@@ -523,7 +523,7 @@</span> 	&#47;&#47; threshold (i.e. new chain). In that case we won&#39;t really snap sync
 	&#47;&#47; anyway, but still need a valid pivot block to avoid some code hitting
 	&#47;&#47; nil panics on access.
 	if mode == SnapSync &amp;&amp; pivot == nil {
<span class="term-fg31">-		pivot = d.blockchain.CurrentBlock().Header()</span>
<span class="term-fg32">+		pivot = d.blockchain.CurrentBlock()</span>
 	}
 	height := latest.Number.Uint64()
&nbsp;
<span class="term-fg36">@@ -567,26 +567,41 @@</span> 	if mode == SnapSync &amp;&amp; pivot.Number.Uint64() != 0 {
 		d.committed = 0
 	}
 	if mode == SnapSync {
<span class="term-fg31">-		&#47;&#47; Set the ancient data limitation.</span>
<span class="term-fg31">-		&#47;&#47; If we are running snap sync, all block data older than ancientLimit will be</span>
<span class="term-fg31">-		&#47;&#47; written to the ancient store. More recent data will be written to the active</span>
<span class="term-fg31">-		&#47;&#47; database and will wait for the freezer to migrate.</span>
<span class="term-fg32">+		&#47;&#47; Set the ancient data limitation. If we are running snap sync, all block</span>
<span class="term-fg32">+		&#47;&#47; data older than ancientLimit will be written to the ancient store. More</span>
<span class="term-fg32">+		&#47;&#47; recent data will be written to the active database and will wait for the</span>
<span class="term-fg32">+		&#47;&#47; freezer to migrate.</span>
 		&#47;&#47;
<span class="term-fg31">-		&#47;&#47; If there is a checkpoint available, then calculate the ancientLimit through</span>
<span class="term-fg31">-		&#47;&#47; that. Otherwise calculate the ancient limit through the advertised height</span>
<span class="term-fg31">-		&#47;&#47; of the remote peer.</span>
<span class="term-fg32">+		&#47;&#47; If the network is post-merge, use either the last announced finalized</span>
<span class="term-fg32">+		&#47;&#47; block as the ancient limit, or if we haven&#39;t yet received one, the head-</span>
<span class="term-fg32">+		&#47;&#47; a max fork ancestry limit. One quirky case if we&#39;ve already passed the</span>
<span class="term-fg32">+		&#47;&#47; finalized block, in which case the skeleton.Bounds will return nil and</span>
<span class="term-fg32">+		&#47;&#47; we&#39;ll revert to head - 90K. That&#39;s fine, we&#39;re finishing sync anyway.</span>
 		&#47;&#47;
<span class="term-fg31">-		&#47;&#47; The reason for picking checkpoint first is that a malicious peer can give us</span>
<span class="term-fg31">-		&#47;&#47; a fake (very high) height, forcing the ancient limit to also be very high.</span>
<span class="term-fg31">-		&#47;&#47; The peer would start to feed us valid blocks until head, resulting in all of</span>
<span class="term-fg31">-		&#47;&#47; the blocks might be written into the ancient store. A following mini-reorg</span>
<span class="term-fg31">-		&#47;&#47; could cause issues.</span>
<span class="term-fg31">-		if d.checkpoint != 0 &amp;&amp; d.checkpoint &gt; fullMaxForkAncestry+1 {</span>
<span class="term-fg31">-			d.ancientLimit = d.checkpoint</span>
<span class="term-fg31">-		} else if height &gt; fullMaxForkAncestry+1 {</span>
<span class="term-fg31">-			d.ancientLimit = height - fullMaxForkAncestry - 1</span>
<span class="term-fg32">+		&#47;&#47; For non-merged networks, if there is a checkpoint available, then calculate</span>
<span class="term-fg32">+		&#47;&#47; the ancientLimit through that. Otherwise calculate the ancient limit through</span>
<span class="term-fg32">+		&#47;&#47; the advertised height of the remote peer. This most is mostly a fallback for</span>
<span class="term-fg32">+		&#47;&#47; legacy networks, but should eventually be droppped. TODO(karalabe).</span>
<span class="term-fg32">+		if beaconMode {</span>
<span class="term-fg32">+			&#47;&#47; Beacon sync, use the latest finalized block as the ancient limit</span>
<span class="term-fg32">+			&#47;&#47; or a reasonable height if no finalized block is yet announced.</span>
<span class="term-fg32">+			if final != nil {</span>
<span class="term-fg32">+				d.ancientLimit = final.Number.Uint64()</span>
<span class="term-fg32">+			} else if height &gt; fullMaxForkAncestry+1 {</span>
<span class="term-fg32">+				d.ancientLimit = height - fullMaxForkAncestry - 1</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				d.ancientLimit = 0</span>
<span class="term-fg32">+			}</span>
 		} else {
<span class="term-fg31">-			d.ancientLimit = 0</span>
<span class="term-fg32">+			&#47;&#47; Legacy sync, use any hardcoded checkpoints or the best announcement</span>
<span class="term-fg32">+			&#47;&#47; we have from the remote peer. TODO(karalabe): Drop this pathway.</span>
<span class="term-fg32">+			if d.checkpoint != 0 &amp;&amp; d.checkpoint &gt; fullMaxForkAncestry+1 {</span>
<span class="term-fg32">+				d.ancientLimit = d.checkpoint</span>
<span class="term-fg32">+			} else if height &gt; fullMaxForkAncestry+1 {</span>
<span class="term-fg32">+				d.ancientLimit = height - fullMaxForkAncestry - 1</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				d.ancientLimit = 0</span>
<span class="term-fg32">+			}</span>
 		}
 		frozen, _ := d.stateDB.Ancients() &#47;&#47; Ignore the error here since light client can also hit here.
&nbsp;
<span class="term-fg36">@@ -819,9 +834,9 @@</span> 	)
 	mode := d.getMode()
 	switch mode {
 	case FullSync:
<span class="term-fg31">-		localHeight = d.blockchain.CurrentBlock().NumberU64()</span>
<span class="term-fg32">+		localHeight = d.blockchain.CurrentBlock().Number.Uint64()</span>
 	case SnapSync:
<span class="term-fg31">-		localHeight = d.blockchain.CurrentFastBlock().NumberU64()</span>
<span class="term-fg32">+		localHeight = d.blockchain.CurrentSnapBlock().Number.Uint64()</span>
 	default:
 		localHeight = d.lightchain.CurrentHeader().Number.Uint64()
 	}
<span class="term-fg36">@@ -1159,8 +1174,8 @@</span> 				var head uint64
 				if mode == LightSync {
 					head = d.lightchain.CurrentHeader().Number.Uint64()
 				} else {
<span class="term-fg31">-					head = d.blockchain.CurrentFastBlock().NumberU64()</span>
<span class="term-fg31">-					if full := d.blockchain.CurrentBlock().NumberU64(); head &lt; full {</span>
<span class="term-fg32">+					head = d.blockchain.CurrentSnapBlock().Number.Uint64()</span>
<span class="term-fg32">+					if full := d.blockchain.CurrentBlock().Number.Uint64(); head &lt; full {</span>
 						head = full
 					}
 				}
<span class="term-fg36">@@ -1274,8 +1289,8 @@</span> 	defer func() {
 		if rollback &gt; 0 {
 			lastHeader, lastFastBlock, lastBlock := d.lightchain.CurrentHeader().Number, common.Big0, common.Big0
 			if mode != LightSync {
<span class="term-fg31">-				lastFastBlock = d.blockchain.CurrentFastBlock().Number()</span>
<span class="term-fg31">-				lastBlock = d.blockchain.CurrentBlock().Number()</span>
<span class="term-fg32">+				lastFastBlock = d.blockchain.CurrentSnapBlock().Number</span>
<span class="term-fg32">+				lastBlock = d.blockchain.CurrentBlock().Number</span>
 			}
 			if err := d.lightchain.SetHead(rollback - 1); err != nil { &#47;&#47; -1 to target the parent of the first uncertain block
 				&#47;&#47; We&#39;re already unwinding the stack, only print the error to make it more visible
<span class="term-fg36">@@ -1283,8 +1298,8 @@</span> 				log.Error(&quot;Failed to roll back chain segment&quot;, &quot;head&quot;, rollback-1, &quot;err&quot;, err)
 			}
 			curFastBlock, curBlock := common.Big0, common.Big0
 			if mode != LightSync {
<span class="term-fg31">-				curFastBlock = d.blockchain.CurrentFastBlock().Number()</span>
<span class="term-fg31">-				curBlock = d.blockchain.CurrentBlock().Number()</span>
<span class="term-fg32">+				curFastBlock = d.blockchain.CurrentSnapBlock().Number</span>
<span class="term-fg32">+				curBlock = d.blockchain.CurrentBlock().Number</span>
 			}
 			log.Warn(&quot;Rolled back chain segment&quot;,
 				&quot;header&quot;, fmt.Sprintf(&quot;%d-&gt;%d&quot;, lastHeader, d.lightchain.CurrentHeader().Number),
<span class="term-fg36">@@ -1329,7 +1344,7 @@</span> 					&#47;&#47; L: Request new headers up from 11 (R&#39;s TD was higher, it must have something)
 					&#47;&#47; R: Nothing to give
 					if mode != LightSync {
 						head := d.blockchain.CurrentBlock()
<span class="term-fg31">-						if !gotHeaders &amp;&amp; td.Cmp(d.blockchain.GetTd(head.Hash(), head.NumberU64())) &gt; 0 {</span>
<span class="term-fg32">+						if !gotHeaders &amp;&amp; td.Cmp(d.blockchain.GetTd(head.Hash(), head.Number.Uint64())) &gt; 0 {</span>
 							return errStallingPeer
 						}
 					}
<span class="term-fg36">@@ -1566,7 +1581,7 @@</span> 			log.Debug(&quot;Downloaded item processing failed&quot;, &quot;number&quot;, results[index].Header.Number, &quot;hash&quot;, results[index].Header.Hash(), &quot;err&quot;, err)
&nbsp;
 			&#47;&#47; In post-merge, notify the engine API of encountered bad chains
 			if d.badBlock != nil {
<span class="term-fg31">-				head, _, err := d.skeleton.Bounds()</span>
<span class="term-fg32">+				head, _, _, err := d.skeleton.Bounds()</span>
 				if err != nil {
 					log.Error(&quot;Failed to retrieve beacon bounds for bad block reporting&quot;, &quot;err&quot;, err)
 				} else {
<span class="term-fg36">@@ -1853,14 +1868,14 @@</span> 		return
 	}
 	var (
 		header = d.blockchain.CurrentHeader()
<span class="term-fg31">-		block  = d.blockchain.CurrentFastBlock()</span>
<span class="term-fg32">+		block  = d.blockchain.CurrentSnapBlock()</span>
 	)
<span class="term-fg31">-	syncedBlocks := block.NumberU64() - d.syncStartBlock</span>
<span class="term-fg32">+	syncedBlocks := block.Number.Uint64() - d.syncStartBlock</span>
 	if syncedBlocks == 0 {
 		return
 	}
 	&#47;&#47; Retrieve the current chain head and calculate the ETA
<span class="term-fg31">-	latest, _, err := d.skeleton.Bounds()</span>
<span class="term-fg32">+	latest, _, _, err := d.skeleton.Bounds()</span>
 	if err != nil {
 		&#47;&#47; We&#39;re going to cheat for non-merged networks, but that&#39;s fine
 		latest = d.pivotHeader
<span class="term-fg36">@@ -1872,13 +1887,13 @@</span> 		log.Error(&quot;Nil latest block in sync progress report&quot;)
 		return
 	}
 	var (
<span class="term-fg31">-		left = latest.Number.Uint64() - block.NumberU64()</span>
<span class="term-fg32">+		left = latest.Number.Uint64() - block.Number.Uint64()</span>
 		eta  = time.Since(d.syncStartTime) &#47; time.Duration(syncedBlocks) * time.Duration(left)
&nbsp;
<span class="term-fg31">-		progress = fmt.Sprintf(&quot;%.2f%%&quot;, float64(block.NumberU64())*100&#47;float64(latest.Number.Uint64()))</span>
<span class="term-fg32">+		progress = fmt.Sprintf(&quot;%.2f%%&quot;, float64(block.Number.Uint64())*100&#47;float64(latest.Number.Uint64()))</span>
 		headers  = fmt.Sprintf(&quot;%v@%v&quot;, log.FormatLogfmtUint64(header.Number.Uint64()), common.StorageSize(headerBytes).TerminalString())
<span class="term-fg31">-		bodies   = fmt.Sprintf(&quot;%v@%v&quot;, log.FormatLogfmtUint64(block.NumberU64()), common.StorageSize(bodyBytes).TerminalString())</span>
<span class="term-fg31">-		receipts = fmt.Sprintf(&quot;%v@%v&quot;, log.FormatLogfmtUint64(block.NumberU64()), common.StorageSize(receiptBytes).TerminalString())</span>
<span class="term-fg32">+		bodies   = fmt.Sprintf(&quot;%v@%v&quot;, log.FormatLogfmtUint64(block.Number.Uint64()), common.StorageSize(bodyBytes).TerminalString())</span>
<span class="term-fg32">+		receipts = fmt.Sprintf(&quot;%v@%v&quot;, log.FormatLogfmtUint64(block.Number.Uint64()), common.StorageSize(receiptBytes).TerminalString())</span>
 	)
 	log.Info(&quot;Syncing: chain download in progress&quot;, &quot;synced&quot;, progress, &quot;chain&quot;, syncedBytes, &quot;headers&quot;, headers, &quot;bodies&quot;, bodies, &quot;receipts&quot;, receipts, &quot;eta&quot;, common.PrettyDuration(eta))
 	d.syncLogTime = time.Now()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b6e7c640ce6a5b12cb09b4e2" role="button"
                   aria-expanded="false" aria-controls="id-b6e7c640ce6a5b12cb09b4e2">
                    <code>eth/downloader/downloader_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/downloader/downloader_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/downloader/downloader_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+11</span></div>
                        <div class="text-start"><span class="text-danger">-11</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b6e7c640ce6a5b12cb09b4e2"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;downloader_test.go op-geth&#47;eth&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg1">index 2f0c4acf788755f3ba7043721ec6872ba8f3118f..a884c1e950b02d8985bce08de993ff4d3157ddf9 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;downloader&#47;downloader_test.go</span>
<span class="term-fg36">@@ -100,7 +100,7 @@</span> func (dl *downloadTester) sync(id string, td *big.Int, mode SyncMode) error {
 	head := dl.peers[id].chain.CurrentBlock()
 	if td == nil {
 		&#47;&#47; If no particular TD was requested, load from the peer&#39;s blockchain
<span class="term-fg31">-		td = dl.peers[id].chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+		td = dl.peers[id].chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 	}
 	&#47;&#47; Synchronise with the chosen peer and ensure proper cleanup afterwards
 	err := dl.downloader.synchronise(id, head.Hash(), td, nil, mode, false, nil)
<span class="term-fg36">@@ -158,7 +158,7 @@</span> &#47;&#47; Head constructs a function to retrieve a peer&#39;s current head hash
 &#47;&#47; and total difficulty.
 func (dlp *downloadTesterPeer) Head() (common.Hash, *big.Int) {
 	head := dlp.chain.CurrentBlock()
<span class="term-fg31">-	return head.Hash(), dlp.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+	return head.Hash(), dlp.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 }
&nbsp;
 func unmarshalRlpHeaders(rlpdata []rlp.RawValue) []*types.Header {
<span class="term-fg36">@@ -430,10 +430,10 @@</span> 	}
 	if hs := int(tester.chain.CurrentHeader().Number.Uint64()) + 1; hs != headers {
 		t.Fatalf(&quot;synchronised headers mismatch: have %v, want %v&quot;, hs, headers)
 	}
<span class="term-fg31">-	if bs := int(tester.chain.CurrentBlock().NumberU64()) + 1; bs != blocks {</span>
<span class="term-fg32">+	if bs := int(tester.chain.CurrentBlock().Number.Uint64()) + 1; bs != blocks {</span>
 		t.Fatalf(&quot;synchronised blocks mismatch: have %v, want %v&quot;, bs, blocks)
 	}
<span class="term-fg31">-	if rs := int(tester.chain.CurrentFastBlock().NumberU64()) + 1; rs != receipts {</span>
<span class="term-fg32">+	if rs := int(tester.chain.CurrentSnapBlock().Number.Uint64()) + 1; rs != receipts {</span>
 		t.Fatalf(&quot;synchronised receipts mismatch: have %v, want %v&quot;, rs, receipts)
 	}
 }
<span class="term-fg36">@@ -490,7 +490,7 @@</span> 	&#47;&#47; Iteratively take some blocks, always checking the retrieval count
 	for {
 		&#47;&#47; Check the retrieval count synchronously (! reason for this ugly block)
 		tester.lock.RLock()
<span class="term-fg31">-		retrieved := int(tester.chain.CurrentFastBlock().Number().Uint64()) + 1</span>
<span class="term-fg32">+		retrieved := int(tester.chain.CurrentSnapBlock().Number.Uint64()) + 1</span>
 		tester.lock.RUnlock()
 		if retrieved &gt;= targetBlocks+1 {
 			break
<span class="term-fg36">@@ -506,7 +506,7 @@</span> 			tester.downloader.queue.resultCache.lock.Lock()
 			{
 				cached = tester.downloader.queue.resultCache.countCompleted()
 				frozen = int(atomic.LoadUint32(&amp;blocked))
<span class="term-fg31">-				retrieved = int(tester.chain.CurrentFastBlock().Number().Uint64()) + 1</span>
<span class="term-fg32">+				retrieved = int(tester.chain.CurrentSnapBlock().Number.Uint64()) + 1</span>
 			}
 			tester.downloader.queue.resultCache.lock.Unlock()
 			tester.downloader.queue.lock.Unlock()
<span class="term-fg36">@@ -522,7 +522,7 @@</span> 		}
 		&#47;&#47; Make sure we filled up the cache, then exhaust it
 		time.Sleep(25 * time.Millisecond) &#47;&#47; give it a chance to screw up
 		tester.lock.RLock()
<span class="term-fg31">-		retrieved = int(tester.chain.CurrentFastBlock().Number().Uint64()) + 1</span>
<span class="term-fg32">+		retrieved = int(tester.chain.CurrentSnapBlock().Number.Uint64()) + 1</span>
 		tester.lock.RUnlock()
 		if cached != blockCacheMaxItems &amp;&amp; cached != blockCacheMaxItems-reorgProtHeaderDelay &amp;&amp; retrieved+cached+frozen != targetBlocks+1 &amp;&amp; retrieved+cached+frozen != targetBlocks+1-reorgProtHeaderDelay {
 			t.Fatalf(&quot;block count mismatch: have %v, want %v (owned %v, blocked %v, target %v)&quot;, cached, blockCacheMaxItems, retrieved, frozen, targetBlocks+1)
<span class="term-fg36">@@ -921,7 +921,7 @@</span> 	if head := tester.chain.CurrentHeader().Number.Int64(); int(head) &gt; 2*fsHeaderSafetyNet+MaxHeaderFetch {
 		t.Errorf(&quot;rollback head mismatch: have %v, want at most %v&quot;, head, 2*fsHeaderSafetyNet+MaxHeaderFetch)
 	}
 	if mode == SnapSync {
<span class="term-fg31">-		if head := tester.chain.CurrentBlock().NumberU64(); head != 0 {</span>
<span class="term-fg32">+		if head := tester.chain.CurrentBlock().Number.Uint64(); head != 0 {</span>
 			t.Errorf(&quot;fast sync pivot block #%d not rolled back&quot;, head)
 		}
 	}
<span class="term-fg36">@@ -943,7 +943,7 @@</span> 	if head := tester.chain.CurrentHeader().Number.Int64(); int(head) &gt; 2*fsHeaderSafetyNet+MaxHeaderFetch {
 		t.Errorf(&quot;rollback head mismatch: have %v, want at most %v&quot;, head, 2*fsHeaderSafetyNet+MaxHeaderFetch)
 	}
 	if mode == SnapSync {
<span class="term-fg31">-		if head := tester.chain.CurrentBlock().NumberU64(); head != 0 {</span>
<span class="term-fg32">+		if head := tester.chain.CurrentBlock().Number.Uint64(); head != 0 {</span>
 			t.Errorf(&quot;fast sync pivot block #%d not rolled back&quot;, head)
 		}
 	}
<span class="term-fg36">@@ -1478,13 +1478,13 @@</span> 			&#47;&#47; Build the local chain segment if it&#39;s required
 			if c.local &gt; 0 {
 				tester.chain.InsertChain(chain.blocks[1 : c.local+1])
 			}
<span class="term-fg31">-			if err := tester.downloader.BeaconSync(mode, chain.blocks[len(chain.blocks)-1].Header()); err != nil {</span>
<span class="term-fg32">+			if err := tester.downloader.BeaconSync(mode, chain.blocks[len(chain.blocks)-1].Header(), nil); err != nil {</span>
 				t.Fatalf(&quot;Failed to beacon sync chain %v %v&quot;, c.name, err)
 			}
 			select {
 			case &lt;-success:
 				&#47;&#47; Ok, downloader fully cancelled after sync cycle
<span class="term-fg31">-				if bs := int(tester.chain.CurrentBlock().NumberU64()) + 1; bs != len(chain.blocks) {</span>
<span class="term-fg32">+				if bs := int(tester.chain.CurrentBlock().Number.Uint64()) + 1; bs != len(chain.blocks) {</span>
 					t.Fatalf(&quot;synchronised blocks mismatch: have %v, want %v&quot;, bs, len(chain.blocks))
 				}
 			case &lt;-time.NewTimer(time.Second * 3).C:</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4537aec0832ba2d8cead5862" role="button"
                   aria-expanded="false" aria-controls="id-4537aec0832ba2d8cead5862">
                    <code>eth/downloader/skeleton.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/downloader/skeleton.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/downloader/skeleton.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+32</span></div>
                        <div class="text-start"><span class="text-danger">-13</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4537aec0832ba2d8cead5862"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;skeleton.go op-geth&#47;eth&#47;downloader&#47;skeleton.go</span>
<span class="term-fg1">index 142e9e5e6bcb2b259db0ab73510336a46342fe43..12eb5700f8d3a75ab5e38c73118f41e3adfaf37f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;skeleton.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;downloader&#47;skeleton.go</span>
<span class="term-fg36">@@ -102,6 +102,7 @@</span> &#47;&#47; will produce temporarily disjoint subchains. There is no way to restart a
 &#47;&#47; suspended skeleton sync without prior knowledge of all prior suspension points.
 type skeletonProgress struct {
 	Subchains []*subchain &#47;&#47; Disjoint subchains downloaded until now
<span class="term-fg32">+	Finalized *uint64     &#47;&#47; Last known finalized block number</span>
 }
&nbsp;
 &#47;&#47; headUpdate is a notification that the beacon sync should switch to a new target.
<span class="term-fg36">@@ -109,6 +110,7 @@</span> &#47;&#47; The update might request whether to forcefully change the target, or only try to
 &#47;&#47; extend it and fail if it&#39;s not possible.
 type headUpdate struct {
 	header *types.Header &#47;&#47; Header to update the sync target to
<span class="term-fg32">+	final  *types.Header &#47;&#47; Finalized header to use as thresholds</span>
 	force  bool          &#47;&#47; Whether to force the update or only extend if possible
 	errc   chan error    &#47;&#47; Channel to signal acceptance of the new head
 }
<span class="term-fg36">@@ -321,12 +323,12 @@</span> &#47;&#47; ancestor.
 &#47;&#47;
 &#47;&#47; This method does not block, rather it just waits until the syncer receives the
 &#47;&#47; fed header. What the syncer does with it is the syncer&#39;s problem.
<span class="term-fg31">-func (s *skeleton) Sync(head *types.Header, force bool) error {</span>
<span class="term-fg32">+func (s *skeleton) Sync(head *types.Header, final *types.Header, force bool) error {</span>
 	log.Trace(&quot;New skeleton head announced&quot;, &quot;number&quot;, head.Number, &quot;hash&quot;, head.Hash(), &quot;force&quot;, force)
 	errc := make(chan error)
&nbsp;
 	select {
<span class="term-fg31">-	case s.headEvents &lt;- &amp;headUpdate{header: head, force: force, errc: errc}:</span>
<span class="term-fg32">+	case s.headEvents &lt;- &amp;headUpdate{header: head, final: final, force: force, errc: errc}:</span>
 		return &lt;-errc
 	case &lt;-s.terminated:
 		return errTerminated
<span class="term-fg36">@@ -437,7 +439,7 @@</span> 			&#47;&#47; needs to be done as the head simply extended the last range. For now
 			&#47;&#47; we don&#39;t seamlessly integrate reorgs to keep things simple. If the
 			&#47;&#47; network starts doing many mini reorgs, it might be worthwhile handling
 			&#47;&#47; a limited depth without an error.
<span class="term-fg31">-			if reorged := s.processNewHead(event.header, event.force); reorged {</span>
<span class="term-fg32">+			if reorged := s.processNewHead(event.header, event.final, event.force); reorged {</span>
 				&#47;&#47; If a reorg is needed, and we&#39;re forcing the new head, signal
 				&#47;&#47; the syncer to tear down and start over. Otherwise, drop the
 				&#47;&#47; non-force reorg.
<span class="term-fg36">@@ -590,7 +592,17 @@</span> &#47;&#47; processNewHead does the internal shuffling for a new head marker and either
 &#47;&#47; accepts and integrates it into the skeleton or requests a reorg. Upon reorg,
 &#47;&#47; the syncer will tear itself down and restart with a fresh head. It is simpler
 &#47;&#47; to reconstruct the sync state than to mutate it and hope for the best.
<span class="term-fg31">-func (s *skeleton) processNewHead(head *types.Header, force bool) bool {</span>
<span class="term-fg32">+func (s *skeleton) processNewHead(head *types.Header, final *types.Header, force bool) bool {</span>
<span class="term-fg32">+	&#47;&#47; If a new finalized block was announced, update the sync process independent</span>
<span class="term-fg32">+	&#47;&#47; of what happens with the sync head below</span>
<span class="term-fg32">+	if final != nil {</span>
<span class="term-fg32">+		if number := final.Number.Uint64(); s.progress.Finalized == nil || *s.progress.Finalized != number {</span>
<span class="term-fg32">+			s.progress.Finalized = new(uint64)</span>
<span class="term-fg32">+			*s.progress.Finalized = final.Number.Uint64()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			s.saveSyncStatus(s.db)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; If the header cannot be inserted without interruption, return an error for
 	&#47;&#47; the outer loop to tear down the skeleton sync and restart it
 	number := head.Number.Uint64()
<span class="term-fg36">@@ -1150,9 +1162,10 @@</span> 	}
 	return nil
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; Bounds retrieves the current head and tail tracked by the skeleton syncer.</span>
<span class="term-fg31">-&#47;&#47; This method is used by the backfiller, whose life cycle is controlled by the</span>
<span class="term-fg31">-&#47;&#47; skeleton syncer.</span>
<span class="term-fg32">+&#47;&#47; Bounds retrieves the current head and tail tracked by the skeleton syncer</span>
<span class="term-fg32">+&#47;&#47; and optionally the last known finalized header if any was announced and if</span>
<span class="term-fg32">+&#47;&#47; it is still in the sync range. This method is used by the backfiller, whose</span>
<span class="term-fg32">+&#47;&#47; life cycle is controlled by the skeleton syncer.</span>
 &#47;&#47;
 &#47;&#47; Note, the method will not use the internal state of the skeleton, but will
 &#47;&#47; rather blindly pull stuff from the database. This is fine, because the back-
<span class="term-fg36">@@ -1160,28 +1173,34 @@</span> &#47;&#47; filler will only run when the skeleton chain is fully downloaded and stable.
 &#47;&#47; There might be new heads appended, but those are atomic from the perspective
 &#47;&#47; of this method. Any head reorg will first tear down the backfiller and only
 &#47;&#47; then make the modification.
<span class="term-fg31">-func (s *skeleton) Bounds() (head *types.Header, tail *types.Header, err error) {</span>
<span class="term-fg32">+func (s *skeleton) Bounds() (head *types.Header, tail *types.Header, final *types.Header, err error) {</span>
 	&#47;&#47; Read the current sync progress from disk and figure out the current head.
 	&#47;&#47; Although there&#39;s a lot of error handling here, these are mostly as sanity
 	&#47;&#47; checks to avoid crashing if a programming error happens. These should not
 	&#47;&#47; happen in live code.
 	status := rawdb.ReadSkeletonSyncStatus(s.db)
 	if len(status) == 0 {
<span class="term-fg31">-		return nil, nil, errors.New(&quot;beacon sync not yet started&quot;)</span>
<span class="term-fg32">+		return nil, nil, nil, errors.New(&quot;beacon sync not yet started&quot;)</span>
 	}
 	progress := new(skeletonProgress)
 	if err := json.Unmarshal(status, progress); err != nil {
<span class="term-fg31">-		return nil, nil, err</span>
<span class="term-fg32">+		return nil, nil, nil, err</span>
 	}
 	head = rawdb.ReadSkeletonHeader(s.db, progress.Subchains[0].Head)
 	if head == nil {
<span class="term-fg31">-		return nil, nil, fmt.Errorf(&quot;head skeleton header %d is missing&quot;, progress.Subchains[0].Head)</span>
<span class="term-fg32">+		return nil, nil, nil, fmt.Errorf(&quot;head skeleton header %d is missing&quot;, progress.Subchains[0].Head)</span>
 	}
 	tail = rawdb.ReadSkeletonHeader(s.db, progress.Subchains[0].Tail)
 	if tail == nil {
<span class="term-fg31">-		return nil, nil, fmt.Errorf(&quot;tail skeleton header %d is missing&quot;, progress.Subchains[0].Tail)</span>
<span class="term-fg32">+		return nil, nil, nil, fmt.Errorf(&quot;tail skeleton header %d is missing&quot;, progress.Subchains[0].Tail)</span>
 	}
<span class="term-fg31">-	return head, tail, nil</span>
<span class="term-fg32">+	if progress.Finalized != nil &amp;&amp; tail.Number.Uint64() &lt;= *progress.Finalized &amp;&amp; *progress.Finalized &lt;= head.Number.Uint64() {</span>
<span class="term-fg32">+		final = rawdb.ReadSkeletonHeader(s.db, *progress.Finalized)</span>
<span class="term-fg32">+		if final == nil {</span>
<span class="term-fg32">+			return nil, nil, nil, fmt.Errorf(&quot;finalized skeleton header %d is missing&quot;, *progress.Finalized)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return head, tail, final, nil</span>
 }
&nbsp;
 &#47;&#47; Header retrieves a specific header tracked by the skeleton syncer. This method</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-49dbdba62cb515568fdde071" role="button"
                   aria-expanded="false" aria-controls="id-49dbdba62cb515568fdde071">
                    <code>eth/downloader/skeleton_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/downloader/skeleton_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/downloader/skeleton_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-49dbdba62cb515568fdde071"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;skeleton_test.go op-geth&#47;eth&#47;downloader&#47;skeleton_test.go</span>
<span class="term-fg1">index 3b8e627cba89e444a2876d10b98768452f12123b..b19494a7b069d32ec3f83c84dec5c80b603cbeb4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;skeleton_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;downloader&#47;skeleton_test.go</span>
<span class="term-fg36">@@ -370,7 +370,7 @@</span> 		wait := make(chan struct{})
&nbsp;
 		skeleton := newSkeleton(db, newPeerSet(), nil, newHookedBackfiller())
 		skeleton.syncStarting = func() { close(wait) }
<span class="term-fg31">-		skeleton.Sync(tt.head, true)</span>
<span class="term-fg32">+		skeleton.Sync(tt.head, nil, true)</span>
&nbsp;
 		&lt;-wait
 		skeleton.Terminate()
<span class="term-fg36">@@ -484,10 +484,10 @@</span> 		wait := make(chan struct{})
&nbsp;
 		skeleton := newSkeleton(db, newPeerSet(), nil, newHookedBackfiller())
 		skeleton.syncStarting = func() { close(wait) }
<span class="term-fg31">-		skeleton.Sync(tt.head, true)</span>
<span class="term-fg32">+		skeleton.Sync(tt.head, nil, true)</span>
&nbsp;
 		&lt;-wait
<span class="term-fg31">-		if err := skeleton.Sync(tt.extend, false); err != tt.err {</span>
<span class="term-fg32">+		if err := skeleton.Sync(tt.extend, nil, false); err != tt.err {</span>
 			t.Errorf(&quot;test %d: extension failure mismatch: have %v, want %v&quot;, i, err, tt.err)
 		}
 		skeleton.Terminate()
<span class="term-fg36">@@ -859,7 +859,7 @@</span> 			}
 		}
 		&#47;&#47; Create a skeleton sync and run a cycle
 		skeleton := newSkeleton(db, peerset, drop, filler)
<span class="term-fg31">-		skeleton.Sync(tt.head, true)</span>
<span class="term-fg32">+		skeleton.Sync(tt.head, nil, true)</span>
&nbsp;
 		var progress skeletonProgress
 		&#47;&#47; Wait a bit (bleah) for the initial sync loop to go to idle. This might
<span class="term-fg36">@@ -910,7 +910,7 @@</span> 			}
 		}
 		&#47;&#47; Apply the post-init events if there&#39;s any
 		if tt.newHead != nil {
<span class="term-fg31">-			skeleton.Sync(tt.newHead, true)</span>
<span class="term-fg32">+			skeleton.Sync(tt.newHead, nil, true)</span>
 		}
 		if tt.newPeer != nil {
 			if err := peerset.Register(newPeerConnection(tt.newPeer.id, eth.ETH66, tt.newPeer, log.New(&quot;id&quot;, tt.newPeer.id))); err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-529760d216cd1fc4b92f4868" role="button"
                   aria-expanded="false" aria-controls="id-529760d216cd1fc4b92f4868">
                    <code>eth/gasprice/gasprice_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/gasprice/gasprice_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/gasprice/gasprice_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-529760d216cd1fc4b92f4868"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;gasprice&#47;gasprice_test.go op-geth&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg1">index a987d46458e49868af443cda4f6e4377c42a1941..4ee5a0d1b28720a35dd179fb2a275ab51204a3c7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;gasprice&#47;gasprice_test.go</span>
<span class="term-fg36">@@ -49,10 +49,10 @@</span> 	if number == rpc.EarliestBlockNumber {
 		number = 0
 	}
 	if number == rpc.FinalizedBlockNumber {
<span class="term-fg31">-		return b.chain.CurrentFinalizedBlock().Header(), nil</span>
<span class="term-fg32">+		return b.chain.CurrentFinalBlock(), nil</span>
 	}
 	if number == rpc.SafeBlockNumber {
<span class="term-fg31">-		return b.chain.CurrentSafeBlock().Header(), nil</span>
<span class="term-fg32">+		return b.chain.CurrentSafeBlock(), nil</span>
 	}
 	if number == rpc.LatestBlockNumber {
 		number = testHead
<span class="term-fg36">@@ -75,10 +75,10 @@</span> 	if number == rpc.EarliestBlockNumber {
 		number = 0
 	}
 	if number == rpc.FinalizedBlockNumber {
<span class="term-fg31">-		return b.chain.CurrentFinalizedBlock(), nil</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.chain.CurrentFinalBlock().Number.Uint64())</span>
 	}
 	if number == rpc.SafeBlockNumber {
<span class="term-fg31">-		return b.chain.CurrentSafeBlock(), nil</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.chain.CurrentSafeBlock().Number.Uint64())</span>
 	}
 	if number == rpc.LatestBlockNumber {
 		number = testHead
<span class="term-fg36">@@ -169,8 +169,8 @@</span> 	if err != nil {
 		t.Fatalf(&quot;Failed to create local chain, %v&quot;, err)
 	}
 	chain.InsertChain(blocks)
<span class="term-fg31">-	chain.SetFinalized(chain.GetBlockByNumber(25))</span>
<span class="term-fg31">-	chain.SetSafe(chain.GetBlockByNumber(25))</span>
<span class="term-fg32">+	chain.SetFinalized(chain.GetBlockByNumber(25).Header())</span>
<span class="term-fg32">+	chain.SetSafe(chain.GetBlockByNumber(25).Header())</span>
 	return &amp;testBackend{chain: chain, pending: pending}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b6914ce91d97ce3cb2802614" role="button"
                   aria-expanded="false" aria-controls="id-b6914ce91d97ce3cb2802614">
                    <code>eth/handler_eth_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/handler_eth_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/handler_eth_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+10</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b6914ce91d97ce3cb2802614"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;handler_eth_test.go op-geth&#47;eth&#47;handler_eth_test.go</span>
<span class="term-fg1">index 502cc8e6a9f69932f9012d9b2dfd4098dd840c00..9f0dd8ec5de4f01b0f6d3e2a1906862901fbfa99 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;handler_eth_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;handler_eth_test.go</span>
<span class="term-fg36">@@ -274,7 +274,7 @@</span> 	&#47;&#47; Run the handshake locally to avoid spinning up a source handler
 	var (
 		genesis = handler.chain.Genesis()
 		head    = handler.chain.CurrentBlock()
<span class="term-fg31">-		td      = handler.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+		td      = handler.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 	)
 	if err := src.Handshake(1, td, head.Hash(), genesis.Hash(), forkid.NewIDWithChain(handler.chain), forkid.NewFilter(handler.chain)); err != nil {
 		t.Fatalf(&quot;failed to run protocol handshake&quot;)
<span class="term-fg36">@@ -337,7 +337,7 @@</span> 	&#47;&#47; Run the handshake locally to avoid spinning up a source handler
 	var (
 		genesis = handler.chain.Genesis()
 		head    = handler.chain.CurrentBlock()
<span class="term-fg31">-		td      = handler.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+		td      = handler.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 	)
 	if err := sink.Handshake(1, td, head.Hash(), genesis.Hash(), forkid.NewIDWithChain(handler.chain), forkid.NewFilter(handler.chain)); err != nil {
 		t.Fatalf(&quot;failed to run protocol handshake&quot;)
<span class="term-fg36">@@ -545,7 +545,7 @@</span> 	&#47;&#47; Run the handshake locally to avoid spinning up a remote handler.
 	var (
 		genesis = handler.chain.Genesis()
 		head    = handler.chain.CurrentBlock()
<span class="term-fg31">-		td      = handler.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+		td      = handler.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 	)
 	if err := remote.Handshake(1, td, head.Hash(), genesis.Hash(), forkid.NewIDWithChain(handler.chain), forkid.NewFilter(handler.chain)); err != nil {
 		t.Fatalf(&quot;failed to run protocol handshake&quot;)
<span class="term-fg36">@@ -661,7 +661,8 @@</span> 		defer sub.Unsubscribe()
 	}
 	&#47;&#47; Initiate a block propagation across the peers
 	time.Sleep(100 * time.Millisecond)
<span class="term-fg31">-	source.handler.BroadcastBlock(source.chain.CurrentBlock(), true)</span>
<span class="term-fg32">+	header := source.chain.CurrentBlock()</span>
<span class="term-fg32">+	source.handler.BroadcastBlock(source.chain.GetBlock(header.Hash(), header.Number.Uint64()), true)</span>
&nbsp;
 	&#47;&#47; Iterate through all the sinks and ensure the correct number got the block
 	done := make(chan struct{}, peers)
<span class="term-fg36">@@ -734,18 +735,19 @@</span> 	go eth.Handle(backend, sink)
&nbsp;
 	&#47;&#47; Create various combinations of malformed blocks
 	head := source.chain.CurrentBlock()
<span class="term-fg32">+	block := source.chain.GetBlock(head.Hash(), head.Number.Uint64())</span>
&nbsp;
<span class="term-fg31">-	malformedUncles := head.Header()</span>
<span class="term-fg32">+	malformedUncles := head</span>
 	malformedUncles.UncleHash[0]++
<span class="term-fg31">-	malformedTransactions := head.Header()</span>
<span class="term-fg32">+	malformedTransactions := head</span>
 	malformedTransactions.TxHash[0]++
<span class="term-fg31">-	malformedEverything := head.Header()</span>
<span class="term-fg32">+	malformedEverything := head</span>
 	malformedEverything.UncleHash[0]++
 	malformedEverything.TxHash[0]++
&nbsp;
 	&#47;&#47; Try to broadcast all malformations and ensure they all get discarded
 	for _, header := range []*types.Header{malformedUncles, malformedTransactions, malformedEverything} {
<span class="term-fg31">-		block := types.NewBlockWithHeader(header).WithBody(head.Transactions(), head.Uncles())</span>
<span class="term-fg32">+		block := types.NewBlockWithHeader(header).WithBody(block.Transactions(), block.Uncles())</span>
 		if err := src.SendNewBlock(block, big.NewInt(131136)); err != nil {
 			t.Fatalf(&quot;failed to broadcast block: %v&quot;, err)
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1d468703b96284b7177961b8" role="button"
                   aria-expanded="false" aria-controls="id-1d468703b96284b7177961b8">
                    <code>eth/peer.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/peer.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/peer.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1d468703b96284b7177961b8"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;peer.go op-geth&#47;eth&#47;peer.go</span>
<span class="term-fg1">index 55e5f0046206aaa31a39e8dc1dcf58488344cdd1..7618777716600afe253657dff857907d37af2d45 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;peer.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;peer.go</span>
<span class="term-fg36">@@ -17,8 +17,6 @@</span>
 package eth
&nbsp;
 import (
<span class="term-fg31">-	&quot;math&#47;big&quot;</span>
<span class="term-fg31">-</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;protocols&#47;eth&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;protocols&#47;snap&quot;
 )
<span class="term-fg36">@@ -26,9 +24,7 @@</span>
 &#47;&#47; ethPeerInfo represents a short summary of the `eth` sub-protocol metadata known
 &#47;&#47; about a connected peer.
 type ethPeerInfo struct {
<span class="term-fg31">-	Version    uint     `json:&quot;version&quot;`    &#47;&#47; Ethereum protocol version negotiated</span>
<span class="term-fg31">-	Difficulty *big.Int `json:&quot;difficulty&quot;` &#47;&#47; Total difficulty of the peer&#39;s blockchain</span>
<span class="term-fg31">-	Head       string   `json:&quot;head&quot;`       &#47;&#47; Hex hash of the peer&#39;s best owned block</span>
<span class="term-fg32">+	Version uint `json:&quot;version&quot;` &#47;&#47; Ethereum protocol version negotiated</span>
 }
&nbsp;
 &#47;&#47; ethPeer is a wrapper around eth.Peer to maintain a few extra metadata.
<span class="term-fg36">@@ -39,12 +35,8 @@</span> }
&nbsp;
 &#47;&#47; info gathers and returns some `eth` protocol metadata known about a peer.
 func (p *ethPeer) info() *ethPeerInfo {
<span class="term-fg31">-	hash, td := p.Head()</span>
<span class="term-fg31">-</span>
 	return &amp;ethPeerInfo{
<span class="term-fg31">-		Version:    p.Version(),</span>
<span class="term-fg31">-		Difficulty: td,</span>
<span class="term-fg31">-		Head:       hash.Hex(),</span>
<span class="term-fg32">+		Version: p.Version(),</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-df342ed0094f2123951d13fc" role="button"
                   aria-expanded="false" aria-controls="id-df342ed0094f2123951d13fc">
                    <code>eth/protocols/eth/handler.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/protocols/eth/handler.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/protocols/eth/handler.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-df342ed0094f2123951d13fc"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler.go op-geth&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg1">index ae4ec9142e8b0fa5dc68e96431caa66b06126d19..2f2dd1cf6ae315dab57b069cd68de4fc1d3fdd98 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg36">@@ -137,12 +137,14 @@</span>
 &#47;&#47; nodeInfo retrieves some `eth` protocol metadata about the running host node.
 func nodeInfo(chain *core.BlockChain, network uint64) *NodeInfo {
 	head := chain.CurrentBlock()
<span class="term-fg32">+	hash := head.Hash()</span>
<span class="term-fg32">+</span>
 	return &amp;NodeInfo{
 		Network:    network,
<span class="term-fg31">-		Difficulty: chain.GetTd(head.Hash(), head.NumberU64()),</span>
<span class="term-fg32">+		Difficulty: chain.GetTd(hash, head.Number.Uint64()),</span>
 		Genesis:    chain.Genesis().Hash(),
 		Config:     chain.Config(),
<span class="term-fg31">-		Head:       head.Hash(),</span>
<span class="term-fg32">+		Head:       hash,</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9de4d1f22d844c26f4bb69b2" role="button"
                   aria-expanded="false" aria-controls="id-9de4d1f22d844c26f4bb69b2">
                    <code>eth/protocols/eth/handler_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/protocols/eth/handler_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/protocols/eth/handler_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9de4d1f22d844c26f4bb69b2"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler_test.go op-geth&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg1">index 76505ab8d32bc3e62e6ee3a7785a501545e4e276..bbb9866bd3dfe4e20a2c1820aa8bb80a144f289b 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;protocols&#47;eth&#47;handler_test.go</span>
<span class="term-fg36">@@ -225,24 +225,24 @@</span> 			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: 0}, Amount: 1},
 			[]common.Hash{backend.chain.GetBlockByNumber(0).Hash()},
 		},
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64()}, Amount: 1},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64()}, Amount: 1},</span>
 			[]common.Hash{backend.chain.CurrentBlock().Hash()},
 		},
 		{ &#47;&#47; If the peer requests a bit into the future, we deliver what we have
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64()}, Amount: 10},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64()}, Amount: 10},</span>
 			[]common.Hash{backend.chain.CurrentBlock().Hash()},
 		},
 		&#47;&#47; Ensure protocol limits are honored
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64() - 1}, Amount: limit + 10, Reverse: true},</span>
<span class="term-fg31">-			getHashes(backend.chain.CurrentBlock().NumberU64(), limit),</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64() - 1}, Amount: limit + 10, Reverse: true},</span>
<span class="term-fg32">+			getHashes(backend.chain.CurrentBlock().Number.Uint64(), limit),</span>
 		},
 		&#47;&#47; Check that requesting more than available is handled gracefully
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64() - 4}, Skip: 3, Amount: 3},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64() - 4}, Skip: 3, Amount: 3},</span>
 			[]common.Hash{
<span class="term-fg31">-				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().NumberU64() - 4).Hash(),</span>
<span class="term-fg31">-				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().NumberU64()).Hash(),</span>
<span class="term-fg32">+				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().Number.Uint64() - 4).Hash(),</span>
<span class="term-fg32">+				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().Number.Uint64()).Hash(),</span>
 			},
 		}, {
 			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: 4}, Skip: 3, Amount: 3, Reverse: true},
<span class="term-fg36">@@ -253,10 +253,10 @@</span> 			},
 		},
 		&#47;&#47; Check that requesting more than available is handled gracefully, even if mid skip
 		{
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64() - 4}, Skip: 2, Amount: 3},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64() - 4}, Skip: 2, Amount: 3},</span>
 			[]common.Hash{
<span class="term-fg31">-				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().NumberU64() - 4).Hash(),</span>
<span class="term-fg31">-				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().NumberU64() - 1).Hash(),</span>
<span class="term-fg32">+				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().Number.Uint64() - 4).Hash(),</span>
<span class="term-fg32">+				backend.chain.GetBlockByNumber(backend.chain.CurrentBlock().Number.Uint64() - 1).Hash(),</span>
 			},
 		}, {
 			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: 4}, Skip: 2, Amount: 3, Reverse: true},
<span class="term-fg36">@@ -293,7 +293,7 @@</span> 		{
 			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Hash: unknown}, Amount: 1},
 			[]common.Hash{},
 		}, {
<span class="term-fg31">-			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().NumberU64() + 1}, Amount: 1},</span>
<span class="term-fg32">+			&amp;GetBlockHeadersPacket{Origin: HashOrNumber{Number: backend.chain.CurrentBlock().Number.Uint64() + 1}, Amount: 1},</span>
 			[]common.Hash{},
 		},
 	}
<span class="term-fg36">@@ -394,7 +394,7 @@</span> 			seen   = make(map[int64]bool)
 		)
 		for j := 0; j &lt; tt.random; j++ {
 			for {
<span class="term-fg31">-				num := rand.Int63n(int64(backend.chain.CurrentBlock().NumberU64()))</span>
<span class="term-fg32">+				num := rand.Int63n(int64(backend.chain.CurrentBlock().Number.Uint64()))</span>
 				if !seen[num] {
 					seen[num] = true
&nbsp;
<span class="term-fg36">@@ -529,7 +529,7 @@</span> 	}
&nbsp;
 	&#47;&#47; Sanity check whether all state matches.
 	accounts := []common.Address{testAddr, acc1Addr, acc2Addr}
<span class="term-fg31">-	for i := uint64(0); i &lt;= backend.chain.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+	for i := uint64(0); i &lt;= backend.chain.CurrentBlock().Number.Uint64(); i++ {</span>
 		root := backend.chain.GetBlockByNumber(i).Root()
 		reconstructed, _ := state.New(root, state.NewDatabase(reconstructDB), nil)
 		for j, acc := range accounts {
<span class="term-fg36">@@ -602,7 +602,7 @@</span> 	var (
 		hashes   []common.Hash
 		receipts [][]*types.Receipt
 	)
<span class="term-fg31">-	for i := uint64(0); i &lt;= backend.chain.CurrentBlock().NumberU64(); i++ {</span>
<span class="term-fg32">+	for i := uint64(0); i &lt;= backend.chain.CurrentBlock().Number.Uint64(); i++ {</span>
 		block := backend.chain.GetBlockByNumber(i)
&nbsp;
 		hashes = append(hashes, block.Hash())</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-47f585461c25006568365e2f" role="button"
                   aria-expanded="false" aria-controls="id-47f585461c25006568365e2f">
                    <code>eth/protocols/eth/handshake_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/protocols/eth/handshake_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/protocols/eth/handshake_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-47f585461c25006568365e2f"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handshake_test.go op-geth&#47;eth&#47;protocols&#47;eth&#47;handshake_test.go</span>
<span class="term-fg1">index c768edaeac01bcf18d684274e9990babc2696f58..5c6727d91cc76ebb1b1d52b5881ae02a70721cf4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handshake_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;protocols&#47;eth&#47;handshake_test.go</span>
<span class="term-fg36">@@ -39,7 +39,7 @@</span>
 	var (
 		genesis = backend.chain.Genesis()
 		head    = backend.chain.CurrentBlock()
<span class="term-fg31">-		td      = backend.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+		td      = backend.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 		forkID  = forkid.NewID(backend.chain.Config(), backend.chain.Genesis().Hash(), backend.chain.CurrentHeader().Number.Uint64(), backend.chain.CurrentHeader().Time)
 	)
 	tests := []struct {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5b33242b563eb3093c8f9e6c" role="button"
                   aria-expanded="false" aria-controls="id-5b33242b563eb3093c8f9e6c">
                    <code>eth/sync.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/sync.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/sync.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-10</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5b33242b563eb3093c8f9e6c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;sync.go op-geth&#47;eth&#47;sync.go</span>
<span class="term-fg1">index 8fd86b578cf62ebaf573bdbf98b23c0b6cede2be..6d764ef4822b746d5f2719b9af92a84045f9b133 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;sync.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;sync.go</span>
<span class="term-fg36">@@ -206,22 +206,22 @@</span>
 func (cs *chainSyncer) modeAndLocalHead() (downloader.SyncMode, *big.Int) {
 	&#47;&#47; If we&#39;re in snap sync mode, return that directly
 	if atomic.LoadUint32(&amp;cs.handler.snapSync) == 1 {
<span class="term-fg31">-		block := cs.handler.chain.CurrentFastBlock()</span>
<span class="term-fg31">-		td := cs.handler.chain.GetTd(block.Hash(), block.NumberU64())</span>
<span class="term-fg32">+		block := cs.handler.chain.CurrentSnapBlock()</span>
<span class="term-fg32">+		td := cs.handler.chain.GetTd(block.Hash(), block.Number.Uint64())</span>
 		return downloader.SnapSync, td
 	}
 	&#47;&#47; We are probably in full sync, but we might have rewound to before the
 	&#47;&#47; snap sync pivot, check if we should reenable
 	if pivot := rawdb.ReadLastPivotNumber(cs.handler.database); pivot != nil {
<span class="term-fg31">-		if head := cs.handler.chain.CurrentBlock(); head.NumberU64() &lt; *pivot {</span>
<span class="term-fg31">-			block := cs.handler.chain.CurrentFastBlock()</span>
<span class="term-fg31">-			td := cs.handler.chain.GetTd(block.Hash(), block.NumberU64())</span>
<span class="term-fg32">+		if head := cs.handler.chain.CurrentBlock(); head.Number.Uint64() &lt; *pivot {</span>
<span class="term-fg32">+			block := cs.handler.chain.CurrentSnapBlock()</span>
<span class="term-fg32">+			td := cs.handler.chain.GetTd(block.Hash(), block.Number.Uint64())</span>
 			return downloader.SnapSync, td
 		}
 	}
 	&#47;&#47; Nope, we&#39;re really full syncing
 	head := cs.handler.chain.CurrentBlock()
<span class="term-fg31">-	td := cs.handler.chain.GetTd(head.Hash(), head.NumberU64())</span>
<span class="term-fg32">+	td := cs.handler.chain.GetTd(head.Hash(), head.Number.Uint64())</span>
 	return downloader.FullSync, td
 }
&nbsp;
<span class="term-fg36">@@ -263,21 +263,23 @@</span> 	}
 	&#47;&#47; If we&#39;ve successfully finished a sync cycle and passed any required checkpoint,
 	&#47;&#47; enable accepting transactions from the network.
 	head := h.chain.CurrentBlock()
<span class="term-fg31">-	if head.NumberU64() &gt;= h.checkpointNumber {</span>
<span class="term-fg32">+	if head.Number.Uint64() &gt;= h.checkpointNumber {</span>
 		&#47;&#47; Checkpoint passed, sanity check the timestamp to have a fallback mechanism
 		&#47;&#47; for non-checkpointed (number = 0) private networks.
<span class="term-fg31">-		if head.Time() &gt;= uint64(time.Now().AddDate(0, -1, 0).Unix()) {</span>
<span class="term-fg32">+		if head.Time &gt;= uint64(time.Now().AddDate(0, -1, 0).Unix()) {</span>
 			atomic.StoreUint32(&amp;h.acceptTxs, 1)
 		}
 	}
<span class="term-fg31">-	if head.NumberU64() &gt; 0 {</span>
<span class="term-fg32">+	if head.Number.Uint64() &gt; 0 {</span>
 		&#47;&#47; We&#39;ve completed a sync cycle, notify all peers of new state. This path is
 		&#47;&#47; essential in star-topology networks where a gateway node needs to notify
 		&#47;&#47; all its out-of-date peers of the availability of a new block. This failure
 		&#47;&#47; scenario will most often crop up in private and hackathon networks with
 		&#47;&#47; degenerate connectivity, but it should be healthy for the mainnet too to
 		&#47;&#47; more reliably update peers or the local TD state.
<span class="term-fg31">-		h.BroadcastBlock(head, false)</span>
<span class="term-fg32">+		if block := h.chain.GetBlock(head.Hash(), head.Number.Uint64()); block != nil {</span>
<span class="term-fg32">+			h.BroadcastBlock(block, false)</span>
<span class="term-fg32">+		}</span>
 	}
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9307e8a651282a0d340ff591" role="button"
                   aria-expanded="false" aria-controls="id-9307e8a651282a0d340ff591">
                    <code>eth/tracers/internal/tracetest/calltrace_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/internal/tracetest/calltrace_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/calltrace_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9307e8a651282a0d340ff591"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;calltrace_test.go op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;calltrace_test.go</span>
<span class="term-fg1">index 808841ade11108a571349938b886b74722ee06eb..62182e3a82b4a7f8287e5f543b6cf8ccadfcde5d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;calltrace_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;calltrace_test.go</span>
<span class="term-fg36">@@ -58,7 +58,7 @@</span> type callTrace struct {
 	From         common.Address  `json:&quot;from&quot;`
 	Gas          *hexutil.Uint64 `json:&quot;gas&quot;`
 	GasUsed      *hexutil.Uint64 `json:&quot;gasUsed&quot;`
<span class="term-fg31">-	To           common.Address  `json:&quot;to,omitempty&quot;`</span>
<span class="term-fg32">+	To           *common.Address `json:&quot;to,omitempty&quot;`</span>
 	Input        hexutil.Bytes   `json:&quot;input&quot;`
 	Output       hexutil.Bytes   `json:&quot;output,omitempty&quot;`
 	Error        string          `json:&quot;error,omitempty&quot;`
<span class="term-fg36">@@ -145,7 +145,7 @@</span> 			if err != nil {
 				t.Fatalf(&quot;failed to create call tracer: %v&quot;, err)
 			}
 			evm := vm.NewEVM(context, txContext, statedb, test.Genesis.Config, vm.Config{Debug: true, Tracer: tracer})
<span class="term-fg31">-			msg, err := tx.AsMessage(signer, nil)</span>
<span class="term-fg32">+			msg, err := core.TransactionToMessage(tx, signer, nil)</span>
 			if err != nil {
 				t.Fatalf(&quot;failed to prepare transaction for tracing: %v&quot;, err)
 			}
<span class="term-fg36">@@ -220,7 +220,7 @@</span> 	if err := rlp.DecodeBytes(common.FromHex(test.Input), tx); err != nil {
 		b.Fatalf(&quot;failed to parse testcase input: %v&quot;, err)
 	}
 	signer := types.MakeSigner(test.Genesis.Config, new(big.Int).SetUint64(uint64(test.Context.Number)))
<span class="term-fg31">-	msg, err := tx.AsMessage(signer, nil)</span>
<span class="term-fg32">+	msg, err := core.TransactionToMessage(tx, signer, nil)</span>
 	if err != nil {
 		b.Fatalf(&quot;failed to prepare transaction for tracing: %v&quot;, err)
 	}
<span class="term-fg36">@@ -314,7 +314,7 @@</span> 	if err != nil {
 		t.Fatalf(&quot;failed to create call tracer: %v&quot;, err)
 	}
 	evm := vm.NewEVM(context, txContext, statedb, params.MainnetChainConfig, vm.Config{Debug: true, Tracer: tracer})
<span class="term-fg31">-	msg, err := tx.AsMessage(signer, nil)</span>
<span class="term-fg32">+	msg, err := core.TransactionToMessage(tx, signer, nil)</span>
 	if err != nil {
 		t.Fatalf(&quot;failed to prepare transaction for tracing: %v&quot;, err)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cb45faf7c0117ef45f0ba901" role="button"
                   aria-expanded="false" aria-controls="id-cb45faf7c0117ef45f0ba901">
                    <code>eth/tracers/internal/tracetest/flat_calltrace_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/flat_calltrace_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+213</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cb45faf7c0117ef45f0ba901"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;flat_calltrace_test.go op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;flat_calltrace_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..8cd5a42bc0c01bb399efcf73ccfb4fc4b62dcb21</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;flat_calltrace_test.go</span>
<span class="term-fg36">@@ -0,0 +1,213 @@</span>
<span class="term-fg32">+package tracetest</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;reflect&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rlp&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Force-load the native, to trigger registration</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; flatCallTrace is the result of a callTracerParity run.</span>
<span class="term-fg32">+type flatCallTrace struct {</span>
<span class="term-fg32">+	Action              flatCallTraceAction `json:&quot;action&quot;`</span>
<span class="term-fg32">+	BlockHash           common.Hash         `json:&quot;-&quot;`</span>
<span class="term-fg32">+	BlockNumber         uint64              `json:&quot;-&quot;`</span>
<span class="term-fg32">+	Error               string              `json:&quot;error,omitempty&quot;`</span>
<span class="term-fg32">+	Result              flatCallTraceResult `json:&quot;result,omitempty&quot;`</span>
<span class="term-fg32">+	Subtraces           int                 `json:&quot;subtraces&quot;`</span>
<span class="term-fg32">+	TraceAddress        []int               `json:&quot;traceAddress&quot;`</span>
<span class="term-fg32">+	TransactionHash     common.Hash         `json:&quot;-&quot;`</span>
<span class="term-fg32">+	TransactionPosition uint64              `json:&quot;-&quot;`</span>
<span class="term-fg32">+	Type                string              `json:&quot;type&quot;`</span>
<span class="term-fg32">+	Time                string              `json:&quot;-&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallTraceAction struct {</span>
<span class="term-fg32">+	Author         common.Address `json:&quot;author,omitempty&quot;`</span>
<span class="term-fg32">+	RewardType     string         `json:&quot;rewardType,omitempty&quot;`</span>
<span class="term-fg32">+	SelfDestructed common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+	Balance        hexutil.Big    `json:&quot;balance,omitempty&quot;`</span>
<span class="term-fg32">+	CallType       string         `json:&quot;callType,omitempty&quot;`</span>
<span class="term-fg32">+	CreationMethod string         `json:&quot;creationMethod,omitempty&quot;`</span>
<span class="term-fg32">+	From           common.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+	Gas            hexutil.Uint64 `json:&quot;gas,omitempty&quot;`</span>
<span class="term-fg32">+	Init           hexutil.Bytes  `json:&quot;init,omitempty&quot;`</span>
<span class="term-fg32">+	Input          hexutil.Bytes  `json:&quot;input,omitempty&quot;`</span>
<span class="term-fg32">+	RefundAddress  common.Address `json:&quot;refundAddress,omitempty&quot;`</span>
<span class="term-fg32">+	To             common.Address `json:&quot;to,omitempty&quot;`</span>
<span class="term-fg32">+	Value          hexutil.Big    `json:&quot;value,omitempty&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallTraceResult struct {</span>
<span class="term-fg32">+	Address common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+	Code    hexutil.Bytes  `json:&quot;code,omitempty&quot;`</span>
<span class="term-fg32">+	GasUsed hexutil.Uint64 `json:&quot;gasUsed,omitempty&quot;`</span>
<span class="term-fg32">+	Output  hexutil.Bytes  `json:&quot;output,omitempty&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; flatCallTracerTest defines a single test to check the call tracer against.</span>
<span class="term-fg32">+type flatCallTracerTest struct {</span>
<span class="term-fg32">+	Genesis      core.Genesis    `json:&quot;genesis&quot;`</span>
<span class="term-fg32">+	Context      callContext     `json:&quot;context&quot;`</span>
<span class="term-fg32">+	Input        string          `json:&quot;input&quot;`</span>
<span class="term-fg32">+	TracerConfig json.RawMessage `json:&quot;tracerConfig&quot;`</span>
<span class="term-fg32">+	Result       []flatCallTrace `json:&quot;result&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func flatCallTracerTestRunner(tracerName string, filename string, dirPath string, t testing.TB) error {</span>
<span class="term-fg32">+	&#47;&#47; Call tracer test found, read if from disk</span>
<span class="term-fg32">+	blob, err := os.ReadFile(filepath.Join(&quot;testdata&quot;, dirPath, filename))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to read testcase: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	test := new(flatCallTracerTest)</span>
<span class="term-fg32">+	if err := json.Unmarshal(blob, test); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to parse testcase: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Configure a blockchain with the given prestate</span>
<span class="term-fg32">+	tx := new(types.Transaction)</span>
<span class="term-fg32">+	if err := rlp.DecodeBytes(common.FromHex(test.Input), tx); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to parse testcase input: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	signer := types.MakeSigner(test.Genesis.Config, new(big.Int).SetUint64(uint64(test.Context.Number)))</span>
<span class="term-fg32">+	origin, _ := signer.Sender(tx)</span>
<span class="term-fg32">+	txContext := vm.TxContext{</span>
<span class="term-fg32">+		Origin:   origin,</span>
<span class="term-fg32">+		GasPrice: tx.GasPrice(),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	context := vm.BlockContext{</span>
<span class="term-fg32">+		CanTransfer: core.CanTransfer,</span>
<span class="term-fg32">+		Transfer:    core.Transfer,</span>
<span class="term-fg32">+		Coinbase:    test.Context.Miner,</span>
<span class="term-fg32">+		BlockNumber: new(big.Int).SetUint64(uint64(test.Context.Number)),</span>
<span class="term-fg32">+		Time:        uint64(test.Context.Time),</span>
<span class="term-fg32">+		Difficulty:  (*big.Int)(test.Context.Difficulty),</span>
<span class="term-fg32">+		GasLimit:    uint64(test.Context.GasLimit),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	_, statedb := tests.MakePreState(rawdb.NewMemoryDatabase(), test.Genesis.Alloc, false)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the tracer, the EVM environment and run it</span>
<span class="term-fg32">+	tracer, err := tracers.DefaultDirectory.New(tracerName, new(tracers.Context), test.TracerConfig)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to create call tracer: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	evm := vm.NewEVM(context, txContext, statedb, test.Genesis.Config, vm.Config{Debug: true, Tracer: tracer})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	msg, err := core.TransactionToMessage(tx, signer, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to prepare transaction for tracing: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	st := core.NewStateTransition(evm, msg, new(core.GasPool).AddGas(tx.Gas()))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if _, err = st.TransitionDb(); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to execute transaction: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Retrieve the trace result and compare against the etalon</span>
<span class="term-fg32">+	res, err := tracer.GetResult()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to retrieve trace result: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ret := new([]flatCallTrace)</span>
<span class="term-fg32">+	if err := json.Unmarshal(res, ret); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to unmarshal trace result: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !jsonEqualFlat(ret, test.Result) {</span>
<span class="term-fg32">+		t.Logf(&quot;tracer name: %s&quot;, tracerName)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; uncomment this for easier debugging</span>
<span class="term-fg32">+		&#47;&#47; have, _ := json.MarshalIndent(ret, &quot;&quot;, &quot; &quot;)</span>
<span class="term-fg32">+		&#47;&#47; want, _ := json.MarshalIndent(test.Result, &quot;&quot;, &quot; &quot;)</span>
<span class="term-fg32">+		&#47;&#47; t.Logf(&quot;trace mismatch: \nhave %+v\nwant %+v&quot;, string(have), string(want))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; uncomment this for harder debugging &lt;3 meowsbits</span>
<span class="term-fg32">+		&#47;&#47; lines := deep.Equal(ret, test.Result)</span>
<span class="term-fg32">+		&#47;&#47; for _, l := range lines {</span>
<span class="term-fg32">+		&#47;&#47; 	t.Logf(&quot;%s&quot;, l)</span>
<span class="term-fg32">+		&#47;&#47; 	t.FailNow()</span>
<span class="term-fg32">+		&#47;&#47; }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		t.Fatalf(&quot;trace mismatch: \nhave %+v\nwant %+v&quot;, ret, test.Result)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Iterates over all the input-output datasets in the tracer parity test harness and</span>
<span class="term-fg32">+&#47;&#47; runs the Native tracer against them.</span>
<span class="term-fg32">+func TestFlatCallTracerNative(t *testing.T) {</span>
<span class="term-fg32">+	testFlatCallTracer(&quot;flatCallTracer&quot;, &quot;call_tracer_flat&quot;, t)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testFlatCallTracer(tracerName string, dirPath string, t *testing.T) {</span>
<span class="term-fg32">+	files, err := os.ReadDir(filepath.Join(&quot;testdata&quot;, dirPath))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to retrieve tracer test suite: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, file := range files {</span>
<span class="term-fg32">+		if !strings.HasSuffix(file.Name(), &quot;.json&quot;) {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		file := file &#47;&#47; capture range variable</span>
<span class="term-fg32">+		t.Run(camel(strings.TrimSuffix(file.Name(), &quot;.json&quot;)), func(t *testing.T) {</span>
<span class="term-fg32">+			t.Parallel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			err := flatCallTracerTestRunner(tracerName, file.Name(), dirPath, t)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; jsonEqual is similar to reflect.DeepEqual, but does a &#39;bounce&#39; via json prior to</span>
<span class="term-fg32">+&#47;&#47; comparison</span>
<span class="term-fg32">+func jsonEqualFlat(x, y interface{}) bool {</span>
<span class="term-fg32">+	xTrace := new([]flatCallTrace)</span>
<span class="term-fg32">+	yTrace := new([]flatCallTrace)</span>
<span class="term-fg32">+	if xj, err := json.Marshal(x); err == nil {</span>
<span class="term-fg32">+		json.Unmarshal(xj, xTrace)</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if yj, err := json.Marshal(y); err == nil {</span>
<span class="term-fg32">+		json.Unmarshal(yj, yTrace)</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return reflect.DeepEqual(xTrace, yTrace)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func BenchmarkFlatCallTracer(b *testing.B) {</span>
<span class="term-fg32">+	files, err := filepath.Glob(&quot;testdata&#47;call_tracer_flat&#47;*.json&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		b.Fatalf(&quot;failed to read testdata: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, file := range files {</span>
<span class="term-fg32">+		filename := strings.TrimPrefix(file, &quot;testdata&#47;call_tracer_flat&#47;&quot;)</span>
<span class="term-fg32">+		b.Run(camel(strings.TrimSuffix(filename, &quot;.json&quot;)), func(b *testing.B) {</span>
<span class="term-fg32">+			for n := 0; n &lt; b.N; n++ {</span>
<span class="term-fg32">+				err := flatCallTracerTestRunner(&quot;flatCallTracer&quot;, filename, &quot;call_tracer_flat&quot;, b)</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					b.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a8cc8f1791aa92efb8f8895c" role="button"
                   aria-expanded="false" aria-controls="id-a8cc8f1791aa92efb8f8895c">
                    <code>eth/tracers/internal/tracetest/prestate_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/internal/tracetest/prestate_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/prestate_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a8cc8f1791aa92efb8f8895c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;prestate_test.go op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;prestate_test.go</span>
<span class="term-fg1">index 03f06311a3b96fe21422c90e9e2d78385c0ad788..f578e2f0f5fdba8f0e235e0c558ad32d2be923de 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;prestate_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;prestate_test.go</span>
<span class="term-fg36">@@ -115,7 +115,7 @@</span> 			if err != nil {
 				t.Fatalf(&quot;failed to create call tracer: %v&quot;, err)
 			}
 			evm := vm.NewEVM(context, txContext, statedb, test.Genesis.Config, vm.Config{Debug: true, Tracer: tracer})
<span class="term-fg31">-			msg, err := tx.AsMessage(signer, nil)</span>
<span class="term-fg32">+			msg, err := core.TransactionToMessage(tx, signer, nil)</span>
 			if err != nil {
 				t.Fatalf(&quot;failed to prepare transaction for tracing: %v&quot;, err)
 			}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bde07019a095b20bba87729e" role="button"
                   aria-expanded="false" aria-controls="id-bde07019a095b20bba87729e">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer/inner_create_oog_outer_throw.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/internal/tracetest/testdata/call_tracer/inner_create_oog_outer_throw.json" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer/inner_create_oog_outer_throw.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bde07019a095b20bba87729e"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_create_oog_outer_throw.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_create_oog_outer_throw.json</span>
<span class="term-fg1">index 40d240e4b82b2e219afa999a7f2c675ab3fe19cf..95c5889269fc4733416158ef5cfab47da77d61ef 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_create_oog_outer_throw.json</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_create_oog_outer_throw.json</span>
<span class="term-fg36">@@ -58,7 +58,6 @@</span>     &quot;calls&quot;: [
       {
         &quot;error&quot;: &quot;contract creation code storage out of gas&quot;,
         &quot;from&quot;: &quot;0x1d3ddf7caf024f253487e18bc4a15b1a360c170a&quot;,
<span class="term-fg31">-        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
         &quot;gas&quot;: &quot;0x39ff0&quot;,
         &quot;gasUsed&quot;: &quot;0x39ff0&quot;,
         &quot;input&quot;: &quot;0x606060405234620000005760405160208062001fd283398101604052515b805b600a8054600160a060020a031916600160a060020a0383161790555b506001600d819055600e81905560408051808201909152600c8082527f566f74696e672053746f636b00000000000000000000000000000000000000006020928301908152600b805460008290528251601860ff1990911617825590947f0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9600291831615610100026000190190921604601f0193909304830192906200010c565b828001600101855582156200010c579182015b828111156200010c578251825591602001919060010190620000ef565b5b50620001309291505b808211156200012c576000815560010162000116565b5090565b50506040805180820190915260038082527f43565300000000000000000000000000000000000000000000000000000000006020928301908152600c805460008290528251600660ff1990911617825590937fdf6966c971051c3d54ec59162606531493a51404a002842f56009d7e5cf4a8c760026001841615610100026000190190931692909204601f010481019291620001f7565b82800160010185558215620001f7579182015b82811115620001f7578251825591602001919060010190620001da565b5b506200021b9291505b808211156200012c576000815560010162000116565b5090565b50505b505b611da280620002306000396000f3006060604052361561019a5763ffffffff60e060020a600035041662e1986d811461019f57806302a72a4c146101d657806306eb4e421461020157806306fdde0314610220578063095ea7b3146102ad578063158ccb99146102dd57806318160ddd146102f85780631cf65a781461031757806323b872dd146103365780632c71e60a1461036c57806333148fd6146103ca578063435ebc2c146103f55780635eeb6e451461041e578063600e85b71461043c5780636103d70b146104a157806362c1e46a146104b05780636c182e99146104ba578063706dc87c146104f057806370a082311461052557806377174f851461055057806395d89b411461056f578063a7771ee3146105fc578063a9059cbb14610629578063ab377daa14610659578063b25dbb5e14610685578063b89a73cb14610699578063ca5eb5e1146106c6578063cbcf2e5a146106e1578063d21f05ba1461070e578063d347c2051461072d578063d96831e114610765578063dd62ed3e14610777578063df3c211b146107a8578063e2982c21146107d6578063eb944e4c14610801575b610000565b34610000576101d4600160a060020a036004351660243567ffffffffffffffff6044358116906064358116906084351661081f565b005b34610000576101ef600160a060020a0360043516610a30565b60408051918252519081900360200190f35b34610000576101ef610a4f565b60408051918252519081900360200190f35b346100005761022d610a55565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516602435610ae3565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516610b4e565b005b34610000576101ef610b89565b60408051918252519081900360200190f35b34610000576101ef610b8f565b60408051918252519081900360200190f35b34610000576102c9600160a060020a0360043581169060243516604435610b95565b604080519115158252519081900360200190f35b3461000057610388600160a060020a0360043516602435610bb7565b60408051600160a060020a039096168652602086019490945267ffffffffffffffff928316858501529082166060850152166080830152519081900360a00190f35b34610000576101ef600160a060020a0360043516610c21565b60408051918252519081900360200190f35b3461000057610402610c40565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d4600160a060020a0360043516602435610c4f565b005b3461000057610458600160a060020a0360043516602435610cc9565b60408051600160a060020a03909716875260208701959095528585019390935267ffffffffffffffff9182166060860152811660808501521660a0830152519081900360c00190f35b34610000576101d4610d9e565b005b6101d4610e1e565b005b34610000576104d3600160a060020a0360043516610e21565b6040805167ffffffffffffffff9092168252519081900360200190f35b3461000057610402600160a060020a0360043516610ead565b60408051600160a060020a039092168252519081900360200190f35b34610000576101ef600160a060020a0360043516610ef9565b60408051918252519081900360200190f35b34610000576101ef610f18565b60408051918252519081900360200190f35b346100005761022d610f1e565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516610fac565b604080519115158252519081900360200190f35b34610000576102c9600160a060020a0360043516602435610fc2565b604080519115158252519081900360200190f35b3461000057610402600435610fe2565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d46004351515610ffd565b005b34610000576102c9600160a060020a036004351661104c565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516611062565b005b34610000576102c9600160a060020a0360043516611070565b604080519115158252519081900360200190f35b34610000576101ef6110f4565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351667ffffffffffffffff602435166110fa565b60408051918252519081900360200190f35b34610000576101d4600435611121565b005b34610000576101ef600160a060020a03600435811690602435166111c6565b60408051918252519081900360200190f35b34610000576101ef6004356024356044356064356084356111f3565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351661128c565b60408051918252519081900360200190f35b34610000576101d4600160a060020a036004351660243561129e565b005b6040805160a08101825260008082526020820181905291810182905260608101829052608081019190915267ffffffffffffffff848116908416101561086457610000565b8367ffffffffffffffff168267ffffffffffffffff16101561088557610000565b8267ffffffffffffffff168267ffffffffffffffff1610156108a657610000565b506040805160a081018252600160a060020a033381168252602080830188905267ffffffffffffffff80871684860152858116606085015287166080840152908816600090815260039091529190912080546001810180835582818380158290116109615760030281600302836000526020600020918201910161096191905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050916000526020600020906003020160005b5082518154600160a060020a031916600160a060020a03909116178155602083015160018201556040830151600290910180546060850151608086015167ffffffffffffffff1990921667ffffffffffffffff948516176fffffffffffffffff00000000000000001916604060020a918516919091021777ffffffffffffffff000000000000000000000000000000001916608060020a939091169290920291909117905550610a268686610fc2565b505b505050505050565b600160a060020a0381166000908152600360205260409020545b919050565b60055481565b600b805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b600160a060020a03338116600081815260026020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b600a5433600160a060020a03908116911614610b6957610000565b600a8054600160a060020a031916600160a060020a0383161790555b5b50565b60005481565b60005b90565b6000610ba2848484611600565b610bad8484846116e2565b90505b9392505050565b600360205281600052604060002081815481101561000057906000526020600020906003020160005b5080546001820154600290920154600160a060020a03909116935090915067ffffffffffffffff80821691604060020a8104821691608060020a9091041685565b600160a060020a0381166000908152600860205260409020545b919050565b600a54600160a060020a031681565b600a5433600160a060020a03908116911614610c6a57610000565b610c7660005482611714565b6000908155600160a060020a038316815260016020526040902054610c9b9082611714565b600160a060020a038316600090815260016020526040812091909155610cc390839083611600565b5b5b5050565b6000600060006000600060006000600360008a600160a060020a0316600160a060020a0316815260200190815260200160002088815481101561000057906000526020600020906003020160005b508054600182015460028301546040805160a081018252600160a060020a039094168085526020850184905267ffffffffffffffff808416928601839052604060020a8404811660608701819052608060020a9094041660808601819052909c50929a509197509095509350909150610d90904261172d565b94505b509295509295509295565b33600160a060020a038116600090815260066020526040902054801515610dc457610000565b8030600160a060020a0316311015610ddb57610000565b600160a060020a0382166000818152600660205260408082208290555183156108fc0291849190818181858888f193505050501515610cc357610000565b5b5050565b5b565b600160a060020a03811660009081526003602052604081205442915b81811015610ea557600160a060020a03841660009081526003602052604090208054610e9a9190839081101561000057906000526020600020906003020160005b5060020154604060020a900467ffffffffffffffff168461177d565b92505b600101610e3d565b5b5050919050565b600160a060020a0380821660009081526007602052604081205490911615610eef57600160a060020a0380831660009081526007602052604090205416610ef1565b815b90505b919050565b600160a060020a0381166000908152600160205260409020545b919050565b600d5481565b600c805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b60006000610fb983610c21565b1190505b919050565b6000610fcf338484611600565b610fd983836117ac565b90505b92915050565b600460205260009081526040902054600160a060020a031681565b8015801561101a575061100f33610ef9565b61101833610c21565b115b1561102457610000565b33600160a060020a03166000908152600960205260409020805460ff19168215151790555b50565b60006000610fb983610ef9565b1190505b919050565b610b8533826117dc565b5b50565b600a54604080516000602091820181905282517fcbcf2e5a000000000000000000000000000000000000000000000000000000008152600160a060020a03868116600483015293519194939093169263cbcf2e5a92602480830193919282900301818787803b156100005760325a03f115610000575050604051519150505b919050565b600e5481565b6000610fd961110984846118b2565b61111385856119b6565b611a05565b90505b92915050565b600a5433600160a060020a0390811691161461113c57610000565b61114860005482611a1f565b600055600554600190101561116c57600a5461116c90600160a060020a0316611a47565b5b600a54600160a060020a03166000908152600160205260409020546111929082611a1f565b600a8054600160a060020a039081166000908152600160205260408120939093559054610b8592911683611600565b5b5b50565b600160a060020a038083166000908152600260209081526040808320938516835292905220545b92915050565b6000600060008487101561120a5760009250611281565b8387111561121a57879250611281565b61123f6112308961122b888a611714565b611a90565b61123a8689611714565b611abc565b915081925061124e8883611714565b905061127e8361127961126a8461122b8c8b611714565b611a90565b61123a888b611714565b611abc565b611a1f565b92505b505095945050505050565b60066020526000908152604090205481565b600160a060020a03821660009081526003602052604081208054829190849081101561000057906000526020600020906003020160005b50805490925033600160a060020a039081169116146112f357610000565b6040805160a0810182528354600160a060020a0316815260018401546020820152600284015467ffffffffffffffff80821693830193909352604060020a810483166060830152608060020a900490911660808201526113539042611af9565b600160a060020a0385166000908152600360205260409020805491925090849081101561000057906000526020600020906003020160005b508054600160a060020a031916815560006001820181905560029091018054600160c060020a0319169055600160a060020a0385168152600360205260409020805460001981019081101561000057906000526020600020906003020160005b50600160a060020a03851660009081526003602052604090208054859081101561000057906000526020600020906003020160005b5081548154600160a060020a031916600160a060020a03918216178255600180840154908301556002928301805493909201805467ffffffffffffffff191667ffffffffffffffff948516178082558354604060020a908190048616026fffffffffffffffff000000000000000019909116178082559254608060020a9081900490941690930277ffffffffffffffff00000000000000000000000000000000199092169190911790915584166000908152600360205260409020805460001981018083559190829080158290116115485760030281600302836000526020600020918201910161154891905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050600160a060020a033316600090815260016020526040902054611570915082611a1f565b600160a060020a03338116600090815260016020526040808220939093559086168152205461159f9082611714565b600160a060020a038086166000818152600160209081526040918290209490945580518581529051339093169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a35b50505050565b600160a060020a0383161561166e576116466008600061161f86610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611714565b6008600061165386610ead565b600160a060020a031681526020810191909152604001600020555b600160a060020a038216156116dc576116b46008600061168d85610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611a1f565b600860006116c185610ead565b600160a060020a031681526020810191909152604001600020555b5b505050565b600083826116f082426110fa565b8111156116fc57610000565b611707868686611b1b565b92505b5b50509392505050565b600061172283831115611b4d565b508082035b92915050565b6000610fd983602001518367ffffffffffffffff16856080015167ffffffffffffffff16866040015167ffffffffffffffff16876060015167ffffffffffffffff166111f3565b90505b92915050565b60008167ffffffffffffffff168367ffffffffffffffff1610156117a15781610fd9565b825b90505b92915050565b600033826117ba82426110fa565b8111156117c657610000565b6117d08585611b5d565b92505b5b505092915050565b6117e582610ef9565b6117ee83610c21565b11156117f957610000565b600160a060020a03811660009081526009602052604090205460ff16158015611834575081600160a060020a031681600160a060020a031614155b1561183e57610000565b61184782611070565b1561185157610000565b611864828261185f85610ef9565b611600565b600160a060020a0382811660009081526007602052604090208054600160a060020a031916918316918217905561189a82610ead565b600160a060020a031614610cc357610000565b5b5050565b600160a060020a038216600090815260036020526040812054815b818110156119885761197d836112796003600089600160a060020a0316600160a060020a0316815260200190815260200160002084815481101561000057906000526020600020906003020160005b506040805160a0810182528254600160a060020a031681526001830154602082015260029092015467ffffffffffffffff80821692840192909252604060020a810482166060840152608060020a900416608082015287611af9565b611a1f565b92505b6001016118cd565b600160a060020a0385166000908152600160205260409020546117d09084611714565b92505b505092915050565b600060006119c384611070565b80156119d157506000600d54115b90506119fb816119e9576119e485610ef9565b6119ec565b60005b6111138686611b7b565b611a05565b91505b5092915050565b60008183106117a15781610fd9565b825b90505b92915050565b6000828201611a3c848210801590611a375750838210155b611b4d565b8091505b5092915050565b611a508161104c565b15611a5a57610b85565b6005805460009081526004602052604090208054600160a060020a031916600160a060020a038416179055805460010190555b50565b6000828202611a3c841580611a37575083858381156100005704145b611b4d565b8091505b5092915050565b60006000611acc60008411611b4d565b8284811561000057049050611a3c838581156100005706828502018514611b4d565b8091505b5092915050565b6000610fd98360200151611b0d858561172d565b611714565b90505b92915050565b60008382611b2982426110fa565b811115611b3557610000565b611707868686611b8f565b92505b5b50509392505050565b801515610b8557610000565b5b50565b6000611b6883611a47565b610fd98383611c92565b90505b92915050565b6000610fd983610ef9565b90505b92915050565b600160a060020a038084166000908152600260209081526040808320338516845282528083205493861683526001909152812054909190611bd09084611a1f565b600160a060020a038086166000908152600160205260408082209390935590871681522054611bff9084611714565b600160a060020a038616600090815260016020526040902055611c228184611714565b600160a060020a038087166000818152600260209081526040808320338616845282529182902094909455805187815290519288169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a3600191505b509392505050565b60003382611ca082426110fa565b811115611cac57610000565b6117d08585611cc2565b92505b5b505092915050565b600160a060020a033316600090815260016020526040812054611ce59083611714565b600160a060020a033381166000908152600160205260408082209390935590851681522054611d149083611a1f565b600160a060020a038085166000818152600160209081526040918290209490945580518681529051919333909316927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a35060015b929150505600a165627a7a72305820bfa5ddd3fecf3f43aed25385ec7ec3ef79638c2e58d99f85d9a3cc494183bf160029000000000000000000000000a14bdd7e5666d784dcce98ad24d383a6b1cd4182&quot;,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cf1823e97a9dbd9d73725167" role="button"
                   aria-expanded="false" aria-controls="id-cf1823e97a9dbd9d73725167">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer/inner_revert_reason.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/internal/tracetest/testdata/call_tracer/inner_revert_reason.json" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer/inner_revert_reason.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cf1823e97a9dbd9d73725167"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_revert_reason.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_revert_reason.json</span>
<span class="term-fg1">index ec10902b284b2b00e40487e2fcb229bba73e7303..b5355f65fe94d21ce99d970e55f5388d24d49f42 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_revert_reason.json</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer&#47;inner_revert_reason.json</span>
<span class="term-fg36">@@ -50,7 +50,6 @@</span>   },
   &quot;input&quot;: &quot;0x02f9029d82053980849502f90085010c388d00832dc6c08080b90241608060405234801561001057600080fd5b50600060405161001f906100a2565b604051809103906000f08015801561003b573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff1663c04062266040518163ffffffff1660e01b815260040160006040518083038186803b15801561008457600080fd5b505afa158015610098573d6000803e3d6000fd5b50505050506100af565b610145806100fc83390190565b603f806100bd6000396000f3fe6080604052600080fdfea264697066735822122077f7dbd3450d6e817079cf3fe27107de5768bb3163a402b94e2206b468eb025664736f6c63430008070033608060405234801561001057600080fd5b50610125806100206000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c8063c040622614602d575b600080fd5b60336035565b005b60036002116076576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401606d906097565b60405180910390fd5b565b6000608360128360b5565b9150608c8260c6565b602082019050919050565b6000602082019050818103600083015260ae816078565b9050919050565b600082825260208201905092915050565b7f546869732063616c6c6564206661696c6564000000000000000000000000000060008201525056fea264697066735822122033f8d92e29d467e5ea08d0024eab0b36b86b8cdb3542c6e89dbaabeb8ffaa42064736f6c63430008070033c001a07566181071cabaf58b70fc41557eb813bfc7a24f5c58554e7fed0bf7c031f169a0420af50b5fe791a4d839e181a676db5250b415dfb35cb85d544db7a1475ae2cc&quot;,
   &quot;result&quot;: {
     &quot;from&quot;: &quot;0x3623191d4ccfbbdf09e8ebf6382a1f8257417bc1&quot;,
<span class="term-fg31">-    &quot;to&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
     &quot;gas&quot;: &quot;0x2cd774&quot;,
     &quot;gasUsed&quot;: &quot;0x25590&quot;,
     &quot;input&quot;: &quot;0x608060405234801561001057600080fd5b50600060405161001f906100a2565b604051809103906000f08015801561003b573d6000803e3d6000fd5b5090508073ffffffffffffffffffffffffffffffffffffffff1663c04062266040518163ffffffff1660e01b815260040160006040518083038186803b15801561008457600080fd5b505afa158015610098573d6000803e3d6000fd5b50505050506100af565b610145806100fc83390190565b603f806100bd6000396000f3fe6080604052600080fdfea264697066735822122077f7dbd3450d6e817079cf3fe27107de5768bb3163a402b94e2206b468eb025664736f6c63430008070033608060405234801561001057600080fd5b50610125806100206000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c8063c040622614602d575b600080fd5b60336035565b005b60036002116076576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401606d906097565b60405180910390fd5b565b6000608360128360b5565b9150608c8260c6565b602082019050919050565b6000602082019050818103600083015260ae816078565b9050919050565b600082825260208201905092915050565b7f546869732063616c6c6564206661696c6564000000000000000000000000000060008201525056fea264697066735822122033f8d92e29d467e5ea08d0024eab0b36b86b8cdb3542c6e89dbaabeb8ffaa42064736f6c63430008070033&quot;,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a32d1904d00d10795e812189" role="button"
                   aria-expanded="false" aria-controls="id-a32d1904d00d10795e812189">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/big_slow.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/big_slow.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+64</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a32d1904d00d10795e812189"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;big_slow.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;big_slow.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e54ede92b02a1e9c477802f48243b581a72dba0a</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;big_slow.json</span>
<span class="term-fg36">@@ -0,0 +1,64 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;50486697699375&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd783010406844765746887676f312e362e32856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4788482&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xf6bbc5bbe34d5c93fd5b4712cd498d1026b8b0f586efefe7fe30231ed6b8a1a5&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbcdfc35b86bedf72f0cda046a3c16829a2ef41d1&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xabca93555584c0463ee5c212251dd002bb3a93a157e06614276f93de53d4fdb8&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0xa64136fcb9c2d4ca&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1719576&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xab5eec2177a92d633e282936af66c46e24cfa8f2fdc2b8155f33885f483d06f3&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1466150166&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;28295412423546970038&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0xf8bda96b67036ee48107f2a0695ea673479dda56&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x1529e844f9ecdeec&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;33&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 1,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 3000000,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 1150000,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 8772000,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 9573000,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 10500839,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 10500839</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1719577&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;50486697732143&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1466150178&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4788484&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x2a65aca4d5fc5b5c859090a6c34d164135398226&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf874218504a817c800832318608080a35b620186a05a131560135760016020526000565b600080601f600039601f565b6000f31ba0575fa000a1f06659a7b6d3c7877601519a4997f04293f0dfa0eee6d8cd840c77a04c52ce50719ee2ff7a0c5753f4ee69c0340666f582dbb5148845a354ca726e4a&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xf8bda96b67036ee48107f2a0695ea673479dda56&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x22410c&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x5b620186a05a131560135760016020526000565b600080601f600039601f565b6000f3&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1719577,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0xb2e6a2546c45889427757171ab05b8b438525b42&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x219202&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2e0954936c89ddafbf9f8e33" role="button"
                   aria-expanded="false" aria-controls="id-2e0954936c89ddafbf9f8e33">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_fail_hide.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_fail_hide.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+74</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2e0954936c89ddafbf9f8e33"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_fail_hide.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_fail_hide.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..be198885cbc3382fe2c5d2a085f7d9fdd3dbf376</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_fail_hide.json</span>
<span class="term-fg36">@@ -0,0 +1,74 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4671584&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd683010b05846765746886676f312e3133856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9435026&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x755bd54de4b2f5a7a589a10d69888b4ead48a6311d5d69f2f69ca85ec35fbe0b&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x3a44525624571c31344ba57780f7664098fe7cbeafe532bcdee76a23fc474ba0&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x6dca647c00c72bbf&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555278&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x5f56d8323ee384b0c8d1de49d63e150e17283eea813483698362bc0ec9e0242a&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795319&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242614315030&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000004&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x62436e941792f02a5fb1&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;265356&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555279&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4669303&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795340&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9444238&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf86f83040c8c843b9aca0083019f7880809b60206000600060006013600462030d40f26002556000516000550081a2a086ad228c89ad9664287b12a5602a635a803506904f4ce39795990ac4f945cd57a025b30ea8042d773f6c5b13d7cc1b3979f9f10ee674410b6a2112ce840d0302dc&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x60206000600060006013600462030d40f260025560005160005500&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xf3bc&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x5f8a7e007172ba80afbff1b15f800eb0b260f224&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 74,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x5ef60b27ac971c22a7d484e546e50093ca62300c8986d165154e47773764b6a4&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555279,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xd6c98d1b87dfa92a210d99bad2873adaf0c9e51fe43addc63fd9cca03a5c6f46&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;209.346µs&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-491abfe4f9cc3feea0c0cb60" role="button"
                   aria-expanded="false" aria-controls="id-491abfe4f9cc3feea0c0cb60">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_oog.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_oog.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+93</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-491abfe4f9cc3feea0c0cb60"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_oog.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_oog.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..94b864ff497d9626d5b7286b9bb76768c8452f64</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_oog.json</span>
<span class="term-fg36">@@ -0,0 +1,94 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4671584&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010b05846765746888676f312e31342e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9425823&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x27dd7d052dbc8a29cc5b9487e1e41d842e7a643fcaea4964caa22b834964acaf&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x73f26d124436b0791169d63a3af29c2ae47765a3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xb4a050624f5d147fdf02857cbfd55da3ddc1451743acc5c163861584589c3034&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x3c255875b17e0573&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555277&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x6290d79215a2eebc25d5e456b35876c6d78ffc1ea47bdd70e375ebb3cf325620&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795308&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242609643446&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000001&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x624329308610ab365fb1&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;265194&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555278&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4671584&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795319&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9435026&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8ee83040bea843b9aca008301a7588080b8997f18c547e4f7b0f325ad1e56f57e26c745b09a3e503d86e00e5255ff7f715d3d1c600052601c6020527f73b1693892219d736caba55bdb67216e485557ea6b6af75f37096c9aa6a5a75f6040527feeb940b1d03b21e36b0e47e79769f095fe2ab855bd91e3a38756b7d75a9c4549606052602060806080600060006001610bb7f260025560a060020a6080510660005560005432146001550081a1a05b9a162d84bfe84faa7c176e21c26c0083645d4dd0d566547b7be2c2da0b4259a05b37ff12a4c27634cb0da6008d9b69726d415ff4694f9bc38c7806eb1fb60ae9&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x7f18c547e4f7b0f325ad1e56f57e26c745b09a3e503d86e00e5255ff7f715d3d1c600052601c6020527f73b1693892219d736caba55bdb67216e485557ea6b6af75f37096c9aa6a5a75f6040527feeb940b1d03b21e36b0e47e79769f095fe2ab855bd91e3a38756b7d75a9c4549606052602060806080600060006001610bb7f260025560a060020a60805106600055600054321460015500&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xf3e9&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x568c19ecb14b87e4aec29b4d2d700a3ad3fd0613&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 141,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x1592cbda0d928b8d18eed98857942b91ade32d088e55b8bf63418917cb0231f1&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555278,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x755bd54de4b2f5a7a589a10d69888b4ead48a6311d5d69f2f69ca85ec35fbe0b&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;300.9µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x568c19ecb14b87e4aec29b4d2d700a3ad3fd0613&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xbb7&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x18c547e4f7b0f325ad1e56f57e26c745b09a3e503d86e00e5255ff7f715d3d1c000000000000000000000000000000000000000000000000000000000000001c73b1693892219d736caba55bdb67216e485557ea6b6af75f37096c9aa6a5a75feeb940b1d03b21e36b0e47e79769f095fe2ab855bd91e3a38756b7d75a9c4549&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;callcode&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;out of gas&quot;,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 141,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x1592cbda0d928b8d18eed98857942b91ade32d088e55b8bf63418917cb0231f1&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555278,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x755bd54de4b2f5a7a589a10d69888b4ead48a6311d5d69f2f69ca85ec35fbe0b&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-815ab907d7fdd71d334bb1c3" role="button"
                   aria-expanded="false" aria-controls="id-815ab907d7fdd71d334bb1c3">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_throw.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/callcode_precompiled_throw.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+89</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-815ab907d7fdd71d334bb1c3"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_throw.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_throw.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..506dc5ff68ece9ba717eb6515d347c43e23ecfed</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;callcode_precompiled_throw.json</span>
<span class="term-fg36">@@ -0,0 +1,90 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4683014&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x537465762d63676574682d76312e31312e34&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9435044&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x3452ca5005cb73cd60dfa488a7b124251168e564491f80eb66765e79d78cfd95&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x415aa6292d1db797a467b22139704956c030e62f&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x6037612618507ae70c74a72bc2580253662971db959cfbc06d3f8527d4d01575&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x314fc90dee5e39a2&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555274&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x795751f3f96a5de1fd3944ddd78cbfe4ef10491e1086be47609869a30929d0e5&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795228&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242595605834&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000009&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x6242e3ccf48e66425fb1&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;264981&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555275&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4683014&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795244&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9444256&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf87a83040b15843b9aca008301a0348080a636600060003760406103e8366000600060095af26001556103e851600255610408516003550081a1a0dd883fbbb489b640dadc8c1bf151767155228d0a1321f687f070f35f14374b05a02dd0ccb16a8de39bc8ee61381bbbbb54f0ab18422afd7b03c6163da1f5023934&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x36600060003760406103e8366000600060095af26001556103e8516002556104085160035500&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;out of gas&quot;,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 117,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x7fe4dec901e1a62c1a1d96b8267bb9ff9dc1f75def43aa45b998743455eff8f9&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555275,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x80945caaff2fc67253cbb0217d2e5a307afde943929e97d8b36e58b88cbb02fd&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;332.877µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x8832ef498070145c3a5b30f47fbca71fd7b1de9f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000009&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xc897&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;callcode&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;invalid input length&quot;,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 117,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x7fe4dec901e1a62c1a1d96b8267bb9ff9dc1f75def43aa45b998743455eff8f9&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555275,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x80945caaff2fc67253cbb0217d2e5a307afde943929e97d8b36e58b88cbb02fd&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e542b4ad59a3d1683d513cf7" role="button"
                   aria-expanded="false" aria-controls="id-e542b4ad59a3d1683d513cf7">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/create.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/create.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+67</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e542b4ad59a3d1683d513cf7"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;create.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;create.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b83236690c2669ce903c68bc3d508c4abae526f4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;create.json</span>
<span class="term-fg36">@@ -0,0 +1,67 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3755480783&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5401723&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xd049bfd667cb46aa3ef5df0da3e57db3be39e511&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294702&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513676146&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x13e4acefe6a6700604929946e70e6443e4e73447&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xcf3e0938579f000&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;9&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x7dc9c9730689ff0b0fd506c67db815f12d90a448&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3757315409&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x566961425443&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5406414&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xae107f592eebdd9ff8d6ba00363676096e6afb0e1007a7d3d0af88173077378d&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xd049bfd667cb46aa3ef5df0da3e57db3be39e511&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xc927aa05a38bc3de864e95c33b3ae559d3f39c4ccd51cef6f113f9c50ba0caf1&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x93363bbd2c95f410&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294701&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x6b6737d5bde8058990483e915866bd1578014baeff57bd5e4ed228a2bfad635c&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513676127&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7160808139332585&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf907ef098504e3b29200830897be8080b9079c606060405260405160208061077c83398101604052808051906020019091905050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415151561007d57600080fd5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600460006101000a81548160ff02191690831515021790555050610653806101296000396000f300606060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305e4382a146100855780631c02708d146100ae5780632e1a7d4d146100c35780635114cb52146100e6578063a37dda2c146100fe578063ae200e7914610153578063b5769f70146101a8575b005b341561009057600080fd5b6100986101d1565b6040518082815260200191505060405180910390f35b34156100b957600080fd5b6100c16101d7565b005b34156100ce57600080fd5b6100e460048080359060200190919050506102eb565b005b6100fc6004808035906020019091905050610513565b005b341561010957600080fd5b6101116105d6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561015e57600080fd5b6101666105fc565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101b357600080fd5b6101bb610621565b6040518082815260200191505060405180910390f35b60025481565b60011515600460009054906101000a900460ff1615151415156101f957600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806102a15750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156102ac57600080fd5b6000600460006101000a81548160ff0219169083151502179055506003543073ffffffffffffffffffffffffffffffffffffffff163103600281905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806103935750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b151561039e57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561048357600060025411801561040757506002548111155b151561041257600080fd5b80600254036002819055506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561047e57600080fd5b610510565b600060035411801561049757506003548111155b15156104a257600080fd5b8060035403600381905550600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561050f57600080fd5b5b50565b60011515600460009054906101000a900460ff16151514151561053557600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614801561059657506003548160035401115b80156105bd575080600354013073ffffffffffffffffffffffffffffffffffffffff163110155b15156105c857600080fd5b806003540160038190555050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600354815600a165627a7a72305820c3b849e8440987ce43eae3097b77672a69234d516351368b03fe5b7de03807910029000000000000000000000000c65e620a3a55451316168d57e268f5702ef56a1129a01060f46676a5dff6f407f0f51eb6f37f5c8c54e238c70221e18e65fc29d3ea65a0557b01c50ff4ffaac8ed6e5d31237a4ecbac843ab1bfe8bb0165a0060df7c54f&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x13e4acefe6a6700604929946e70e6443e4e73447&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x5e106&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x606060405260405160208061077c83398101604052808051906020019091905050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415151561007d57600080fd5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600460006101000a81548160ff02191690831515021790555050610653806101296000396000f300606060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305e4382a146100855780631c02708d146100ae5780632e1a7d4d146100c35780635114cb52146100e6578063a37dda2c146100fe578063ae200e7914610153578063b5769f70146101a8575b005b341561009057600080fd5b6100986101d1565b6040518082815260200191505060405180910390f35b34156100b957600080fd5b6100c16101d7565b005b34156100ce57600080fd5b6100e460048080359060200190919050506102eb565b005b6100fc6004808035906020019091905050610513565b005b341561010957600080fd5b6101116105d6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561015e57600080fd5b6101666105fc565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101b357600080fd5b6101bb610621565b6040518082815260200191505060405180910390f35b60025481565b60011515600460009054906101000a900460ff1615151415156101f957600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806102a15750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156102ac57600080fd5b6000600460006101000a81548160ff0219169083151502179055506003543073ffffffffffffffffffffffffffffffffffffffff163103600281905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806103935750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b151561039e57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561048357600060025411801561040757506002548111155b151561041257600080fd5b80600254036002819055506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561047e57600080fd5b610510565b600060035411801561049757506003548111155b15156104a257600080fd5b8060035403600381905550600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561050f57600080fd5b5b50565b60011515600460009054906101000a900460ff16151514151561053557600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614801561059657506003548160035401115b80156105bd575080600354013073ffffffffffffffffffffffffffffffffffffffff163110155b15156105c857600080fd5b806003540160038190555050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600354815600a165627a7a72305820c3b849e8440987ce43eae3097b77672a69234d516351368b03fe5b7de03807910029000000000000000000000000c65e620a3a55451316168d57e268f5702ef56a11&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2294702,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x7dc9c9730689ff0b0fd506c67db815f12d90a448&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806305e4382a146100855780631c02708d146100ae5780632e1a7d4d146100c35780635114cb52146100e6578063a37dda2c146100fe578063ae200e7914610153578063b5769f70146101a8575b005b341561009057600080fd5b6100986101d1565b6040518082815260200191505060405180910390f35b34156100b957600080fd5b6100c16101d7565b005b34156100ce57600080fd5b6100e460048080359060200190919050506102eb565b005b6100fc6004808035906020019091905050610513565b005b341561010957600080fd5b6101116105d6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561015e57600080fd5b6101666105fc565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101b357600080fd5b6101bb610621565b6040518082815260200191505060405180910390f35b60025481565b60011515600460009054906101000a900460ff1615151415156101f957600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806102a15750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156102ac57600080fd5b6000600460006101000a81548160ff0219169083151502179055506003543073ffffffffffffffffffffffffffffffffffffffff163103600281905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806103935750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b151561039e57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561048357600060025411801561040757506002548111155b151561041257600080fd5b80600254036002819055506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561047e57600080fd5b610510565b600060035411801561049757506003548111155b15156104a257600080fd5b8060035403600381905550600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561050f57600080fd5b5b50565b60011515600460009054906101000a900460ff16151514151561053557600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614801561059657506003548160035401115b80156105bd575080600354013073ffffffffffffffffffffffffffffffffffffffff163110155b15156105c857600080fd5b806003540160038190555050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600354815600a165627a7a72305820c3b849e8440987ce43eae3097b77672a69234d516351368b03fe5b7de03807910029&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x897be&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-93cdd86dc7a87de55ef3abfb" role="button"
                   aria-expanded="false" aria-controls="id-93cdd86dc7a87de55ef3abfb">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/deep_calls.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/deep_calls.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+635</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-93cdd86dc7a87de55ef3abfb"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;deep_calls.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;deep_calls.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..5931b40809225b7b3333ff62d38ae6d05392a31c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;deep_calls.json</span>
<span class="term-fg36">@@ -0,0 +1,635 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117066904&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712384&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x1977c248e1014cc103929dd7f154199c916e39ec&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;25001&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891545&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x2a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100825760e060020a600035046302d05d3f811461008a5780630accce061461009c5780631ab9075a146100c757806331ed274614610102578063645a3b7214610133578063772fdae314610155578063a7f4377914610180578063ae5f80801461019e578063c9bded21146101ea578063f905c15a14610231575b61023a610002565b61023c600054600160a060020a031681565b61023a600435602435604435606435608435600254600160a060020a03166000141561024657610002565b61023a600435600254600160a060020a03166000148015906100f8575060025433600160a060020a03908116911614155b156102f457610002565b61023a60043560243560443560643560843560a43560c435600254600160a060020a03166000141561031657610002565b61023a600435602435600254600160a060020a0316600014156103d057610002565b61023a600435602435604435606435608435600254600160a060020a03166000141561046157610002565b61023a60025433600160a060020a0390811691161461051657610002565b61023a6004356024356044356060828152600160a060020a0382169060ff8516907fa6c2f0913db6f79ff0a4365762c61718973b3413d6e40382e704782a9a5099f690602090a3505050565b61023a600435602435600160a060020a038116606090815260ff8316907fee6348a7ec70f74e3d6cba55a53e9f9110d180d7698e9117fc466ae29a43e34790602090a25050565b61023c60035481565b005b6060908152602090f35b60025460e060020a6313bc6d4b02606090815233600160a060020a0390811660645291909116906313bc6d4b906084906020906024816000876161da5a03f115610002575050604051511515905061029d57610002565b60408051858152602081018390528151600160a060020a03858116939087169260ff8a16927f5a690ecd0cb15c1c1fd6b6f8a32df0d4f56cb41a54fea7e94020f013595de796929181900390910190a45050505050565b6002805473ffffffffffffffffffffffffffffffffffffffff19168217905550565b60025460e060020a6313bc6d4b02606090815233600160a060020a0390811660645291909116906313bc6d4b906084906020906024816000876161da5a03f115610002575050604051511515905061036d57610002565b6040805186815260208101869052808201859052606081018490529051600160a060020a03831691889160ff8b16917fd65d9ddafbad8824e2bbd6f56cc9f4ac27ba60737035c10a321ea2f681c94d47919081900360800190a450505050505050565b60025460e060020a6313bc6d4b02606090815233600160a060020a0390811660645291909116906313bc6d4b906084906020906024816000876161da5a03f115610002575050604051511515905061042757610002565b60408051828152905183917fa9c6cbc4bd352a6940479f6d802a1001550581858b310d7f68f7bea51218cda6919081900360200190a25050565b60025460e060020a6313bc6d4b02606090815233600160a060020a0390811660645291909116906313bc6d4b906084906020906024816000876161da5a03f11561000257505060405151151590506104b857610002565b80600160a060020a031684600160a060020a03168660ff167f69bdaf789251e1d3a0151259c0c715315496a7404bce9fd0b714674685c2cab78686604051808381526020018281526020019250505060405180910390a45050505050565b600254600160a060020a0316ff&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100775760e060020a600035046302d05d3f811461007f57806313bc6d4b146100915780633688a877146100b95780635188f9961461012f5780637eadc976146101545780638ad79680146101d3578063a43e04d814610238578063a7f437791461025e578063e16c7d981461027c575b61029f610002565b6102a1600054600160a060020a031681565b6102be600435600160a060020a03811660009081526002602052604090205460ff165b919050565b6102d26004356040805160208181018352600080835284815260038252835190849020805460026001821615610100026000190190911604601f8101849004840283018401909552848252929390929183018282801561037d5780601f106103525761010080835404028352916020019161037d565b61029f6004356024356000805433600160a060020a039081169116146104a957610002565b61034060043560008181526001602090815260408083205481517ff905c15a0000000000000000000000000000000000000000000000000000000081529151600160a060020a03909116928392839263f905c15a92600483810193919291829003018189876161da5a03f1156100025750506040515195945050505050565b60408051602060248035600481810135601f810185900485028601850190965285855261029f9581359591946044949293909201918190840183828082843750949650505050505050600054600160a060020a0390811633909116146104f657610002565b61029f6004355b600080548190600160a060020a0390811633909116146105a457610002565b61029f60005433600160a060020a0390811691161461072957610002565b6102a1600435600081815260016020526040902054600160a060020a03166100b4565b005b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156103325780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b60408051918252519081900360200190f35b820191906000526020600020905b81548152906001019060200180831161036057829003601f168201915b505050505090506100b4565b506000828152600160208181526040808420805473ffffffffffffffffffffffffffffffffffffffff191686179055600160a060020a038581168086526002909352818520805460ff191690941790935580517f1ab9075a0000000000000000000000000000000000000000000000000000000081523090931660048401525184939192631ab9075a926024828101939192829003018183876161da5a03f11561000257505060408051602081018690528082019290925243606083015260808083526003908301527f414444000000000000000000000000000000000000000000000000000000000060a0830152517f8ac68d4e97d65912f220b4c5f87978b8186320a5e378c1369850b5b5f90323d39181900360c00190a15b505050565b600083815260016020526040902054600160a060020a03838116911614156104d0576104a4565b600083815260016020526040812054600160a060020a031614610389576103898361023f565b600082815260036020908152604082208054845182855293839020919360026001831615610100026000190190921691909104601f90810184900483019391929186019083901061056a57805160ff19168380011785555b5061059a9291505b808211156105a05760008155600101610556565b8280016001018555821561054e579182015b8281111561054e57825182600050559160200191906001019061057c565b50505050565b5090565b600083815260016020526040812054600160a060020a031614156105c757610002565b50506000818152600160205260408082205481517fa7f437790000000000000000000000000000000000000000000000000000000081529151600160a060020a0391909116928392839263a7f4377992600483810193919291829003018183876161da5a03f11561000257505050600160005060008460001916815260200190815260200160002060006101000a815490600160a060020a0302191690556002600050600083600160a060020a0316815260200190815260200160002060006101000a81549060ff02191690557f8ac68d4e97d65912f220b4c5f87978b8186320a5e378c1369850b5b5f90323d383834360405180806020018560001916815260200184600160a060020a03168152602001838152602001828103825260038152602001807f44454c000000000000000000000000000000000000000000000000000000000081526020015060200194505050505060405180910390a1505050565b600054600160a060020a0316ff&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0684ac65a9fa32414dda56996f4183597d695987fdb82b145d722743891a6fe8&quot;: &quot;0x0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+          &quot;0x1cd76f78169a420d99346e3501dd3e541622c38a226f9b63e01cfebc69879dc7&quot;: &quot;0x000000000000000000000000b4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+          &quot;0x8e54a4494fe5da016bfc01363f4f6cdc91013bb5434bd2a4a3359f13a23afa2f&quot;: &quot;0x000000000000000000000000cf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+          &quot;0x94edf7f600ba56655fd65fca1f1424334ce369326c1dc3e53151dcd1ad06bc13&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+          &quot;0xbbee47108b275f55f98482c6800f6372165e88b0330d3f5dae6419df4734366c&quot;: &quot;0x0000000000000000000000002a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;,</span>
<span class="term-fg32">+          &quot;0xd38c0c4e84de118cfdcc775130155d83b8bbaaf23dc7f3c83a626b10473213bd&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+          &quot;0xfb3aa5c655c2ec9d40609401f88d505d1da61afaa550e36ef5da0509ada257ba&quot;: &quot;0x0000000000000000000000007986bad81f4cbd9317f5a46861437dae58d69113&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100cf5760e060020a600035046302d05d3f81146100d7578063056d4470146100e957806316c66cc61461010c5780631ab9075a146101935780633ae1005c146101ce57806358541662146101fe5780635ed61af014610231578063644e3b791461025457806384dbac3b146102db578063949ae479146102fd5780639859387b14610321578063a7f4377914610340578063ab03fc261461035e578063e8161b7814610385578063e964d4e114610395578063f905c15a146103a5578063f92eb774146103ae575b6103be610002565b6103c0600054600160a060020a031681565b6103be6004356002546000908190600160a060020a031681141561040357610002565b6103dd60043560006108365b6040805160025460e360020a631c2d8fb30282527f636f6e747261637464620000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f1156100025750506040515191506104e29050565b6103be600435600254600160a060020a03166000148015906101c4575060025433600160a060020a03908116911614155b1561088d57610002565b6103be600435602435604435606435600254600090819081908190600160a060020a03168114156108af57610002565b6103c0600435602435604435606435608435600254600090819081908190600160a060020a03168114156110e857610002565b6103be6004356002546000908190600160a060020a03168114156115ec57610002565b6103c06004356000611b635b6040805160025460e360020a631c2d8fb30282527f6d61726b6574646200000000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f1156100025750506040515191506104e29050565b6103be600435602435600254600160a060020a031660001415611bb557610002565b6103be600435602435600254600090600160a060020a0316811415611d2e57610002565b6103be600435600254600160a060020a031660001415611fc657610002565b6103be60025433600160a060020a0390811691161461207e57610002565b6103be600435602435604435600254600090600160a060020a031681141561208c57610002565b6103dd60043560006124b8610260565b6103c0600435600061250a610118565b6103f160035481565b6103f16004356000612561610260565b005b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60408051918252519081900360200190f35b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061046557610002565b8291506104e55b6040805160025460e360020a631c2d8fb30282527f63706f6f6c00000000000000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f115610002575050604051519150505b90565b600160a060020a031663b2206e6d83600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517fb2206e6d0000000000000000000000000000000000000000000000000000000082526004820152600160a060020a038816602482015290516044808301935060209282900301816000876161da5a03f11561000257505060405151915061059b90506106ba565b600160a060020a031663d5b205ce83600160a060020a03166336da44686040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e160020a636ad902e7028252600160a060020a0390811660048301526024820187905288166044820152905160648281019350600092829003018183876161da5a03f115610002575050506107355b6040805160025460e360020a631c2d8fb30282527f6c6f676d6772000000000000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f1156100025750506040515191506104e29050565b50826120ee5b6040805160025460e360020a631c2d8fb30282527f6163636f756e7463746c0000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f1156100025750506040515191506104e29050565b600160a060020a0316630accce06600684600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e360020a6306db488d02825291519192899290916336da446891600482810192602092919082900301816000876161da5a03f1156100025750505060405180519060200150866040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f11561000257505050505050565b600160a060020a03166316c66cc6836040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f115610002575050604051519150505b919050565b6002805473ffffffffffffffffffffffffffffffffffffffff19168217905550565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061091157610002565b87935061091c610260565b600160a060020a031663bdbdb08685600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517fbdbdb0860000000000000000000000000000000000000000000000000000000082526004820152602481018a905290516044808301935060209282900301816000876161da5a03f1156100025750506040515193506109ca90506106ba565b600160a060020a03166381982a7a8885876040518460e060020a0281526004018084600160a060020a0316815260200183815260200182600160a060020a0316815260200193505050506000604051808303816000876161da5a03f11561000257505050610a3661046c565b600160a060020a03166308636bdb85600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517f08636bdb000000000000000000000000000000000000000000000000000000008252600482015260248101889052604481019290925251606482810192602092919082900301816000876161da5a03f11561000257505060408051805160e160020a630a5d50db028252600482018190529151919450600160a060020a03871692506314baa1b6916024828101926000929190829003018183876161da5a03f11561000257505050610b3561046c565b600160a060020a0316630a3b6ede85600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e160020a63051db76f0282526004820152600160a060020a038d16602482015290516044808301935060209282900301816000876161da5a03f115610002575050604051519150610bd590506106ba565b600160a060020a031663d5b205ce87838b6040518460e060020a0281526004018084600160a060020a0316815260200183815260200182600160a060020a0316815260200193505050506000604051808303816000876161da5a03f11561000257505050610c41610118565b600160a060020a031663988db79c888a6040518360e060020a0281526004018083600160a060020a0316815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050610ca5610260565b600160a060020a031663f4f2821b896040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f11561000257505050610d6f5b6040805160025460e360020a631c2d8fb30282527f747261646564620000000000000000000000000000000000000000000000000060048301529151600092600160a060020a03169163e16c7d98916024828101926020929190829003018187876161da5a03f1156100025750506040515191506104e29050565b600160a060020a0316635f539d69896040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f11561000257505050610dc2610639565b600160a060020a0316630accce06600386600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e360020a6315b1ea01028252915191928e928e9263ad8f500891600482810192602092919082900301816000876161da5a03f11561000257505050604051805190602001506040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f11561000257505050610ec5610639565b600160a060020a0316630accce06600386600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e360020a6315b1ea01028252915191928e928d9263ad8f500891600482810192602092919082900301816000876161da5a03f11561000257505050604051805190602001506040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f11561000257505050610fc8610639565b600160a060020a031663645a3b7285600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060405151905061101e610260565b600160a060020a031663f92eb77488600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e260020a633e4baddd028252600482015290516024828101935060209282900301816000876161da5a03f11561000257505060408051805160e060020a86028252600482019490945260248101939093525160448381019360009350829003018183876161da5a03f115610002575050505050505050505050565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061114a57610002565b604051600254600160a060020a0316908a908a908a908a908a90611579806125b38339018087600160a060020a0316815260200186600160a060020a03168152602001856000191681526020018481526020018381526020018281526020019650505050505050604051809103906000f092506111c5610118565b600160a060020a031663b9858a288a856040518360e060020a0281526004018083600160a060020a0316815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050611229610260565b600160a060020a0316635188f99689856040518360e060020a028152600401808360001916815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050611288610260565b600160a060020a031663bdbdb08689896040518360e060020a0281526004018083600019168152602001828152602001925050506020604051808303816000876161da5a03f1156100025750506040515192506112e590506106ba565b600160a060020a03166346d88e7d8a858a6040518460e060020a0281526004018084600160a060020a0316815260200183600160a060020a0316815260200182815260200193505050506000604051808303816000876161da5a03f115610002575050506113516106ba565b600160a060020a03166381982a7a8a84866040518460e060020a0281526004018084600160a060020a0316815260200183815260200182600160a060020a0316815260200193505050506000604051808303816000876161da5a03f115610002575050506113bd61046c565b600160a060020a0316632b58469689856040518360e060020a028152600401808360001916815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f1156100025750505061141c61046c565b600160a060020a03166308636bdb8984866040518460e060020a028152600401808460001916815260200183815260200182600160a060020a0316815260200193505050506020604051808303816000876161da5a03f11561000257505060408051805160e160020a630a5d50db028252600482018190529151919350600160a060020a03861692506314baa1b6916024828101926000929190829003018183876161da5a03f115610002575050506114d3610639565b6040805160e160020a630566670302815260016004820152602481018b9052600160a060020a0386811660448301528c811660648301526000608483018190529251931692630accce069260a480840193919291829003018183876161da5a03f11561000257505050611544610639565b600160a060020a031663645a3b728961155b610260565b600160a060020a031663f92eb7748c6040518260e060020a02815260040180826000191681526020019150506020604051808303816000876161da5a03f11561000257505060408051805160e060020a86028252600482019490945260248101939093525160448084019360009350829003018183876161da5a03f1156100025750939a9950505050505050505050565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061164e57610002565b82915061165961046c565b600160a060020a0316630a3b6ede83600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e160020a63051db76f0282526004820152600160a060020a038816602482015290516044808301935060209282900301816000876161da5a03f1156100025750506040515191506116f990506106ba565b600160a060020a031663d5b205ce83600160a060020a03166336da44686040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e160020a636ad902e7028252600160a060020a0390811660048301526024820187905288166044820152905160648281019350600092829003018183876161da5a03f1156100025750505061179b6106ba565b600160a060020a031663d653078983600160a060020a03166336da44686040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517ff1ff78a0000000000000000000000000000000000000000000000000000000008252915191929163f1ff78a09160048181019260209290919082900301816000876161da5a03f1156100025750505060405180519060200150866040518460e060020a0281526004018084600160a060020a0316815260200183815260200182600160a060020a0316815260200193505050506000604051808303816000876161da5a03f1156100025750505061189f610260565b600160a060020a031663f4f2821b846040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f115610002575050506118f2610118565b600160a060020a031663f4f2821b846040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f11561000257505050611945610639565b600160a060020a0316630accce06600484600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e360020a6306db488d02825291519192899290916336da44689181870191602091908190038801816000876161da5a03f115610002575050506040518051906020015060006040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f11561000257505050611a48610639565b600160a060020a031663645a3b7283600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050604051519050611a9e610260565b600160a060020a031663f92eb77486600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e260020a633e4baddd028252600482015290516024828101935060209282900301816000876161da5a03f11561000257505060408051805160e060020a86028252600482019490945260248101939093525160448381019360009350829003018183876161da5a03f11561000257505050505050565b600160a060020a03166381738c59836040518260e060020a02815260040180826000191681526020019150506020604051808303816000876161da5a03f1156100025750506040515191506108889050565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f1156100025750506040515115159050611c1757610002565b611c1f610260565b600160a060020a03166338a699a4836040518260e060020a02815260040180826000191681526020019150506020604051808303816000876161da5a03f11561000257505060405151159050611c7457610002565b611c7c610260565b600160a060020a0316632243118a836040518260e060020a02815260040180826000191681526020019150506000604051808303816000876161da5a03f11561000257505050611cca610639565b600160a060020a031663ae5f8080600184846040518460e060020a028152600401808481526020018360001916815260200182600160a060020a0316815260200193505050506000604051808303816000876161da5a03f115610002575050505050565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f1156100025750506040515115159050611d9057610002565b5081611d9a610260565b600160a060020a031663581d5d6084846040518360e060020a0281526004018083600160a060020a03168152602001828152602001925050506000604051808303816000876161da5a03f11561000257505050611df5610639565b600160a060020a0316630accce06600283600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e160020a630566670302825260048201949094526024810193909352600160a060020a038816604484015260006064840181905260848401819052905160a4808501949293509091829003018183876161da5a03f11561000257505050611eab610639565b600160a060020a031663645a3b7282600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050604051519050611f01610260565b600160a060020a031663f92eb77485600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e260020a633e4baddd028252600482015290516024828101935060209282900301816000876161da5a03f11561000257505060408051805160e060020a86028252600482019490945260248101939093525160448381019360009350829003018183876161da5a03f11561000257505050505050565b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061202857610002565b612030610118565b600160a060020a0316639859387b826040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f1156100025750505050565b600254600160a060020a0316ff5b6040805160025460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f11561000257505060405151151590506106b457610002565b600160a060020a031663d65307898383600160a060020a031663f1ff78a06040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517fd6530789000000000000000000000000000000000000000000000000000000008252600160a060020a039485166004830152602482015292891660448401525160648381019360009350829003018183876161da5a03f115610002575050506121a5610118565b600160a060020a031663f4f2821b856040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f115610002575050506121f8610cf4565b600160a060020a031663f4f2821b856040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f1156100025750505061224b610639565b600160a060020a0316630accce06600583600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e360020a6306db488d028252915191928a9290916336da446891600482810192602092919082900301816000876161da5a03f1156100025750505060405180519060200150886040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f1156100025750505080600160a060020a031663ea71b02d6040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060405151600160a060020a031660001490506124b25761239f610639565b600160a060020a0316630accce06600583600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750506040805180517fea71b02d000000000000000000000000000000000000000000000000000000008252915191928a92909163ea71b02d91600482810192602092919082900301816000876161da5a03f1156100025750505060405180519060200150886040518660e060020a028152600401808681526020018560001916815260200184600160a060020a0316815260200183600160a060020a03168152602001828152602001955050505050506000604051808303816000876161da5a03f115610002575050505b50505050565b600160a060020a03166338a699a4836040518260e060020a02815260040180826000191681526020019150506020604051808303816000876161da5a03f1156100025750506040515191506108889050565b600160a060020a031663213fe2b7836040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515191506108889050565b600160a060020a031663f92eb774836040518260e060020a02815260040180826000191681526020019150506020604051808303816000876161da5a03f115610002575050604051519150610888905056606060405260405160c08061157983396101206040819052825160805160a051935160e0516101005160008054600160a060020a03199081163317909155600180546005805484168817905560048a90556006869055600b8590556008849055909116861760a060020a60ff02191690554360038190556002558686526101408390526101608190529396929594919390929091600160a060020a033016917f76885d242fb71c6f74a7e717416e42eff4d96faf54f6de75c6a0a6bbd8890c6b91a230600160a060020a03167fa609f6bd4ad0b4f419ddad4ac9f0d02c2b9295c5e6891469055cf73c2b568fff600b600050546040518082815260200191505060405180910390a250505050505061145e8061011b6000396000f3606060405236156101745760e060020a600035046302d05d3f811461017c57806304a7fdbc1461018e5780630e90f957146101fb5780630fb5a6b41461021257806314baa1b61461021b57806317fc45e21461023a5780632b096926146102435780632e94420f1461025b578063325a19f11461026457806336da44681461026d5780633f81a2c01461027f5780633fc306821461029757806345ecd3d7146102d45780634665096d146102dd5780634e71d92d146102e657806351a34eb8146103085780636111bb951461032d5780636f265b93146103445780637e9014e11461034d57806390ba009114610360578063927df5e014610393578063a7f437791461046c578063ad8f50081461046e578063bc6d909414610477578063bdec3ad114610557578063c19d93fb1461059a578063c9503fe2146105ad578063e0a73a93146105b6578063ea71b02d146105bf578063ea8a1af0146105d1578063ee4a96f9146105f3578063f1ff78a01461065c575b61046c610002565b610665600054600160a060020a031681565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600554600090600160a060020a0390811633909116146106a857610002565b61068260015460a060020a900460ff166000145b90565b61069660085481565b61046c600435600154600160a060020a03166000141561072157610002565b610696600d5481565b610696600435600f8160068110156100025750015481565b61069660045481565b61069660035481565b610665600554600160a060020a031681565b61069660043560158160068110156100025750015481565b6106966004355b600b54600f5460009160028202808203928083039290810191018386101561078357601054840186900394505b50505050919050565b61069660025481565b61069660095481565b61046c600554600090600160a060020a03908116339091161461085857610002565b61046c600435600554600090600160a060020a03908116339091161461092e57610002565b6106826001805460a060020a900460ff161461020f565b610696600b5481565b61068260075460a060020a900460ff1681565b6106966004355b600b54601554600091600282028082039280830392908101910183861015610a6c5760165494506102cb565b61046c6004356024356044356040805160015460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b02600483015291516000928392600160a060020a03919091169163e16c7d9891602481810192602092909190829003018187876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610b4657610002565b005b610696600a5481565b61046c60006000600060006000600160009054906101000a9004600160a060020a0316600160a060020a031663e16c7d986040518160e060020a028152600401808060b260020a691858d8dbdd5b9d18dd1b0281526020015060200190506020604051808303816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610f1757610002565b61046c5b60015b60058160ff16101561071e57600f6001820160ff166006811015610002578101549060ff83166006811015610002570154101561129057610002565b61069660015460a060020a900460ff1681565b61069660065481565b610696600c5481565b610665600754600160a060020a031681565b61046c600554600090600160a060020a0390811633909116146112c857610002565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600154600090600160a060020a03168114156113fb57610002565b610696600e5481565b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60408051918252519081900360200190f35b5060005b60068160ff16101561070857828160ff166006811015610002576020020151600f60ff831660068110156100025701558160ff82166006811015610002576020020151601560ff831660068110156100025701556001016106ac565b61071061055b565b505050565b600e8054820190555b50565b6040805160015460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061071557610002565b83861015801561079257508286105b156107b457600f546010546011548689039082030291909104900394506102cb565b8286101580156107c55750600b5486105b156107e757600f546011546012548589039082030291909104900394506102cb565b600b5486108015906107f857508186105b1561081d57600b54600f546012546013549289039281039290920204900394506102cb565b81861015801561082c57508086105b1561084e57600f546013546014548489039082030291909104900394506102cb565b60145494506102cb565b60015460a060020a900460ff1660001461087157610002565b600254600a01431161088257610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663771d50e16040518160e060020a0281526004018090506000604051808303816000876161da5a03f1156100025750505050565b60015460a060020a900460ff1660001461094757610002565b600254600a01431161095857610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180517f51a34eb8000000000000000000000000000000000000000000000000000000008252600482018690529151919350600160a060020a03841692506351a34eb8916024808301926000929190829003018183876161da5a03f11561000257505050600b8290554360025560408051838152905130600160a060020a0316917fa609f6bd4ad0b4f419ddad4ac9f0d02c2b9295c5e6891469055cf73c2b568fff919081900360200190a25050565b838610158015610a7b57508286105b15610a9d576015546016546017548689039082900302919091040194506102cb565b828610158015610aae5750600b5486105b15610ad0576015546017546018548589039082900302919091040194506102cb565b600b548610801590610ae157508186105b15610b0657600b546015546018546019549289039281900392909202040194506102cb565b818610158015610b1557508086105b15610b3757601554601954601a548489039082900302919091040194506102cb565b601a54860181900394506102cb565b60015460a060020a900460ff16600014610b5f57610002565b6001805460a060020a60ff02191660a060020a17908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919450600160a060020a038516925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604080518051600a556005547ffebf661200000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015216602482015260448101879052905163febf661291606480820192600092909190829003018183876161da5a03f115610002575050508215610cc7576007805473ffffffffffffffffffffffffffffffffffffffff191633179055610dbb565b6040805160055460065460e060020a63599efa6b028352600160a060020a039182166004840152602483015291519184169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050604080516006547f56ccb6f000000000000000000000000000000000000000000000000000000000825233600160a060020a03166004830152602482015290516356ccb6f091604480820192600092909190829003018183876161da5a03f115610002575050600580546007805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a038416179091551633179055505b6007805460a060020a60ff02191660a060020a87810291909117918290556008544301600955900460ff1615610df757600a54610e039061029e565b600a54610e0b90610367565b600c55610e0f565b600c555b600c54670de0b6b3a7640000850204600d55600754600554604080517f759297bb000000000000000000000000000000000000000000000000000000008152600160a060020a039384166004820152918316602483015260448201879052519184169163759297bb91606481810192600092909190829003018183876161da5a03f11561000257505060408051600754600a54600d54600554600c5460a060020a850460ff161515865260208601929092528486019290925260608401529251600160a060020a0391821694509281169230909116917f3b3d1986083d191be01d28623dc19604728e29ae28bdb9ba52757fdee1a18de2919081900360800190a45050505050565b600954431015610f2657610002565b6001805460a060020a900460ff1614610f3e57610002565b6001805460a060020a60ff0219167402000000000000000000000000000000000000000017908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919750600160a060020a038816925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604051516007549095506000945060a060020a900460ff1615905061105c57600a5484111561105757600a54600d54670de0b6b3a7640000918603020492505b61107e565b600a5484101561107e57600a54600d54670de0b6b3a764000091869003020492505b60065483111561108e5760065492505b6006548390039150600083111561111857604080516005546007547f5928d37f000000000000000000000000000000000000000000000000000000008352600160a060020a0391821660048401528116602483015260448201869052915191871691635928d37f91606481810192600092909190829003018183876161da5a03f115610002575050505b600082111561117a576040805160055460e060020a63599efa6b028252600160a060020a0390811660048301526024820185905291519187169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050505b6040805185815260208101849052808201859052905130600160a060020a0316917f89e690b1d5aaae14f3e85f108dc92d9ab3763a58d45aed8b59daedbbae8fe794919081900360600190a260008311156112285784600160a060020a0316634cc927d785336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050611282565b84600160a060020a0316634cc927d7600a60005054336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f115610002575050505b600054600160a060020a0316ff5b60156001820160ff166006811015610002578101549060ff8316600681101561000257015411156112c057610002565b60010161055e565b60015460a060020a900460ff166000146112e157610002565b600254600a0143116112f257610002565b6001546040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f11561000257505060408051805160055460065460e060020a63599efa6b028452600160a060020a03918216600485015260248401529251909450918416925063599efa6b916044808301926000929190829003018183876161da5a03f1156100025750505080600160a060020a0316632b68bb2d6040518160e060020a0281526004018090506000604051808303816000876161da5a03f115610002575050600054600160a060020a03169050ff5b6001546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602480830192602092919082900301816000876161da5a03f11561000257505060405151151590506106a85761000256&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;16&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x70c9217d814985faef62b124420f8dfbddd96433&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x4ef436dcbda6cd4a&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1634&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x7986bad81f4cbd9317f5a46861437dae58d69113&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6060604052361561008d5760e060020a600035046302d05d3f811461009557806316c66cc6146100a75780631ab9075a146100d7578063213fe2b7146101125780639859387b1461013f578063988db79c1461015e578063a7f4377914610180578063b9858a281461019e578063c8e40fbf146101c0578063f4f2821b146101e8578063f905c15a14610209575b610212610002565b610214600054600160a060020a031681565b600160a060020a0360043581811660009081526005602052604081205461023193168114610257575060016101e3565b610212600435600254600160a060020a0316600014801590610108575060025433600160a060020a03908116911614155b1561025f57610002565b610214600435600160a060020a03811660009081526004602052604081205460ff16151561027557610002565b610212600435600254600160a060020a03166000141561029b57610002565b610212600435602435600254600160a060020a03166000141561050457610002565b61021260025433600160a060020a0390811691161461056757610002565b610212600435602435600254600160a060020a03166000141561057557610002565b610231600435600160a060020a03811660009081526004602052604090205460ff165b919050565b610212600435600254600090600160a060020a031681141561072057610002565b61024560035481565b005b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60408051918252519081900360200190f35b5060006101e3565b60028054600160a060020a031916821790555b50565b50600160a060020a038181166000908152600460205260409020546101009004166101e3565b6002546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602482810192602092919082900301816000876161da5a03f11561000257505060405151151590506102fe57610002565b600160a060020a03811660009081526004602052604090205460ff161515610272576040516104028061092e833901809050604051809103906000f06004600050600083600160a060020a0316815260200190815260200160002060005060000160016101000a815481600160a060020a030219169083021790555060016004600050600083600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff0219169083021790555050565b600160a060020a03821660009081526004602052604090205460ff1615156104725760405161040280610d30833901809050604051809103906000f06004600050600084600160a060020a0316815260200190815260200160002060005060000160016101000a815481600160a060020a030219169083021790555060016004600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff021916908302179055505b600160a060020a03828116600090815260046020819052604080518184205460e060020a630a3b0a4f02825286861693820193909352905161010090920490931692630a3b0a4f926024828101939192829003018183876161da5a03f11561000257505050600160a060020a03811660009081526006602052604090208054600160a060020a031916831790555b5050565b6002546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602482810192602092919082900301816000876161da5a03f11561000257505060405151151590506103b957610002565b600254600160a060020a0316ff5b6002546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602482810192602092919082900301816000876161da5a03f11561000257505060405151151590506105d857610002565b600160a060020a03821660009081526004602052604090205460ff1615156106915760405161040280611132833901809050604051809103906000f06004600050600084600160a060020a0316815260200190815260200160002060005060000160016101000a815481600160a060020a030219169083021790555060016004600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff021916908302179055505b600160a060020a03828116600090815260046020819052604080518184205460e060020a630a3b0a4f02825286861693820193909352905161010090920490931692630a3b0a4f926024828101939192829003018183876161da5a03f11561000257505050600160a060020a031660009081526005602052604090208054600160a060020a0319169091179055565b6002546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602482810192602092919082900301816000876161da5a03f115610002575050604051511515905061078357610002565b50600160a060020a0381811660009081526005602090815260408083205490931680835260049091529190205460ff161561080f576040600081812054825160e260020a632e72bafd028152600160a060020a03868116600483015293516101009092049093169263b9caebf4926024828101939192829003018183876161da5a03f115610002575050505b600160a060020a03828116600090815260056020526040812054909116146108545760406000908120600160a060020a0384169091528054600160a060020a03191690555b50600160a060020a0381811660009081526006602090815260408083205490931680835260049091529190205460ff16156108e657600160a060020a038181166000908152604080518183205460e260020a632e72bafd028252868516600483015291516101009092049093169263b9caebf4926024828101939192829003018183876161da5a03f115610002575050505b600160a060020a03828116600090815260066020526040812054909116146105005760406000908120600160a060020a0384169091528054600160a060020a0319169055505056606060405260008054600160a060020a031916331790556103de806100246000396000f3606060405236156100615760e060020a600035046302d05d3f81146100695780630a3b0a4f1461007b5780630d327fa7146100f6578063524d81d314610109578063a7f4377914610114578063b9caebf414610132578063bbec3bae14610296575b6102ce610002565b6102d0600054600160a060020a031681565b6102ce600435600254600090600160a060020a03168114156102ed5760028054600160a060020a03199081168417808355600160a060020a03808616855260036020526040852060018101805493831694909316939093179091559154815461010060a860020a031916921661010002919091179055610372565b6102d0600254600160a060020a03165b90565b6102e3600154610106565b6102ce60005433600160a060020a039081169116146103c657610002565b6102ce600435600160a060020a038116600090815260036020526040812054819060ff16801561016457506001548190115b1561029157506040808220600180820154915461010090819004600160a060020a039081168087528587209093018054600160a060020a031916948216948517905583865293909420805461010060a860020a03191694820294909417909355600254909190811690841614156101e85760028054600160a060020a031916821790555b600254600160a060020a0390811690841614156102105760028054600160a060020a03191690555b6003600050600084600160a060020a0316815260200190815260200160002060006000820160006101000a81549060ff02191690556000820160016101000a815490600160a060020a0302191690556001820160006101000a815490600160a060020a03021916905550506001600081815054809291906001900391905055505b505050565b600160a060020a036004358181166000908152600360205260408120600101546002546102d09491821691168114156103d4576103d8565b005b600160a060020a03166060908152602090f35b6060908152602090f35b60028054600160a060020a03908116835260036020526040808420805461010060a860020a0319808216610100808a029190911790935590829004841680875283872060019081018054600160a060020a03199081168b179091559654868a168952949097209687018054949095169390951692909217909255835416908202179091555b60016003600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff0219169083021790555060016000818150548092919060010191905055505050565b600054600160a060020a0316ff5b8091505b5091905056606060405260008054600160a060020a031916331790556103de806100246000396000f3606060405236156100615760e060020a600035046302d05d3f81146100695780630a3b0a4f1461007b5780630d327fa7146100f6578063524d81d314610109578063a7f4377914610114578063b9caebf414610132578063bbec3bae14610296575b6102ce610002565b6102d0600054600160a060020a031681565b6102ce600435600254600090600160a060020a03168114156102ed5760028054600160a060020a03199081168417808355600160a060020a03808616855260036020526040852060018101805493831694909316939093179091559154815461010060a860020a031916921661010002919091179055610372565b6102d0600254600160a060020a03165b90565b6102e3600154610106565b6102ce60005433600160a060020a039081169116146103c657610002565b6102ce600435600160a060020a038116600090815260036020526040812054819060ff16801561016457506001548190115b1561029157506040808220600180820154915461010090819004600160a060020a039081168087528587209093018054600160a060020a031916948216948517905583865293909420805461010060a860020a03191694820294909417909355600254909190811690841614156101e85760028054600160a060020a031916821790555b600254600160a060020a0390811690841614156102105760028054600160a060020a03191690555b6003600050600084600160a060020a0316815260200190815260200160002060006000820160006101000a81549060ff02191690556000820160016101000a815490600160a060020a0302191690556001820160006101000a815490600160a060020a03021916905550506001600081815054809291906001900391905055505b505050565b600160a060020a036004358181166000908152600360205260408120600101546002546102d09491821691168114156103d4576103d8565b005b600160a060020a03166060908152602090f35b6060908152602090f35b60028054600160a060020a03908116835260036020526040808420805461010060a860020a0319808216610100808a029190911790935590829004841680875283872060019081018054600160a060020a03199081168b179091559654868a168952949097209687018054949095169390951692909217909255835416908202179091555b60016003600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff0219169083021790555060016000818150548092919060010191905055505050565b600054600160a060020a0316ff5b8091505b5091905056606060405260008054600160a060020a031916331790556103de806100246000396000f3606060405236156100615760e060020a600035046302d05d3f81146100695780630a3b0a4f1461007b5780630d327fa7146100f6578063524d81d314610109578063a7f4377914610114578063b9caebf414610132578063bbec3bae14610296575b6102ce610002565b6102d0600054600160a060020a031681565b6102ce600435600254600090600160a060020a03168114156102ed5760028054600160a060020a03199081168417808355600160a060020a03808616855260036020526040852060018101805493831694909316939093179091559154815461010060a860020a031916921661010002919091179055610372565b6102d0600254600160a060020a03165b90565b6102e3600154610106565b6102ce60005433600160a060020a039081169116146103c657610002565b6102ce600435600160a060020a038116600090815260036020526040812054819060ff16801561016457506001548190115b1561029157506040808220600180820154915461010090819004600160a060020a039081168087528587209093018054600160a060020a031916948216948517905583865293909420805461010060a860020a03191694820294909417909355600254909190811690841614156101e85760028054600160a060020a031916821790555b600254600160a060020a0390811690841614156102105760028054600160a060020a03191690555b6003600050600084600160a060020a0316815260200190815260200160002060006000820160006101000a81549060ff02191690556000820160016101000a815490600160a060020a0302191690556001820160006101000a815490600160a060020a03021916905550506001600081815054809291906001900391905055505b505050565b600160a060020a036004358181166000908152600360205260408120600101546002546102d09491821691168114156103d4576103d8565b005b600160a060020a03166060908152602090f35b6060908152602090f35b60028054600160a060020a03908116835260036020526040808420805461010060a860020a0319808216610100808a029190911790935590829004841680875283872060019081018054600160a060020a03199081168b179091559654868a168952949097209687018054949095169390951692909217909255835416908202179091555b60016003600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff0219169083021790555060016000818150548092919060010191905055505050565b600054600160a060020a0316ff5b8091505b5091905056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;7&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0xffc4df2d4f3d2cffad590bed6296406ab7926ca9e74784f74a95191fa069a174&quot;: &quot;0x00000000000000000000000070c9217d814985faef62b124420f8dfbddd96433&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100ae5760e060020a600035046302d05d3f81146100b65780631ab9075a146100c85780632b68bb2d146101035780634cc927d7146101c557806351a34eb81461028e57806356ccb6f0146103545780635928d37f1461041d578063599efa6b146104e9578063759297bb146105b2578063771d50e11461067e578063a7f4377914610740578063f905c15a1461075e578063f92eb77414610767578063febf661214610836575b610902610002565b610904600054600160a060020a031681565b610902600435600254600160a060020a03166000148015906100f9575060025433600160a060020a03908116911614155b1561092057610002565b60025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b02606452610902916000918291600160a060020a03169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f115610002575050604051511515905061094257610002565b61090260043560243560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610a0d57610002565b61090260043560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610ae957610002565b61090260043560243560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610bbc57610002565b61090260043560243560443560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610c9657610002565b61090260043560243560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610de057610002565b61090260043560243560443560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610ebb57610002565b60025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b02606452610902916000918291600160a060020a03169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610f9e57610002565b61090260025433600160a060020a0390811691161461106957610002565b61090e60035481565b61090e60043560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750506040805180517ff92eb774000000000000000000000000000000000000000000000000000000008252600482018790529151919350600160a060020a038416925063f92eb774916024828101926020929190829003018188876161da5a03f11561000257505060405151949350505050565b61090260043560243560443560025460e360020a631c2d8fb302606090815260aa60020a6a18dbdb9d1c9858dd18dd1b026064526000918291600160a060020a039091169063e16c7d989060849060209060248187876161da5a03f1156100025750505060405180519060200150905080600160a060020a03166316c66cc6336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f115610002575050604051511515905061107757610002565b005b6060908152602090f35b60408051918252519081900360200190f35b6002805473ffffffffffffffffffffffffffffffffffffffff19168217905550565b6040805160025460e360020a631c2d8fb302825260aa60020a6a18dbdb9d1c9858dd18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f5ed61af000000000000000000000000000000000000000000000000000000000825233600160a060020a039081166004840152925190959286169350635ed61af092602483810193919291829003018183876161da5a03f115610002575050505050565b6040805160025460e360020a631c2d8fb302825260aa60020a6a18dbdb9d1c9858dd18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517fab03fc2600000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015260248301899052808816604484015292519095928616935063ab03fc2692606483810193919291829003018183876161da5a03f1156100025750505050505050565b6040805160025460e360020a631c2d8fb302825260aa60020a6a18dbdb9d1c9858dd18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f949ae47900000000000000000000000000000000000000000000000000000000825233600160a060020a0390811660048401526024830188905292519095928616935063949ae47992604483810193919291829003018183876161da5a03f11561000257505050505050565b6040805160025460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f46d88e7d000000000000000000000000000000000000000000000000000000008252600160a060020a0380891660048401523381166024840152604483018890529251909592861693506346d88e7d92606483810193919291829003018183876161da5a03f1156100025750505050505050565b6040805160025460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f5315cdde00000000000000000000000000000000000000000000000000000000825233600160a060020a039081166004840152808a16602484015260448301889052925190959286169350635315cdde92606483810193919291829003018183876161da5a03f115610002575050604080517f5928d37f00000000000000000000000000000000000000000000000000000000815233600160a060020a03908116600483015287166024820152604481018690529051635928d37f91606481810192600092909190829003018183876161da5a03f115610002575050505050505050565b6040805160025460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517fe68e401c00000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015280891660248401526044830188905292519095928616935063e68e401c92606483810193919291829003018183876161da5a03f1156100025750505050505050565b6040805160025460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f5152f381000000000000000000000000000000000000000000000000000000008252600160a060020a03808a1660048401528089166024840152604483018890523381166064840152925190959286169350635152f38192608483810193919291829003018183876161da5a03f115610002575050505050505050565b6040805160025460e360020a631c2d8fb302825260aa60020a6a18dbdb9d1c9858dd18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f056d447000000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015292519095928616935063056d447092602483810193919291829003018183876161da5a03f115610002575050505050565b600254600160a060020a0316ff5b6040805160025460e360020a631c2d8fb302825260aa60020a6a18dbdb9d1c9858dd18dd1b0260048301529151600160a060020a03929092169163e16c7d9891602481810192602092909190829003018188876161da5a03f1156100025750506040805180517f3ae1005c00000000000000000000000000000000000000000000000000000000825233600160a060020a039081166004840152808a166024840152808916604484015260648301889052925190959286169350633ae1005c92608483810193919291829003018183876161da5a03f11561000257505050505050505056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156101745760e060020a600035046302d05d3f811461017c57806304a7fdbc1461018e5780630e90f957146101fb5780630fb5a6b41461021257806314baa1b61461021b57806317fc45e21461023a5780632b096926146102435780632e94420f1461025b578063325a19f11461026457806336da44681461026d5780633f81a2c01461027f5780633fc306821461029757806345ecd3d7146102d45780634665096d146102dd5780634e71d92d146102e657806351a34eb8146103085780636111bb951461032d5780636f265b93146103445780637e9014e11461034d57806390ba009114610360578063927df5e014610393578063a7f437791461046c578063ad8f50081461046e578063bc6d909414610477578063bdec3ad114610557578063c19d93fb1461059a578063c9503fe2146105ad578063e0a73a93146105b6578063ea71b02d146105bf578063ea8a1af0146105d1578063ee4a96f9146105f3578063f1ff78a01461065c575b61046c610002565b610665600054600160a060020a031681565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600554600090600160a060020a0390811633909116146106a857610002565b61068260015460a060020a900460ff166000145b90565b61069660085481565b61046c600435600154600160a060020a03166000141561072157610002565b610696600d5481565b610696600435600f8160068110156100025750015481565b61069660045481565b61069660035481565b610665600554600160a060020a031681565b61069660043560158160068110156100025750015481565b6106966004355b600b54600f5460009160028202808203928083039290810191018386101561078357601054840186900394505b50505050919050565b61069660025481565b61069660095481565b61046c600554600090600160a060020a03908116339091161461085857610002565b61046c600435600554600090600160a060020a03908116339091161461092e57610002565b6106826001805460a060020a900460ff161461020f565b610696600b5481565b61068260075460a060020a900460ff1681565b6106966004355b600b54601554600091600282028082039280830392908101910183861015610a6c5760165494506102cb565b61046c6004356024356044356040805160015460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b02600483015291516000928392600160a060020a03919091169163e16c7d9891602481810192602092909190829003018187876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610b4657610002565b005b610696600a5481565b61046c60006000600060006000600160009054906101000a9004600160a060020a0316600160a060020a031663e16c7d986040518160e060020a028152600401808060b260020a691858d8dbdd5b9d18dd1b0281526020015060200190506020604051808303816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610f1757610002565b61046c5b60015b60058160ff16101561071e57600f6001820160ff166006811015610002578101549060ff83166006811015610002570154101561129057610002565b61069660015460a060020a900460ff1681565b61069660065481565b610696600c5481565b610665600754600160a060020a031681565b61046c600554600090600160a060020a0390811633909116146112c857610002565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600154600090600160a060020a03168114156113fb57610002565b610696600e5481565b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60408051918252519081900360200190f35b5060005b60068160ff16101561070857828160ff166006811015610002576020020151600f60ff831660068110156100025701558160ff82166006811015610002576020020151601560ff831660068110156100025701556001016106ac565b61071061055b565b505050565b600e8054820190555b50565b6040805160015460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061071557610002565b83861015801561079257508286105b156107b457600f546010546011548689039082030291909104900394506102cb565b8286101580156107c55750600b5486105b156107e757600f546011546012548589039082030291909104900394506102cb565b600b5486108015906107f857508186105b1561081d57600b54600f546012546013549289039281039290920204900394506102cb565b81861015801561082c57508086105b1561084e57600f546013546014548489039082030291909104900394506102cb565b60145494506102cb565b60015460a060020a900460ff1660001461087157610002565b600254600a01431161088257610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663771d50e16040518160e060020a0281526004018090506000604051808303816000876161da5a03f1156100025750505050565b60015460a060020a900460ff1660001461094757610002565b600254600a01431161095857610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180517f51a34eb8000000000000000000000000000000000000000000000000000000008252600482018690529151919350600160a060020a03841692506351a34eb8916024808301926000929190829003018183876161da5a03f11561000257505050600b8290554360025560408051838152905130600160a060020a0316917fa609f6bd4ad0b4f419ddad4ac9f0d02c2b9295c5e6891469055cf73c2b568fff919081900360200190a25050565b838610158015610a7b57508286105b15610a9d576015546016546017548689039082900302919091040194506102cb565b828610158015610aae5750600b5486105b15610ad0576015546017546018548589039082900302919091040194506102cb565b600b548610801590610ae157508186105b15610b0657600b546015546018546019549289039281900392909202040194506102cb565b818610158015610b1557508086105b15610b3757601554601954601a548489039082900302919091040194506102cb565b601a54860181900394506102cb565b60015460a060020a900460ff16600014610b5f57610002565b6001805460a060020a60ff02191660a060020a17908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919450600160a060020a038516925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604080518051600a556005547ffebf661200000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015216602482015260448101879052905163febf661291606480820192600092909190829003018183876161da5a03f115610002575050508215610cc7576007805473ffffffffffffffffffffffffffffffffffffffff191633179055610dbb565b6040805160055460065460e060020a63599efa6b028352600160a060020a039182166004840152602483015291519184169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050604080516006547f56ccb6f000000000000000000000000000000000000000000000000000000000825233600160a060020a03166004830152602482015290516356ccb6f091604480820192600092909190829003018183876161da5a03f115610002575050600580546007805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a038416179091551633179055505b6007805460a060020a60ff02191660a060020a87810291909117918290556008544301600955900460ff1615610df757600a54610e039061029e565b600a54610e0b90610367565b600c55610e0f565b600c555b600c54670de0b6b3a7640000850204600d55600754600554604080517f759297bb000000000000000000000000000000000000000000000000000000008152600160a060020a039384166004820152918316602483015260448201879052519184169163759297bb91606481810192600092909190829003018183876161da5a03f11561000257505060408051600754600a54600d54600554600c5460a060020a850460ff161515865260208601929092528486019290925260608401529251600160a060020a0391821694509281169230909116917f3b3d1986083d191be01d28623dc19604728e29ae28bdb9ba52757fdee1a18de2919081900360800190a45050505050565b600954431015610f2657610002565b6001805460a060020a900460ff1614610f3e57610002565b6001805460a060020a60ff0219167402000000000000000000000000000000000000000017908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919750600160a060020a038816925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604051516007549095506000945060a060020a900460ff1615905061105c57600a5484111561105757600a54600d54670de0b6b3a7640000918603020492505b61107e565b600a5484101561107e57600a54600d54670de0b6b3a764000091869003020492505b60065483111561108e5760065492505b6006548390039150600083111561111857604080516005546007547f5928d37f000000000000000000000000000000000000000000000000000000008352600160a060020a0391821660048401528116602483015260448201869052915191871691635928d37f91606481810192600092909190829003018183876161da5a03f115610002575050505b600082111561117a576040805160055460e060020a63599efa6b028252600160a060020a0390811660048301526024820185905291519187169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050505b6040805185815260208101849052808201859052905130600160a060020a0316917f89e690b1d5aaae14f3e85f108dc92d9ab3763a58d45aed8b59daedbbae8fe794919081900360600190a260008311156112285784600160a060020a0316634cc927d785336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050611282565b84600160a060020a0316634cc927d7600a60005054336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f115610002575050505b600054600160a060020a0316ff5b60156001820160ff166006811015610002578101549060ff8316600681101561000257015411156112c057610002565b60010161055e565b60015460a060020a900460ff166000146112e157610002565b600254600a0143116112f257610002565b6001546040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f11561000257505060408051805160055460065460e060020a63599efa6b028452600160a060020a03918216600485015260248401529251909450918416925063599efa6b916044808301926000929190829003018183876161da5a03f1156100025750505080600160a060020a0316632b68bb2d6040518160e060020a0281526004018090506000604051808303816000876161da5a03f115610002575050600054600160a060020a03169050ff5b6001546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602480830192602092919082900301816000876161da5a03f11561000257505060405151151590506106a85761000256&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000006195&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x00000000000000000000000070c9217d814985faef62b124420f8dfbddd96433&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;: &quot;0x0000000000000000000000000000000000000000000000008ac7230489e80000&quot;,</span>
<span class="term-fg32">+          &quot;0x000000000000000000000000000000000000000000000000000000000000000b&quot;: &quot;0x0000000000000000000000000000000000000000000000283c7b9181eca20000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100cf5760e060020a600035046302d05d3f81146100d7578063031e7f5d146100e95780631ab9075a1461010b5780632243118a1461014657806327aad68a1461016557806338a699a4146101da5780635188f996146101f8578063581d5d601461021e57806381738c5914610246578063977da54014610269578063a07421ce14610288578063a7f43779146102be578063bdbdb086146102dc578063e1c7111914610303578063f4f2821b14610325578063f905c15a1461034a578063f92eb77414610353575b610387610002565b610389600054600160a060020a031681565b610387600435602435600254600160a060020a0316600014156103a857610002565b610387600435600254600160a060020a031660001480159061013c575060025433600160a060020a03908116911614155b1561042957610002565b610387600435600254600160a060020a03166000141561044b57610002565b6102ac60043560008181526004602081815260408320547f524d81d3000000000000000000000000000000000000000000000000000000006060908152610100909104600160a060020a031692839263524d81d3926064928188876161da5a03f1156100025750506040515192506103819050565b61039c60043560008181526004602052604090205460ff165b919050565b6103876004356024356002546000908190600160a060020a031681141561079457610002565b61038760043560243560025460009081908190600160a060020a031681141561080457610002565b61038960043560008181526004602052604081205460ff1615156109e357610002565b610387600435600254600160a060020a0316600014156109fb57610002565b600435600090815260096020526040902054670de0b6b3a764000090810360243502045b60408051918252519081900360200190f35b61038760025433600160a060020a03908116911614610a9257610002565b600435600090815260086020526040902054670de0b6b3a7640000602435909102046102ac565b610387600435602435600254600160a060020a031660001415610aa057610002565b61038760043560025460009081908190600160a060020a0316811415610b3657610002565b6102ac60035481565b6102ac600435600081815260076020908152604080832054600690925290912054670de0b6b3a76400000204805b50919050565b005b600160a060020a03166060908152602090f35b15156060908152602090f35b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b906084906020906024816000876161da5a03f11561000257505060405151151590506103fe57610002565b60008281526004602052604090205460ff16151561041b57610002565b600860205260406000205550565b6002805473ffffffffffffffffffffffffffffffffffffffff19168217905550565b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b906084906020906024816000876161da5a03f11561000257505060405151151590506104a157610002565b604080516000838152600460205291909120805460ff1916600117905561040280610de2833901809050604051809103906000f0600460005060008360001916815260200190815260200160002060005060000160016101000a815481600160a060020a030219169083021790555066470de4df8200006008600050600083600019168152602001908152602001600020600050819055506703782dace9d9000060096000506000836000191681526020019081526020016000206000508190555050565b600460005060008560001916815260200190815260200160002060005060000160019054906101000a9004600160a060020a0316915081600160a060020a031663524d81d36040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060405151821415905061060057838152600660209081526040808320839055600790915281208190555b81600160a060020a0316630a3b0a4f846040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f11561000257505050600160a060020a038316808252600560209081526040808420879055805160e160020a6364a81ff102815290518694670de0b6b3a7640000949363c9503fe29360048181019492939183900301908290876161da5a03f11561000257505060408051805160e060020a636f265b930282529151919291636f265b939160048181019260209290919082900301816000876161da5a03f11561000257505050604051805190602001500204600660005060008660001916815260200190815260200160002060008282825054019250508190555080600160a060020a031663c9503fe26040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050506040518051906020015060076000506000866000191681526020019081526020016000206000828282505401925050819055505b50505050565b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b9060849060209060248187876161da5a03f11561000257505060405151151590506107e957610002565b8381526004602052604081205460ff16151561056657610002565b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b9060849060209060248187876161da5a03f115610002575050604051511515905061085957610002565b849250670de0b6b3a764000083600160a060020a031663c9503fe26040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575060408051805160e160020a6364a81ff102825291519189028590049650600481810192602092909190829003018188876161da5a03f11561000257505060408051805160e060020a636f265b930282529151919291636f265b9391600481810192602092909190829003018189876161da5a03f115610002575050506040518051906020015002049050806006600050600085600160a060020a0316632e94420f6040518160e060020a0281526004018090506020604051808303816000876161da5a03f1156100025750604080518051855260208681528286208054989098039097557f2e94420f00000000000000000000000000000000000000000000000000000000815290518896600483810193919291829003018187876161da5a03f115610002575050604080515183526020939093525020805490910190555050505050565b60409020546101009004600160a060020a03166101f3565b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b906084906020906024816000876161da5a03f1156100025750506040515115159050610a5157610002565b60008181526004602052604090205460ff161515610a6e57610002565b6040600020805474ffffffffffffffffffffffffffffffffffffffffff1916905550565b600254600160a060020a0316ff5b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b906084906020906024816000876161da5a03f1156100025750506040515115159050610af657610002565b60008281526004602052604090205460ff161515610b1357610002565b670de0b6b3a7640000811115610b2857610002565b600960205260406000205550565b60025460e060020a6313bc6d4b02606090815233600160a060020a03908116606452909116906313bc6d4b9060849060209060248187876161da5a03f1156100025750506040515115159050610b8b57610002565b600160a060020a038416815260056020908152604080832054808452600490925282205490935060ff161515610bc057610002565b600460005060008460001916815260200190815260200160002060005060000160019054906101000a9004600160a060020a0316915081600160a060020a031663b9caebf4856040518260e060020a0281526004018082600160a060020a031681526020019150506000604051808303816000876161da5a03f115610002575050506005600050600085600160a060020a0316815260200190815260200160002060005060009055839050600082600160a060020a031663524d81d36040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050604051519190911115905061078e57670de0b6b3a764000081600160a060020a031663c9503fe26040518160e060020a0281526004018090506020604051808303816000876161da5a03f11561000257505060408051805160e060020a636f265b930282529151919291636f265b939160048181019260209290919082900301816000876161da5a03f11561000257505050604051805190602001500204600660005060008560001916815260200190815260200160002060008282825054039250508190555080600160a060020a031663c9503fe26040518160e060020a0281526004018090506020604051808303816000876161da5a03f115610002575050506040518051906020015060076000506000856000191681526020019081526020016000206000828282505403925050819055505050505056606060405260008054600160a060020a031916331790556103de806100246000396000f3606060405236156100615760e060020a600035046302d05d3f81146100695780630a3b0a4f1461007b5780630d327fa7146100f6578063524d81d314610109578063a7f4377914610114578063b9caebf414610132578063bbec3bae14610296575b6102ce610002565b6102d0600054600160a060020a031681565b6102ce600435600254600090600160a060020a03168114156102ed5760028054600160a060020a03199081168417808355600160a060020a03808616855260036020526040852060018101805493831694909316939093179091559154815461010060a860020a031916921661010002919091179055610372565b6102d0600254600160a060020a03165b90565b6102e3600154610106565b6102ce60005433600160a060020a039081169116146103c657610002565b6102ce600435600160a060020a038116600090815260036020526040812054819060ff16801561016457506001548190115b1561029157506040808220600180820154915461010090819004600160a060020a039081168087528587209093018054600160a060020a031916948216948517905583865293909420805461010060a860020a03191694820294909417909355600254909190811690841614156101e85760028054600160a060020a031916821790555b600254600160a060020a0390811690841614156102105760028054600160a060020a03191690555b6003600050600084600160a060020a0316815260200190815260200160002060006000820160006101000a81549060ff02191690556000820160016101000a815490600160a060020a0302191690556001820160006101000a815490600160a060020a03021916905550506001600081815054809291906001900391905055505b505050565b600160a060020a036004358181166000908152600360205260408120600101546002546102d09491821691168114156103d4576103d8565b005b600160a060020a03166060908152602090f35b6060908152602090f35b60028054600160a060020a03908116835260036020526040808420805461010060a860020a0319808216610100808a029190911790935590829004841680875283872060019081018054600160a060020a03199081168b179091559654868a168952949097209687018054949095169390951692909217909255835416908202179091555b60016003600050600084600160a060020a0316815260200190815260200160002060005060000160006101000a81548160ff0219169083021790555060016000818150548092919060010191905055505050565b600054600160a060020a0316ff5b8091505b5091905056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;3&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+          &quot;0x3571d73f14f31a1463bd0a2f92f7fde1653d4e1ead7aedf4b0a5df02f16092ab&quot;: &quot;0x0000000000000000000000000000000000000000000007d634e4c55188be0000&quot;,</span>
<span class="term-fg32">+          &quot;0x4e64fe2d1b72d95a0a31945cc6e4f4e524ac5ad56d6bd44a85ec7bc9cc0462c0&quot;: &quot;0x000000000000000000000000000000000000000000000002b5e3af16b1880000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117124093&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd5830105008650617269747986312e31322e31826d61&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4707788&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xad325e4c49145fb7a4058a68ac741cc8607a71114e23fc88083c7e881dd653e7&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x00714b9ac97fd6bd9325a059a70c9b9fa94ce050&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0af918f65cb4af04b608fc1f14a849707696986a0e7049e97ef3981808bcc65f&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x38dee147326a8d40&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;25000&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xc5d6bbcd46236fcdcc80b332ffaaa5476b980b01608f9708408cfef01b58bd5b&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891517&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;1895410389427&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf88b8206628504a817c8008303d09094c212e03b9e060e36facad5fd8f4435412ca22e6b80a451a34eb80000000000000000000000000000000000000000000000280faf689c35ac00002aa0a7ee5b7877811bf671d121b40569462e722657044808dc1d6c4f1e4233ec145ba0417e7543d52b65738d9df419cbe40a708424f4d54b0fc145c0a64545a2bb1065&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x70c9217d814985faef62b124420f8dfbddd96433&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x37b38&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x51a34eb80000000000000000000000000000000000000000000000280faf689c35ac0000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 25001,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1810b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x31217&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d98636f6e7472616374617069000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000b4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x30b4a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x51a34eb80000000000000000000000000000000000000000000000280faf689c35ac0000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xedb7&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 4,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2a68d&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d98636f6e747261637463746c000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x29f35&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x16c66cc6000000000000000000000000c212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xf8d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 1],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x23ac9&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d98636f6e7472616374646200000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000007986bad81f4cbd9317f5a46861437dae58d69113&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 1, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x23366&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x16c66cc6000000000000000000000000c212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x7986bad81f4cbd9317f5a46861437dae58d69113&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x273&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 1, 1],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x28a9e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d98636f6e747261637463746c000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 2],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xb4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x283b9&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x949ae479000000000000000000000000c212e03b9e060e36facad5fd8f4435412ca22e6b0000000000000000000000000000000000000000000000280faf689c35ac0000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xc51c&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 12,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x21d79&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13bc6d4b000000000000000000000000b4fe7aa695b326c9d219158d2ca50db77b39f99f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x24d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2165b&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d986d61726b65746462000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000cf00ffd997ad14939736f026006498e3f099baaf&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 1],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x20ee1&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x581d5d60000000000000000000000000c212e03b9e060e36facad5fd8f4435412ca22e6b0000000000000000000000000000000000000000000000280faf689c35ac0000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x5374&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 6,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a8e8&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13bc6d4b0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x24d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a2c6&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xc9503fe2&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x3cb&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000008ac7230489e80000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 1],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x19b72&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xc9503fe2&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x3cb&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000008ac7230489e80000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 2],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x19428&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x6f265b93&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x305&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000283c7b9181eca20000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 3],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x18d45&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e94420f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x229&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 4],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1734e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e94420f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x229&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 2, 5],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1b6c1&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d986c6f676d67720000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000002a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 3],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1af69&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e94420f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x229&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 4],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a91d&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x0accce0600000000000000000000000000000000000000000000000000000000000000025842545553440000000000000000000000000000000000000000000000000000000000000000000000000000c212e03b9e060e36facad5fd8f4435412ca22e6b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x12fa&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 5],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x2a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x143a5&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13bc6d4b0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x24d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 5, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x19177&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d986c6f676d67720000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000002a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 6],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x18a22&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e94420f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x229&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 7],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x18341&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe16c7d986d61726b65746462000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x334&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000cf00ffd997ad14939736f026006498e3f099baaf&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 8],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x17bec&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e94420f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x229&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5842545553440000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 9],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1764e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xf92eb7745842545553440000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xcf00ffd997ad14939736f026006498e3f099baaf&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x45c&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x00000000000000000000000000000000000000000000002816d180e30c390000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 10],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x16e62&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x645a3b72584254555344000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002816d180e30c390000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xebb&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 11],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x2a98c5f40bfa3dee83431103c535f6fae9a8ad38&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x108ba&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13bc6d4b0000000000000000000000003e9286eafa2db8101246c2131c09b49080d00690&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x2cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x24d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [1, 3, 11, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5b0c6acfa66208dd275aeec2" role="button"
                   aria-expanded="false" aria-controls="id-5b0c6acfa66208dd275aeec2">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/delegatecall.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/delegatecall.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+120</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5b0c6acfa66208dd275aeec2"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3a03ffc0fa96fdc882eed702c981f0aea47f120a</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall.json</span>
<span class="term-fg36">@@ -0,0 +1,120 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;31927752&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4707788&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x5659922ce141eedbc2733678f9806c77b4eebee8&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;11495&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479735917&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x13204f5d64c28326fd7bd05fd4ea855302d7f2ff&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100825760e060020a60003504630a0313a981146100875780630a3b0a4f146101095780630cd40fea1461021257806329092d0e1461021f5780634cd06a5f146103295780635dbe47e8146103395780637a9e5410146103d9578063825db5f7146103e6578063a820b44d146103f3578063efa52fb31461047a575b610002565b34610002576104fc600435600060006000507342b02b5deeb78f34cd5ac896473b63e6c99a71a26333556e849091846000604051602001526040518360e060020a028152600401808381526020018281526020019250505060206040518083038186803b156100025760325a03f415610002575050604051519150505b919050565b346100025761051060043560006000507342b02b5deeb78f34cd5ac896473b63e6c99a71a2637d65837a9091336000604051602001526040518360e060020a0281526004018083815260200182600160a060020a031681526020019250505060206040518083038186803b156100025760325a03f4156100025750506040515115905061008257604080517f21ce24d4000000000000000000000000000000000000000000000000000000008152600060048201819052600160a060020a038416602483015291517342b02b5deeb78f34cd5ac896473b63e6c99a71a2926321ce24d49260448082019391829003018186803b156100025760325a03f415610002575050505b50565b3461000257610512600181565b346100025761051060043560006000507342b02b5deeb78f34cd5ac896473b63e6c99a71a2637d65837a9091336000604051602001526040518360e060020a0281526004018083815260200182600160a060020a031681526020019250505060206040518083038186803b156100025760325a03f4156100025750506040515115905061008257604080517f89489a87000000000000000000000000000000000000000000000000000000008152600060048201819052600160a060020a038416602483015291517342b02b5deeb78f34cd5ac896473b63e6c99a71a2926389489a879260448082019391829003018186803b156100025760325a03f4156100025750505061020f565b3461000257610528600435610403565b34610002576104fc600435604080516000602091820181905282517f7d65837a00000000000000000000000000000000000000000000000000000000815260048101829052600160a060020a0385166024820152925190927342b02b5deeb78f34cd5ac896473b63e6c99a71a292637d65837a92604480840193829003018186803b156100025760325a03f4156100025750506040515191506101049050565b3461000257610512600c81565b3461000257610512600081565b3461000257610528600061055660005b600060006000507342b02b5deeb78f34cd5ac896473b63e6c99a71a263685a1f3c9091846000604051602001526040518360e060020a028152600401808381526020018281526020019250505060206040518083038186803b156100025760325a03f4156100025750506040515191506101049050565b346100025761053a600435600060006000507342b02b5deeb78f34cd5ac896473b63e6c99a71a263f775b6b59091846000604051602001526040518360e060020a028152600401808381526020018281526020019250505060206040518083038186803b156100025760325a03f4156100025750506040515191506101049050565b604080519115158252519081900360200190f35b005b6040805160ff9092168252519081900360200190f35b60408051918252519081900360200190f35b60408051600160a060020a039092168252519081900360200190f35b90509056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x4d140b25abf3c71052885c66f73ce07cff141c1afabffdaf5cba04d625b7ebcc&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x269296dddce321a6bcbaa2f0181127593d732cba&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156101275760e060020a60003504630cd40fea811461012c578063173825d9146101395780631849cb5a146101c7578063285791371461030f5780632a58b3301461033f5780632cb0d48a146103565780632f54bf6e1461036a578063332b9f061461039d5780633ca8b002146103c55780633df4ddf4146103d557806341c0e1b5146103f457806347799da81461040557806362a51eee1461042457806366907d13146104575780637065cb48146104825780637a9e541014610496578063825db5f7146104a3578063949d225d146104b0578063a51687df146104c7578063b4da4e37146104e6578063b4e6850b146104ff578063bd7474ca14610541578063e75623d814610541578063e9938e1114610555578063f5d241d314610643575b610002565b3461000257610682600181565b34610002576106986004356106ff335b60006001600a9054906101000a9004600160a060020a0316600160a060020a0316635dbe47e8836000604051602001526040518260e060020a0281526004018082600160a060020a03168152602001915050602060405180830381600087803b156100025760325a03f1156100025750506040515191506103989050565b3461000257604080516101008082018352600080835260208084018290528385018290526060808501839052608080860184905260a080870185905260c080880186905260e09788018690526001605060020a0360043581168752600586529589902089519788018a528054808816808a52605060020a91829004600160a060020a0316978a01889052600183015463ffffffff8082169d8c018e905264010000000082048116988c01899052604060020a90910416958a018690526002830154948a01859052600390920154808916938a01849052049096169690970186905293969495949293604080516001605060020a03998a16815297891660208901529590971686860152600160a060020a03909316606086015263ffffffff9182166080860152811660a08501521660c083015260e08201929092529051908190036101000190f35b346100025761069a60043560018054600091829160ff60f060020a909104161515141561063d5761072833610376565b34610002576106ae6004546001605060020a031681565b34610002576106986004356108b333610149565b346100025761069a6004355b600160a060020a03811660009081526002602052604090205460ff1615156001145b919050565b34610002576106986001805460ff60f060020a9091041615151415610913576108ed33610376565b346100025761069a600435610149565b34610002576106ae6003546001605060020a03605060020a9091041681565b346100025761069861091533610149565b34610002576106ae6003546001605060020a0360a060020a9091041681565b346100025761069a60043560243560018054600091829160ff60f060020a909104161515141561095e5761092633610376565b34610002576106986004356001805460ff60f060020a909104161515141561072557610a8b33610376565b3461000257610698600435610aa533610149565b3461000257610682600c81565b3461000257610682600081565b34610002576106ae6003546001605060020a031681565b34610002576106ca600154600160a060020a03605060020a9091041681565b346100025761069a60015460ff60f060020a9091041681565b346100025761069a60043560243560443560643560843560a43560c43560018054600091829160ff60f060020a9091041615151415610b5857610ad233610376565b3461000257610698600435610bd633610149565b34610002576106e6600435604080516101008181018352600080835260208084018290528385018290526060808501839052608080860184905260a080870185905260c080880186905260e09788018690526001605060020a03808b168752600586529589902089519788018a5280548088168952600160a060020a03605060020a918290041696890196909652600181015463ffffffff8082169b8a019b909b5264010000000081048b1695890195909552604060020a90940490981691860182905260028301549086015260039091015480841696850196909652940416918101919091525b50919050565b346100025761069a60043560243560443560643560843560a43560018054600091829160ff60f060020a9091041615151415610c8e57610bfb33610376565b6040805160ff9092168252519081900360200190f35b005b604080519115158252519081900360200190f35b604080516001605060020a039092168252519081900360200190f35b60408051600160a060020a039092168252519081900360200190f35b6040805163ffffffff9092168252519081900360200190f35b1561012757600160a060020a0381166000908152600260205260409020805460ff191690555b50565b1561063d57506001605060020a0380831660009081526005602052604090208054909116151561075b576000915061063d565b604080516101008101825282546001605060020a038082168352600160a060020a03605060020a92839004166020840152600185015463ffffffff80821695850195909552640100000000810485166060850152604060020a90049093166080830152600284015460a0830152600384015480841660c08401520490911660e0820152610817905b8051600354600090819060016001605060020a0390911611610c995760038054605060020a60f060020a0319169055610ddf565b600380546001605060020a031981166000196001605060020a03928316011782558416600090815260056020526040812080547fffff000000000000000000000000000000000000000000000000000000000000168155600181810180546bffffffffffffffffffffffff191690556002820192909255909101805473ffffffffffffffffffffffffffffffffffffffff19169055915061063d565b1561012757600180547fff00ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1660f060020a8302179055610725565b1561091357600480546001605060020a031981166001605060020a039091166001011790555b565b156101275733600160a060020a0316ff5b1561095e57506001605060020a03808416600090815260056020526040902080549091161515610965576000915061095e565b600191505b5092915050565b60038101546001605060020a0384811691161415610986576001915061095e565b604080516101008101825282546001605060020a038082168352600160a060020a03605060020a92839004166020840152600185015463ffffffff80821695850195909552640100000000810485166060850152604060020a90049093166080830152600284015460a0830152600384015480841660c08401520490911660e0820152610a12906107e3565b61095983825b80546003546001605060020a0391821691600091161515610de55760038054605060020a60a060020a031916605060020a84021760a060020a69ffffffffffffffffffff02191660a060020a84021781558301805473ffffffffffffffffffffffffffffffffffffffff19169055610ddf565b1561072557600480546001605060020a0319168217905550565b1561012757600160a060020a0381166000908152600260205260409020805460ff19166001179055610725565b15610b5857506001605060020a038088166000908152600560205260409020805490911615610b645760009150610b58565b6004546001605060020a0390811690891610610b3057600480546001605060020a03191660018a011790555b6003805460016001605060020a03821681016001605060020a03199092169190911790915591505b50979650505050505050565b80546001605060020a0319168817605060020a60f060020a031916605060020a880217815560018101805463ffffffff1916871767ffffffff0000000019166401000000008702176bffffffff00000000000000001916604060020a860217905560028101839055610b048982610a18565b156101275760018054605060020a60f060020a031916605060020a8302179055610725565b15610c8e57506001605060020a03808816600090815260056020526040902080549091161515610c2e5760009150610c8e565b8054605060020a60f060020a031916605060020a88021781556001808201805463ffffffff1916881767ffffffff0000000019166401000000008802176bffffffff00000000000000001916604060020a87021790556002820184905591505b509695505050505050565b6003546001605060020a03848116605060020a909204161415610d095760e084015160038054605060020a928302605060020a60a060020a031990911617808255919091046001605060020a031660009081526005602052604090200180546001605060020a0319169055610ddf565b6003546001605060020a0384811660a060020a909204161415610d825760c08401516003805460a060020a92830260a060020a69ffffffffffffffffffff021990911617808255919091046001605060020a03166000908152600560205260409020018054605060020a60a060020a0319169055610ddf565b505060c082015160e08301516001605060020a0380831660009081526005602052604080822060039081018054605060020a60a060020a031916605060020a8702179055928416825290200180546001605060020a031916831790555b50505050565b6001605060020a0384161515610e6457600380546001605060020a03605060020a9182900481166000908152600560205260409020830180546001605060020a0319908116871790915583548785018054918590049093168402605060020a60a060020a03199182161790911690915582549185029116179055610ddf565b506001605060020a038381166000908152600560205260409020600390810180549185018054605060020a60a060020a0319908116605060020a94859004909516808502959095176001605060020a0319168817909155815416918402919091179055801515610ef4576003805460a060020a69ffffffffffffffffffff02191660a060020a8402179055610ddf565b6003808401546001605060020a03605060020a9091041660009081526005602052604090200180546001605060020a031916831790555050505056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x000113204f5d64c28326fd7bd05fd4ea855302d7f2ff00000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x42b02b5deeb78f34cd5ac896473b63e6c99a71a2&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6504032353da7150606060405236156100695760e060020a60003504631bf7509d811461006e57806321ce24d41461008157806333556e84146100ec578063685a1f3c146101035780637d65837a1461011757806389489a8714610140578063f775b6b5146101fc575b610007565b61023460043560006100fd82600061010d565b610246600435602435600160a060020a03811660009081526020839052604081205415156102cb57826001016000508054806001018281815481835581811511610278576000838152602090206102789181019083015b808211156102d057600081556001016100d8565b610248600435602435600182015481105b92915050565b6102346004356024355b60018101906100fd565b610248600435602435600160a060020a03811660009081526020839052604090205415156100fd565b61024660043560243580600160a060020a031632600160a060020a03161415156101f857600160a060020a038116600090815260208390526040902054156101f857600160a060020a038116600090815260208390526040902054600183018054909160001901908110156100075760009182526020808320909101805473ffffffffffffffffffffffffffffffffffffffff19169055600160a060020a038316825283905260408120556002820180546000190190555b5050565b61025c60043560243560008260010160005082815481101561000757600091825260209091200154600160a060020a03169392505050565b60408051918252519081900360200190f35b005b604080519115158252519081900360200190f35b60408051600160a060020a039092168252519081900360200190f35b50505060009283526020808420909201805473ffffffffffffffffffffffffffffffffffffffff191686179055600160a060020a0385168352908590526040909120819055600284018054600101905590505b505050565b509056&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xa529806c67cc6486d4d62024471772f47f6fd672&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x67820e39ac8fe9800&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;68&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;31912170&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd783010502846765746887676f312e372e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712388&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x0855914bdc581bccdc62591fd438498386ffb59ea4d5361ed5c3702e26e2c72f&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x334391aa808257952a462d1475562ee2106a6c90&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x64bb70b8ca883cadb8fbbda2c70a861612407864089ed87b98e5de20acceada6&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x684129f283aaef18&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;11494&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x7057f31fe3dab1d620771adad35224aae43eb70e94861208bc84c557ff5b9d10&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479735912&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;90744064339&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf889448504a817c800832dc6c094269296dddce321a6bcbaa2f0181127593d732cba80a47065cb480000000000000000000000001523e55a1ca4efbae03355775ae89f8d7699ad9e29a080ed81e4c5e9971a730efab4885566e2c868cd80bd4166d0ed8c287fdf181650a069d7c49215e3d4416ad239cd09dbb71b9f04c16b33b385d14f40b618a7a65115&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xa529806c67cc6486d4d62024471772f47f6fd672&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2d6e28&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x7065cb480000000000000000000000001523e55a1ca4efbae03355775ae89f8d7699ad9e&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x269296dddce321a6bcbaa2f0181127593d732cba&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 11495,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xbd55&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x269296dddce321a6bcbaa2f0181127593d732cba&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2cae73&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x5dbe47e8000000000000000000000000a529806c67cc6486d4d62024471772f47f6fd672&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x13204f5d64c28326fd7bd05fd4ea855302d7f2ff&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xa9d&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;delegatecall&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x13204f5d64c28326fd7bd05fd4ea855302d7f2ff&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2bf459&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x7d65837a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a529806c67cc6486d4d62024471772f47f6fd672&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x42b02b5deeb78f34cd5ac896473b63e6c99a71a2&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x2aa&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0, 0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-522058902257a7205d066b65" role="button"
                   aria-expanded="false" aria-controls="id-522058902257a7205d066b65">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/delegatecall_parent_value.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/delegatecall_parent_value.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+102</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-522058902257a7205d066b65"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall_parent_value.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall_parent_value.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..800a6a4288de36969e85779873618e0c6311360d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;delegatecall_parent_value.json</span>
<span class="term-fg36">@@ -0,0 +1,103 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;566098&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xba134562590a59291892395a29c5088899c2c64d720135dad88f7f076cf55f5f&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x4b281be9594e3eb3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xdb4ec386166d9c0dc9ba147755ecbb87af9f0a22563cbda02c799efa4e29db6e&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xfc01993ad96a8fb8790a093cea4f505f8db1b0e1143c5f57bb1d173db0baa9e3&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1926740&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;482216286599&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;19388354&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577558314&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x6ab9dd83108698b9ca8d03af3c7eb91c0e54c3fc&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xcbd5b9b25d1c38c2aad&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;134969&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x91765918420bcb5ad22ee0997abed04056705798&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x366000803760206000366000736ab9dd83108698b9ca8d03af3c7eb91c0e54c3fc60325a03f41560015760206000f3&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;566099&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1927680&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577558317&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;19369422&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf87983020f3985746a52880083015f909491765918420bcb5ad22ee0997abed04056705798888ac7230489e80000884e45375a4741394181a1a04b7260723fd02830754916b3bdf1537b6a851a7ae27c7e9296cfe1fc8275ec08a049d32158988eb717d61b4503b27c7583037c067daba1eb56f4bdfafc1b0045f6&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10b68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x4e45375a47413941&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x91765918420bcb5ad22ee0997abed04056705798&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x8ac7230489e80000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xb05cc5c8f11df2b5d53ced342ee79e2805785f04c2f40add4539f27bd349f74e&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 566099,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x5721&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x4e45375a47413941000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6e26dffe2f66186f03a2c36a16a4cd9724d07622c83746f1e35f988515713d4b&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 10,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;delegatecall&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x91765918420bcb5ad22ee0997abed04056705798&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10463&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x4e45375a47413941&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6ab9dd83108698b9ca8d03af3c7eb91c0e54c3fc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x8ac7230489e80000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xb05cc5c8f11df2b5d53ced342ee79e2805785f04c2f40add4539f27bd349f74e&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 566099,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6e26dffe2f66186f03a2c36a16a4cd9724d07622c83746f1e35f988515713d4b&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 10,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-46ae6462b59d95e0733b3884" role="button"
                   aria-expanded="false" aria-controls="id-46ae6462b59d95e0733b3884">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/gas.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/gas.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+95</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-46ae6462b59d95e0733b3884"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;gas.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;gas.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3b44a5e2cd9948a960977bb0c3b1f9557e273fcd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;gas.json</span>
<span class="term-fg36">@@ -0,0 +1,95 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4683014&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x537465762d63676574682d76312e31312e34&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9435044&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x3452ca5005cb73cd60dfa488a7b124251168e564491f80eb66765e79d78cfd95&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x415aa6292d1db797a467b22139704956c030e62f&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x6037612618507ae70c74a72bc2580253662971db959cfbc06d3f8527d4d01575&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x314fc90dee5e39a2&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555274&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x795751f3f96a5de1fd3944ddd78cbfe4ef10491e1086be47609869a30929d0e5&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795228&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242595605834&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000001&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x6242e3ccf48e66425fb1&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;264882&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555275&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4683014&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795244&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9444256&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9011583040ab2843b9aca008301a9c88080b8c0601b565b6000555b005b630badf00d6003565b63c001f00d6003565b7319e7e376e7c213b7e7e7e46cc70a5dd086daff2a7f22ae6da6b482f9b1b19b0b897c3fd43884180a1c5ee361e1107a1bc635649dda600052601b603f537f16433dce375ce6dc8151d3f0a22728bc4a1d9fd6ed39dfd18b4609331937367f6040527f306964c0cf5d74f04129fdc60b54d35b596dde1bf89ad92cb4123318f4c0e40060605260206080607f60006000600161fffff2156007576080511460125760095681a1a07682fc43dbe1fb13c6474f5e70e121c826dd996168d8bb1d8ca7a63470127b46a00a25b308ba417b7770899e8f98a3f0c14aa9bf7db0edacfe4e78d00dbbd3c31e&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x601b565b6000555b005b630badf00d6003565b63c001f00d6003565b7319e7e376e7c213b7e7e7e46cc70a5dd086daff2a7f22ae6da6b482f9b1b19b0b897c3fd43884180a1c5ee361e1107a1bc635649dda600052601b603f537f16433dce375ce6dc8151d3f0a22728bc4a1d9fd6ed39dfd18b4609331937367f6040527f306964c0cf5d74f04129fdc60b54d35b596dde1bf89ad92cb4123318f4c0e40060605260206080607f60006000600161fffff21560075760805114601257600956&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x137e5&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x1a05d76017ca02010533a470e05e8925a0380d8f&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 18,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xc1c42a325856d513523aec464811923b2e2926f54015c7ba37877064cf889803&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555275,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x80945caaff2fc67253cbb0217d2e5a307afde943929e97d8b36e58b88cbb02fd&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;453.925µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x1a05d76017ca02010533a470e05e8925a0380d8f&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xc8c6&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x22ae6da6b482f9b1b19b0b897c3fd43884180a1c5ee361e1107a1bc635649dda000000000000000000000000000000000000000000000000000000000000001b16433dce375ce6dc8151d3f0a22728bc4a1d9fd6ed39dfd18b4609331937367f306964c0cf5d74f04129fdc60b54d35b596dde1bf89ad92cb4123318f4c0e4&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;callcode&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xbb8&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x00000000000000000000000019e7e376e7c213b7e7e7e46cc70a5dd086daff2a&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 18,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xc1c42a325856d513523aec464811923b2e2926f54015c7ba37877064cf889803&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555275,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x80945caaff2fc67253cbb0217d2e5a307afde943929e97d8b36e58b88cbb02fd&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ba34c980f11ddcf7bef7982c" role="button"
                   aria-expanded="false" aria-controls="id-ba34c980f11ddcf7bef7982c">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/include_precompiled.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/include_precompiled.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+831</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ba34c980f11ddcf7bef7982c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;include_precompiled.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;include_precompiled.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..d33375bfd2204e19813eba9c40fd524f6419bf46</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;include_precompiled.json</span>
<span class="term-fg36">@@ -0,0 +1,832 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;559197&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x0742a2bfab0452e2c634f3685b7e49ceb065c7000609b2b73f086e01fd1dfb58&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x3060ad521440e1c2&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x59e7d4ae6cc3c38d23dac3f869b21984c7ba8f38070f4116a4941d9c403b6299&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x68418fb5cf4afa9b807dc079e8cdde0e148ac2c8afb378e675465b5bed1fbd02&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1813945&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;469107641961&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;6321166&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577471202&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xc5e6fdae52af83f7e28&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;77947&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xf09ef316eff819ee488&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60006121df537c01000000000000000000000000000000000000000000000000000000006000350463b041b2858114156100d257600435604052780100000000000000000000000000000000000000000000000060606060599059016000905260038152604051816020015260008160400152809050205404606052606051151561008f57600060a052602060a0f35b604051601c604459905901600090520163e0e9a17b601c82035260605160048201526020610100602483600030602d5a03f1506101005190501460c052602060c0f35b632cce81aa81141561019957600435610120526001610120511280156100f85780610143565b78010000000000000000000000000000000000000000000000006060606059905901600090526003815266040000000000025481602001526000816040015280905020540461012051135b905015610157576000610180526020610180f35b601c604459905901600090520163e0e9a17b601c82035261012051600482015260206101c0602483600030602d5a03f1506101c05190506101a05260206101a0f35b63e0e9a17b8114156102e957600435610120526604000000000002546101e0526007610200525b610120517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540413156102da575b6102005160050a610120517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e051816020015260008160400152809050205404031215610269576000610200511361026c565b60005b1561028157600161020051036102005261020b565b7c01000000000000000000000000000000000000000000000000000000006102005160200260020a606060605990590160009052600381526101e05181602001526001816040015280905020540204546101e0526101c0565b6101e051610280526020610280f35b63cef887b08114156103e757365990590160009052366004823760043560208201016102c0526024356102e052506060601c61014c5990590160009052016390fa337d601c8203526102c0516020601f602083035101046020026020018360048401526020820360648401528060c8840152808401935050506102e051602482015233604482015281600401599059016000905260648160648460006004601cf161039057fe5b60648101925060c882015180808582606487015160006004600a8705601201f16103b657fe5b5080840193505080830360206103a08284600030602d5a03f1506103a0519050905090509050610300526020610300f35b6390fa337d81141561065f57365990590160009052366004823760043560208201016102c0526024356102e0526044356103e052505a610400526020601c608c599059016000905201632b861629601c8203526102c0516020601f6020830351010460200260200183600484015260208203602484015280604884015280840193505050816004015990590160009052602481602484600060046015f161048a57fe5b602481019250604882015180808582602487015160006004600a8705601201f16104b057fe5b5080840193505080830360206104408284600030602d5a03f15061044051905090509050905061042052610420511561065e576102c05160208103516020599059016000905260208183856000600287604801f150805190509050905061046052602059905901600090526020816020610460600060026068f1508051905060005b6020811215610552578181601f031a816105400153600181019050610532565b5050610540516101e0526102e0516c010000000000000000000000006103e0510217606060605990590160009052600381526101e05181602001526003816040015280905020555a61058052700100000000000000000000000000000000660400000000000154046105a0526104006105a0516103ff02056105c0526104006105a05161040102056105e0526105c0513a12156105f6576105c05161060052610615565b6105e0513a131561060e576105e05161060052610614565b3a610600525b5b6105805161040051036106005160020202610620526106205170010000000000000000000000000000000061060051021766040000000000015561042051610640526020610640f35b5b63d467ae0381141561073257600435604052602435610660526106605134121515610725576000341315610718576c01000000000000000000000000606060605990590160009052600381526040518160200152600381604001528090502054046103e0526000600060006000346103e051611388f115156106dd57fe5b601c60405990590160009052013481526103e0517f15e746bf513b8a58e4265cc1162d7fc445da5c9b1928d7cfcde2582735d4677f602083a2505b60016106a05260206106a0f35b60006106c05260206106c0f35b63ea4971ee811415610851576004356101e0526024356102e0526044356103e052601c606459905901600090520163d467ae03601c8203526101e05160048201526604000000000001546fffffffffffffffffffffffffffffffff16602482015260206106e060448334306123555a03f1506106e051905015156107bd576000610700526020610700f35b606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff166102e0511215610844576102e0516c010000000000000000000000006103e0510217606060605990590160009052600381526101e05181602001526003816040015280905020556001610760526020610760f35b6000610780526020610780f35b6387def0818114156108a3576004356101e0526c01000000000000000000000000606060605990590160009052600381526101e0518160200152600381604001528090502054046107a05260206107a0f35b630aece23c8114156108f4576004356101e052606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff166107e05260206107e0f35b63fa14df6b811415610926576604000000000001546fffffffffffffffffffffffffffffffff16610820526020610820f35b63b8c48f8c811415610b1b576004356101e0526024356108405260443561086052600066040000000000035414151561096a576000610880526020610880f3610976565b60016604000000000003555b6101e051660400000000000255606060605990590160009052600381526101e05181602001526000816040015280905020546108a0526108a0610840518060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a600783015350506108a051606060605990590160009052600381526101e0518160200152600081604001528090502055606060605990590160009052600381526101e051816020015260008160400152809050205461094052601061094001610860518060101a82538060111a60018301538060121a60028301538060131a60038301538060141a60048301538060151a60058301538060161a60068301538060171a60078301538060181a60088301538060191a600983015380601a1a600a83015380601b1a600b83015380601c1a600c83015380601d1a600d83015380601e1a600e83015380601f1a600f830153505061094051606060605990590160009052600381526101e051816020015260008160400152809050205560016109e05260206109e0f35b632b86162981141561179457365990590160009052366004823760043560208201016102c0525060483560005b6020811215610b68578181601f031a81610a600153600181019050610b48565b5050610a6051610a00526102c05160208103516020599059016000905260208183856000600287604801f1508051905090509050610a8052602059905901600090526020816020610a80600060026068f1508051905060005b6020811215610be1578181601f031a81610b600153600181019050610bc1565b5050610b60516101e05270010000000000000000000000000000000070010000000000000000000000000000000060606060599059016000905260038152610a005181602001526000816040015280905020540204610b8052610b80511515610c8b57601c602059905901600090520161272e6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610bc0526020610bc0f35b700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204610be0526000610be051141515610d2e57601c60205990590160009052016127386101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610c20526020610c20f35b608c35610c40526301000000610c405160031a0262010000610c405160021a02610100610c405160011a02610c405160001a010101610c60526301000000610c605104610ca05262ffffff610c605116610cc0526003610ca051036101000a610cc05102610c805260006101e0511315610db057610c80516101e05112610db3565b60005b1561174d57780100000000000000000000000000000000000000000000000060606060599059016000905260038152610a00518160200152600081604001528090502054046001016101205260806080599059016000905260038152610a005181602001526002816040015260008160600152809050206002810154610d405250610d405160081a610d405160091a61010002610d4051600a1a6201000002610d4051600b1a630100000002010101610d005260006107e0610120510614158015610e7e5780610e8b565b6001660400000000000054145b905015610f0257610d0051610c6051141515610eae576000610d00511415610eb1565b60005b15610efd57601c602059905901600090520161271a6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610da0526020610da0f35b6111b4565b6301000000610d005104610de05262ffffff610d005116610e00526003610de051036101000a610e005102610dc05260806080599059016000905260038152610a005181602001526002816040015260008160600152809050206002810154610e605250610e605160041a610e605160051a61010002610e605160061a6201000002610e605160071a630100000002010101610e2052601c604459905901600090520163e0e9a17b601c8203526107e0610120510360048201526020610ec0602483600030602d5a03f150610ec0519050610ea05260806080599059016000905260038152610ea05181602001526002816040015260008160600152809050206002810154610f205250610f205160041a610f205160051a61010002610f205160061a6201000002610f205160071a630100000002010101610ee052610ee051610e20510362049d408112156110595762049d4090505b6249d40081131561106b576249d40090505b62127500610dc0518202047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8113156110ba577bffffffffffffffffffffffffffffffffffffffffffffffffffffffff90505b600860076000835b80156110d9576002810490506001820191506110c2565b5080905001046000600382131515611103578160030360080260020a62ffffff841602905061111a565b6003820360080260020a8304905062ffffff811690505b6280000081161561113357610100810490506001820191505b6301000000820281179050905090509050610f6052610f6051610c6051141515611164576000610f60511415611167565b60005b156111b357601c60205990590160009052016127246101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000611040526020611040f35b5b6101e0516101e0516101e05166040000000000005455606060605990590160009052600381526101e0518160200152600081604001528090502054611060526008611060016604000000000000548060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a6007830153505061106051606060605990590160009052600381526101e0518160200152600081604001528090502055600166040000000000005401660400000000000055606060605990590160009052600381526101e0518160200152600081604001528090502054611100526111006001780100000000000000000000000000000000000000000000000060606060599059016000905260038152610a0051816020015260008160400152809050205404018060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a6007830153505061110051606060605990590160009052600381526101e051816020015260008160400152809050205560006111c05278010000000000000000000000000000000000000000000000006801000000000000000060606060599059016000905260038152610a0051816020015260008160400152809050205402046111e0526111c06111e05180601c1a825380601d1a600183015380601e1a600283015380601f1a600383015350506001611260525b6008611260511215611515576112605160050a611280526001611280517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540407141561148757611260516004026111c0016111e05180601c1a825380601d1a600183015380601e1a600283015380601f1a60038301535050611505565b611260516004026111c0017c01000000000000000000000000000000000000000000000000000000006112605160200260020a60606060599059016000905260038152610a00518160200152600181604001528090502054020480601c1a825380601d1a600183015380601e1a600283015380601f1a600383015350505b60016112605101611260526113ec565b6111c051606060605990590160009052600381526101e05181602001526001816040015280905020555050608060805990590160009052600381526101e051816020015260028160400152600081606001528090502060005b600281121561159057806020026102c05101518282015560018101905061156e565b700100000000000000000000000000000000600003816020026102c051015116828201555050610c80517bffff0000000000000000000000000000000000000000000000000000056113e0526113e051610b805101610be052606060605990590160009052600381526101e051816020015260008160400152809050205461140052601061140001610be0518060101a82538060111a60018301538060121a60028301538060131a60038301538060141a60048301538060151a60058301538060161a60068301538060171a60078301538060181a60088301538060191a600983015380601a1a600a83015380601b1a600b83015380601c1a600c83015380601d1a600d83015380601e1a600e83015380601f1a600f830153505061140051606060605990590160009052600381526101e0518160200152600081604001528090502055660400000000000354610be051121515611703576101e051660400000000000255610be0516604000000000003555b601c6020599059016000905201610120516101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a350610120516114a05260206114a0f35b601c602059905901600090520161276a6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a35060006114c05260206114c0f35b630f5995ce8114156119a157365990590160009052366004823760043560208201016114e05260243561150052604435602082010161152052606435604052506114e05160208103516020599059016000905260208183856000600287604801f150805190509050905061156052602059905901600090526020816020611560600060026068f1508051905060005b6020811215611843578181601f031a816116400153600181019050611823565b50506116405161154052604060206114e051035114156118a457601c6020599059016000905201614e52611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a3506000611660526020611660f35b6080601c6101ac59905901600090520163bd136cb3601c8203526115405160048201526115005160248201526115205160208103516020026020018360448401526020820360c48401528061014884015280840193505050604051606482015281600401599059016000905260848160848460006004601ff161192357fe5b6084810192506101488201518080858260c487015160006004600a8705601201f161194a57fe5b508084019350508083036020611680828434306123555a03f15061168051905090509050905061042052600161042051141561199357611540516116a05260206116a0f36119a0565b60006116c05260206116c0f35b5b63bd136cb3811415611d8c573659905901600090523660048237600435611540526024356115005260443560208201016115205260643560405250601c606459905901600090520163d467ae03601c82035260405160048201526060606059905901600090526003815260405181602001526003816040015280905020546bffffffffffffffffffffffff166024820152602061170060448334306123555a03f1506117005190501515611a9757601c6020599059016000905201614e2a611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e2a611720526020611720f35b601c6044599059016000905201633d73b705601c82035260405160048201526020611740602483600030602d5a03f15061174051905015611b1a57601c6020599059016000905201614e34611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e34611760526020611760f35b601c604459905901600090520163b041b285601c82035260405160048201526020611780602483600030602d5a03f1506117805190501515611b9e57601c6020599059016000905201614e3e611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e3e6117a05260206117a0f35b6060601c61014c59905901600090520163b7129afb601c8203526115405160048201526115005160248201526115205160208103516020026020018360448401526020820360a4840152806101088401528084019350505081600401599059016000905260648160648460006004601cf1611c1557fe5b6064810192506101088201518080858260a487015160006004600a8705601201f1611c3c57fe5b5080840193505080830360206117e08284600030602d5a03f1506117e05190509050905090506117c0526080608059905901600090526003815260405181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006002820154046401000000006001830154020160005b6020811215611ce4578181601f031a816118a00153600181019050611cc4565b50506118a051905061180052611800516117c0511415611d4457601c60205990590160009052016001611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a35060016118c05260206118c0f35b601c6020599059016000905201614e48611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e486118e05260206118e0f35b63318a3fee81141561205657365990590160009052366004823760043560208201016114e0526024356115005260443560208201016115205260643560405260843561190052506080601c6101ac599059016000905201630f5995ce601c8203526114e0516020601f6020830351010460200260200183600484015260208203608484015280610108840152808401935050506115005160248201526115205160208103516020026020018360448401526020820360c48401528061014884015280840193505050604051606482015281600401599059016000905260848160848460006004601ff1611e7b57fe5b60848101925061010882015180808582608487015160006004600a8705601201f1611ea257fe5b508084019350506101488201518080858260c487015160006004600a8705601201f1611eca57fe5b508084019350508083036020611920828434306123555a03f15061192051905090509050905061154052600061154051141515612010576040601c60ec599059016000905201631c0b6367601c8203526114e0516020601f6020830351010460200260200183600484015260208203604484015280608884015280840193505050611540516024820152816004015990590160009052604481604484600060046018f1611f7357fe5b604481019250608882015180808582604487015160006004600a8705601201f1611f9957fe5b5080840193505080830360206119608284600061190051602d5a03f15061196051905090509050905061194052601c602059905901600090520161194051611540517f2d0d11d0f27e21fab56a8712078721096066b7faaa8540a3ea566e70b97de2d4600084a35061194051611980526020611980f35b601c602059905901600090520161753a60007f2d0d11d0f27e21fab56a8712078721096066b7faaa8540a3ea566e70b97de2d4600084a35061753a6119a05260206119a0f35b6309dd0e81811415612076576604000000000002546119c05260206119c0f35b63023948728114156120d2577801000000000000000000000000000000000000000000000000606060605990590160009052600381526604000000000002548160200152600081604001528090502054046119e05260206119e0f35b632c181929811415612139577001000000000000000000000000000000007001000000000000000000000000000000006060606059905901600090526003815266040000000000025481602001526000816040015280905020540204611a20526020611a20f35b637ca823d58114156122af576604000000000002546101e052700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204611a60526000611260525b600a61126051121561224c57608060805990590160009052600381526101e05181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006001820154046401000000008254020160005b6020811215612230578181601f031a81611b200153600181019050612210565b5050611b205190506101e05260016112605101611260526121a8565b700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204611b4052611b4051611a605103611b80526020611b80f35b63b7129afb81141561246a57365990590160009052366004823760043561154052602435611500526044356020820101611520525061154051611ba0526020611520510351611bc0526000611260525b611bc05161126051121561245b5761126051602002611520510151611be05260026115005107611c00526001611c0051141561234a57611be051611c2052611ba051611c4052612368565b6000611c0051141561236757611ba051611c2052611be051611c40525b5b60405990590160009052611c205160005b6020811215612399578181601f031a81611ca00153600181019050612379565b5050611ca0518152611c405160005b60208112156123c8578181601f031a81611d2001536001810190506123a8565b5050611d2051602082015260205990590160009052602081604084600060026088f15080519050611d4052602059905901600090526020816020611d40600060026068f1508051905060005b6020811215612434578181601f031a81611de00153600181019050612414565b5050611de0519050611ba052600261150051056115005260016112605101611260526122ff565b611ba051611e00526020611e00f35b633d73b70581141561255b576004356040526604000000000002546101e0526000611260525b600661126051121561254e576101e05160405114156124b6576001611e20526020611e20f35b608060805990590160009052600381526101e05181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006001820154046401000000008254020160005b6020811215612532578181601f031a81611ec00153600181019050612512565b5050611ec05190506101e0526001611260510161126052612490565b6000611ee0526020611ee0f35b631f794436811415612737576004356101e052601c606459905901600090520163d467ae03601c8203526101e0516004820152606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff1660248201526020611f2060448334306123555a03f150611f20519050151561265657601c602059905901600090520160006101e0517f60ab231f060fa320acea170017564b7ee77f477e6465a8c964380cffb270aaf4600084a350602159905901600090526001815260006020820152602081019050602060408203526020601f6020830351604001010460200260408203f3505b601c602059905901600090520160016101e0517f60ab231f060fa320acea170017564b7ee77f477e6465a8c964380cffb270aaf4600084a350608060805990590160009052600381526101e0518160200152600281604001526000816060015280905020607059905901600090526050815260208101905060005b60028112156126f05780830154816020028301526001810190506126d1565b70010000000000000000000000000000000060000381840154168160200283015281905090509050602060408203526020601f6020830351604001010460200260408203f3505b6313f955e18114156128ca573659905901600090523660048237600435602082010161204052602435612060525060506120805260006120a052612080516120c0526000611260525b612060516112605112156128bb576120a051806120c051038080602001599059016000905281815260208101905090508180828286612040510160006004600a8705601201f16127cc57fe5b50809050905090506120e0526020601c608c599059016000905201632b861629601c8203526120e0516020601f6020830351010460200260200183600484015260208203602484015280604884015280840193505050816004015990590160009052602481602484600060046015f161284157fe5b602481019250604882015180808582602487015160006004600a8705601201f161286757fe5b5080840193505080830360206121a08284600030602d5a03f1506121a051905090509050905061042052612080516120a051016120a052612080516120c051016120c0526001611260510161126052612780565b610420516121c05260206121c0f35b50&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x292b7a8d467a95cffd303c7edd99875892cdb3eaee87e5ca29057dc88a09ffbd&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x4d2fcf8ac901ad7dcf5b1c3979801430d9979c87157230ae066a0276984c6ac7&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0xdf951a5d1d9283b06d4f1de58542f1e1e310d8d17aada46586ddb9598bc42894&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x9c8d09d387f3ba5dd4733e24c63e4d549864a7cd57a1bdf1fdd831a2a0184815&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x4ab3b783bb170e11b0932a5ce8f5f343f67058b3925da271001a75ae498bd655&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000004&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000002&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;559198&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1814830&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577471205&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;6327338&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;tracerConfig&quot;: {</span>
<span class="term-fg32">+    &quot;includePrecompiles&quot;: true</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9026f8301307b85746a52880083124f80946cc68eb482a757c690dd151d2bd5e774ada38bdc80b9020413f955e100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000019004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae704000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30304000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e00000000000000000000000000000000081a1a01c9e9d742c8e69daba2a026ccafdde618f2e44c96db281c2209c22f183ad03a2a049a61d267d22226896d4c065525819c238784c439dc2afa7d17fce76595730d1&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x119d28&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13f955e100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000019004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae704000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30304000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1c6ff&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 20,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x18&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x04000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a6700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a6700000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        2</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x114243&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a6700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        3</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x98&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x60&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xb099ea4048830027371dc31039920ae4fd19a641a7cbe57c198edd19d60f158a&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        3,</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xb099ea4048830027371dc31039920ae4fd19a641a7cbe57c198edd19d60f158a&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x48&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x5b53875b0f1381589859adcf938980f4a8fb0af4c88450070000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        3,</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae7&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x18&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae7&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        4</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        5</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000050040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000050040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae700000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        6</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x110d3b&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b86162900000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000050040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        7</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x98&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae7&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x60&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xa0c6939b58a99b0d940f4435ab7db7d54d6b7786e68e00d9ff3890d69f95565d&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        7,</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xa0c6939b58a99b0d940f4435ab7db7d54d6b7786e68e00d9ff3890d69f95565d&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x48&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xabbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        7,</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc303&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x18&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x04000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc303&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        8</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        9</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30300000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30300000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        10</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10d833&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30300000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        11</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x98&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc303&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x60&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x6defff59ba277fa4511f8675ca98ca7d9c237c7433684490cf1ce09a9249e32f&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        11,</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x6defff59ba277fa4511f8675ca98ca7d9c237c7433684490cf1ce09a9249e32f&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x48&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xe93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        11,</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x18&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x04000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        12</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        13</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de00000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de00000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        14</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10a328&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de00000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        15</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x98&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x60&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x996652142ffecd9cc272f376ca0e8228871a903772996289f847a6dbe2ce2698&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        15,</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x996652142ffecd9cc272f376ca0e8228871a903772996289f847a6dbe2ce2698&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x48&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xf2e372a0b5b837116eee8f968840393d85975a15313468070000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        15,</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e0&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x18&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        16</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x15&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        17</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000004&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1b&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000005004000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        18</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x106e1d&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 2,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        19</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x98&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e0&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x60&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0xe57cf1c1d6132b9cfd9e90f54f907c038b47941b2a7f3800783af26e852ec116&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        19,</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x68&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xe57cf1c1d6132b9cfd9e90f54f907c038b47941b2a7f3800783af26e852ec116&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0000000000000000000000000000000000000002&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x48&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x8d5b6fafc6216500f9ef1ab16b30a59df9122d7de0f4910a0000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        19,</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fd00086279b7ba7c2ae8c060" role="button"
                   aria-expanded="false" aria-controls="id-fd00086279b7ba7c2ae8c060">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_create_oog_outer_throw.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_create_oog_outer_throw.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+88</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fd00086279b7ba7c2ae8c060"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_create_oog_outer_throw.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_create_oog_outer_throw.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..170948e15669e267f10a6198b0140c0e94f44c48</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_create_oog_outer_throw.json</span>
<span class="term-fg36">@@ -0,0 +1,88 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3451177886&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4709286&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x1585936b53834b021f68cc13eeefdec2efc8e724&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2290744&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513616439&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x1d3ddf7caf024f253487e18bc4a15b1a360c170a&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405263ffffffff60e060020a6000350416633b91f50681146100505780635bb47808146100715780635f51fca01461008c578063bc7647a9146100ad578063f1bd0d7a146100c8575b610000565b346100005761006f600160a060020a03600435811690602435166100e9565b005b346100005761006f600160a060020a0360043516610152565b005b346100005761006f600160a060020a036004358116906024351661019c565b005b346100005761006f600160a060020a03600435166101fa565b005b346100005761006f600160a060020a0360043581169060243516610db8565b005b600160a060020a038083166000908152602081905260408120549091908116903316811461011657610000565b839150600160a060020a038316151561012d573392505b6101378284610e2e565b6101418284610db8565b61014a826101fa565b5b5b50505050565b600154600160a060020a03908116903316811461016e57610000565b6002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0384161790555b5b5050565b600254600160a060020a0390811690331681146101b857610000565b600160a060020a038381166000908152602081905260409020805473ffffffffffffffffffffffffffffffffffffffff19169184169190911790555b5b505050565b6040805160e260020a631a481fc102815260016024820181905260026044830152606482015262093a8060848201819052600060a4830181905260c06004840152601e60c48401527f736574456e7469747953746174757328616464726573732c75696e743829000060e484015292519091600160a060020a038516916369207f049161010480820192879290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526000602482018190526001604483015260606004830152602360648301527f626567696e506f6c6c28616464726573732c75696e7436342c626f6f6c2c626f60848301527f6f6c29000000000000000000000000000000000000000000000000000000000060a48301529151600160a060020a038716935063de64e15c9260c48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc102815260016024820181905260026044830152606482015267ffffffffffffffff8416608482015260ff851660a482015260c06004820152601960c48201527f61646453746f636b28616464726573732c75696e74323536290000000000000060e48201529051600160a060020a03861692506369207f04916101048082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc102815260016024820181905260026044830152606482015267ffffffffffffffff8416608482015260ff851660a482015260c06004820152601960c48201527f697373756553746f636b2875696e74382c75696e74323536290000000000000060e48201529051600160a060020a03861692506369207f04916101048082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526002602482015260006044820181905260606004830152602160648301527f6772616e7453746f636b2875696e74382c75696e743235362c61646472657373608483015260f860020a60290260a48301529151600160a060020a038716935063de64e15c9260c48084019391929182900301818387803b156100005760325a03f115610000575050604080517f010555b8000000000000000000000000000000000000000000000000000000008152600160a060020a03338116602483015260006044830181905260606004840152603c60648401527f6772616e7456657374656453746f636b2875696e74382c75696e743235362c6160848401527f6464726573732c75696e7436342c75696e7436342c75696e743634290000000060a48401529251908716935063010555b89260c48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc102815260016024820181905260026044830152606482015267ffffffffffffffff8416608482015260ff851660a482015260c06004820152601260c48201527f626567696e53616c65286164647265737329000000000000000000000000000060e48201529051600160a060020a03861692506369207f04916101048082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526002602482015260006044820181905260606004830152601a60648301527f7472616e7366657253616c6546756e64732875696e743235362900000000000060848301529151600160a060020a038716935063de64e15c9260a48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc102815260016024820181905260026044830152606482015267ffffffffffffffff8416608482015260ff851660a482015260c06004820152602d60c48201527f7365744163636f756e74696e6753657474696e67732875696e743235362c756960e48201527f6e7436342c75696e7432353629000000000000000000000000000000000000006101048201529051600160a060020a03861692506369207f04916101248082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526002602482015260006044820181905260606004830152603460648301527f637265617465526563757272696e6752657761726428616464726573732c756960848301527f6e743235362c75696e7436342c737472696e672900000000000000000000000060a48301529151600160a060020a038716935063de64e15c9260c48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526002602482015260006044820181905260606004830152601b60648301527f72656d6f7665526563757272696e675265776172642875696e7429000000000060848301529151600160a060020a038716935063de64e15c9260a48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a63379938570281526002602482015260006044820181905260606004830152602360648301527f697373756552657761726428616464726573732c75696e743235362c7374726960848301527f6e6729000000000000000000000000000000000000000000000000000000000060a48301529151600160a060020a038716935063de64e15c9260c48084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a6337993857028152600160248201819052604482015260606004820152602260648201527f61737369676e53746f636b2875696e74382c616464726573732c75696e743235608482015260f060020a6136290260a48201529051600160a060020a038616925063de64e15c9160c48082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a6337993857028152600160248201819052604482015260606004820152602260648201527f72656d6f766553746f636b2875696e74382c616464726573732c75696e743235608482015260f060020a6136290260a48201529051600160a060020a038616925063de64e15c9160c48082019260009290919082900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc102815260026024808301919091526003604483015260006064830181905267ffffffffffffffff8616608484015260ff871660a484015260c0600484015260c48301919091527f7365744164647265737342796c617728737472696e672c616464726573732c6260e48301527f6f6f6c29000000000000000000000000000000000000000000000000000000006101048301529151600160a060020a03871693506369207f04926101248084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc1028152600260248201526003604482015260006064820181905267ffffffffffffffff8516608483015260ff861660a483015260c06004830152602160c48301527f73657453746174757342796c617728737472696e672c75696e74382c626f6f6c60e483015260f860020a6029026101048301529151600160a060020a03871693506369207f04926101248084019391929182900301818387803b156100005760325a03f1156100005750506040805160e260020a631a481fc1028152600260248201526003604482015260006064820181905267ffffffffffffffff8516608483015260ff861660a483015260c06004830152603860c48301527f736574566f74696e6742796c617728737472696e672c75696e743235362c756960e48301527f6e743235362c626f6f6c2c75696e7436342c75696e74382900000000000000006101048301529151600160a060020a03871693506369207f04926101248084019391929182900301818387803b156100005760325a03f115610000575050505b505050565b604080517f225553a4000000000000000000000000000000000000000000000000000000008152600160a060020a0383811660048301526002602483015291519184169163225553a49160448082019260009290919082900301818387803b156100005760325a03f115610000575050505b5050565b600082604051611fd280610f488339600160a060020a03909216910190815260405190819003602001906000f0801561000057905082600160a060020a03166308b027418260016040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050600060405180830381600087803b156100005760325a03f115610000575050604080517fa14e3ee300000000000000000000000000000000000000000000000000000000815260006004820181905260016024830152600160a060020a0386811660448401529251928716935063a14e3ee39260648084019382900301818387803b156100005760325a03f115610000575050505b5050505600606060405234620000005760405160208062001fd283398101604052515b805b600a8054600160a060020a031916600160a060020a0383161790555b506001600d819055600e81905560408051808201909152600c8082527f566f74696e672053746f636b00000000000000000000000000000000000000006020928301908152600b805460008290528251601860ff1990911617825590947f0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9600291831615610100026000190190921604601f0193909304830192906200010c565b828001600101855582156200010c579182015b828111156200010c578251825591602001919060010190620000ef565b5b50620001309291505b808211156200012c576000815560010162000116565b5090565b50506040805180820190915260038082527f43565300000000000000000000000000000000000000000000000000000000006020928301908152600c805460008290528251600660ff1990911617825590937fdf6966c971051c3d54ec59162606531493a51404a002842f56009d7e5cf4a8c760026001841615610100026000190190931692909204601f010481019291620001f7565b82800160010185558215620001f7579182015b82811115620001f7578251825591602001919060010190620001da565b5b506200021b9291505b808211156200012c576000815560010162000116565b5090565b50505b505b611da280620002306000396000f3006060604052361561019a5763ffffffff60e060020a600035041662e1986d811461019f57806302a72a4c146101d657806306eb4e421461020157806306fdde0314610220578063095ea7b3146102ad578063158ccb99146102dd57806318160ddd146102f85780631cf65a781461031757806323b872dd146103365780632c71e60a1461036c57806333148fd6146103ca578063435ebc2c146103f55780635eeb6e451461041e578063600e85b71461043c5780636103d70b146104a157806362c1e46a146104b05780636c182e99146104ba578063706dc87c146104f057806370a082311461052557806377174f851461055057806395d89b411461056f578063a7771ee3146105fc578063a9059cbb14610629578063ab377daa14610659578063b25dbb5e14610685578063b89a73cb14610699578063ca5eb5e1146106c6578063cbcf2e5a146106e1578063d21f05ba1461070e578063d347c2051461072d578063d96831e114610765578063dd62ed3e14610777578063df3c211b146107a8578063e2982c21146107d6578063eb944e4c14610801575b610000565b34610000576101d4600160a060020a036004351660243567ffffffffffffffff6044358116906064358116906084351661081f565b005b34610000576101ef600160a060020a0360043516610a30565b60408051918252519081900360200190f35b34610000576101ef610a4f565b60408051918252519081900360200190f35b346100005761022d610a55565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516602435610ae3565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516610b4e565b005b34610000576101ef610b89565b60408051918252519081900360200190f35b34610000576101ef610b8f565b60408051918252519081900360200190f35b34610000576102c9600160a060020a0360043581169060243516604435610b95565b604080519115158252519081900360200190f35b3461000057610388600160a060020a0360043516602435610bb7565b60408051600160a060020a039096168652602086019490945267ffffffffffffffff928316858501529082166060850152166080830152519081900360a00190f35b34610000576101ef600160a060020a0360043516610c21565b60408051918252519081900360200190f35b3461000057610402610c40565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d4600160a060020a0360043516602435610c4f565b005b3461000057610458600160a060020a0360043516602435610cc9565b60408051600160a060020a03909716875260208701959095528585019390935267ffffffffffffffff9182166060860152811660808501521660a0830152519081900360c00190f35b34610000576101d4610d9e565b005b6101d4610e1e565b005b34610000576104d3600160a060020a0360043516610e21565b6040805167ffffffffffffffff9092168252519081900360200190f35b3461000057610402600160a060020a0360043516610ead565b60408051600160a060020a039092168252519081900360200190f35b34610000576101ef600160a060020a0360043516610ef9565b60408051918252519081900360200190f35b34610000576101ef610f18565b60408051918252519081900360200190f35b346100005761022d610f1e565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516610fac565b604080519115158252519081900360200190f35b34610000576102c9600160a060020a0360043516602435610fc2565b604080519115158252519081900360200190f35b3461000057610402600435610fe2565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d46004351515610ffd565b005b34610000576102c9600160a060020a036004351661104c565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516611062565b005b34610000576102c9600160a060020a0360043516611070565b604080519115158252519081900360200190f35b34610000576101ef6110f4565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351667ffffffffffffffff602435166110fa565b60408051918252519081900360200190f35b34610000576101d4600435611121565b005b34610000576101ef600160a060020a03600435811690602435166111c6565b60408051918252519081900360200190f35b34610000576101ef6004356024356044356064356084356111f3565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351661128c565b60408051918252519081900360200190f35b34610000576101d4600160a060020a036004351660243561129e565b005b6040805160a08101825260008082526020820181905291810182905260608101829052608081019190915267ffffffffffffffff848116908416101561086457610000565b8367ffffffffffffffff168267ffffffffffffffff16101561088557610000565b8267ffffffffffffffff168267ffffffffffffffff1610156108a657610000565b506040805160a081018252600160a060020a033381168252602080830188905267ffffffffffffffff80871684860152858116606085015287166080840152908816600090815260039091529190912080546001810180835582818380158290116109615760030281600302836000526020600020918201910161096191905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050916000526020600020906003020160005b5082518154600160a060020a031916600160a060020a03909116178155602083015160018201556040830151600290910180546060850151608086015167ffffffffffffffff1990921667ffffffffffffffff948516176fffffffffffffffff00000000000000001916604060020a918516919091021777ffffffffffffffff000000000000000000000000000000001916608060020a939091169290920291909117905550610a268686610fc2565b505b505050505050565b600160a060020a0381166000908152600360205260409020545b919050565b60055481565b600b805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b600160a060020a03338116600081815260026020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b600a5433600160a060020a03908116911614610b6957610000565b600a8054600160a060020a031916600160a060020a0383161790555b5b50565b60005481565b60005b90565b6000610ba2848484611600565b610bad8484846116e2565b90505b9392505050565b600360205281600052604060002081815481101561000057906000526020600020906003020160005b5080546001820154600290920154600160a060020a03909116935090915067ffffffffffffffff80821691604060020a8104821691608060020a9091041685565b600160a060020a0381166000908152600860205260409020545b919050565b600a54600160a060020a031681565b600a5433600160a060020a03908116911614610c6a57610000565b610c7660005482611714565b6000908155600160a060020a038316815260016020526040902054610c9b9082611714565b600160a060020a038316600090815260016020526040812091909155610cc390839083611600565b5b5b5050565b6000600060006000600060006000600360008a600160a060020a0316600160a060020a0316815260200190815260200160002088815481101561000057906000526020600020906003020160005b508054600182015460028301546040805160a081018252600160a060020a039094168085526020850184905267ffffffffffffffff808416928601839052604060020a8404811660608701819052608060020a9094041660808601819052909c50929a509197509095509350909150610d90904261172d565b94505b509295509295509295565b33600160a060020a038116600090815260066020526040902054801515610dc457610000565b8030600160a060020a0316311015610ddb57610000565b600160a060020a0382166000818152600660205260408082208290555183156108fc0291849190818181858888f193505050501515610cc357610000565b5b5050565b5b565b600160a060020a03811660009081526003602052604081205442915b81811015610ea557600160a060020a03841660009081526003602052604090208054610e9a9190839081101561000057906000526020600020906003020160005b5060020154604060020a900467ffffffffffffffff168461177d565b92505b600101610e3d565b5b5050919050565b600160a060020a0380821660009081526007602052604081205490911615610eef57600160a060020a0380831660009081526007602052604090205416610ef1565b815b90505b919050565b600160a060020a0381166000908152600160205260409020545b919050565b600d5481565b600c805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b60006000610fb983610c21565b1190505b919050565b6000610fcf338484611600565b610fd983836117ac565b90505b92915050565b600460205260009081526040902054600160a060020a031681565b8015801561101a575061100f33610ef9565b61101833610c21565b115b1561102457610000565b33600160a060020a03166000908152600960205260409020805460ff19168215151790555b50565b60006000610fb983610ef9565b1190505b919050565b610b8533826117dc565b5b50565b600a54604080516000602091820181905282517fcbcf2e5a000000000000000000000000000000000000000000000000000000008152600160a060020a03868116600483015293519194939093169263cbcf2e5a92602480830193919282900301818787803b156100005760325a03f115610000575050604051519150505b919050565b600e5481565b6000610fd961110984846118b2565b61111385856119b6565b611a05565b90505b92915050565b600a5433600160a060020a0390811691161461113c57610000565b61114860005482611a1f565b600055600554600190101561116c57600a5461116c90600160a060020a0316611a47565b5b600a54600160a060020a03166000908152600160205260409020546111929082611a1f565b600a8054600160a060020a039081166000908152600160205260408120939093559054610b8592911683611600565b5b5b50565b600160a060020a038083166000908152600260209081526040808320938516835292905220545b92915050565b6000600060008487101561120a5760009250611281565b8387111561121a57879250611281565b61123f6112308961122b888a611714565b611a90565b61123a8689611714565b611abc565b915081925061124e8883611714565b905061127e8361127961126a8461122b8c8b611714565b611a90565b61123a888b611714565b611abc565b611a1f565b92505b505095945050505050565b60066020526000908152604090205481565b600160a060020a03821660009081526003602052604081208054829190849081101561000057906000526020600020906003020160005b50805490925033600160a060020a039081169116146112f357610000565b6040805160a0810182528354600160a060020a0316815260018401546020820152600284015467ffffffffffffffff80821693830193909352604060020a810483166060830152608060020a900490911660808201526113539042611af9565b600160a060020a0385166000908152600360205260409020805491925090849081101561000057906000526020600020906003020160005b508054600160a060020a031916815560006001820181905560029091018054600160c060020a0319169055600160a060020a0385168152600360205260409020805460001981019081101561000057906000526020600020906003020160005b50600160a060020a03851660009081526003602052604090208054859081101561000057906000526020600020906003020160005b5081548154600160a060020a031916600160a060020a03918216178255600180840154908301556002928301805493909201805467ffffffffffffffff191667ffffffffffffffff948516178082558354604060020a908190048616026fffffffffffffffff000000000000000019909116178082559254608060020a9081900490941690930277ffffffffffffffff00000000000000000000000000000000199092169190911790915584166000908152600360205260409020805460001981018083559190829080158290116115485760030281600302836000526020600020918201910161154891905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050600160a060020a033316600090815260016020526040902054611570915082611a1f565b600160a060020a03338116600090815260016020526040808220939093559086168152205461159f9082611714565b600160a060020a038086166000818152600160209081526040918290209490945580518581529051339093169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a35b50505050565b600160a060020a0383161561166e576116466008600061161f86610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611714565b6008600061165386610ead565b600160a060020a031681526020810191909152604001600020555b600160a060020a038216156116dc576116b46008600061168d85610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611a1f565b600860006116c185610ead565b600160a060020a031681526020810191909152604001600020555b5b505050565b600083826116f082426110fa565b8111156116fc57610000565b611707868686611b1b565b92505b5b50509392505050565b600061172283831115611b4d565b508082035b92915050565b6000610fd983602001518367ffffffffffffffff16856080015167ffffffffffffffff16866040015167ffffffffffffffff16876060015167ffffffffffffffff166111f3565b90505b92915050565b60008167ffffffffffffffff168367ffffffffffffffff1610156117a15781610fd9565b825b90505b92915050565b600033826117ba82426110fa565b8111156117c657610000565b6117d08585611b5d565b92505b5b505092915050565b6117e582610ef9565b6117ee83610c21565b11156117f957610000565b600160a060020a03811660009081526009602052604090205460ff16158015611834575081600160a060020a031681600160a060020a031614155b1561183e57610000565b61184782611070565b1561185157610000565b611864828261185f85610ef9565b611600565b600160a060020a0382811660009081526007602052604090208054600160a060020a031916918316918217905561189a82610ead565b600160a060020a031614610cc357610000565b5b5050565b600160a060020a038216600090815260036020526040812054815b818110156119885761197d836112796003600089600160a060020a0316600160a060020a0316815260200190815260200160002084815481101561000057906000526020600020906003020160005b506040805160a0810182528254600160a060020a031681526001830154602082015260029092015467ffffffffffffffff80821692840192909252604060020a810482166060840152608060020a900416608082015287611af9565b611a1f565b92505b6001016118cd565b600160a060020a0385166000908152600160205260409020546117d09084611714565b92505b505092915050565b600060006119c384611070565b80156119d157506000600d54115b90506119fb816119e9576119e485610ef9565b6119ec565b60005b6111138686611b7b565b611a05565b91505b5092915050565b60008183106117a15781610fd9565b825b90505b92915050565b6000828201611a3c848210801590611a375750838210155b611b4d565b8091505b5092915050565b611a508161104c565b15611a5a57610b85565b6005805460009081526004602052604090208054600160a060020a031916600160a060020a038416179055805460010190555b50565b6000828202611a3c841580611a37575083858381156100005704145b611b4d565b8091505b5092915050565b60006000611acc60008411611b4d565b8284811561000057049050611a3c838581156100005706828502018514611b4d565b8091505b5092915050565b6000610fd98360200151611b0d858561172d565b611714565b90505b92915050565b60008382611b2982426110fa565b811115611b3557610000565b611707868686611b8f565b92505b5b50509392505050565b801515610b8557610000565b5b50565b6000611b6883611a47565b610fd98383611c92565b90505b92915050565b6000610fd983610ef9565b90505b92915050565b600160a060020a038084166000908152600260209081526040808320338516845282528083205493861683526001909152812054909190611bd09084611a1f565b600160a060020a038086166000908152600160205260408082209390935590871681522054611bff9084611714565b600160a060020a038616600090815260016020526040902055611c228184611714565b600160a060020a038087166000818152600260209081526040808320338616845282529182902094909455805187815290519288169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a3600191505b509392505050565b60003382611ca082426110fa565b811115611cac57610000565b6117d08585611cc2565b92505b5b505092915050565b600160a060020a033316600090815260016020526040812054611ce59083611714565b600160a060020a033381166000908152600160205260408082209390935590851681522054611d149083611a1f565b600160a060020a038085166000818152600160209081526040918290209490945580518681529051919333909316927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a35060015b929150505600a165627a7a72305820bfa5ddd3fecf3f43aed25385ec7ec3ef79638c2e58d99f85d9a3cc494183bf160029a165627a7a723058200e78a5f7e0f91739035d0fbf5eca02f79377210b722f63431f29a22e2880b3bd0029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;789&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0xfe9ec0542a1c009be8b1f3acf43af97100ffff42eb736850fb038fa1151ad4d9&quot;: &quot;0x000000000000000000000000e4a13bc304682a903e9472f469c33801dd18d9e8&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x5cb4a6b902fcb21588c86c3517e797b07cdaadb9&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xe4a13bc304682a903e9472f469c33801dd18d9e8&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x33c763c929f62c4f&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;14&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3451177886&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4713874&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x5d52a672417cd1269bf4f7095e25dcbf837747bba908cd5ef809dc1bd06144b5&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x01a12845ed546b94a038a7a03e8df8d7952024ed41ccb3db7a7ade4abc290ce1&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x28c446f1cb9748c1&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2290743&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x4898aceede76739daef76448a367d10015a2c022c9e7909b99a10fbf6fb16708&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513616414&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7146523769022564&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8aa0e8509502f9000830493e0941d3ddf7caf024f253487e18bc4a15b1a360c170a80b8443b91f506000000000000000000000000a14bdd7e5666d784dcce98ad24d383a6b1cd4182000000000000000000000000e4a13bc304682a903e9472f469c33801dd18d9e829a0524564944fa419f5c189b5074044f89210c6d6b2d77ee8f7f12a927d59b636dfa0015b28986807a424b18b186ee6642d76739df36cad802d20e8c00e79a61d7281&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xe4a13bc304682a903e9472f469c33801dd18d9e8&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x435c8&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x3b91f506000000000000000000000000a14bdd7e5666d784dcce98ad24d383a6b1cd4182000000000000000000000000e4a13bc304682a903e9472f469c33801dd18d9e8&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x1d3ddf7caf024f253487e18bc4a15b1a360c170a&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2290744,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;invalid jump destination&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x1d3ddf7caf024f253487e18bc4a15b1a360c170a&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x39ff0&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x606060405234620000005760405160208062001fd283398101604052515b805b600a8054600160a060020a031916600160a060020a0383161790555b506001600d819055600e81905560408051808201909152600c8082527f566f74696e672053746f636b00000000000000000000000000000000000000006020928301908152600b805460008290528251601860ff1990911617825590947f0175b7a638427703f0dbe7bb9bbf987a2551717b34e79f33b5b1008d1fa01db9600291831615610100026000190190921604601f0193909304830192906200010c565b828001600101855582156200010c579182015b828111156200010c578251825591602001919060010190620000ef565b5b50620001309291505b808211156200012c576000815560010162000116565b5090565b50506040805180820190915260038082527f43565300000000000000000000000000000000000000000000000000000000006020928301908152600c805460008290528251600660ff1990911617825590937fdf6966c971051c3d54ec59162606531493a51404a002842f56009d7e5cf4a8c760026001841615610100026000190190931692909204601f010481019291620001f7565b82800160010185558215620001f7579182015b82811115620001f7578251825591602001919060010190620001da565b5b506200021b9291505b808211156200012c576000815560010162000116565b5090565b50505b505b611da280620002306000396000f3006060604052361561019a5763ffffffff60e060020a600035041662e1986d811461019f57806302a72a4c146101d657806306eb4e421461020157806306fdde0314610220578063095ea7b3146102ad578063158ccb99146102dd57806318160ddd146102f85780631cf65a781461031757806323b872dd146103365780632c71e60a1461036c57806333148fd6146103ca578063435ebc2c146103f55780635eeb6e451461041e578063600e85b71461043c5780636103d70b146104a157806362c1e46a146104b05780636c182e99146104ba578063706dc87c146104f057806370a082311461052557806377174f851461055057806395d89b411461056f578063a7771ee3146105fc578063a9059cbb14610629578063ab377daa14610659578063b25dbb5e14610685578063b89a73cb14610699578063ca5eb5e1146106c6578063cbcf2e5a146106e1578063d21f05ba1461070e578063d347c2051461072d578063d96831e114610765578063dd62ed3e14610777578063df3c211b146107a8578063e2982c21146107d6578063eb944e4c14610801575b610000565b34610000576101d4600160a060020a036004351660243567ffffffffffffffff6044358116906064358116906084351661081f565b005b34610000576101ef600160a060020a0360043516610a30565b60408051918252519081900360200190f35b34610000576101ef610a4f565b60408051918252519081900360200190f35b346100005761022d610a55565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516602435610ae3565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516610b4e565b005b34610000576101ef610b89565b60408051918252519081900360200190f35b34610000576101ef610b8f565b60408051918252519081900360200190f35b34610000576102c9600160a060020a0360043581169060243516604435610b95565b604080519115158252519081900360200190f35b3461000057610388600160a060020a0360043516602435610bb7565b60408051600160a060020a039096168652602086019490945267ffffffffffffffff928316858501529082166060850152166080830152519081900360a00190f35b34610000576101ef600160a060020a0360043516610c21565b60408051918252519081900360200190f35b3461000057610402610c40565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d4600160a060020a0360043516602435610c4f565b005b3461000057610458600160a060020a0360043516602435610cc9565b60408051600160a060020a03909716875260208701959095528585019390935267ffffffffffffffff9182166060860152811660808501521660a0830152519081900360c00190f35b34610000576101d4610d9e565b005b6101d4610e1e565b005b34610000576104d3600160a060020a0360043516610e21565b6040805167ffffffffffffffff9092168252519081900360200190f35b3461000057610402600160a060020a0360043516610ead565b60408051600160a060020a039092168252519081900360200190f35b34610000576101ef600160a060020a0360043516610ef9565b60408051918252519081900360200190f35b34610000576101ef610f18565b60408051918252519081900360200190f35b346100005761022d610f1e565b604080516020808252835181830152835191928392908301918501908083838215610273575b80518252602083111561027357601f199092019160209182019101610253565b505050905090810190601f16801561029f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34610000576102c9600160a060020a0360043516610fac565b604080519115158252519081900360200190f35b34610000576102c9600160a060020a0360043516602435610fc2565b604080519115158252519081900360200190f35b3461000057610402600435610fe2565b60408051600160a060020a039092168252519081900360200190f35b34610000576101d46004351515610ffd565b005b34610000576102c9600160a060020a036004351661104c565b604080519115158252519081900360200190f35b34610000576101d4600160a060020a0360043516611062565b005b34610000576102c9600160a060020a0360043516611070565b604080519115158252519081900360200190f35b34610000576101ef6110f4565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351667ffffffffffffffff602435166110fa565b60408051918252519081900360200190f35b34610000576101d4600435611121565b005b34610000576101ef600160a060020a03600435811690602435166111c6565b60408051918252519081900360200190f35b34610000576101ef6004356024356044356064356084356111f3565b60408051918252519081900360200190f35b34610000576101ef600160a060020a036004351661128c565b60408051918252519081900360200190f35b34610000576101d4600160a060020a036004351660243561129e565b005b6040805160a08101825260008082526020820181905291810182905260608101829052608081019190915267ffffffffffffffff848116908416101561086457610000565b8367ffffffffffffffff168267ffffffffffffffff16101561088557610000565b8267ffffffffffffffff168267ffffffffffffffff1610156108a657610000565b506040805160a081018252600160a060020a033381168252602080830188905267ffffffffffffffff80871684860152858116606085015287166080840152908816600090815260039091529190912080546001810180835582818380158290116109615760030281600302836000526020600020918201910161096191905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050916000526020600020906003020160005b5082518154600160a060020a031916600160a060020a03909116178155602083015160018201556040830151600290910180546060850151608086015167ffffffffffffffff1990921667ffffffffffffffff948516176fffffffffffffffff00000000000000001916604060020a918516919091021777ffffffffffffffff000000000000000000000000000000001916608060020a939091169290920291909117905550610a268686610fc2565b505b505050505050565b600160a060020a0381166000908152600360205260409020545b919050565b60055481565b600b805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b600160a060020a03338116600081815260026020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b600a5433600160a060020a03908116911614610b6957610000565b600a8054600160a060020a031916600160a060020a0383161790555b5b50565b60005481565b60005b90565b6000610ba2848484611600565b610bad8484846116e2565b90505b9392505050565b600360205281600052604060002081815481101561000057906000526020600020906003020160005b5080546001820154600290920154600160a060020a03909116935090915067ffffffffffffffff80821691604060020a8104821691608060020a9091041685565b600160a060020a0381166000908152600860205260409020545b919050565b600a54600160a060020a031681565b600a5433600160a060020a03908116911614610c6a57610000565b610c7660005482611714565b6000908155600160a060020a038316815260016020526040902054610c9b9082611714565b600160a060020a038316600090815260016020526040812091909155610cc390839083611600565b5b5b5050565b6000600060006000600060006000600360008a600160a060020a0316600160a060020a0316815260200190815260200160002088815481101561000057906000526020600020906003020160005b508054600182015460028301546040805160a081018252600160a060020a039094168085526020850184905267ffffffffffffffff808416928601839052604060020a8404811660608701819052608060020a9094041660808601819052909c50929a509197509095509350909150610d90904261172d565b94505b509295509295509295565b33600160a060020a038116600090815260066020526040902054801515610dc457610000565b8030600160a060020a0316311015610ddb57610000565b600160a060020a0382166000818152600660205260408082208290555183156108fc0291849190818181858888f193505050501515610cc357610000565b5b5050565b5b565b600160a060020a03811660009081526003602052604081205442915b81811015610ea557600160a060020a03841660009081526003602052604090208054610e9a9190839081101561000057906000526020600020906003020160005b5060020154604060020a900467ffffffffffffffff168461177d565b92505b600101610e3d565b5b5050919050565b600160a060020a0380821660009081526007602052604081205490911615610eef57600160a060020a0380831660009081526007602052604090205416610ef1565b815b90505b919050565b600160a060020a0381166000908152600160205260409020545b919050565b600d5481565b600c805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610adb5780601f10610ab057610100808354040283529160200191610adb565b820191906000526020600020905b815481529060010190602001808311610abe57829003601f168201915b505050505081565b60006000610fb983610c21565b1190505b919050565b6000610fcf338484611600565b610fd983836117ac565b90505b92915050565b600460205260009081526040902054600160a060020a031681565b8015801561101a575061100f33610ef9565b61101833610c21565b115b1561102457610000565b33600160a060020a03166000908152600960205260409020805460ff19168215151790555b50565b60006000610fb983610ef9565b1190505b919050565b610b8533826117dc565b5b50565b600a54604080516000602091820181905282517fcbcf2e5a000000000000000000000000000000000000000000000000000000008152600160a060020a03868116600483015293519194939093169263cbcf2e5a92602480830193919282900301818787803b156100005760325a03f115610000575050604051519150505b919050565b600e5481565b6000610fd961110984846118b2565b61111385856119b6565b611a05565b90505b92915050565b600a5433600160a060020a0390811691161461113c57610000565b61114860005482611a1f565b600055600554600190101561116c57600a5461116c90600160a060020a0316611a47565b5b600a54600160a060020a03166000908152600160205260409020546111929082611a1f565b600a8054600160a060020a039081166000908152600160205260408120939093559054610b8592911683611600565b5b5b50565b600160a060020a038083166000908152600260209081526040808320938516835292905220545b92915050565b6000600060008487101561120a5760009250611281565b8387111561121a57879250611281565b61123f6112308961122b888a611714565b611a90565b61123a8689611714565b611abc565b915081925061124e8883611714565b905061127e8361127961126a8461122b8c8b611714565b611a90565b61123a888b611714565b611abc565b611a1f565b92505b505095945050505050565b60066020526000908152604090205481565b600160a060020a03821660009081526003602052604081208054829190849081101561000057906000526020600020906003020160005b50805490925033600160a060020a039081169116146112f357610000565b6040805160a0810182528354600160a060020a0316815260018401546020820152600284015467ffffffffffffffff80821693830193909352604060020a810483166060830152608060020a900490911660808201526113539042611af9565b600160a060020a0385166000908152600360205260409020805491925090849081101561000057906000526020600020906003020160005b508054600160a060020a031916815560006001820181905560029091018054600160c060020a0319169055600160a060020a0385168152600360205260409020805460001981019081101561000057906000526020600020906003020160005b50600160a060020a03851660009081526003602052604090208054859081101561000057906000526020600020906003020160005b5081548154600160a060020a031916600160a060020a03918216178255600180840154908301556002928301805493909201805467ffffffffffffffff191667ffffffffffffffff948516178082558354604060020a908190048616026fffffffffffffffff000000000000000019909116178082559254608060020a9081900490941690930277ffffffffffffffff00000000000000000000000000000000199092169190911790915584166000908152600360205260409020805460001981018083559190829080158290116115485760030281600302836000526020600020918201910161154891905b8082111561095d578054600160a060020a031916815560006001820155600281018054600160c060020a0319169055600301610926565b5090565b5b505050600160a060020a033316600090815260016020526040902054611570915082611a1f565b600160a060020a03338116600090815260016020526040808220939093559086168152205461159f9082611714565b600160a060020a038086166000818152600160209081526040918290209490945580518581529051339093169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a35b50505050565b600160a060020a0383161561166e576116466008600061161f86610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611714565b6008600061165386610ead565b600160a060020a031681526020810191909152604001600020555b600160a060020a038216156116dc576116b46008600061168d85610ead565b600160a060020a0316600160a060020a031681526020019081526020016000205482611a1f565b600860006116c185610ead565b600160a060020a031681526020810191909152604001600020555b5b505050565b600083826116f082426110fa565b8111156116fc57610000565b611707868686611b1b565b92505b5b50509392505050565b600061172283831115611b4d565b508082035b92915050565b6000610fd983602001518367ffffffffffffffff16856080015167ffffffffffffffff16866040015167ffffffffffffffff16876060015167ffffffffffffffff166111f3565b90505b92915050565b60008167ffffffffffffffff168367ffffffffffffffff1610156117a15781610fd9565b825b90505b92915050565b600033826117ba82426110fa565b8111156117c657610000565b6117d08585611b5d565b92505b5b505092915050565b6117e582610ef9565b6117ee83610c21565b11156117f957610000565b600160a060020a03811660009081526009602052604090205460ff16158015611834575081600160a060020a031681600160a060020a031614155b1561183e57610000565b61184782611070565b1561185157610000565b611864828261185f85610ef9565b611600565b600160a060020a0382811660009081526007602052604090208054600160a060020a031916918316918217905561189a82610ead565b600160a060020a031614610cc357610000565b5b5050565b600160a060020a038216600090815260036020526040812054815b818110156119885761197d836112796003600089600160a060020a0316600160a060020a0316815260200190815260200160002084815481101561000057906000526020600020906003020160005b506040805160a0810182528254600160a060020a031681526001830154602082015260029092015467ffffffffffffffff80821692840192909252604060020a810482166060840152608060020a900416608082015287611af9565b611a1f565b92505b6001016118cd565b600160a060020a0385166000908152600160205260409020546117d09084611714565b92505b505092915050565b600060006119c384611070565b80156119d157506000600d54115b90506119fb816119e9576119e485610ef9565b6119ec565b60005b6111138686611b7b565b611a05565b91505b5092915050565b60008183106117a15781610fd9565b825b90505b92915050565b6000828201611a3c848210801590611a375750838210155b611b4d565b8091505b5092915050565b611a508161104c565b15611a5a57610b85565b6005805460009081526004602052604090208054600160a060020a031916600160a060020a038416179055805460010190555b50565b6000828202611a3c841580611a37575083858381156100005704145b611b4d565b8091505b5092915050565b60006000611acc60008411611b4d565b8284811561000057049050611a3c838581156100005706828502018514611b4d565b8091505b5092915050565b6000610fd98360200151611b0d858561172d565b611714565b90505b92915050565b60008382611b2982426110fa565b811115611b3557610000565b611707868686611b8f565b92505b5b50509392505050565b801515610b8557610000565b5b50565b6000611b6883611a47565b610fd98383611c92565b90505b92915050565b6000610fd983610ef9565b90505b92915050565b600160a060020a038084166000908152600260209081526040808320338516845282528083205493861683526001909152812054909190611bd09084611a1f565b600160a060020a038086166000908152600160205260408082209390935590871681522054611bff9084611714565b600160a060020a038616600090815260016020526040902055611c228184611714565b600160a060020a038087166000818152600260209081526040808320338616845282529182902094909455805187815290519288169391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929181900390910190a3600191505b509392505050565b60003382611ca082426110fa565b811115611cac57610000565b6117d08585611cc2565b92505b5b505092915050565b600160a060020a033316600090815260016020526040812054611ce59083611714565b600160a060020a033381166000908152600160205260408082209390935590851681522054611d149083611a1f565b600160a060020a038085166000818152600160209081526040918290209490945580518681529051919333909316927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a35060015b929150505600a165627a7a72305820bfa5ddd3fecf3f43aed25385ec7ec3ef79638c2e58d99f85d9a3cc494183bf160029000000000000000000000000a14bdd7e5666d784dcce98ad24d383a6b1cd4182&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;contract creation code storage out of gas&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e5f9cd89ae64d6bd562e42ad" role="button"
                   aria-expanded="false" aria-controls="id-e5f9cd89ae64d6bd562e42ad">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_instafail.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_instafail.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+72</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e5f9cd89ae64d6bd562e42ad"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_instafail.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_instafail.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..328b743270db8bb20f98396fddeb8c263ea3ea34</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_instafail.json</span>
<span class="term-fg36">@@ -0,0 +1,72 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117067574&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd783010502846765746887676f312e372e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712380&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xe05db05eeb3f288041ecb10a787df121c0ed69499355716e17c307de313a4486&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x0c062b329265c965deef1eede55183b3acb8f611&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xb669ae39118a53d2c65fd3b1e1d3850dd3f8c6842030698ed846a2762d68b61d&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x2b469722b8e28c45&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;24973&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x532a5c3f75453a696428db078e32ae283c85cb97e4d8560dbdf022adac6df369&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891145&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;1892250259406&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x6c06b16512b332e6cd8293a2974872674716ce18&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60606040526000357c0100000000000000000000000000000000000000000000000000000000900480632e1a7d4d146036575b6000565b34600057604e60048080359060200190919050506050565b005b3373ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051809050600060405180830381858888f19350505050505b5056&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x66fdfd05e46126a07465ad24e40cc0597bc1ef31&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x229ebbb36c3e0f20&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;3&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 4230000,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 4939394,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 6485846,</span>
<span class="term-fg32">+      &quot;muirGlacierBlock&quot;: 7117117,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {}</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;24974&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117067574&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891162&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712388&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xc822ef32e6d26e170b70cf761e204c1806265914&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf889038504a81557008301f97e946c06b16512b332e6cd8293a2974872674716ce1880a42e1a7d4d00000000000000000000000000000000000000000000000014d1120d7b1600002aa0e2a6558040c5d72bc59f2fb62a38993a314c849cd22fb393018d2c5af3112095a01bdb6d7ba32263ccc2ecc880d38c49d9f0c5a72d8b7908e3122b31356d349745&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x66fdfd05e46126a07465ad24e40cc0597bc1ef31&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1a466&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2e1a7d4d00000000000000000000000000000000000000000000000014d1120d7b160000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6c06b16512b332e6cd8293a2974872674716ce18&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 24974,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x72de&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e304752ff8401a5fa992fe87" role="button"
                   aria-expanded="false" aria-controls="id-e304752ff8401a5fa992fe87">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_precompiled_wrong_gas.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_precompiled_wrong_gas.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+218</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e304752ff8401a5fa992fe87"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_precompiled_wrong_gas.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_precompiled_wrong_gas.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6b5738101c248150136c5debb2bfd7874ec077ec</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_precompiled_wrong_gas.json</span>
<span class="term-fg36">@@ -0,0 +1,219 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;559197&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x0742a2bfab0452e2c634f3685b7e49ceb065c7000609b2b73f086e01fd1dfb58&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x3060ad521440e1c2&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x59e7d4ae6cc3c38d23dac3f869b21984c7ba8f38070f4116a4941d9c403b6299&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x68418fb5cf4afa9b807dc079e8cdde0e148ac2c8afb378e675465b5bed1fbd02&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1813945&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;469107641961&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;6321166&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577471202&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xc5e6fdae52af83f7e28&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;77947&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xf09ef316eff819ee488&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60006121df537c01000000000000000000000000000000000000000000000000000000006000350463b041b2858114156100d257600435604052780100000000000000000000000000000000000000000000000060606060599059016000905260038152604051816020015260008160400152809050205404606052606051151561008f57600060a052602060a0f35b604051601c604459905901600090520163e0e9a17b601c82035260605160048201526020610100602483600030602d5a03f1506101005190501460c052602060c0f35b632cce81aa81141561019957600435610120526001610120511280156100f85780610143565b78010000000000000000000000000000000000000000000000006060606059905901600090526003815266040000000000025481602001526000816040015280905020540461012051135b905015610157576000610180526020610180f35b601c604459905901600090520163e0e9a17b601c82035261012051600482015260206101c0602483600030602d5a03f1506101c05190506101a05260206101a0f35b63e0e9a17b8114156102e957600435610120526604000000000002546101e0526007610200525b610120517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540413156102da575b6102005160050a610120517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e051816020015260008160400152809050205404031215610269576000610200511361026c565b60005b1561028157600161020051036102005261020b565b7c01000000000000000000000000000000000000000000000000000000006102005160200260020a606060605990590160009052600381526101e05181602001526001816040015280905020540204546101e0526101c0565b6101e051610280526020610280f35b63cef887b08114156103e757365990590160009052366004823760043560208201016102c0526024356102e052506060601c61014c5990590160009052016390fa337d601c8203526102c0516020601f602083035101046020026020018360048401526020820360648401528060c8840152808401935050506102e051602482015233604482015281600401599059016000905260648160648460006004601cf161039057fe5b60648101925060c882015180808582606487015160006004600a8705601201f16103b657fe5b5080840193505080830360206103a08284600030602d5a03f1506103a0519050905090509050610300526020610300f35b6390fa337d81141561065f57365990590160009052366004823760043560208201016102c0526024356102e0526044356103e052505a610400526020601c608c599059016000905201632b861629601c8203526102c0516020601f6020830351010460200260200183600484015260208203602484015280604884015280840193505050816004015990590160009052602481602484600060046015f161048a57fe5b602481019250604882015180808582602487015160006004600a8705601201f16104b057fe5b5080840193505080830360206104408284600030602d5a03f15061044051905090509050905061042052610420511561065e576102c05160208103516020599059016000905260208183856000600287604801f150805190509050905061046052602059905901600090526020816020610460600060026068f1508051905060005b6020811215610552578181601f031a816105400153600181019050610532565b5050610540516101e0526102e0516c010000000000000000000000006103e0510217606060605990590160009052600381526101e05181602001526003816040015280905020555a61058052700100000000000000000000000000000000660400000000000154046105a0526104006105a0516103ff02056105c0526104006105a05161040102056105e0526105c0513a12156105f6576105c05161060052610615565b6105e0513a131561060e576105e05161060052610614565b3a610600525b5b6105805161040051036106005160020202610620526106205170010000000000000000000000000000000061060051021766040000000000015561042051610640526020610640f35b5b63d467ae0381141561073257600435604052602435610660526106605134121515610725576000341315610718576c01000000000000000000000000606060605990590160009052600381526040518160200152600381604001528090502054046103e0526000600060006000346103e051611388f115156106dd57fe5b601c60405990590160009052013481526103e0517f15e746bf513b8a58e4265cc1162d7fc445da5c9b1928d7cfcde2582735d4677f602083a2505b60016106a05260206106a0f35b60006106c05260206106c0f35b63ea4971ee811415610851576004356101e0526024356102e0526044356103e052601c606459905901600090520163d467ae03601c8203526101e05160048201526604000000000001546fffffffffffffffffffffffffffffffff16602482015260206106e060448334306123555a03f1506106e051905015156107bd576000610700526020610700f35b606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff166102e0511215610844576102e0516c010000000000000000000000006103e0510217606060605990590160009052600381526101e05181602001526003816040015280905020556001610760526020610760f35b6000610780526020610780f35b6387def0818114156108a3576004356101e0526c01000000000000000000000000606060605990590160009052600381526101e0518160200152600381604001528090502054046107a05260206107a0f35b630aece23c8114156108f4576004356101e052606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff166107e05260206107e0f35b63fa14df6b811415610926576604000000000001546fffffffffffffffffffffffffffffffff16610820526020610820f35b63b8c48f8c811415610b1b576004356101e0526024356108405260443561086052600066040000000000035414151561096a576000610880526020610880f3610976565b60016604000000000003555b6101e051660400000000000255606060605990590160009052600381526101e05181602001526000816040015280905020546108a0526108a0610840518060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a600783015350506108a051606060605990590160009052600381526101e0518160200152600081604001528090502055606060605990590160009052600381526101e051816020015260008160400152809050205461094052601061094001610860518060101a82538060111a60018301538060121a60028301538060131a60038301538060141a60048301538060151a60058301538060161a60068301538060171a60078301538060181a60088301538060191a600983015380601a1a600a83015380601b1a600b83015380601c1a600c83015380601d1a600d83015380601e1a600e83015380601f1a600f830153505061094051606060605990590160009052600381526101e051816020015260008160400152809050205560016109e05260206109e0f35b632b86162981141561179457365990590160009052366004823760043560208201016102c0525060483560005b6020811215610b68578181601f031a81610a600153600181019050610b48565b5050610a6051610a00526102c05160208103516020599059016000905260208183856000600287604801f1508051905090509050610a8052602059905901600090526020816020610a80600060026068f1508051905060005b6020811215610be1578181601f031a81610b600153600181019050610bc1565b5050610b60516101e05270010000000000000000000000000000000070010000000000000000000000000000000060606060599059016000905260038152610a005181602001526000816040015280905020540204610b8052610b80511515610c8b57601c602059905901600090520161272e6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610bc0526020610bc0f35b700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204610be0526000610be051141515610d2e57601c60205990590160009052016127386101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610c20526020610c20f35b608c35610c40526301000000610c405160031a0262010000610c405160021a02610100610c405160011a02610c405160001a010101610c60526301000000610c605104610ca05262ffffff610c605116610cc0526003610ca051036101000a610cc05102610c805260006101e0511315610db057610c80516101e05112610db3565b60005b1561174d57780100000000000000000000000000000000000000000000000060606060599059016000905260038152610a00518160200152600081604001528090502054046001016101205260806080599059016000905260038152610a005181602001526002816040015260008160600152809050206002810154610d405250610d405160081a610d405160091a61010002610d4051600a1a6201000002610d4051600b1a630100000002010101610d005260006107e0610120510614158015610e7e5780610e8b565b6001660400000000000054145b905015610f0257610d0051610c6051141515610eae576000610d00511415610eb1565b60005b15610efd57601c602059905901600090520161271a6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000610da0526020610da0f35b6111b4565b6301000000610d005104610de05262ffffff610d005116610e00526003610de051036101000a610e005102610dc05260806080599059016000905260038152610a005181602001526002816040015260008160600152809050206002810154610e605250610e605160041a610e605160051a61010002610e605160061a6201000002610e605160071a630100000002010101610e2052601c604459905901600090520163e0e9a17b601c8203526107e0610120510360048201526020610ec0602483600030602d5a03f150610ec0519050610ea05260806080599059016000905260038152610ea05181602001526002816040015260008160600152809050206002810154610f205250610f205160041a610f205160051a61010002610f205160061a6201000002610f205160071a630100000002010101610ee052610ee051610e20510362049d408112156110595762049d4090505b6249d40081131561106b576249d40090505b62127500610dc0518202047bffffffffffffffffffffffffffffffffffffffffffffffffffffffff8113156110ba577bffffffffffffffffffffffffffffffffffffffffffffffffffffffff90505b600860076000835b80156110d9576002810490506001820191506110c2565b5080905001046000600382131515611103578160030360080260020a62ffffff841602905061111a565b6003820360080260020a8304905062ffffff811690505b6280000081161561113357610100810490506001820191505b6301000000820281179050905090509050610f6052610f6051610c6051141515611164576000610f60511415611167565b60005b156111b357601c60205990590160009052016127246101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a3506000611040526020611040f35b5b6101e0516101e0516101e05166040000000000005455606060605990590160009052600381526101e0518160200152600081604001528090502054611060526008611060016604000000000000548060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a6007830153505061106051606060605990590160009052600381526101e0518160200152600081604001528090502055600166040000000000005401660400000000000055606060605990590160009052600381526101e0518160200152600081604001528090502054611100526111006001780100000000000000000000000000000000000000000000000060606060599059016000905260038152610a0051816020015260008160400152809050205404018060181a82538060191a600183015380601a1a600283015380601b1a600383015380601c1a600483015380601d1a600583015380601e1a600683015380601f1a6007830153505061110051606060605990590160009052600381526101e051816020015260008160400152809050205560006111c05278010000000000000000000000000000000000000000000000006801000000000000000060606060599059016000905260038152610a0051816020015260008160400152809050205402046111e0526111c06111e05180601c1a825380601d1a600183015380601e1a600283015380601f1a600383015350506001611260525b6008611260511215611515576112605160050a611280526001611280517801000000000000000000000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540407141561148757611260516004026111c0016111e05180601c1a825380601d1a600183015380601e1a600283015380601f1a60038301535050611505565b611260516004026111c0017c01000000000000000000000000000000000000000000000000000000006112605160200260020a60606060599059016000905260038152610a00518160200152600181604001528090502054020480601c1a825380601d1a600183015380601e1a600283015380601f1a600383015350505b60016112605101611260526113ec565b6111c051606060605990590160009052600381526101e05181602001526001816040015280905020555050608060805990590160009052600381526101e051816020015260028160400152600081606001528090502060005b600281121561159057806020026102c05101518282015560018101905061156e565b700100000000000000000000000000000000600003816020026102c051015116828201555050610c80517bffff0000000000000000000000000000000000000000000000000000056113e0526113e051610b805101610be052606060605990590160009052600381526101e051816020015260008160400152809050205461140052601061140001610be0518060101a82538060111a60018301538060121a60028301538060131a60038301538060141a60048301538060151a60058301538060161a60068301538060171a60078301538060181a60088301538060191a600983015380601a1a600a83015380601b1a600b83015380601c1a600c83015380601d1a600d83015380601e1a600e83015380601f1a600f830153505061140051606060605990590160009052600381526101e0518160200152600081604001528090502055660400000000000354610be051121515611703576101e051660400000000000255610be0516604000000000003555b601c6020599059016000905201610120516101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a350610120516114a05260206114a0f35b601c602059905901600090520161276a6101e0517f055e4f8dd3a534789b3feb8e0681afa2aee8713fdd6472f25b2c30dc7bf4e0f4600084a35060006114c05260206114c0f35b630f5995ce8114156119a157365990590160009052366004823760043560208201016114e05260243561150052604435602082010161152052606435604052506114e05160208103516020599059016000905260208183856000600287604801f150805190509050905061156052602059905901600090526020816020611560600060026068f1508051905060005b6020811215611843578181601f031a816116400153600181019050611823565b50506116405161154052604060206114e051035114156118a457601c6020599059016000905201614e52611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a3506000611660526020611660f35b6080601c6101ac59905901600090520163bd136cb3601c8203526115405160048201526115005160248201526115205160208103516020026020018360448401526020820360c48401528061014884015280840193505050604051606482015281600401599059016000905260848160848460006004601ff161192357fe5b6084810192506101488201518080858260c487015160006004600a8705601201f161194a57fe5b508084019350508083036020611680828434306123555a03f15061168051905090509050905061042052600161042051141561199357611540516116a05260206116a0f36119a0565b60006116c05260206116c0f35b5b63bd136cb3811415611d8c573659905901600090523660048237600435611540526024356115005260443560208201016115205260643560405250601c606459905901600090520163d467ae03601c82035260405160048201526060606059905901600090526003815260405181602001526003816040015280905020546bffffffffffffffffffffffff166024820152602061170060448334306123555a03f1506117005190501515611a9757601c6020599059016000905201614e2a611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e2a611720526020611720f35b601c6044599059016000905201633d73b705601c82035260405160048201526020611740602483600030602d5a03f15061174051905015611b1a57601c6020599059016000905201614e34611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e34611760526020611760f35b601c604459905901600090520163b041b285601c82035260405160048201526020611780602483600030602d5a03f1506117805190501515611b9e57601c6020599059016000905201614e3e611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e3e6117a05260206117a0f35b6060601c61014c59905901600090520163b7129afb601c8203526115405160048201526115005160248201526115205160208103516020026020018360448401526020820360a4840152806101088401528084019350505081600401599059016000905260648160648460006004601cf1611c1557fe5b6064810192506101088201518080858260a487015160006004600a8705601201f1611c3c57fe5b5080840193505080830360206117e08284600030602d5a03f1506117e05190509050905090506117c0526080608059905901600090526003815260405181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006002820154046401000000006001830154020160005b6020811215611ce4578181601f031a816118a00153600181019050611cc4565b50506118a051905061180052611800516117c0511415611d4457601c60205990590160009052016001611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a35060016118c05260206118c0f35b601c6020599059016000905201614e48611540517fd008620948a1ed10f4fed82dc43cf79acad36dc6b7c2c924e27c9813193b83ad600084a350614e486118e05260206118e0f35b63318a3fee81141561205657365990590160009052366004823760043560208201016114e0526024356115005260443560208201016115205260643560405260843561190052506080601c6101ac599059016000905201630f5995ce601c8203526114e0516020601f6020830351010460200260200183600484015260208203608484015280610108840152808401935050506115005160248201526115205160208103516020026020018360448401526020820360c48401528061014884015280840193505050604051606482015281600401599059016000905260848160848460006004601ff1611e7b57fe5b60848101925061010882015180808582608487015160006004600a8705601201f1611ea257fe5b508084019350506101488201518080858260c487015160006004600a8705601201f1611eca57fe5b508084019350508083036020611920828434306123555a03f15061192051905090509050905061154052600061154051141515612010576040601c60ec599059016000905201631c0b6367601c8203526114e0516020601f6020830351010460200260200183600484015260208203604484015280608884015280840193505050611540516024820152816004015990590160009052604481604484600060046018f1611f7357fe5b604481019250608882015180808582604487015160006004600a8705601201f1611f9957fe5b5080840193505080830360206119608284600061190051602d5a03f15061196051905090509050905061194052601c602059905901600090520161194051611540517f2d0d11d0f27e21fab56a8712078721096066b7faaa8540a3ea566e70b97de2d4600084a35061194051611980526020611980f35b601c602059905901600090520161753a60007f2d0d11d0f27e21fab56a8712078721096066b7faaa8540a3ea566e70b97de2d4600084a35061753a6119a05260206119a0f35b6309dd0e81811415612076576604000000000002546119c05260206119c0f35b63023948728114156120d2577801000000000000000000000000000000000000000000000000606060605990590160009052600381526604000000000002548160200152600081604001528090502054046119e05260206119e0f35b632c181929811415612139577001000000000000000000000000000000007001000000000000000000000000000000006060606059905901600090526003815266040000000000025481602001526000816040015280905020540204611a20526020611a20f35b637ca823d58114156122af576604000000000002546101e052700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204611a60526000611260525b600a61126051121561224c57608060805990590160009052600381526101e05181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006001820154046401000000008254020160005b6020811215612230578181601f031a81611b200153600181019050612210565b5050611b205190506101e05260016112605101611260526121a8565b700100000000000000000000000000000000700100000000000000000000000000000000606060605990590160009052600381526101e05181602001526000816040015280905020540204611b4052611b4051611a605103611b80526020611b80f35b63b7129afb81141561246a57365990590160009052366004823760043561154052602435611500526044356020820101611520525061154051611ba0526020611520510351611bc0526000611260525b611bc05161126051121561245b5761126051602002611520510151611be05260026115005107611c00526001611c0051141561234a57611be051611c2052611ba051611c4052612368565b6000611c0051141561236757611ba051611c2052611be051611c40525b5b60405990590160009052611c205160005b6020811215612399578181601f031a81611ca00153600181019050612379565b5050611ca0518152611c405160005b60208112156123c8578181601f031a81611d2001536001810190506123a8565b5050611d2051602082015260205990590160009052602081604084600060026088f15080519050611d4052602059905901600090526020816020611d40600060026068f1508051905060005b6020811215612434578181601f031a81611de00153600181019050612414565b5050611de0519050611ba052600261150051056115005260016112605101611260526122ff565b611ba051611e00526020611e00f35b633d73b70581141561255b576004356040526604000000000002546101e0526000611260525b600661126051121561254e576101e05160405114156124b6576001611e20526020611e20f35b608060805990590160009052600381526101e05181602001526002816040015260008160600152809050207c01000000000000000000000000000000000000000000000000000000006001820154046401000000008254020160005b6020811215612532578181601f031a81611ec00153600181019050612512565b5050611ec05190506101e0526001611260510161126052612490565b6000611ee0526020611ee0f35b631f794436811415612737576004356101e052601c606459905901600090520163d467ae03601c8203526101e0516004820152606060605990590160009052600381526101e05181602001526003816040015280905020546bffffffffffffffffffffffff1660248201526020611f2060448334306123555a03f150611f20519050151561265657601c602059905901600090520160006101e0517f60ab231f060fa320acea170017564b7ee77f477e6465a8c964380cffb270aaf4600084a350602159905901600090526001815260006020820152602081019050602060408203526020601f6020830351604001010460200260408203f3505b601c602059905901600090520160016101e0517f60ab231f060fa320acea170017564b7ee77f477e6465a8c964380cffb270aaf4600084a350608060805990590160009052600381526101e0518160200152600281604001526000816060015280905020607059905901600090526050815260208101905060005b60028112156126f05780830154816020028301526001810190506126d1565b70010000000000000000000000000000000060000381840154168160200283015281905090509050602060408203526020601f6020830351604001010460200260408203f3505b6313f955e18114156128ca573659905901600090523660048237600435602082010161204052602435612060525060506120805260006120a052612080516120c0526000611260525b612060516112605112156128bb576120a051806120c051038080602001599059016000905281815260208101905090508180828286612040510160006004600a8705601201f16127cc57fe5b50809050905090506120e0526020601c608c599059016000905201632b861629601c8203526120e0516020601f6020830351010460200260200183600484015260208203602484015280604884015280840193505050816004015990590160009052602481602484600060046015f161284157fe5b602481019250604882015180808582602487015160006004600a8705601201f161286757fe5b5080840193505080830360206121a08284600030602d5a03f1506121a051905090509050905061042052612080516120a051016120a052612080516120c051016120c0526001611260510161126052612780565b610420516121c05260206121c0f35b50&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x292b7a8d467a95cffd303c7edd99875892cdb3eaee87e5ca29057dc88a09ffbd&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x4d2fcf8ac901ad7dcf5b1c3979801430d9979c87157230ae066a0276984c6ac7&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0xdf951a5d1d9283b06d4f1de58542f1e1e310d8d17aada46586ddb9598bc42894&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x9c8d09d387f3ba5dd4733e24c63e4d549864a7cd57a1bdf1fdd831a2a0184815&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x4ab3b783bb170e11b0932a5ce8f5f343f67058b3925da271001a75ae498bd655&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000004&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000002&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;559198&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1814830&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577471205&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;6327338&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9026f8301307b85746a52880083124f80946cc68eb482a757c690dd151d2bd5e774ada38bdc80b9020413f955e100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000019004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae704000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30304000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e00000000000000000000000000000000081a1a01c9e9d742c8e69daba2a026ccafdde618f2e44c96db281c2209c22f183ad03a2a049a61d267d22226896d4c065525819c238784c439dc2afa7d17fce76595730d1&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x119d28&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x13f955e100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000019004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a67040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae704000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30304000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de04000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1c6ff&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 5,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x114243&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000afbe013b4a83b2f91f3d9b6627cf382394c4914fd2b7510700000000000000008621196eb526a0e02430b6dd5c72fd368e768977f3a8364861e5a471a8ae61a1028f745609c40b185f537a6700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x110d3b&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b86162900000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000050040000005b53875b0f1381589859adcf938980f4a8fb0af4c8845007000000000000000075289d1c48c8f71deee521a76c8d92948cbe14343991998dfaea6b08596d97dcc891745609c40b18ae825ae700000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10d833&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000abbacd8711f647ab97c6c9b9658eb9bef081e2cedb630f010000000000000000549bcab22422baef6c34af382b227e4b1a27bec3312e04dbb62fc315203c67f30f9d745609c40b180fdfc30300000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        2</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10a328&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000e93433dde5128942e47e8722d37ec4dcc1c8a78cf9c4a4030000000000000000bf92c09e8e37b2c8ffbb4b9cadfccc563e474c4feae6997f52d56236fedafce20a9f745609c40b1840cc27de00000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        3</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x106e1d&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x2b8616290000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000005004000000f2e372a0b5b837116eee8f968840393d85975a1531346807000000000000000076bc91399edda1de98976ee0774e2ad3b21dd38ad9f5f34d2c816a832747fe7f4c9e745609c40b18e290e9e000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x6cc68eb482a757c690dd151d2bd5e774ada38bdc&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x27c3&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        4</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d1e2f4ddfa963a7f571cfa9c" role="button"
                   aria-expanded="false" aria-controls="id-d1e2f4ddfa963a7f571cfa9c">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_throw_outer_revert.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/inner_throw_outer_revert.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+95</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d1e2f4ddfa963a7f571cfa9c"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_throw_outer_revert.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_throw_outer_revert.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b11b8e040dd35e0b439ccf4b20f894f8b5ac9f46</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;inner_throw_outer_revert.json</span>
<span class="term-fg36">@@ -0,0 +1,95 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3956606365&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5413248&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x00d8ae40d9a06d0e7a2877b62e32eb959afbe16d&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2295104&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513681256&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x33056b5dcac09a9b4becad0e1dcf92c19bd0af76&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60606040526004361061015e576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680625b4487146101a257806311df9995146101cb578063278ecde11461022057806330adce0e146102435780633197cbb61461026c5780634bb278f3146102955780636103d70b146102aa57806363a599a4146102bf5780636a2d1cb8146102d457806375f12b21146102fd57806378e979251461032a578063801db9cc1461035357806386d1a69f1461037c5780638da5cb5b146103915780638ef26a71146103e65780639890220b1461040f5780639b39caef14610424578063b85dfb801461044d578063be9a6555146104a1578063ccb07cef146104b6578063d06c91e4146104e3578063d669e1d414610538578063df40503c14610561578063e2982c2114610576578063f02e030d146105c3578063f2fde38b146105d8578063f3283fba14610611575b600060149054906101000a900460ff1615151561017a57600080fd5b60075442108061018b575060085442115b15151561019757600080fd5b6101a03361064a565b005b34156101ad57600080fd5b6101b5610925565b6040518082815260200191505060405180910390f35b34156101d657600080fd5b6101de61092b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561022b57600080fd5b6102416004808035906020019091905050610951565b005b341561024e57600080fd5b610256610c48565b6040518082815260200191505060405180910390f35b341561027757600080fd5b61027f610c4e565b6040518082815260200191505060405180910390f35b34156102a057600080fd5b6102a8610c54565b005b34156102b557600080fd5b6102bd610f3e565b005b34156102ca57600080fd5b6102d261105d565b005b34156102df57600080fd5b6102e76110d5565b6040518082815260200191505060405180910390f35b341561030857600080fd5b6103106110e1565b604051808215151515815260200191505060405180910390f35b341561033557600080fd5b61033d6110f4565b6040518082815260200191505060405180910390f35b341561035e57600080fd5b6103666110fa565b6040518082815260200191505060405180910390f35b341561038757600080fd5b61038f611104565b005b341561039c57600080fd5b6103a4611196565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156103f157600080fd5b6103f96111bb565b6040518082815260200191505060405180910390f35b341561041a57600080fd5b6104226111c1565b005b341561042f57600080fd5b610437611296565b6040518082815260200191505060405180910390f35b341561045857600080fd5b610484600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061129c565b604051808381526020018281526020019250505060405180910390f35b34156104ac57600080fd5b6104b46112c0565b005b34156104c157600080fd5b6104c9611341565b604051808215151515815260200191505060405180910390f35b34156104ee57600080fd5b6104f6611354565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561054357600080fd5b61054b61137a565b6040518082815260200191505060405180910390f35b341561056c57600080fd5b610574611385565b005b341561058157600080fd5b6105ad600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506116c3565b6040518082815260200191505060405180910390f35b34156105ce57600080fd5b6105d66116db565b005b34156105e357600080fd5b61060f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611829565b005b341561061c57600080fd5b610648600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506118fe565b005b600080670de0b6b3a7640000341015151561066457600080fd5b61069b610696670de0b6b3a7640000610688610258346119d990919063ffffffff16565b611a0c90919063ffffffff16565b611a27565b9150660221b262dd80006106ba60065484611a7e90919063ffffffff16565b111515156106c757600080fd5b600a60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb84846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15156107d557600080fd5b6102c65a03f115156107e657600080fd5b5050506040518051905050610808828260010154611a7e90919063ffffffff16565b8160010181905550610827348260000154611a7e90919063ffffffff16565b816000018190555061084434600554611a7e90919063ffffffff16565b60058190555061085f82600654611a7e90919063ffffffff16565b6006819055503373ffffffffffffffffffffffffffffffffffffffff167ff3c1c7c0eb1328ddc834c4c9e579c06d35f443bf1102b034653624a239c7a40c836040518082815260200191505060405180910390a27fd1dc370699ae69fb860ed754789a4327413ec1cd379b93f2cbedf449a26b0e8583600554604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1505050565b60025481565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600060085442108061096b5750651b48eb57e00060065410155b15151561097757600080fd5b600a60003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010154821415156109c757600080fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856000604051602001526040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b1515610ac857600080fd5b6102c65a03f11515610ad957600080fd5b5050506040518051905050600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166342966c68836000604051602001526040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b1515610b7d57600080fd5b6102c65a03f11515610b8e57600080fd5b505050604051805190501515610ba357600080fd5b600a60003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015490506000600a60003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001819055506000811115610c4457610c433382611a9c565b5b5050565b60055481565b60085481565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610cb157600080fd5b600854421015610cd357660221b262dd8000600654141515610cd257600080fd5b5b651b48eb57e000600654108015610cf057506213c6806008540142105b151515610cfc57600080fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f193505050501515610d7557600080fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610e3a57600080fd5b6102c65a03f11515610e4b57600080fd5b5050506040518051905090506000811115610f2057600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166342966c68826000604051602001526040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b1515610ef957600080fd5b6102c65a03f11515610f0a57600080fd5b505050604051805190501515610f1f57600080fd5b5b6001600960006101000a81548160ff02191690831515021790555050565b600080339150600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905060008114151515610f9657600080fd5b803073ffffffffffffffffffffffffffffffffffffffff163110151515610fbc57600080fd5b610fd181600254611b5090919063ffffffff16565b6002819055506000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561105957fe5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156110b857600080fd5b6001600060146101000a81548160ff021916908315150217905550565b670de0b6b3a764000081565b600060149054906101000a900460ff1681565b60075481565b651b48eb57e00081565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561115f57600080fd5b600060149054906101000a900460ff16151561117a57600080fd5b60008060146101000a81548160ff021916908315150217905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60065481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561121c57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f19350505050151561129457600080fd5b565b61025881565b600a6020528060005260406000206000915090508060000154908060010154905082565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561131b57600080fd5b600060075414151561132c57600080fd5b4260078190555062278d004201600881905550565b600960009054906101000a900460ff1681565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b660221b262dd800081565b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113e557600080fd5b600654660221b262dd800003925061142b670de0b6b3a764000061141c610258670de0b6b3a76400006119d990919063ffffffff16565b81151561142557fe5b04611a27565b915081831115151561143c57600080fd5b600a60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16856000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b151561158c57600080fd5b6102c65a03f1151561159d57600080fd5b50505060405180519050506115bf838260010154611a7e90919063ffffffff16565b81600101819055506115dc83600654611a7e90919063ffffffff16565b6006819055503073ffffffffffffffffffffffffffffffffffffffff167ff3c1c7c0eb1328ddc834c4c9e579c06d35f443bf1102b034653624a239c7a40c846040518082815260200191505060405180910390a27fd1dc370699ae69fb860ed754789a4327413ec1cd379b93f2cbedf449a26b0e856000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600554604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1505050565b60016020528060005260406000206000915090505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561173657600080fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f2fde38b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b151561181357600080fd5b6102c65a03f1151561182457600080fd5b505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561188457600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415156118fb57806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561195957600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561199557600080fd5b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600080828402905060008414806119fa57508284828115156119f757fe5b04145b1515611a0257fe5b8091505092915050565b6000808284811515611a1a57fe5b0490508091505092915050565b6000611a416202a300600754611a7e90919063ffffffff16565b421015611a7557611a6e611a5f600584611a0c90919063ffffffff16565b83611a7e90919063ffffffff16565b9050611a79565b8190505b919050565b6000808284019050838110151515611a9257fe5b8091505092915050565b611aee81600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611a7e90919063ffffffff16565b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611b4681600254611a7e90919063ffffffff16565b6002819055505050565b6000828211151515611b5e57fe5b8183039050929150505600a165627a7a72305820ec0d82a406896ccf20989b3d6e650abe4dc104e400837f1f58e67ef499493ae90029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x0000000000000000000000008d69d00910d0b2afb2a99ed6c16c8129fa8e1751&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x000000000000000000000000e819f024b41358d2c08e3a868a5c5dd0566078d4&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000007&quot;: &quot;0x000000000000000000000000000000000000000000000000000000005a388981&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000008&quot;: &quot;0x000000000000000000000000000000000000000000000000000000005a3b38e6&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xd4fcab9f0a6dc0493af47c864f6f17a8a5e2e826&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x2a2dd979a35cf000&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xe819f024b41358d2c08e3a868a5c5dd0566078d4&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6060604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100bf578063095ea7b31461014d57806318160ddd146101a757806323b872dd146101d0578063313ce5671461024957806342966c681461027257806370a08231146102ad5780638da5cb5b146102fa57806395d89b411461034f578063a9059cbb146103dd578063dd62ed3e14610437578063f2fde38b146104a3575b600080fd5b34156100ca57600080fd5b6100d26104dc565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101125780820151818401526020810190506100f7565b50505050905090810190601f16801561013f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015857600080fd5b61018d600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610515565b604051808215151515815260200191505060405180910390f35b34156101b257600080fd5b6101ba61069c565b6040518082815260200191505060405180910390f35b34156101db57600080fd5b61022f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506106a2565b604051808215151515815260200191505060405180910390f35b341561025457600080fd5b61025c610952565b6040518082815260200191505060405180910390f35b341561027d57600080fd5b6102936004808035906020019091905050610957565b604051808215151515815260200191505060405180910390f35b34156102b857600080fd5b6102e4600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610abe565b6040518082815260200191505060405180910390f35b341561030557600080fd5b61030d610b07565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561035a57600080fd5b610362610b2d565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103a2578082015181840152602081019050610387565b50505050905090810190601f1680156103cf5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156103e857600080fd5b61041d600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610b66565b604051808215151515815260200191505060405180910390f35b341561044257600080fd5b61048d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d01565b6040518082815260200191505060405180910390f35b34156104ae57600080fd5b6104da600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d88565b005b6040805190810160405280600b81526020017f416c6c436f6465436f696e00000000000000000000000000000000000000000081525081565b6000808214806105a157506000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054145b15156105ac57600080fd5b81600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b60005481565b600080600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905061077683600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e5f90919063ffffffff16565b600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555061080b83600160008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e7d90919063ffffffff16565b600160008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506108618382610e7d90919063ffffffff16565b600260008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef856040518082815260200191505060405180910390a360019150509392505050565b600681565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156109b557600080fd5b610a0782600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e7d90919063ffffffff16565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610a5f82600054610e7d90919063ffffffff16565b60008190555060003373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050919050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6040805190810160405280600481526020017f414c4c430000000000000000000000000000000000000000000000000000000081525081565b6000610bba82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e7d90919063ffffffff16565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550610c4f82600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054610e5f90919063ffffffff16565b600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905092915050565b6000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610de457600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515610e5c5780600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b6000808284019050838110151515610e7357fe5b8091505092915050565b6000828211151515610e8b57fe5b8183039050929150505600a165627a7a7230582059f3ea3df0b054e9ab711f37969684ba83fe38f255ffe2c8d850d951121c51100029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3956606365&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x566961425443&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5418523&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x6f37eb930a25da673ea1bb80fd9e32ddac19cdf7cd4bb2eac62cc13598624077&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xd049bfd667cb46aa3ef5df0da3e57db3be39e511&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x10971cde68c587c750c23b8589ae868ce82c2c646636b97e7d9856470c5297c7&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x810f923ff4b450a1&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2295103&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xff403612573d76dfdaf4fea2429b77dbe9764021ae0e38dc8ac79a3cf551179e&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513681246&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7162347056825919&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf86d808504e3b292008307dfa69433056b5dcac09a9b4becad0e1dcf92c19bd0af76880e92596fd62900008029a0e5f27bb66431f7081bb7f1f242003056d7f3f35414c352cd3d1848b52716dac2a07d0be78980edb0bd2a0678fc53aa90ea9558ce346b0d947967216918ac74ccea&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xd4fcab9f0a6dc0493af47c864f6f17a8a5e2e826&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x78d9e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x33056b5dcac09a9b4becad0e1dcf92c19bd0af76&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0xe92596fd6290000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2295104,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;execution reverted&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x7c1c8&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x33056b5dcac09a9b4becad0e1dcf92c19bd0af76&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x75fe3&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xa9059cbb000000000000000000000000d4fcab9f0a6dc0493af47c864f6f17a8a5e2e82600000000000000000000000000000000000000000000000000000000000002f4&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xe819f024b41358d2c08e3a868a5c5dd0566078d4&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;invalid opcode: INVALID&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3f8cbf8a2044e56f2c0f2006" role="button"
                   aria-expanded="false" aria-controls="id-3f8cbf8a2044e56f2c0f2006">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+94</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3f8cbf8a2044e56f2c0f2006"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..64425dbaddac4ada823ccd0b6caba1e615345db0</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create.json</span>
<span class="term-fg36">@@ -0,0 +1,94 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1808543&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4875092&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x3851fdc18bd5f2314cf0c90439356f9a1fe157d7fb06c20e20b77954da903671&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x3d4e702d6058acf94c9547560f05536d45d515bd4f9014564ec41b5b4ff9578b&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x1695153e7b16c1e7&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;555461&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xba8272acd0dfeb5f04376328e8bfc5b276b177697000c204a060f6f7b629ae32&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577423350&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;462222992438&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0xcf5b3467dfa45cdc8e5358a7a1ba4deb02e5faed&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x16c102a3b09c02abdace&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;19049&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;555462&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1808543&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577423360&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4873701&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf90451824a6985746a52880083053e908080b903fb60606040525b60405161015b806102a0833901809050604051809103906000f0600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b610247806100596000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900480632ef9db1314610044578063e37678761461007157610042565b005b61005b6004803590602001803590602001506100ad565b6040518082815260200191505060405180910390f35b61008860048035906020018035906020015061008a565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000600060008484604051808381526020018281526020019250505060405180910390209150610120600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff167f6164640000000000000000000000000000000000000000000000000000000000846101e3565b9050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681868660405180807f616464000000000000000000000000000000000000000000000000000000000081526020015060200184815260200183815260200182815260200193505050506000604051808303816000866161da5a03f191505050600060005060008281526020019081526020016000206000505492506101db565b505092915050565b60004340848484604051808581526020018473ffffffffffffffffffffffffffffffffffffffff166c0100000000000000000000000002815260140183815260200182815260200194505050505060405180910390209050610240565b9392505050566060604052610148806100136000396000f30060606040526000357c010000000000000000000000000000000000000000000000000000000090048063471407e614610044578063e37678761461007757610042565b005b6100616004803590602001803590602001803590602001506100b3565b6040518082815260200191505060405180910390f35b61008e600480359060200180359060200150610090565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000818301905080506100c684826100d5565b8090506100ce565b9392505050565b3373ffffffffffffffffffffffffffffffffffffffff16828260405180807f7265676973746572496e74000000000000000000000000000000000000000000815260200150602001838152602001828152602001925050506000604051808303816000866161da5a03f1915050505b50505681a1a0b9a85df655d3b6aa081e52d8c3db52c50c2bf97d9d993a980113b2262649c125a00d51e63880ca8ef4705914a71e7ff906834a9cdcff0cbd063ff4e43a5905890d&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x3951c&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x60606040525b60405161015b806102a0833901809050604051809103906000f0600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b610247806100596000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900480632ef9db1314610044578063e37678761461007157610042565b005b61005b6004803590602001803590602001506100ad565b6040518082815260200191505060405180910390f35b61008860048035906020018035906020015061008a565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000600060008484604051808381526020018281526020019250505060405180910390209150610120600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff167f6164640000000000000000000000000000000000000000000000000000000000846101e3565b9050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681868660405180807f616464000000000000000000000000000000000000000000000000000000000081526020015060200184815260200183815260200182815260200193505050506000604051808303816000866161da5a03f191505050600060005060008281526020019081526020016000206000505492506101db565b505092915050565b60004340848484604051808581526020018473ffffffffffffffffffffffffffffffffffffffff166c0100000000000000000000000002815260140183815260200182815260200194505050505060405180910390209050610240565b9392505050566060604052610148806100136000396000f30060606040526000357c010000000000000000000000000000000000000000000000000000000090048063471407e614610044578063e37678761461007757610042565b005b6100616004803590602001803590602001803590602001506100b3565b6040518082815260200191505060405180910390f35b61008e600480359060200180359060200150610090565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000818301905080506100c684826100d5565b8090506100ce565b9392505050565b3373ffffffffffffffffffffffffffffffffffffffff16828260405180807f7265676973746572496e74000000000000000000000000000000000000000000815260200150602001838152602001828152602001925050506000604051808303816000866161da5a03f1915050505b505056&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x53e90&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60606040526000357c0100000000000000000000000000000000000000000000000000000000900480632ef9db1314610044578063e37678761461007157610042565b005b61005b6004803590602001803590602001506100ad565b6040518082815260200191505060405180910390f35b61008860048035906020018035906020015061008a565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000600060008484604051808381526020018281526020019250505060405180910390209150610120600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff167f6164640000000000000000000000000000000000000000000000000000000000846101e3565b9050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681868660405180807f616464000000000000000000000000000000000000000000000000000000000081526020015060200184815260200183815260200182815260200193505050506000604051808303816000866161da5a03f191505050600060005060008281526020019081526020016000206000505492506101db565b505092915050565b60004340848484604051808581526020018473ffffffffffffffffffffffffffffffffffffffff166c0100000000000000000000000002815260140183815260200182815260200194505050505060405180910390209050610240565b939250505056&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x9db7a1baf185a865ffee3824946ccd8958191e5e&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 23,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xe267552ce8437a5bc7081385c99f912de5723ad34b958db215dbc41abd5f6c03&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 555462,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x38bba9e3965b57205097ea5ec53fc403cf3941bec2e4c933faae244de5ca4ba1&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;1.147715ms&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x9db7a1baf185a865ffee3824946ccd8958191e5e&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x30b34&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x6060604052610148806100136000396000f30060606040526000357c010000000000000000000000000000000000000000000000000000000090048063471407e614610044578063e37678761461007757610042565b005b6100616004803590602001803590602001803590602001506100b3565b6040518082815260200191505060405180910390f35b61008e600480359060200180359060200150610090565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000818301905080506100c684826100d5565b8090506100ce565b9392505050565b3373ffffffffffffffffffffffffffffffffffffffff16828260405180807f7265676973746572496e74000000000000000000000000000000000000000000815260200150602001838152602001828152602001925050506000604051808303816000866161da5a03f1915050505b505056&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x1009d&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60606040526000357c010000000000000000000000000000000000000000000000000000000090048063471407e614610044578063e37678761461007757610042565b005b6100616004803590602001803590602001803590602001506100b3565b6040518082815260200191505060405180910390f35b61008e600480359060200180359060200150610090565b005b8060006000506000848152602001908152602001600020600050819055505b5050565b6000818301905080506100c684826100d5565b8090506100ce565b9392505050565b3373ffffffffffffffffffffffffffffffffffffffff16828260405180807f7265676973746572496e74000000000000000000000000000000000000000000815260200150602001838152602001828152602001925050506000604051808303816000866161da5a03f1915050505b505056&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0xcf5b3467dfa45cdc8e5358a7a1ba4deb02e5faed&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 23,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xe267552ce8437a5bc7081385c99f912de5723ad34b958db215dbc41abd5f6c03&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 555462,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x38bba9e3965b57205097ea5ec53fc403cf3941bec2e4c933faae244de5ca4ba1&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6a830fcf489810bb644b2acf" role="button"
                   aria-expanded="false" aria-controls="id-6a830fcf489810bb644b2acf">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create2_action_gas.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create2_action_gas.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+94</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6a830fcf489810bb644b2acf"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create2_action_gas.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create2_action_gas.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..bbd9904d9c7ef919f8dd7c56e1fb96153848a046</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create2_action_gas.json</span>
<span class="term-fg36">@@ -0,0 +1,94 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4635413&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd683010b05846765746886676f312e3133856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9289294&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x359775cf1a2ae2400e26ec68bf33bcfe38b7979c76b7e616f42c4ca7e7605e39&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x4b2a0ef121a9c7d732fa0fbd4166a0e1041d2da2b8cb677c61edabf8b7183b64&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x2a8a64ad9757be55&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555160&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x95067c12148e2362fcd4a89df286ff0b1739ef097a40ca42ae7f698af9a9d913&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590793999&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242063623471&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x8785e369f0ef0a4e5c5a5f929680427dc75273a5&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x623145b285b3f551fa3f&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;260617&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555161&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4633150&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590794020&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9298364&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf85e8303fa09843b9aca0083019ed880808a6000600060006000f50081a2a0485ea410e210740eef8e6f6de11c530f46f8da80eecb02afbb6c5f61749ac015a068d72f1b0f1d3cb4e214d5def79b49a73e6ee91db2df83499a54c656c144600f&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf6c&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x6000600060006000f500&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x14c78&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x2e8eded627eead210cb6143eb39ef7a3e44e4f00&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 31,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x1257b698c5833c54ce786734087002b097275abc3877af082b5c2a538e894a41&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555161,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xb0793dd508dd106a19794b8ce1dfc0ff8d98c76aab61bf32a11799854149a171&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;889.048µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x2e8eded627eead210cb6143eb39ef7a3e44e4f00&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x5117&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x8785e369f0ef0a4e5c5a5f929680427dc75273a5&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 31,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x1257b698c5833c54ce786734087002b097275abc3877af082b5c2a538e894a41&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555161,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xb0793dd508dd106a19794b8ce1dfc0ff8d98c76aab61bf32a11799854149a171&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-60efa2094b0d72d30d44a9fa" role="button"
                   aria-expanded="false" aria-controls="id-60efa2094b0d72d30d44a9fa">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create_action_gas.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create_action_gas.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+90</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-60efa2094b0d72d30d44a9fa"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_action_gas.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_action_gas.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..19ae5fc5d3f0dd48867f3afe2dd801a486a0a767</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_action_gas.json</span>
<span class="term-fg36">@@ -0,0 +1,90 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4639933&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010b05846765746888676f312e31342e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9280188&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x9a5f3a98eb1c60f6e3f450658a9cea190157e7021d04f927b752ad6482cf9194&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x73f26d124436b0791169d63a3af29c2ae47765a3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x6b6f8fcaa54b8565c4c1ae7cf0a020e938a53007f4561e758b17bc05c9044d78&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x773aba50dc51b462&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555169&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xc4b9703de3e59ff795baae2c3afa010cf039c37244a7a6af7f3f491a10601348&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590794111&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242105342155&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x5ac5599fc9df172c89ee7ec55ad9104ccbfed40d&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x62325b40cbbd0915c4b9&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;260875&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555170&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4642198&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590794112&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9289249&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8658303fb0b843b9aca0083019ee48080915a600055600060006000f0505a6001550081a2a01a7deb3a16d967b766459ef486b00656c6581e5ad58968184a33701e27e0eb8aa07162ccdfe2018d64360a605310a62c399dd586c7282dd42a88c54f02f51d451f&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x5a600055600060006000f0505a60015500&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;out of gas&quot;,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 63,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x60e881fae3884657b5430925c5d0053535b45cce0b8188f2a6be1feee8bcc650&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555170,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xea46fbf941d51bf1e4180fbf26d22fda3896f49c7f371d109c226de95dd7b02e&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;952.736µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x9c5cfe45b15eaff4ad617af4250189e26024a4f8&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x3cb&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x5ac5599fc9df172c89ee7ec55ad9104ccbfed40d&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 63,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x60e881fae3884657b5430925c5d0053535b45cce0b8188f2a6be1feee8bcc650&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555170,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xea46fbf941d51bf1e4180fbf26d22fda3896f49c7f371d109c226de95dd7b02e&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0aaf22add766cc8a7e10364d" role="button"
                   aria-expanded="false" aria-controls="id-0aaf22add766cc8a7e10364d">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create_inerror.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_create_inerror.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+80</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0aaf22add766cc8a7e10364d"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_inerror.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_inerror.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a62d4bb64525e9c30db857aecea8f4b98b803811</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_create_inerror.json</span>
<span class="term-fg36">@@ -0,0 +1,81 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3244991&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;7968787&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x62bbf18c203068a8793af8d8360d054f95a63bc62b87ade550861ed490af3f15&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x9f2659ffe7b3b467e46dcec3623392cf51635079&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xc8dec711fd1e03972b6a279a09dc0cd29c5171b60f42c4ce37c7c51ff445f776&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x40b1bbcc25ddb804&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;839246&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x4bb3b02ec70b837651233957fb61a6ea3fc6a4244c1f55df7a713c154829ec0a&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1581179375&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;1023985623933&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x76554b33410b6d90b7dc889bfed0451ad195f27e&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6080604052348015600f57600080fd5b506004361060505760003560e01c8063391521f414605557806355313dea14605d5780636d3d14161460655780638da5cb5b14606d578063b9d1e5aa1460b5575b600080fd5b605b60bd565b005b606360c8565b005b606b60ca565b005b607360cf565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b60bb60f4565b005b6020610123600af050565b005b600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565bfefea165627a7a723058202094d5aa5dbbd493e9a2c64c50b62eba4b109b2a12d2bb73a5d0d54982651fc80029&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xed69ab7145a9bae7152406d062c077c6ecc6ae18&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xa3b31cbd5168d3c99756660d4b7625d679e12573&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x569bc6535d3083fce&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;26&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;839247&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3213311&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1581179571&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;7961006&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x9f2659ffe7b3b467e46dcec3623392cf51635079&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf86a1a8509502f9000830334509476554b33410b6d90b7dc889bfed0451ad195f27e8084391521f481a2a02e4ff0d171a860c8c7de2283978e2f225f9ba3ed4dec446b773c6b2d73ef22dea02a6a517528b491cb71b204f534db11a1c8059035f54d5bae347d1cab536bde2c&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xa3b31cbd5168d3c99756660d4b7625d679e12573&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x76554b33410b6d90b7dc889bfed0451ad195f27e&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2e138&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x391521f4&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0xd0b5&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 26,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xcb1090fa85d2a3da8326b75333e92b3dca89963c895d9c981bfdaa64643135e4&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 839247,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xce7ff7d84ca97f0f89d6065e2c12409a795c9f607cdb14aef0713cad5d7e311c&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;182.267µs&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2b37a6c433ce79c771144480" role="button"
                   aria-expanded="false" aria-controls="id-2b37a6c433ce79c771144480">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_pointer_issue.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/nested_pointer_issue.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+188</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2b37a6c433ce79c771144480"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_pointer_issue.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_pointer_issue.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..792845538f98f04d9dfd8d96fd9496dd17f9895d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;nested_pointer_issue.json</span>
<span class="term-fg36">@@ -0,0 +1,189 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;13535&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x6f706fe8026edb51577b57685574dc152dba4e2ebfc8a50bb63a8c95a4f8818d&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x7f54db248a004ca182fe87fdfa6efda97163908b4f0cc84b36a6d60699d5d1be&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;24766&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xf09f928e20407072796c616273206e6f64652d3020f09f928e000000000000001d32ac3baf238e163e18ed6d77b67b0b54b08ad9781dc4ffd93c5ede1ca12c5f21b36ac39c7ebb88dff65da91f5b9461f19873a02602230b931ba388a809119f00&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;8000000&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1549153003&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0b1ba0af832d7c05fd64161e0db78e85978e8082&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6080604052600436106100ae5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde0381146100b8578063095ea7b31461014257806318160ddd1461018757806323b872dd146101ae5780632e1a7d4d146101e5578063313ce567146101fd57806370a082311461022857806395d89b4114610256578063a9059cbb1461026b578063d0e30db0146100ae578063dd62ed3e1461029c575b6100b66102d0565b005b3480156100c457600080fd5b506100cd61031f565b6040805160208082528351818301528351919283929083019185019080838360005b838110156101075781810151838201526020016100ef565b50505050905090810190601f1680156101345780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561014e57600080fd5b5061017373ffffffffffffffffffffffffffffffffffffffff600435166024356103cb565b604080519115158252519081900360200190f35b34801561019357600080fd5b5061019c61043e565b60408051918252519081900360200190f35b3480156101ba57600080fd5b5061017373ffffffffffffffffffffffffffffffffffffffff60043581169060243516604435610443565b3480156101f157600080fd5b506100b66004356105e3565b34801561020957600080fd5b50610212610678565b6040805160ff9092168252519081900360200190f35b34801561023457600080fd5b5061019c73ffffffffffffffffffffffffffffffffffffffff60043516610681565b34801561026257600080fd5b506100cd610693565b34801561027757600080fd5b5061017373ffffffffffffffffffffffffffffffffffffffff6004351660243561070b565b3480156102a857600080fd5b5061019c73ffffffffffffffffffffffffffffffffffffffff6004358116906024351661071f565b33600081815260036020908152604091829020805434908101909155825190815291517fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9281900390910190a2565b6000805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f810184900484028201840190925281815292918301828280156103c35780601f10610398576101008083540402835291602001916103c3565b820191906000526020600020905b8154815290600101906020018083116103a657829003601f168201915b505050505081565b33600081815260046020908152604080832073ffffffffffffffffffffffffffffffffffffffff8716808552908352818420869055815186815291519394909390927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925928290030190a350600192915050565b303190565b73ffffffffffffffffffffffffffffffffffffffff831660009081526003602052604081205482111561047557600080fd5b73ffffffffffffffffffffffffffffffffffffffff841633148015906104eb575073ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff14155b156105655773ffffffffffffffffffffffffffffffffffffffff8416600090815260046020908152604080832033845290915290205482111561052d57600080fd5b73ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020805483900390555b73ffffffffffffffffffffffffffffffffffffffff808516600081815260036020908152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35060019392505050565b336000908152600360205260409020548111156105ff57600080fd5b33600081815260036020526040808220805485900390555183156108fc0291849190818181858888f1935050505015801561063e573d6000803e3d6000fd5b5060408051828152905133917f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65919081900360200190a250565b60025460ff1681565b60036020526000908152604090205481565b60018054604080516020600284861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f810184900484028201840190925281815292918301828280156103c35780601f10610398576101008083540402835291602001916103c3565b6000610718338484610443565b9392505050565b6004602090815260009283526040808420909152908252902054815600a165627a7a72305820228981f11f47ad9630080069b0a81423fcfba5aa8e0f478a579c4bc080ba7e820029&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0xbe8a6e3827dad84a671edac41a02b0f5b47b9d0339adb1e9411b9ba4e2118738&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x48bacb9266a570d521063ef5dd96e61686dbe788&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6080604052600436106101b65763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663288cdc9181146101bb578063297bb70b146101f15780632ac126221461021e5780633683ef8e1461024b5780633c28d8611461026d5780633e228bae1461029a5780633fd3c997146102ba5780634ac14782146102e75780634d0ae546146103075780634f9559b11461032757806350dde190146103475780636070410814610367578063642f2eaf1461039457806364a3bc15146103b457806377fcce68146103d45780637b8e3514146103f45780637e1d9808146104145780637e9d74dc1461043457806382c174d0146104615780638da5cb5b146104815780639363470214610496578063a3e20380146104b6578063b4be83d5146104d6578063bfc8bfce146104f6578063c585bb9314610516578063c75e0a8114610536578063d46b02c314610563578063d9bfa73e14610583578063db123b1a146105a3578063dd1c7d18146105c5578063e306f779146105e5578063e5fa431b146105fa578063eea086ba1461061a578063f2fde38b1461062f578063ffa1ad741461064f575b600080fd5b3480156101c757600080fd5b506101db6101d63660046148ee565b610664565b6040516101e89190615513565b60405180910390f35b3480156101fd57600080fd5b5061021161020c366004614811565b610676565b6040516101e891906157ed565b34801561022a57600080fd5b5061023e6102393660046148ee565b6107a1565b6040516101e89190615505565b34801561025757600080fd5b5061026b61026636600461492b565b6107b6565b005b34801561027957600080fd5b5061028d610288366004614a5f565b6108a3565b6040516101e891906157fb565b3480156102a657600080fd5b506102116102b5366004614b1f565b610a3a565b3480156102c657600080fd5b506102da6102d53660046149ee565b610a90565b6040516101e891906155cf565b3480156102f357600080fd5b5061026b6103023660046147dc565b610ab8565b34801561031357600080fd5b50610211610322366004614811565b610b85565b34801561033357600080fd5b5061026b6103423660046148ee565b610c75565b34801561035357600080fd5b50610211610362366004614811565b610e2a565b34801561037357600080fd5b506103876103823660046149ee565b610ebe565b6040516101e89190615425565b3480156103a057600080fd5b5061023e6103af3660046148ee565b610f0c565b3480156103c057600080fd5b506102116103cf366004614b1f565b610f21565b3480156103e057600080fd5b5061026b6103ef3660046147ac565b610fcc565b34801561040057600080fd5b5061023e61040f366004614772565b611106565b34801561042057600080fd5b5061021161042f3660046148a5565b611126565b34801561044057600080fd5b5061045461044f3660046147dc565b61128a565b6040516101e891906154f4565b34801561046d57600080fd5b5061023e61047c36600461490c565b61131f565b34801561048d57600080fd5b5061038761133f565b3480156104a257600080fd5b5061023e6104b1366004614993565b61135b565b3480156104c257600080fd5b506102116104d13660046148a5565b6118de565b3480156104e257600080fd5b506102116104f1366004614b1f565b6119f1565b34801561050257600080fd5b5061026b610511366004614b68565b611a6c565b34801561052257600080fd5b5061026b610531366004614754565b611d05565b34801561054257600080fd5b50610556610551366004614a2a565b611f30565b6040516101e8919061580a565b34801561056f57600080fd5b5061026b61057e366004614a2a565b61202a565b34801561058f57600080fd5b506101db61059e366004614772565b6120c6565b3480156105af57600080fd5b506105b86120e3565b6040516101e891906155be565b3480156105d157600080fd5b506102116105e03660046148a5565b61218e565b3480156105f157600080fd5b506101db612263565b34801561060657600080fd5b506102116106153660046148a5565b612269565b34801561062657600080fd5b506103876123db565b34801561063b57600080fd5b5061026b61064a366004614754565b6123f7565b34801561065b57600080fd5b506105b86124a8565b60046020526000908152604090205481565b61067e614386565b600080610689614386565b60005460ff16156106cf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b60405180910390fd5b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011781558751935091505b81831461076f57610758878381518110151561071957fe5b90602001906020020151878481518110151561073157fe5b90602001906020020151878581518110151561074957fe5b906020019060200201516124df565b9050610764848261257d565b600190910190610701565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055509392505050565b60056020526000908152604090205460ff1681565b73ffffffffffffffffffffffffffffffffffffffff831633146108465761080e848484848080601f0160208091040260200160405190810160405280939291908181526020018383808284375061135b945050505050565b1515610846576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061569d565b5050600091825260076020908152604080842073ffffffffffffffffffffffffffffffffffffffff9093168452919052902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055565b6108ab6143af565b6108b36143de565b6108bb6143de565b6000805460ff16156108f9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016600117905561016080890151610140808a01919091528901519088015261094588611f30565b925061095087611f30565b915061095a6125df565b905061096888848389612611565b61097487838388612611565b61097e88886127a9565b610992888885604001518560400151612809565b8051602081015190519195506109ad918a9186918190612990565b6020808501519081015190516109c99189918591908190612990565b6109e28882856020015186604001518860000151612aa9565b6109fb8782846020015185604001518860200151612aa9565b610a0788888387612b55565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905550949350505050565b610a42614386565b6060610a4f858585612d2d565b9050608081825160208401305af48015610a8657815183526020820151602084015260408201516040840152606082015160608401525b505b509392505050565b600b6020526000908152604090205473ffffffffffffffffffffffffffffffffffffffff1681565b60008054819060ff1615610af8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011781558151905b808214610b5857610b508382815181101515610b4157fe5b90602001906020020151612eff565b600101610b29565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905550565b610b8d614386565b600080610b98614386565b60005460ff1615610bd5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011781558751935091505b81831461076f57610c5e8783815181101515610c1f57fe5b906020019060200201518784815181101515610c3757fe5b906020019060200201518785815181101515610c4f57fe5b90602001906020020151612f2a565b9050610c6a848261257d565b600190910190610c07565b6000805481908190819060ff1615610cb9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055610cec6125df565b935073ffffffffffffffffffffffffffffffffffffffff84163314610d115733610d14565b60005b73ffffffffffffffffffffffffffffffffffffffff8086166000908152600660209081526040808320938516835292905220549093506001860192509050808211610d8b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061572d565b73ffffffffffffffffffffffffffffffffffffffff80851660008181526006602090815260408083209488168084529490915290819020859055517f82af639571738f4ebd4268fb0363d8957ebe1bbb9e78dba5ebd69eed39b154f090610df3908690615513565b60405180910390a35050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055505050565b610e32614386565b600080610e3d614386565b86519250600091505b818314610eb457610e9d8783815181101515610e5e57fe5b906020019060200201518784815181101515610e7657fe5b906020019060200201518785815181101515610e8e57fe5b90602001906020020151610a3a565b9050610ea9848261257d565b600190910190610e46565b5050509392505050565b7fffffffff0000000000000000000000000000000000000000000000000000000081166000908152600b602052604090205473ffffffffffffffffffffffffffffffffffffffff165b919050565b60096020526000908152604090205460ff1681565b610f29614386565b60005460ff1615610f66576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055610f9c848484612f2a565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055949350505050565b6000805460ff161561100a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016600117905561103d6125df565b73ffffffffffffffffffffffffffffffffffffffff8181166000818152600860209081526040808320948916808452949091529081902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00168715151790555192935090917fa8656e308026eeabce8f0bc18048433252318ab80ac79da0b3d3d8697dfba891906110d1908690615505565b60405180910390a35050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905550565b600860209081526000928352604080842090915290825290205460ff1681565b61112e614386565b6060600080600061113d614386565b60005460ff161561117a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016600117815589518a919081106111b257fe5b906020019060200201516101600151945088519350600092505b828414611255578489848151811015156111e257fe5b906020019060200201516101600181905250611202888760200151612f7d565b915061122e898481518110151561121557fe5b9060200190602002015183898681518110151561074957fe5b905061123a868261257d565b6020860151881161124a57611255565b6001909201916111cc565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055509195945050505050565b606060006060600084519250826040519080825280602002602001820160405280156112d057816020015b6112bd6143de565b8152602001906001900390816112b55790505b509150600090505b808314610a88576112ff85828151811015156112f057fe5b90602001906020020151611f30565b828281518110151561130d57fe5b602090810290910101526001016112d8565b600760209081526000928352604080842090915290825290205460ff1681565b60035473ffffffffffffffffffffffffffffffffffffffff1681565b600080600080600080600080600089511115156113a4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061571d565b6113ad89612fc4565b7f010000000000000000000000000000000000000000000000000000000000000090049650600760ff88161061140f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061563d565b8660ff16600781111561141e57fe5b9550600086600781111561142e57fe5b1415611466576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061570d565b600186600781111561147457fe5b14156114bc578851156114b3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906157dd565b600097506118d0565b60028660078111156114ca57fe5b141561160557885160411461150b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906155dd565b88600081518110151561151a57fe5b01602001517f010000000000000000000000000000000000000000000000000000000000000090819004810204945061155a89600163ffffffff61308816565b935061156d89602163ffffffff61308816565b925060018b86868660405160008152602001604052604051611592949392919061556e565b60206040516020810390808403906000865af11580156115b6573d6000803e3d6000fd5b50506040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0015173ffffffffffffffffffffffffffffffffffffffff8c811690821614995092506118d09050565b600386600781111561161357fe5b14156117b9578851604114611654576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906155dd565b88600081518110151561166357fe5b01602001517f01000000000000000000000000000000000000000000000000000000000000009081900481020494506116a389600163ffffffff61308816565b93506116b689602163ffffffff61308816565b925060018b60405160200180807f19457468657265756d205369676e6564204d6573736167653a0a333200000000815250601c0182600019166000191681526020019150506040516020818303038152906040526040518082805190602001908083835b6020831061175757805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161171a565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990921691161790526040805192909401829003822060008352910192839052611592945092508991899150889061556e565b60048660078111156117c757fe5b14156117df576117d88b8b8b6130d3565b97506118d0565b60058660078111156117ed57fe5b1415611850576117fc89613228565b73ffffffffffffffffffffffffffffffffffffffff808c1660009081526008602090815260408083209385168352929052205490915060ff16151561184457600097506118d0565b6117d8818c8c8c6132a1565b600686600781111561185e57fe5b141561189e5760008b815260076020908152604080832073ffffffffffffffffffffffffffffffffffffffff8e16845290915290205460ff1697506118d0565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061563d565b505050505050509392505050565b6118e6614386565b60606000806000806118f6614386565b89600081518110151561190557fe5b906020019060200201516101400151955089519450600093505b8385146119e457858a8581518110151561193557fe5b6020908102909101015161014001528651611951908a90612f7d565b92506119948a8581518110151561196457fe5b9060200190602002015160a001518b8681518110151561198057fe5b9060200190602002015160800151856133fd565b91506119c08a858151811015156119a757fe5b90602001906020020151838a87815181101515610e8e57fe5b90506119cc878261257d565b865189116119d9576119e4565b60019093019261191f565b5050505050509392505050565b6119f9614386565b60005460ff1615611a36576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00166001179055610f9c8484846124df565b600a5460009073ffffffffffffffffffffffffffffffffffffffff1615611abf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b611b02611afd888888888080601f01602080910402602001604051908101604052809392919081815260200183838082843750613453945050505050565b613694565b60008181526009602052604090205490915060ff1615611b4e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061568d565b73ffffffffffffffffffffffffffffffffffffffff86163314611c1f57611ba6818785858080601f0160208091040260200160405190810160405280939291908181526020018383808284375061135b945050505050565b1515611bde576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906157cd565b600a80547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff88161790555b6000818152600960205260409081902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790555130908690869080838380828437820191505092505050600060405180830381855af49150501515611cb6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156bd565b73ffffffffffffffffffffffffffffffffffffffff86163314611cfc57600a80547fffffffffffffffffffffffff00000000000000000000000000000000000000001690555b50505050505050565b6003546000908190819073ffffffffffffffffffffffffffffffffffffffff163314611d5d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061577d565b8392508273ffffffffffffffffffffffffffffffffffffffff1663ae25532e6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015611dc457600080fd5b505af1158015611dd8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250611dfc9190810190614a0c565b7fffffffff0000000000000000000000000000000000000000000000000000000081166000908152600b602052604090205490925073ffffffffffffffffffffffffffffffffffffffff1690508015611e81576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061561d565b7fffffffff0000000000000000000000000000000000000000000000000000000082166000908152600b60205260409081902080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff8616179055517fd2c6b762299c609bdb96520b58a49bfb80186934d4f71a86a367571a15c0319490611f2290849087906155a3565b60405180910390a150505050565b611f386143de565b611f41826136d1565b6020808301829052600091825260049052604090819020549082015260808201511515611f755760015b60ff168152610f07565b60a08201511515611f87576002611f6b565b60a0820151604082015110611f9d576005611f6b565b6101008201514210611fb0576004611f6b565b60208082015160009081526005909152604090205460ff1615611fd4576006611f6b565b610120820151825173ffffffffffffffffffffffffffffffffffffffff90811660009081526006602090815260408083206060880151909416835292905220541115612021576006611f6b565b60038152919050565b60005460ff1615612067576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016600117905561209b81612eff565b50600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00169055565b600660209081526000928352604080842090915290825290205481565b60018054604080516020600284861615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f810184900484028201840190925281815292918301828280156121865780601f1061215b57610100808354040283529160200191612186565b820191906000526020600020905b81548152906001019060200180831161216957829003601f168201915b505050505081565b612196614386565b606060008060006121a5614386565b8860008151811015156121b457fe5b906020019060200201516101600151945088519350600092505b828414612257578489848151811015156121e457fe5b906020019060200201516101600181905250612204888760200151612f7d565b9150612230898481518110151561221757fe5b90602001906020020151838986815181101515610e8e57fe5b905061223c868261257d565b6020860151881161224c57612257565b6001909201916121ce565b50505050509392505050565b60025481565b612271614386565b6060600080600080612281614386565b60005460ff16156122be576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061576d565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011781558a518b919081106122f657fe5b906020019060200201516101400151955089519450600093505b8385146123a557858a8581518110151561232657fe5b6020908102909101015161014001528651612342908a90612f7d565b92506123558a8581518110151561196457fe5b91506123818a8581518110151561236857fe5b90602001906020020151838a8781518110151561074957fe5b905061238d878261257d565b8651891161239a576123a5565b600190930192612310565b5050600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016905550929695505050505050565b600a5473ffffffffffffffffffffffffffffffffffffffff1681565b60035473ffffffffffffffffffffffffffffffffffffffff163314612448576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061577d565b73ffffffffffffffffffffffffffffffffffffffff8116156124a557600380547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b60408051808201909152600581527f322e302e30000000000000000000000000000000000000000000000000000000602082015281565b6124e7614386565b6124ef6143de565b60008060006124fd88611f30565b93506125076125df565b925061251588858589612611565b6125278860a001518560400151612f7d565b915061253387836136df565b9050612546888589848960000151612990565b61255088826136f5565b945061256788848660200151876040015189612aa9565b612572888487613756565b505050509392505050565b8151815161258b9190613864565b8252602080830151908201516125a19190613864565b6020830152604080830151908201516125ba9190613864565b6040830152606080830151908201516125d39190613864565b60609092019190915250565b600a5460009073ffffffffffffffffffffffffffffffffffffffff16818115612608578161260a565b335b9392505050565b825160ff1660031461264f576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061579d565b606084015173ffffffffffffffffffffffffffffffffffffffff16156126c257606084015173ffffffffffffffffffffffffffffffffffffffff1633146126c2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906157ad565b602084015173ffffffffffffffffffffffffffffffffffffffff161561274d578173ffffffffffffffffffffffffffffffffffffffff16846020015173ffffffffffffffffffffffffffffffffffffffff1614151561274d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906155ed565b604083015115156127a35761276b836020015185600001518361135b565b15156127a3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061565d565b50505050565b6127bb8260a001518260a001516138ae565b6127cd836080015183608001516138ae565b1015612805576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906157bd565b5050565b6128116143af565b6000806000806128258960a0015188612f7d565b935061283a89608001518a60a0015186613909565b925061284a8860a0015187612f7d565b915061285f88608001518960a0015184613909565b90508084106128a25760208086018051839052805182018490525151865182015260808a015160a08b015187519092015161289a9290613909565b8551526128df565b845183905284516020908101859052855181015190860180519190915260a089015160808a01519151516128d69290613986565b60208087015101525b84515160208087015101516128f49190612f7d565b604086015284515160808a015160c08b0151612911929190613909565b85516040015284516020015160a08a015160e08b0151612932929190613909565b855160600152602085015151608089015160c08a0151612953929190613909565b8560200151604001818152505061297b8560200151602001518960a001518a60e00151613909565b60208601516060015250505050949350505050565b8215156129c9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156dd565b82821115612a03576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156cd565b8460a00151612a16856040015184613864565b1115612a4e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906155fd565b612a5c8560800151836138ae565b612a6a828760a001516138ae565b1115612aa2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061575d565b5050505050565b612ab7828260200151613864565b600084815260046020908152604091829020929092558681015187518451938501518584015160608701516101408c01516101608d015196518b9873ffffffffffffffffffffffffffffffffffffffff9788169897909616967f0bcc4c97732e47d9946f229edb95f5b6323f601300e4690de719993f3c37112996612b46968f96339692959194909390615433565b60405180910390a45050505050565b60018054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101008789161502019095169490940493840181900481028201810190925282815260609390929091830182828015612bfe5780601f10612bd357610100808354040283529160200191612bfe565b820191906000526020600020905b815481529060010190602001808311612be157829003601f168201915b50505050509050612c2685610140015186600001518660000151856020015160200151613a23565b61014084015184518651845160200151612c4293929190613a23565b612c5b8561014001518660000151858560400151613a23565b612c778186600001518760400151856000015160400151613a23565b612c938185600001518660400151856020015160400151613a23565b836040015173ffffffffffffffffffffffffffffffffffffffff16856040015173ffffffffffffffffffffffffffffffffffffffff161415612cfd57612cf881848760400151612cf3866000015160600151876020015160600151613864565b613a23565b612aa2565b612d1581848760400151856000015160600151613a23565b612aa281848660400151856020015160600151613a23565b604080517fb4be83d5000000000000000000000000000000000000000000000000000000006020808301919091526060602483018181528751608485019081528884015160a48601529488015160c48501529087015160e4840152608087015161010484015260a087015161012484015260c087015161014484015260e08701516101648401526101008701516101848401526101208701516101a4840152610140870180516101c485019081526101608901516101e4860152610180905251805161020485018190529394919384936044870192849261022489019291820191601f82010460005b81811015612e34578351855260209485019490930192600101612e16565b50505050818103610160808401919091528a0151805180835260209283019291820191601f82010460005b81811015612e7d578351855260209485019490930192600101612e5f565b50505089845250848103602093840190815288518083529093918201918981019190601f82010460005b81811015612ec5578351855260209485019490930192600101612ea7565b5050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08883030188525060405250505050509392505050565b612f076143de565b612f1082611f30565b9050612f1c8282613bed565b612805828260200151613d04565b612f32614386565b612f3d8484846124df565b6020810151909150831461260a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061574d565b600082821115612fb9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061560d565b508082035b92915050565b6000808251111515613002576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156fd565b815182907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff810190811061303257fe5b016020015182517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01909252507f0100000000000000000000000000000000000000000000000000000000000000908190040290565b6000816020018351101515156130ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061562d565b50016020015190565b6040516000906060907f1626ba7e000000000000000000000000000000000000000000000000000000009061310e908790869060240161554e565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0818403018152919052602080820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909416939093178352815191935090829081885afa8080156131ab576001811461321c57612572565b7f08c379a0000000000000000000000000000000000000000000000000000000006000527c20000000000000000000000000000000000000000000000000000000006020527c0c57414c4c45545f4552524f5200000000000000000000000000000000604052600060605260646000fd5b50505195945050505050565b60006014825110151515613268576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061578d565b613276826014845103613dab565b82517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec019092525090565b6040516000906060907f9363470200000000000000000000000000000000000000000000000000000000906132de90879087908790602401615521565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0818403018152919052602080820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931783528151919350908290818a5afa80801561337b57600181146133ec576133f1565b7f08c379a0000000000000000000000000000000000000000000000000000000006000527c20000000000000000000000000000000000000000000000000000000006020527c0f56414c494441544f525f4552524f5200000000000000000000000000604052600060605260646000fd5b825194505b50505050949350505050565b6000808311613438576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061564d565b61344b61344585846138ae565b84613e0c565b949350505050565b604080517f5a65726f45785472616e73616374696f6e2800000000000000000000000000006020808301919091527f75696e743235362073616c742c0000000000000000000000000000000000000060328301527f61646472657373207369676e6572416464726573732c00000000000000000000603f8301527f627974657320646174610000000000000000000000000000000000000000000060558301527f2900000000000000000000000000000000000000000000000000000000000000605f830152825180830384018152606090920192839052815160009384938493909282918401908083835b6020831061357c57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161353f565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018019909216911617905260405191909301819003812089519097508995509093508392850191508083835b6020831061361257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016135d5565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990921691161790526040805192909401829003822097825281019a909a525073ffffffffffffffffffffffffffffffffffffffff97909716968801969096525050606085015250506080909120919050565b600280546040517f190100000000000000000000000000000000000000000000000000000000000081529182015260228101919091526042902090565b6000612fbe611afd83613e23565b60008183106136ee578161260a565b5090919050565b6136fd614386565b6020810182905260a08301516080840151613719918491613909565b808252608084015160c0850151613731929190613909565b604082015260a083015160e084015161374b918491613909565b606082015292915050565b60018054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61010087891615020190951694909404938401819004810282018101909252828152606093909290918301828280156137ff5780601f106137d4576101008083540402835291602001916137ff565b820191906000526020600020905b8154815290600101906020018083116137e257829003601f168201915b5050505050905061381f8461014001518560000151858560000151613a23565b6138388461016001518486600001518560200151613a23565b61385081856000015186604001518560400151613a23565b6127a3818486604001518560600151613a23565b6000828201838110156138a3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061567d565b8091505b5092915050565b6000808315156138c157600091506138a7565b508282028284828115156138d157fe5b04146138a3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061567d565b6000808311613944576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061564d565b61394f84848461427c565b15613438576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156ad565b60008083116139c1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061564d565b6139cc848484614301565b15613a03576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156ad565b61344b613445613a1386856138ae565b613a1e866001612f7d565b613864565b600080600083118015613a6257508373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614155b15613be5578551600310613aa2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061573d565b50506020848101517fffffffff00000000000000000000000000000000000000000000000000000000166000818152600b90925260409091205473ffffffffffffffffffffffffffffffffffffffff16801515613b2b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906156ed565b604051660fffffffffffe0603f885101168060840182017fa85e59e40000000000000000000000000000000000000000000000000000000083526080600484015273ffffffffffffffffffffffffffffffffffffffff8816602484015273ffffffffffffffffffffffffffffffffffffffff87166044840152856064840152608483015b81811015613bc757895181526020998a019901613baf565b61020084858403866000895af1801515613bdf573d85fd5b50505050505b505050505050565b805160009060ff16600314613c2e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061579d565b606083015173ffffffffffffffffffffffffffffffffffffffff1615613ca157606083015173ffffffffffffffffffffffffffffffffffffffff163314613ca1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c6906157ad565b613ca96125df565b835190915073ffffffffffffffffffffffffffffffffffffffff808316911614613cff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061566d565b505050565b6000818152600560205260409081902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660011790558281015183516101408501516101608601519351859473ffffffffffffffffffffffffffffffffffffffff9485169493909316927fdc47b3613d9fe400085f6dbdc99453462279057e6207385042827ed6b1a62cf792613d9f923392906154b7565b60405180910390a45050565b600081601401835110151515613ded576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061578d565b50016014015173ffffffffffffffffffffffffffffffffffffffff1690565b6000808284811515613e1a57fe5b04949350505050565b604080517f4f726465722800000000000000000000000000000000000000000000000000006020808301919091527f61646472657373206d616b6572416464726573732c000000000000000000000060268301527f616464726573732074616b6572416464726573732c0000000000000000000000603b8301527f6164647265737320666565526563697069656e74416464726573732c0000000060508301527f616464726573732073656e646572416464726573732c00000000000000000000606c8301527f75696e74323536206d616b65724173736574416d6f756e742c0000000000000060828301527f75696e743235362074616b65724173736574416d6f756e742c00000000000000609b8301527f75696e74323536206d616b65724665652c00000000000000000000000000000060b48301527f75696e743235362074616b65724665652c00000000000000000000000000000060c58301527f75696e743235362065787069726174696f6e54696d655365636f6e64732c000060d68301527f75696e743235362073616c742c0000000000000000000000000000000000000060f48301527f6279746573206d616b65724173736574446174612c00000000000000000000006101018301527f62797465732074616b65724173736574446174610000000000000000000000006101168301527f290000000000000000000000000000000000000000000000000000000000000061012a830152825161010b81840301815261012b90920192839052815160009384938493849391929182918401908083835b602083106140ab57805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161406e565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990921691161790526040519190930181900381206101408b0151805191995095509093508392850191508083835b6020831061414657805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe09092019160209182019101614109565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01801990921691161790526040519190930181900381206101608b0151805191985095509093508392850191508083835b602083106141e157805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016141a4565b5181516020939093036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff018019909116921691909117905260405192018290039091207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0890180516101408b018051610160909c0180519a84529881529288526101a0822091529890525050509190525090919050565b6000808084116142b8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061564d565b8215806142c3575084155b156142d15760009150610a88565b838015156142db57fe5b85840990506142ea85846138ae565b6142f66103e8836138ae565b101595945050505050565b60008080841161433d576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c69061564d565b821580614348575084155b156143565760009150610a88565b8380151561436057fe5b8584099050836143708583612f7d565b81151561437957fe5b0690506142ea85846138ae565b608060405190810160405280600081526020016000815260200160008152602001600081525090565b610120604051908101604052806143c4614386565b81526020016143d1614386565b8152602001600081525090565b604080516060810182526000808252602082018190529181019190915290565b600061260a82356158b0565b6000601f8201831361441b57600080fd5b813561442e6144298261583f565b615818565b81815260209384019390925082018360005b8381101561446c578135860161445688826145bc565b8452506020928301929190910190600101614440565b5050505092915050565b6000601f8201831361448757600080fd5b81356144956144298261583f565b81815260209384019390925082018360005b8381101561446c57813586016144bd888261460b565b84525060209283019291909101906001016144a7565b6000601f820183136144e457600080fd5b81356144f26144298261583f565b9150818183526020840193506020810190508385602084028201111561451757600080fd5b60005b8381101561446c578161452d888261454f565b845250602092830192919091019060010161451a565b600061260a82356158c9565b600061260a82356158ce565b600061260a82356158d1565b600061260a82516158d1565b600080601f8301841361458557600080fd5b50813567ffffffffffffffff81111561459d57600080fd5b6020830191508360018202830111156145b557600080fd5b9250929050565b6000601f820183136145cd57600080fd5b81356145db61442982615860565b915080825260208301602083018583830111156145f757600080fd5b614602838284615907565b50505092915050565b6000610180828403121561461e57600080fd5b614629610180615818565b9050600061463784846143fe565b8252506020614648848483016143fe565b602083015250604061465c848285016143fe565b6040830152506060614670848285016143fe565b60608301525060806146848482850161454f565b60808301525060a06146988482850161454f565b60a08301525060c06146ac8482850161454f565b60c08301525060e06146c08482850161454f565b60e0830152506101006146d58482850161454f565b610100830152506101206146eb8482850161454f565b6101208301525061014082013567ffffffffffffffff81111561470d57600080fd5b614719848285016145bc565b6101408301525061016082013567ffffffffffffffff81111561473b57600080fd5b614747848285016145bc565b6101608301525092915050565b60006020828403121561476657600080fd5b600061344b84846143fe565b6000806040838503121561478557600080fd5b600061479185856143fe565b92505060206147a2858286016143fe565b9150509250929050565b600080604083850312156147bf57600080fd5b60006147cb85856143fe565b92505060206147a285828601614543565b6000602082840312156147ee57600080fd5b813567ffffffffffffffff81111561480557600080fd5b61344b84828501614476565b60008060006060848603121561482657600080fd5b833567ffffffffffffffff81111561483d57600080fd5b61484986828701614476565b935050602084013567ffffffffffffffff81111561486657600080fd5b614872868287016144d3565b925050604084013567ffffffffffffffff81111561488f57600080fd5b61489b8682870161440a565b9150509250925092565b6000806000606084860312156148ba57600080fd5b833567ffffffffffffffff8111156148d157600080fd5b6148dd86828701614476565b93505060206148728682870161454f565b60006020828403121561490057600080fd5b600061344b848461454f565b6000806040838503121561491f57600080fd5b6000614791858561454f565b6000806000806060858703121561494157600080fd5b600061494d878761454f565b945050602061495e878288016143fe565b935050604085013567ffffffffffffffff81111561497b57600080fd5b61498787828801614573565b95989497509550505050565b6000806000606084860312156149a857600080fd5b60006149b4868661454f565b93505060206149c5868287016143fe565b925050604084013567ffffffffffffffff8111156149e257600080fd5b61489b868287016145bc565b600060208284031215614a0057600080fd5b600061344b848461455b565b600060208284031215614a1e57600080fd5b600061344b8484614567565b600060208284031215614a3c57600080fd5b813567ffffffffffffffff811115614a5357600080fd5b61344b8482850161460b565b60008060008060808587031215614a7557600080fd5b843567ffffffffffffffff811115614a8c57600080fd5b614a988782880161460b565b945050602085013567ffffffffffffffff811115614ab557600080fd5b614ac18782880161460b565b935050604085013567ffffffffffffffff811115614ade57600080fd5b614aea878288016145bc565b925050606085013567ffffffffffffffff811115614b0757600080fd5b614b13878288016145bc565b91505092959194509250565b600080600060608486031215614b3457600080fd5b833567ffffffffffffffff811115614b4b57600080fd5b614b578682870161460b565b93505060206149c58682870161454f565b60008060008060008060808789031215614b8157600080fd5b6000614b8d898961454f565b9650506020614b9e89828a016143fe565b955050604087013567ffffffffffffffff811115614bbb57600080fd5b614bc789828a01614573565b9450945050606087013567ffffffffffffffff811115614be657600080fd5b614bf289828a01614573565b92509250509295509295509295565b614c0a816158b0565b82525050565b6000614c1b826158ac565b808452602084019350614c2d836158a6565b60005b82811015614c5d57614c438683516153e5565b614c4c826158a6565b606096909601959150600101614c30565b5093949350505050565b614c0a816158c9565b614c0a816158ce565b614c0a816158d1565b6000614c8d826158ac565b808452614ca1816020860160208601615913565b614caa8161593f565b9093016020019392505050565b614c0a816158fc565b601281527f4c454e4754485f36355f52455155495245440000000000000000000000000000602082015260400190565b600d81527f494e56414c49445f54414b455200000000000000000000000000000000000000602082015260400190565b600e81527f4f524445525f4f56455246494c4c000000000000000000000000000000000000602082015260400190565b601181527f55494e543235365f554e444552464c4f57000000000000000000000000000000602082015260400190565b601a81527f41535345545f50524f58595f414c52454144595f455849535453000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f33325f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601581527f5349474e41545552455f554e535550504f525445440000000000000000000000602082015260400190565b601081527f4449564953494f4e5f42595f5a45524f00000000000000000000000000000000602082015260400190565b601781527f494e56414c49445f4f524445525f5349474e4154555245000000000000000000602082015260400190565b600d81527f494e56414c49445f4d414b455200000000000000000000000000000000000000602082015260400190565b601081527f55494e543235365f4f564552464c4f5700000000000000000000000000000000602082015260400190565b600f81527f494e56414c49445f54585f484153480000000000000000000000000000000000602082015260400190565b601181527f494e56414c49445f5349474e4154555245000000000000000000000000000000602082015260400190565b600e81527f524f554e44494e475f4552524f52000000000000000000000000000000000000602082015260400190565b601081527f4641494c45445f455845435554494f4e00000000000000000000000000000000602082015260400190565b600d81527f54414b45525f4f56455250415900000000000000000000000000000000000000602082015260400190565b601481527f494e56414c49445f54414b45525f414d4f554e54000000000000000000000000602082015260400190565b601a81527f41535345545f50524f58595f444f45535f4e4f545f4558495354000000000000602082015260400190565b602181527f475245415445525f5448414e5f5a45524f5f4c454e4754485f5245515549524560208201527f4400000000000000000000000000000000000000000000000000000000000000604082015260600190565b601181527f5349474e41545552455f494c4c4547414c000000000000000000000000000000602082015260400190565b601e81527f4c454e4754485f475245415445525f5448414e5f305f52455155495245440000602082015260400190565b601781527f494e56414c49445f4e45575f4f524445525f45504f4348000000000000000000602082015260400190565b601e81527f4c454e4754485f475245415445525f5448414e5f335f52455155495245440000602082015260400190565b601481527f434f4d504c4554455f46494c4c5f4641494c4544000000000000000000000000602082015260400190565b601281527f494e56414c49445f46494c4c5f50524943450000000000000000000000000000602082015260400190565b601281527f5245454e5452414e43595f494c4c4547414c0000000000000000000000000000602082015260400190565b601381527f4f4e4c595f434f4e54524143545f4f574e455200000000000000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601081527f4f524445525f554e46494c4c41424c4500000000000000000000000000000000602082015260400190565b600e81527f494e56414c49445f53454e444552000000000000000000000000000000000000602082015260400190565b601881527f4e454741544956455f5350524541445f52455155495245440000000000000000602082015260400190565b601481527f494e56414c49445f54585f5349474e4154555245000000000000000000000000602082015260400190565b601181527f4c454e4754485f305f5245515549524544000000000000000000000000000000602082015260400190565b805160808301906153738482614c70565b5060208201516153866020850182614c70565b5060408201516153996040850182614c70565b5060608201516127a36060850182614c70565b80516101208301906153be8482615362565b5060208201516153d16080850182615362565b5060408201516127a3610100850182614c70565b805160608301906153f6848261541c565b5060208201516154096020850182614c70565b5060408201516127a36040850182614c70565b614c0a816158f6565b60208101612fbe8284614c01565b6101008101615442828b614c01565b61544f602083018a614c01565b61545c6040830189614c70565b6154696060830188614c70565b6154766080830187614c70565b61548360a0830186614c70565b81810360c08301526154958185614c82565b905081810360e08301526154a98184614c82565b9a9950505050505050505050565b606081016154c58286614c01565b81810360208301526154d78185614c82565b905081810360408301526154eb8184614c82565b95945050505050565b6020808252810161260a8184614c10565b60208101612fbe8284614c67565b60208101612fbe8284614c70565b6060810161552f8286614c70565b61553c6020830185614c01565b81810360408301526154eb8184614c82565b6040810161555c8285614c70565b818103602083015261344b8184614c82565b6080810161557c8287614c70565b615589602083018661541c565b6155966040830185614c70565b6154eb6060830184614c70565b604081016155b18285614c79565b61260a6020830184614c01565b6020808252810161260a8184614c82565b60208101612fbe8284614cb7565b60208082528101612fbe81614cc0565b60208082528101612fbe81614cf0565b60208082528101612fbe81614d20565b60208082528101612fbe81614d50565b60208082528101612fbe81614d80565b60208082528101612fbe81614db0565b60208082528101612fbe81614e06565b60208082528101612fbe81614e36565b60208082528101612fbe81614e66565b60208082528101612fbe81614e96565b60208082528101612fbe81614ec6565b60208082528101612fbe81614ef6565b60208082528101612fbe81614f26565b60208082528101612fbe81614f56565b60208082528101612fbe81614f86565b60208082528101612fbe81614fb6565b60208082528101612fbe81614fe6565b60208082528101612fbe81615016565b60208082528101612fbe81615046565b60208082528101612fbe8161509c565b60208082528101612fbe816150cc565b60208082528101612fbe816150fc565b60208082528101612fbe8161512c565b60208082528101612fbe8161515c565b60208082528101612fbe8161518c565b60208082528101612fbe816151bc565b60208082528101612fbe816151ec565b60208082528101612fbe8161521c565b60208082528101612fbe81615272565b60208082528101612fbe816152a2565b60208082528101612fbe816152d2565b60208082528101612fbe81615302565b60208082528101612fbe81615332565b60808101612fbe8284615362565b6101208101612fbe82846153ac565b60608101612fbe82846153e5565b60405181810167ffffffffffffffff8111828210171561583757600080fd5b604052919050565b600067ffffffffffffffff82111561585657600080fd5b5060209081020190565b600067ffffffffffffffff82111561587757600080fd5b506020601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160190565b60200190565b5190565b73ffffffffffffffffffffffffffffffffffffffff1690565b151590565b90565b7fffffffff000000000000000000000000000000000000000000000000000000001690565b60ff1690565b6000612fbe826158b0565b82818337506000910152565b60005b8381101561592e578181015183820152602001615916565b838111156127a35750506000910152565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016905600a265627a7a72305820d41ee66f45c4d1637cb6e5f109447c6d5d7fef3204a685dc442151c0f029b7da6c6578706572696d656e74616cf50037&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x1458d05345aa0372fb580f207529f32cbb6e9242890d36a93225785d4496083e&quot;: &quot;0x0000000000000000000000001dc4c1cefef38a777b15aa20260a54e584b16c48&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x5409ed021d9299bf6814279a6a1411a7e866a631&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xac6bd1cc338c2000&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;22&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100965763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde038114610098578063095ea7b31461014657806318160ddd1461018657806323b872dd146101a8578063313ce567146101ee57806370a082311461021457806395d89b411461024f578063a9059cbb146102fd578063dd62ed3e1461033d575bfe5b34156100a057fe5b6100a861037e565b60408051602080825283518183015283519192839290830191850190808383821561010c575b80518252602083111561010c577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016100ce565b505050905090810190601f1680156101385780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561014e57fe5b61017273ffffffffffffffffffffffffffffffffffffffff600435166024356103b5565b604080519115158252519081900360200190f35b341561018e57fe5b61019661042d565b60408051918252519081900360200190f35b34156101b057fe5b61017273ffffffffffffffffffffffffffffffffffffffff60043581169060243516604435610433565b604080519115158252519081900360200190f35b34156101f657fe5b6101fe6105d4565b6040805160ff9092168252519081900360200190f35b341561021c57fe5b61019673ffffffffffffffffffffffffffffffffffffffff600435166105d9565b60408051918252519081900360200190f35b341561025757fe5b6100a8610605565b60408051602080825283518183015283519192839290830191850190808383821561010c575b80518252602083111561010c577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016100ce565b505050905090810190601f1680156101385780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561030557fe5b61017273ffffffffffffffffffffffffffffffffffffffff6004351660243561063c565b604080519115158252519081900360200190f35b341561034557fe5b61019673ffffffffffffffffffffffffffffffffffffffff60043581169060243516610727565b60408051918252519081900360200190f35b60408051808201909152601181527f30782050726f746f636f6c20546f6b656e000000000000000000000000000000602082015281565b73ffffffffffffffffffffffffffffffffffffffff338116600081815260016020908152604080832094871680845294825280832086905580518681529051929493927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925929181900390910190a35060015b92915050565b60035481565b73ffffffffffffffffffffffffffffffffffffffff808416600081815260016020908152604080832033909516835293815283822054928252819052918220548390108015906104835750828110155b80156104b6575073ffffffffffffffffffffffffffffffffffffffff841660009081526020819052604090205483810110155b156105c65773ffffffffffffffffffffffffffffffffffffffff808516600090815260208190526040808220805487019055918716815220805484900390557fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8110156105585773ffffffffffffffffffffffffffffffffffffffff808616600090815260016020908152604080832033909416835292905220805484900390555b8373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef856040518082815260200191505060405180910390a3600191506105cb565b600091505b5b509392505050565b601281565b73ffffffffffffffffffffffffffffffffffffffff81166000908152602081905260409020545b919050565b60408051808201909152600381527f5a52580000000000000000000000000000000000000000000000000000000000602082015281565b73ffffffffffffffffffffffffffffffffffffffff3316600090815260208190526040812054829010801590610699575073ffffffffffffffffffffffffffffffffffffffff831660009081526020819052604090205482810110155b156107185773ffffffffffffffffffffffffffffffffffffffff33811660008181526020818152604080832080548890039055938716808352918490208054870190558351868152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a3506001610427565b506000610427565b5b92915050565b73ffffffffffffffffffffffffffffffffffffffff8083166000908152600160209081526040808320938516835292905220545b929150505600a165627a7a723058201b5b70cf82a73dec658c2e60ab9a0f8e2ba01a74b66a6f5b0402f56d2ea0ffcf0029&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0xd37b858806ebf992fe75c1dd1a61cc7625ea52328d19005ba6b8b62506ae5306&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 5,</span>
<span class="term-fg32">+      &quot;supportedProtocolVersions&quot;: [</span>
<span class="term-fg32">+        67,</span>
<span class="term-fg32">+        66</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 1561651,</span>
<span class="term-fg32">+      &quot;berlinBlock&quot;: 4460644,</span>
<span class="term-fg32">+      &quot;londonBlock&quot;: 5062605,</span>
<span class="term-fg32">+      &quot;terminalTotalDifficulty&quot;: 10790000,</span>
<span class="term-fg32">+      &quot;terminalTotalDifficultyPassed&quot;: true,</span>
<span class="term-fg32">+      &quot;clique&quot;: {</span>
<span class="term-fg32">+        &quot;period&quot;: 15,</span>
<span class="term-fg32">+        &quot;epoch&quot;: 30000</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;trustedCheckpoint&quot;: {</span>
<span class="term-fg32">+        &quot;sectionIndex&quot;: 210,</span>
<span class="term-fg32">+        &quot;sectionHead&quot;: &quot;0xbb11eaf551a6c06f74a6c7bbfe1699cbf64b8f248b64691da916dd443176db2f&quot;,</span>
<span class="term-fg32">+        &quot;chtRoot&quot;: &quot;0x9934ae326d00d9c7de2e074c0e51689efb7fa7fcba18929ff4279c27259c45e6&quot;,</span>
<span class="term-fg32">+        &quot;bloomRoot&quot;: &quot;0x7fe3bd4fd45194aa8a5cfe5ac590edff1f870d3d98d3c310494e7f67613a87ff&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;trustedCheckpointOracle&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x18ca0e045f0d772a851bc7e48357bcaab0a0795d&quot;,</span>
<span class="term-fg32">+        &quot;signers&quot;: [</span>
<span class="term-fg32">+          &quot;0x4769bcad07e3b938b7f43eb7d278bc7cb9effb38&quot;,</span>
<span class="term-fg32">+          &quot;0x78d1ad571a1a09d60d9bbf25894b44e4c8859595&quot;,</span>
<span class="term-fg32">+          &quot;0x286834935f4a8cfb4ff4c77d5770c2775ae2b0e7&quot;,</span>
<span class="term-fg32">+          &quot;0xb86e2b0ab5a4b1373e40c51a7c712c70ba2f9f8e&quot;,</span>
<span class="term-fg32">+          &quot;0x0df8fa387c602ae62559cc4afa4972a7045d6707&quot;</span>
<span class="term-fg32">+        ],</span>
<span class="term-fg32">+        &quot;threshold&quot;: 2</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;13536&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1549153018&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;8000000&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;transactionHash&quot;: &quot;0x6974f745a004f030bebb1c01d4595edbda2fafcf01c0bfbd5d335711e2a7b04e&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf92e9e1684ee6b2800832c8c7f8080b92e4c60806040523480156200001157600080fd5b5060405162002d2c38038062002d2c83398101806040526200003791908101906200051d565b6000805433600160a060020a031991821617825560018054909116600160a060020a0386161790558251849084908490849081906200007e906004906020870190620003d0565b50825162000094906005906020860190620003d0565b50620000b0836010640100000000620019476200036f82021704565b9150620000cd846010640100000000620019476200036f82021704565b60028054600160a060020a03948516600160a060020a031991821617909155600380549285169290911691909117905550600154604080517f4552433230546f6b656e28616464726573732900000000000000000000000000815290519081900360130181207f6070410800000000000000000000000000000000000000000000000000000000825291909216945063607041089350620001739250906004016200068e565b602060405180830381600087803b1580156200018e57600080fd5b505af1158015620001a3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620001c99190810190620004f4565b9050600160a060020a038116151562000219576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200021090620006b0565b60405180910390fd5b6002546040517f095ea7b3000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063095ea7b39062000268908490600019906004016200066f565b602060405180830381600087803b1580156200028357600080fd5b505af115801562000298573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620002be9190810190620005a1565b506003546040517f095ea7b3000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063095ea7b3906200030e908490600019906004016200066f565b602060405180830381600087803b1580156200032957600080fd5b505af11580156200033e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620003649190810190620005a1565b50505050506200077a565b600081601401835110151515620003b4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000210906200069e565b506014818301810151910190600160a060020a03165b92915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200041357805160ff191683800117855562000443565b8280016001018555821562000443579182015b828111156200044357825182559160200191906001019062000426565b506200045192915062000455565b5090565b6200047291905b808211156200045157600081556001016200045c565b90565b600062000483825162000711565b9392505050565b600062000483825162000742565b6000601f82018313620004aa57600080fd5b8151620004c1620004bb82620006e9565b620006c2565b91508082526020830160208301858383011115620004de57600080fd5b620004eb83828462000747565b50505092915050565b6000602082840312156200050757600080fd5b600062000515848462000475565b949350505050565b6000806000606084860312156200053357600080fd5b600062000541868662000475565b93505060208401516001604060020a038111156200055e57600080fd5b6200056c8682870162000498565b92505060408401516001604060020a038111156200058957600080fd5b620005978682870162000498565b9150509250925092565b600060208284031215620005b457600080fd5b60006200051584846200048a565b620005cd8162000711565b82525050565b620005cd816200071d565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601881527f554e524547495354455245445f41535345545f50524f58590000000000000000602082015260400190565b620005cd8162000472565b604081016200067f8285620005c2565b62000483602083018462000664565b60208101620003ca8284620005d3565b60208082528101620003ca81620005de565b60208082528101620003ca8162000634565b6040518181016001604060020a0381118282101715620006e157600080fd5b604052919050565b60006001604060020a038211156200070057600080fd5b506020601f91909101601f19160190565b600160a060020a031690565b7fffffffff000000000000000000000000000000000000000000000000000000001690565b151590565b60005b83811015620007645781810151838201526020016200074a565b8381111562000774576000848401525b50505050565b6125a2806200078a6000396000f30060806040526004361061006c5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166318978e8281146100c8578063630f1e6c146100f25780638da5cb5b146101125780639395525c14610134578063f2fde38b14610147575b60025473ffffffffffffffffffffffffffffffffffffffff1633146100c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612388565b60405180910390fd5b005b6100db6100d6366004611df1565b610167565b6040516100e9929190612488565b60405180910390f35b3480156100fe57600080fd5b506100c661010d366004611eec565b6102f7565b34801561011e57600080fd5b50610127610388565b6040516100e99190612337565b6100db610142366004611d0b565b6103a4565b34801561015357600080fd5b506100c6610162366004611ce5565b61050a565b61016f6119fa565b6101776119fa565b6000806101826105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff610100600188161502019095169490940493840181900481028201810190925282815261025c939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b820191906000526020600020905b81548152906001019060200180831161021057829003601f168201915b50505050508c600081518110151561024157fe5b6020908102909101015161014001519063ffffffff61069616565b156102875761026c8b8b8b6107c3565b935061028084600001518560600151610ac1565b90506102ae565b6102928b8b8b610b03565b9350836060015191506102a68883896107c3565b845190935090505b6102c2846020015184602001518888610d15565b6102e98b60008151811015156102d457fe5b90602001906020020151610140015182610f29565b505097509795505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610348576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b61038383838080601f01602080910402602001604051908101604052809392919081815260200183838082843750879450610f299350505050565b505050565b60005473ffffffffffffffffffffffffffffffffffffffff1681565b6103ac6119fa565b6103b46119fa565b60008060006103c16105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152610441939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b156104925761046a670de0b6b3a7640000610464670de0b6b3a76400008a611045565b3461108f565b92506104778b848c6110e7565b945061048b85600001518660600151610ac1565b90506104d6565b6104ad670d2f13f7789f0000670de0b6b3a76400003461108f565b92506104ba8b848c6110e7565b9450846060015191506104ce89838a6107c3565b855190945090505b6104ea856020015185602001518989610d15565b6104fc8b60008151811015156102d457fe5b505050965096945050505050565b60005473ffffffffffffffffffffffffffffffffffffffff16331461055b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b73ffffffffffffffffffffffffffffffffffffffff8116156105b857600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b600034116105f5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612398565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d0e30db0346040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016000604051808303818588803b15801561067b57600080fd5b505af115801561068f573d6000803e3d6000fd5b5050505050565b6000815183511480156107ba5750816040518082805190602001908083835b602083106106f257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016106b5565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0180199092169116179052604051919093018190038120885190955088945090928392508401908083835b6020831061078757805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161074a565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916145b90505b92915050565b6107cb6119fa565b60608060008060008060006107de6119fa565b8a15156107ea57610ab2565b6004805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561088e5780601f106108635761010080835404028352916020019161088e565b820191906000526020600020905b81548152906001019060200180831161087157829003601f168201915b505060058054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152969e509194509250840190508282801561093d5780601f106109125761010080835404028352916020019161093d565b820191906000526020600020905b81548152906001019060200180831161092057829003601f168201915b50505050509650600095508b519450600093505b838514610a7857878c8581518110151561096757fe5b6020908102909101015161014001528b5187908d908690811061098657fe5b60209081029091010151610160015261099f8b87610ac1565b9250610a068c858151811015156109b257fe5b9060200190602002015160a00151610a008e878151811015156109d157fe5b90602001906020020151608001518f888151811015156109ed57fe5b9060200190602002015160e00151610ac1565b8561128b565b9150610a418c85815181101515610a1957fe5b90602001906020020151838c87815181101515610a3257fe5b906020019060200201516112e6565b9050610a4d898261135e565b610a5f89600001518a60600151610ac1565b95508a8610610a6d57610a78565b600190930192610951565b8a861015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b50505050505050509392505050565b600082821115610afd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123b8565b50900390565b610b0b6119fa565b606080600080600080610b1c6119fa565b60008b6000815181101515610b2d57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929b5092909190830182828015610be55780601f10610bba57610100808354040283529160200191610be5565b820191906000526020600020905b815481529060010190602001808311610bc857829003601f168201915b505050505096508b519550600094505b848614610cdb57878c86815181101515610c0b57fe5b6020908102909101015161014001528b5187908d9087908110610c2a57fe5b6020908102909101015161016001528851610c46908c90610ac1565b9350610c898c86815181101515610c5957fe5b9060200190602002015160a001518d87815181101515610c7557fe5b90602001906020020151608001518661128b565b9250610cb58c86815181101515610c9c57fe5b90602001906020020151848c88815181101515610a3257fe5b9150610cc1898361135e565b5087518a8110610cd057610cdb565b600190940193610bf5565b8a811015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b600080808066b1a2bc2ec50000861115610d5b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612448565b610d658888611045565b935034841115610da1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123a8565b610dab3485610ac1565b9250610dc086670de0b6b3a76400008a61108f565b915082821115610dfc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612428565b6000831115610f1f576002546040517f2e1a7d4d00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff90911690632e1a7d4d90610e5b9086906004016124a4565b600060405180830381600087803b158015610e7557600080fd5b505af1158015610e89573d6000803e3d6000fd5b505050506000821115610edb5760405173ffffffffffffffffffffffffffffffffffffffff86169083156108fc029084906000818181858888f19350505050158015610ed9573d6000803e3d6000fd5b505b610ee58383610ac1565b90506000811115610f1f57604051339082156108fc029083906000818181858888f19350505050158015610f1d573d6000803e3d6000fd5b505b5050505050505050565b6000610f3b838263ffffffff6113c016565b604080517f4552433230546f6b656e28616464726573732900000000000000000000000000815290519081900360130190209091507fffffffff0000000000000000000000000000000000000000000000000000000080831691161415610fab57610fa6838361142d565b610383565b604080517f455243373231546f6b656e28616464726573732c75696e7432353629000000008152905190819003601c0190207fffffffff000000000000000000000000000000000000000000000000000000008281169116141561101357610fa6838361161b565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123f8565b600082820183811015611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b8091505b5092915050565b60008083116110ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d78584611703565b8461175e565b90505b9392505050565b6110ef6119fa565b60608060008060006110ff6119fa565b89600081518110151561110e57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929950929091908301828280156111c65780601f1061119b576101008083540402835291602001916111c6565b820191906000526020600020905b8154815290600101906020018083116111a957829003601f168201915b5050505050945089519350600092505b82841461127e57858a848151811015156111ec57fe5b602090810290910101516101400152895185908b908590811061120b57fe5b90602001906020020151610160018190525061122b898860200151610ac1565b91506112578a8481518110151561123e57fe5b90602001906020020151838a86815181101515610a3257fe5b9050611263878261135e565b602087015189116112735761127e565b6001909201916111d6565b5050505050509392505050565b60008083116112c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d76112d68685611703565b6112e1866001610ac1565b611045565b6112ee6119fa565b606060006112fd868686611775565b600154815191935073ffffffffffffffffffffffffffffffffffffffff1691506080908390602082016000855af1801561135457825184526020830151602085015260408301516040850152606083015160608501525b5050509392505050565b8151815161136c9190611045565b8252602080830151908201516113829190611045565b60208301526040808301519082015161139b9190611045565b6040830152606080830151908201516113b49190611045565b60609092019190915250565b600081600401835110151515611402576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612468565b5001602001517fffffffff000000000000000000000000000000000000000000000000000000001690565b60008061144184601063ffffffff61194716565b604080517f7472616e7366657228616464726573732c75696e7432353629000000000000008152905190819003601901812091935073ffffffffffffffffffffffffffffffffffffffff8416919061149f903390879060240161236d565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931783525181519192909182919080838360005b8381101561154357818101518382015260200161152b565b50505050905090810190601f1680156115705780820380516001836020036101000a031916815260200191505b509150506000604051808303816000865af1925050508015156115bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b3d156115dc575060003d602014156115dc5760206000803e506000515b801515611615576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b50505050565b60008060018314611658576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612478565b61166984601063ffffffff61194716565b915061167c84602463ffffffff6119a816565b6040517f23b872dd00000000000000000000000000000000000000000000000000000000815290915073ffffffffffffffffffffffffffffffffffffffff8316906323b872dd906116d590309033908690600401612345565b600060405180830381600087803b1580156116ef57600080fd5b505af1158015610f1f573d6000803e3d6000fd5b6000808315156117165760009150611088565b5082820282848281151561172657fe5b0414611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b600080828481151561176c57fe5b04949350505050565b604080517fb4be83d5000000000000000000000000000000000000000000000000000000006020808301919091526060602483018181528751608485019081528884015160a48601529488015160c48501529087015160e4840152608087015161010484015260a087015161012484015260c087015161014484015260e08701516101648401526101008701516101848401526101208701516101a4840152610140870180516101c485019081526101608901516101e4860152610180905251805161020485018190529394919384936044870192849261022489019291820191601f82010460005b8181101561187c57835185526020948501949093019260010161185e565b50505050818103610160808401919091528a0151805180835260209283019291820191601f82010460005b818110156118c55783518552602094850194909301926001016118a7565b50505089845250848103602093840190815288518083529093918201918981019190601f82010460005b8181101561190d5783518552602094850194909301926001016118ef565b5050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08883030188525060405250505050509392505050565b600081601401835110151515611989576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612458565b50016014015173ffffffffffffffffffffffffffffffffffffffff1690565b60006107ba83836000816020018351101515156119f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123c8565b50016020015190565b608060405190810160405280600081526020016000815260200160008152602001600081525090565b60006107ba8235612540565b6000601f82018313611a4057600080fd5b8135611a53611a4e826124d9565b6124b2565b81815260209384019390925082018360005b83811015611a915781358601611a7b8882611b41565b8452506020928301929190910190600101611a65565b5050505092915050565b6000601f82018313611aac57600080fd5b8135611aba611a4e826124d9565b81815260209384019390925082018360005b83811015611a915781358601611ae28882611b90565b8452506020928301929190910190600101611acc565b600080601f83018413611b0a57600080fd5b50813567ffffffffffffffff811115611b2257600080fd5b602083019150836001820283011115611b3a57600080fd5b9250929050565b6000601f82018313611b5257600080fd5b8135611b60611a4e826124fa565b91508082526020830160208301858383011115611b7c57600080fd5b611b8783828461255c565b50505092915050565b60006101808284031215611ba357600080fd5b611bae6101806124b2565b90506000611bbc8484611a23565b8252506020611bcd84848301611a23565b6020830152506040611be184828501611a23565b6040830152506060611bf584828501611a23565b6060830152506080611c0984828501611cd9565b60808301525060a0611c1d84828501611cd9565b60a08301525060c0611c3184828501611cd9565b60c08301525060e0611c4584828501611cd9565b60e083015250610100611c5a84828501611cd9565b61010083015250610120611c7084828501611cd9565b6101208301525061014082013567ffffffffffffffff811115611c9257600080fd5b611c9e84828501611b41565b6101408301525061016082013567ffffffffffffffff811115611cc057600080fd5b611ccc84828501611b41565b6101608301525092915050565b60006107ba8235612559565b600060208284031215611cf757600080fd5b6000611d038484611a23565b949350505050565b60008060008060008060c08789031215611d2457600080fd5b863567ffffffffffffffff811115611d3b57600080fd5b611d4789828a01611a9b565b965050602087013567ffffffffffffffff811115611d6457600080fd5b611d7089828a01611a2f565b955050604087013567ffffffffffffffff811115611d8d57600080fd5b611d9989828a01611a9b565b945050606087013567ffffffffffffffff811115611db657600080fd5b611dc289828a01611a2f565b9350506080611dd389828a01611cd9565b92505060a0611de489828a01611a23565b9150509295509295509295565b600080600080600080600060e0888a031215611e0c57600080fd5b873567ffffffffffffffff811115611e2357600080fd5b611e2f8a828b01611a9b565b9750506020611e408a828b01611cd9565b965050604088013567ffffffffffffffff811115611e5d57600080fd5b611e698a828b01611a2f565b955050606088013567ffffffffffffffff811115611e8657600080fd5b611e928a828b01611a9b565b945050608088013567ffffffffffffffff811115611eaf57600080fd5b611ebb8a828b01611a2f565b93505060a0611ecc8a828b01611cd9565b92505060c0611edd8a828b01611a23565b91505092959891949750929550565b600080600060408486031215611f0157600080fd5b833567ffffffffffffffff811115611f1857600080fd5b611f2486828701611af8565b93509350506020611f3786828701611cd9565b9150509250925092565b611f4a81612540565b82525050565b602381527f44454641554c545f46554e4354494f4e5f574554485f434f4e54524143545f4f60208201527f4e4c590000000000000000000000000000000000000000000000000000000000604082015260600190565b601181527f494e56414c49445f4d53475f56414c5545000000000000000000000000000000602082015260400190565b600d81527f4f564552534f4c445f5745544800000000000000000000000000000000000000602082015260400190565b601181527f55494e543235365f554e444552464c4f57000000000000000000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f33325f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601081527f4449564953494f4e5f42595f5a45524f00000000000000000000000000000000602082015260400190565b601081527f55494e543235365f4f564552464c4f5700000000000000000000000000000000602082015260400190565b601781527f554e535550504f525445445f41535345545f50524f5859000000000000000000602082015260400190565b600f81527f5452414e534645525f4641494c45440000000000000000000000000000000000602082015260400190565b601481527f434f4d504c4554455f46494c4c5f4641494c4544000000000000000000000000602082015260400190565b601a81527f494e53554646494349454e545f4554485f52454d41494e494e47000000000000602082015260400190565b601381527f4f4e4c595f434f4e54524143545f4f574e455200000000000000000000000000602082015260400190565b601881527f4645455f50455243454e544147455f544f4f5f4c415247450000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b602581527f475245415445525f4f525f455155414c5f544f5f345f4c454e4754485f52455160208201527f5549524544000000000000000000000000000000000000000000000000000000604082015260600190565b600e81527f494e56414c49445f414d4f554e54000000000000000000000000000000000000602082015260400190565b805160808301906122f9848261232e565b50602082015161230c602085018261232e565b50604082015161231f604085018261232e565b50606082015161161560608501825b611f4a81612559565b602081016107bd8284611f41565b606081016123538286611f41565b6123606020830185611f41565b611d03604083018461232e565b6040810161237b8285611f41565b6110e0602083018461232e565b602080825281016107bd81611f50565b602080825281016107bd81611fa6565b602080825281016107bd81611fd6565b602080825281016107bd81612006565b602080825281016107bd81612036565b602080825281016107bd8161208c565b602080825281016107bd816120bc565b602080825281016107bd816120ec565b602080825281016107bd8161211c565b602080825281016107bd8161214c565b602080825281016107bd8161217c565b602080825281016107bd816121ac565b602080825281016107bd816121dc565b602080825281016107bd8161220c565b602080825281016107bd81612262565b602080825281016107bd816122b8565b610100810161249782856122e8565b6110e060808301846122e8565b602081016107bd828461232e565b60405181810167ffffffffffffffff811182821017156124d157600080fd5b604052919050565b600067ffffffffffffffff8211156124f057600080fd5b5060209081020190565b600067ffffffffffffffff82111561251157600080fd5b506020601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160190565b73ffffffffffffffffffffffffffffffffffffffff1690565b90565b828183375060009101525600a265627a7a72305820d9f418f11e0f91f06f6f9d22924be0add925495eeb76a6388b5417adb505eeb36c6578706572696d656e74616cf5003700000000000000000000000048bacb9266a570d521063ef5dd96e61686dbe788000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000000b1ba0af832d7c05fd64161e0db78e85978e8082000000000000000000000000000000000000000000000000000000001ba0a7c6b0c9a5cb47eb4a8449556851a943353640d4fe93a64eb89eff56245c27f1a00e0d13877bfb8842dc394fd206d041b1f76be95a371eff128c8c34812a1b24c8&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x5409ed021d9299bf6814279a6a1411a7e866a631&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x215c47&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x60806040523480156200001157600080fd5b5060405162002d2c38038062002d2c83398101806040526200003791908101906200051d565b6000805433600160a060020a031991821617825560018054909116600160a060020a0386161790558251849084908490849081906200007e906004906020870190620003d0565b50825162000094906005906020860190620003d0565b50620000b0836010640100000000620019476200036f82021704565b9150620000cd846010640100000000620019476200036f82021704565b60028054600160a060020a03948516600160a060020a031991821617909155600380549285169290911691909117905550600154604080517f4552433230546f6b656e28616464726573732900000000000000000000000000815290519081900360130181207f6070410800000000000000000000000000000000000000000000000000000000825291909216945063607041089350620001739250906004016200068e565b602060405180830381600087803b1580156200018e57600080fd5b505af1158015620001a3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620001c99190810190620004f4565b9050600160a060020a038116151562000219576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200021090620006b0565b60405180910390fd5b6002546040517f095ea7b3000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063095ea7b39062000268908490600019906004016200066f565b602060405180830381600087803b1580156200028357600080fd5b505af115801562000298573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620002be9190810190620005a1565b506003546040517f095ea7b3000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063095ea7b3906200030e908490600019906004016200066f565b602060405180830381600087803b1580156200032957600080fd5b505af11580156200033e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250620003649190810190620005a1565b50505050506200077a565b600081601401835110151515620003b4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040162000210906200069e565b506014818301810151910190600160a060020a03165b92915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200041357805160ff191683800117855562000443565b8280016001018555821562000443579182015b828111156200044357825182559160200191906001019062000426565b506200045192915062000455565b5090565b6200047291905b808211156200045157600081556001016200045c565b90565b600062000483825162000711565b9392505050565b600062000483825162000742565b6000601f82018313620004aa57600080fd5b8151620004c1620004bb82620006e9565b620006c2565b91508082526020830160208301858383011115620004de57600080fd5b620004eb83828462000747565b50505092915050565b6000602082840312156200050757600080fd5b600062000515848462000475565b949350505050565b6000806000606084860312156200053357600080fd5b600062000541868662000475565b93505060208401516001604060020a038111156200055e57600080fd5b6200056c8682870162000498565b92505060408401516001604060020a038111156200058957600080fd5b620005978682870162000498565b9150509250925092565b600060208284031215620005b457600080fd5b60006200051584846200048a565b620005cd8162000711565b82525050565b620005cd816200071d565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601881527f554e524547495354455245445f41535345545f50524f58590000000000000000602082015260400190565b620005cd8162000472565b604081016200067f8285620005c2565b62000483602083018462000664565b60208101620003ca8284620005d3565b60208082528101620003ca81620005de565b60208082528101620003ca8162000634565b6040518181016001604060020a0381118282101715620006e157600080fd5b604052919050565b60006001604060020a038211156200070057600080fd5b506020601f91909101601f19160190565b600160a060020a031690565b7fffffffff000000000000000000000000000000000000000000000000000000001690565b151590565b60005b83811015620007645781810151838201526020016200074a565b8381111562000774576000848401525b50505050565b6125a2806200078a6000396000f30060806040526004361061006c5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166318978e8281146100c8578063630f1e6c146100f25780638da5cb5b146101125780639395525c14610134578063f2fde38b14610147575b60025473ffffffffffffffffffffffffffffffffffffffff1633146100c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612388565b60405180910390fd5b005b6100db6100d6366004611df1565b610167565b6040516100e9929190612488565b60405180910390f35b3480156100fe57600080fd5b506100c661010d366004611eec565b6102f7565b34801561011e57600080fd5b50610127610388565b6040516100e99190612337565b6100db610142366004611d0b565b6103a4565b34801561015357600080fd5b506100c6610162366004611ce5565b61050a565b61016f6119fa565b6101776119fa565b6000806101826105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff610100600188161502019095169490940493840181900481028201810190925282815261025c939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b820191906000526020600020905b81548152906001019060200180831161021057829003601f168201915b50505050508c600081518110151561024157fe5b6020908102909101015161014001519063ffffffff61069616565b156102875761026c8b8b8b6107c3565b935061028084600001518560600151610ac1565b90506102ae565b6102928b8b8b610b03565b9350836060015191506102a68883896107c3565b845190935090505b6102c2846020015184602001518888610d15565b6102e98b60008151811015156102d457fe5b90602001906020020151610140015182610f29565b505097509795505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610348576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b61038383838080601f01602080910402602001604051908101604052809392919081815260200183838082843750879450610f299350505050565b505050565b60005473ffffffffffffffffffffffffffffffffffffffff1681565b6103ac6119fa565b6103b46119fa565b60008060006103c16105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152610441939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b156104925761046a670de0b6b3a7640000610464670de0b6b3a76400008a611045565b3461108f565b92506104778b848c6110e7565b945061048b85600001518660600151610ac1565b90506104d6565b6104ad670d2f13f7789f0000670de0b6b3a76400003461108f565b92506104ba8b848c6110e7565b9450846060015191506104ce89838a6107c3565b855190945090505b6104ea856020015185602001518989610d15565b6104fc8b60008151811015156102d457fe5b505050965096945050505050565b60005473ffffffffffffffffffffffffffffffffffffffff16331461055b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b73ffffffffffffffffffffffffffffffffffffffff8116156105b857600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b600034116105f5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612398565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d0e30db0346040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016000604051808303818588803b15801561067b57600080fd5b505af115801561068f573d6000803e3d6000fd5b5050505050565b6000815183511480156107ba5750816040518082805190602001908083835b602083106106f257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016106b5565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0180199092169116179052604051919093018190038120885190955088945090928392508401908083835b6020831061078757805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161074a565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916145b90505b92915050565b6107cb6119fa565b60608060008060008060006107de6119fa565b8a15156107ea57610ab2565b6004805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561088e5780601f106108635761010080835404028352916020019161088e565b820191906000526020600020905b81548152906001019060200180831161087157829003601f168201915b505060058054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152969e509194509250840190508282801561093d5780601f106109125761010080835404028352916020019161093d565b820191906000526020600020905b81548152906001019060200180831161092057829003601f168201915b50505050509650600095508b519450600093505b838514610a7857878c8581518110151561096757fe5b6020908102909101015161014001528b5187908d908690811061098657fe5b60209081029091010151610160015261099f8b87610ac1565b9250610a068c858151811015156109b257fe5b9060200190602002015160a00151610a008e878151811015156109d157fe5b90602001906020020151608001518f888151811015156109ed57fe5b9060200190602002015160e00151610ac1565b8561128b565b9150610a418c85815181101515610a1957fe5b90602001906020020151838c87815181101515610a3257fe5b906020019060200201516112e6565b9050610a4d898261135e565b610a5f89600001518a60600151610ac1565b95508a8610610a6d57610a78565b600190930192610951565b8a861015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b50505050505050509392505050565b600082821115610afd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123b8565b50900390565b610b0b6119fa565b606080600080600080610b1c6119fa565b60008b6000815181101515610b2d57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929b5092909190830182828015610be55780601f10610bba57610100808354040283529160200191610be5565b820191906000526020600020905b815481529060010190602001808311610bc857829003601f168201915b505050505096508b519550600094505b848614610cdb57878c86815181101515610c0b57fe5b6020908102909101015161014001528b5187908d9087908110610c2a57fe5b6020908102909101015161016001528851610c46908c90610ac1565b9350610c898c86815181101515610c5957fe5b9060200190602002015160a001518d87815181101515610c7557fe5b90602001906020020151608001518661128b565b9250610cb58c86815181101515610c9c57fe5b90602001906020020151848c88815181101515610a3257fe5b9150610cc1898361135e565b5087518a8110610cd057610cdb565b600190940193610bf5565b8a811015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b600080808066b1a2bc2ec50000861115610d5b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612448565b610d658888611045565b935034841115610da1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123a8565b610dab3485610ac1565b9250610dc086670de0b6b3a76400008a61108f565b915082821115610dfc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612428565b6000831115610f1f576002546040517f2e1a7d4d00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff90911690632e1a7d4d90610e5b9086906004016124a4565b600060405180830381600087803b158015610e7557600080fd5b505af1158015610e89573d6000803e3d6000fd5b505050506000821115610edb5760405173ffffffffffffffffffffffffffffffffffffffff86169083156108fc029084906000818181858888f19350505050158015610ed9573d6000803e3d6000fd5b505b610ee58383610ac1565b90506000811115610f1f57604051339082156108fc029083906000818181858888f19350505050158015610f1d573d6000803e3d6000fd5b505b5050505050505050565b6000610f3b838263ffffffff6113c016565b604080517f4552433230546f6b656e28616464726573732900000000000000000000000000815290519081900360130190209091507fffffffff0000000000000000000000000000000000000000000000000000000080831691161415610fab57610fa6838361142d565b610383565b604080517f455243373231546f6b656e28616464726573732c75696e7432353629000000008152905190819003601c0190207fffffffff000000000000000000000000000000000000000000000000000000008281169116141561101357610fa6838361161b565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123f8565b600082820183811015611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b8091505b5092915050565b60008083116110ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d78584611703565b8461175e565b90505b9392505050565b6110ef6119fa565b60608060008060006110ff6119fa565b89600081518110151561110e57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929950929091908301828280156111c65780601f1061119b576101008083540402835291602001916111c6565b820191906000526020600020905b8154815290600101906020018083116111a957829003601f168201915b5050505050945089519350600092505b82841461127e57858a848151811015156111ec57fe5b602090810290910101516101400152895185908b908590811061120b57fe5b90602001906020020151610160018190525061122b898860200151610ac1565b91506112578a8481518110151561123e57fe5b90602001906020020151838a86815181101515610a3257fe5b9050611263878261135e565b602087015189116112735761127e565b6001909201916111d6565b5050505050509392505050565b60008083116112c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d76112d68685611703565b6112e1866001610ac1565b611045565b6112ee6119fa565b606060006112fd868686611775565b600154815191935073ffffffffffffffffffffffffffffffffffffffff1691506080908390602082016000855af1801561135457825184526020830151602085015260408301516040850152606083015160608501525b5050509392505050565b8151815161136c9190611045565b8252602080830151908201516113829190611045565b60208301526040808301519082015161139b9190611045565b6040830152606080830151908201516113b49190611045565b60609092019190915250565b600081600401835110151515611402576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612468565b5001602001517fffffffff000000000000000000000000000000000000000000000000000000001690565b60008061144184601063ffffffff61194716565b604080517f7472616e7366657228616464726573732c75696e7432353629000000000000008152905190819003601901812091935073ffffffffffffffffffffffffffffffffffffffff8416919061149f903390879060240161236d565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931783525181519192909182919080838360005b8381101561154357818101518382015260200161152b565b50505050905090810190601f1680156115705780820380516001836020036101000a031916815260200191505b509150506000604051808303816000865af1925050508015156115bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b3d156115dc575060003d602014156115dc5760206000803e506000515b801515611615576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b50505050565b60008060018314611658576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612478565b61166984601063ffffffff61194716565b915061167c84602463ffffffff6119a816565b6040517f23b872dd00000000000000000000000000000000000000000000000000000000815290915073ffffffffffffffffffffffffffffffffffffffff8316906323b872dd906116d590309033908690600401612345565b600060405180830381600087803b1580156116ef57600080fd5b505af1158015610f1f573d6000803e3d6000fd5b6000808315156117165760009150611088565b5082820282848281151561172657fe5b0414611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b600080828481151561176c57fe5b04949350505050565b604080517fb4be83d5000000000000000000000000000000000000000000000000000000006020808301919091526060602483018181528751608485019081528884015160a48601529488015160c48501529087015160e4840152608087015161010484015260a087015161012484015260c087015161014484015260e08701516101648401526101008701516101848401526101208701516101a4840152610140870180516101c485019081526101608901516101e4860152610180905251805161020485018190529394919384936044870192849261022489019291820191601f82010460005b8181101561187c57835185526020948501949093019260010161185e565b50505050818103610160808401919091528a0151805180835260209283019291820191601f82010460005b818110156118c55783518552602094850194909301926001016118a7565b50505089845250848103602093840190815288518083529093918201918981019190601f82010460005b8181101561190d5783518552602094850194909301926001016118ef565b5050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08883030188525060405250505050509392505050565b600081601401835110151515611989576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612458565b50016014015173ffffffffffffffffffffffffffffffffffffffff1690565b60006107ba83836000816020018351101515156119f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123c8565b50016020015190565b608060405190810160405280600081526020016000815260200160008152602001600081525090565b60006107ba8235612540565b6000601f82018313611a4057600080fd5b8135611a53611a4e826124d9565b6124b2565b81815260209384019390925082018360005b83811015611a915781358601611a7b8882611b41565b8452506020928301929190910190600101611a65565b5050505092915050565b6000601f82018313611aac57600080fd5b8135611aba611a4e826124d9565b81815260209384019390925082018360005b83811015611a915781358601611ae28882611b90565b8452506020928301929190910190600101611acc565b600080601f83018413611b0a57600080fd5b50813567ffffffffffffffff811115611b2257600080fd5b602083019150836001820283011115611b3a57600080fd5b9250929050565b6000601f82018313611b5257600080fd5b8135611b60611a4e826124fa565b91508082526020830160208301858383011115611b7c57600080fd5b611b8783828461255c565b50505092915050565b60006101808284031215611ba357600080fd5b611bae6101806124b2565b90506000611bbc8484611a23565b8252506020611bcd84848301611a23565b6020830152506040611be184828501611a23565b6040830152506060611bf584828501611a23565b6060830152506080611c0984828501611cd9565b60808301525060a0611c1d84828501611cd9565b60a08301525060c0611c3184828501611cd9565b60c08301525060e0611c4584828501611cd9565b60e083015250610100611c5a84828501611cd9565b61010083015250610120611c7084828501611cd9565b6101208301525061014082013567ffffffffffffffff811115611c9257600080fd5b611c9e84828501611b41565b6101408301525061016082013567ffffffffffffffff811115611cc057600080fd5b611ccc84828501611b41565b6101608301525092915050565b60006107ba8235612559565b600060208284031215611cf757600080fd5b6000611d038484611a23565b949350505050565b60008060008060008060c08789031215611d2457600080fd5b863567ffffffffffffffff811115611d3b57600080fd5b611d4789828a01611a9b565b965050602087013567ffffffffffffffff811115611d6457600080fd5b611d7089828a01611a2f565b955050604087013567ffffffffffffffff811115611d8d57600080fd5b611d9989828a01611a9b565b945050606087013567ffffffffffffffff811115611db657600080fd5b611dc289828a01611a2f565b9350506080611dd389828a01611cd9565b92505060a0611de489828a01611a23565b9150509295509295509295565b600080600080600080600060e0888a031215611e0c57600080fd5b873567ffffffffffffffff811115611e2357600080fd5b611e2f8a828b01611a9b565b9750506020611e408a828b01611cd9565b965050604088013567ffffffffffffffff811115611e5d57600080fd5b611e698a828b01611a2f565b955050606088013567ffffffffffffffff811115611e8657600080fd5b611e928a828b01611a9b565b945050608088013567ffffffffffffffff811115611eaf57600080fd5b611ebb8a828b01611a2f565b93505060a0611ecc8a828b01611cd9565b92505060c0611edd8a828b01611a23565b91505092959891949750929550565b600080600060408486031215611f0157600080fd5b833567ffffffffffffffff811115611f1857600080fd5b611f2486828701611af8565b93509350506020611f3786828701611cd9565b9150509250925092565b611f4a81612540565b82525050565b602381527f44454641554c545f46554e4354494f4e5f574554485f434f4e54524143545f4f60208201527f4e4c590000000000000000000000000000000000000000000000000000000000604082015260600190565b601181527f494e56414c49445f4d53475f56414c5545000000000000000000000000000000602082015260400190565b600d81527f4f564552534f4c445f5745544800000000000000000000000000000000000000602082015260400190565b601181527f55494e543235365f554e444552464c4f57000000000000000000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f33325f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601081527f4449564953494f4e5f42595f5a45524f00000000000000000000000000000000602082015260400190565b601081527f55494e543235365f4f564552464c4f5700000000000000000000000000000000602082015260400190565b601781527f554e535550504f525445445f41535345545f50524f5859000000000000000000602082015260400190565b600f81527f5452414e534645525f4641494c45440000000000000000000000000000000000602082015260400190565b601481527f434f4d504c4554455f46494c4c5f4641494c4544000000000000000000000000602082015260400190565b601a81527f494e53554646494349454e545f4554485f52454d41494e494e47000000000000602082015260400190565b601381527f4f4e4c595f434f4e54524143545f4f574e455200000000000000000000000000602082015260400190565b601881527f4645455f50455243454e544147455f544f4f5f4c415247450000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b602581527f475245415445525f4f525f455155414c5f544f5f345f4c454e4754485f52455160208201527f5549524544000000000000000000000000000000000000000000000000000000604082015260600190565b600e81527f494e56414c49445f414d4f554e54000000000000000000000000000000000000602082015260400190565b805160808301906122f9848261232e565b50602082015161230c602085018261232e565b50604082015161231f604085018261232e565b50606082015161161560608501825b611f4a81612559565b602081016107bd8284611f41565b606081016123538286611f41565b6123606020830185611f41565b611d03604083018461232e565b6040810161237b8285611f41565b6110e0602083018461232e565b602080825281016107bd81611f50565b602080825281016107bd81611fa6565b602080825281016107bd81611fd6565b602080825281016107bd81612006565b602080825281016107bd81612036565b602080825281016107bd8161208c565b602080825281016107bd816120bc565b602080825281016107bd816120ec565b602080825281016107bd8161211c565b602080825281016107bd8161214c565b602080825281016107bd8161217c565b602080825281016107bd816121ac565b602080825281016107bd816121dc565b602080825281016107bd8161220c565b602080825281016107bd81612262565b602080825281016107bd816122b8565b610100810161249782856122e8565b6110e060808301846122e8565b602081016107bd828461232e565b60405181810167ffffffffffffffff811182821017156124d157600080fd5b604052919050565b600067ffffffffffffffff8211156124f057600080fd5b5060209081020190565b600067ffffffffffffffff82111561251157600080fd5b506020601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160190565b73ffffffffffffffffffffffffffffffffffffffff1690565b90565b828183375060009101525600a265627a7a72305820d9f418f11e0f91f06f6f9d22924be0add925495eeb76a6388b5417adb505eeb36c6578706572696d656e74616cf5003700000000000000000000000048bacb9266a570d521063ef5dd96e61686dbe788000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b00000000000000000000000000b1ba0af832d7c05fd64161e0db78e85978e808200000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x6456fbd35a3a69a1709c324fad114d68507d2c8ab391e9adb128f9734c8e4ae8&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 13536,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x6000eca38b8b5bba64986182fe2a69c57f6b5414&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60806040526004361061006c5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166318978e8281146100c8578063630f1e6c146100f25780638da5cb5b146101125780639395525c14610134578063f2fde38b14610147575b60025473ffffffffffffffffffffffffffffffffffffffff1633146100c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612388565b60405180910390fd5b005b6100db6100d6366004611df1565b610167565b6040516100e9929190612488565b60405180910390f35b3480156100fe57600080fd5b506100c661010d366004611eec565b6102f7565b34801561011e57600080fd5b50610127610388565b6040516100e99190612337565b6100db610142366004611d0b565b6103a4565b34801561015357600080fd5b506100c6610162366004611ce5565b61050a565b61016f6119fa565b6101776119fa565b6000806101826105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff610100600188161502019095169490940493840181900481028201810190925282815261025c939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b820191906000526020600020905b81548152906001019060200180831161021057829003601f168201915b50505050508c600081518110151561024157fe5b6020908102909101015161014001519063ffffffff61069616565b156102875761026c8b8b8b6107c3565b935061028084600001518560600151610ac1565b90506102ae565b6102928b8b8b610b03565b9350836060015191506102a68883896107c3565b845190935090505b6102c2846020015184602001518888610d15565b6102e98b60008151811015156102d457fe5b90602001906020020151610140015182610f29565b505097509795505050505050565b60005473ffffffffffffffffffffffffffffffffffffffff163314610348576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b61038383838080601f01602080910402602001604051908101604052809392919081815260200183838082843750879450610f299350505050565b505050565b60005473ffffffffffffffffffffffffffffffffffffffff1681565b6103ac6119fa565b6103b46119fa565b60008060006103c16105bb565b60048054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152610441939092909183018282801561022d5780601f106102025761010080835404028352916020019161022d565b156104925761046a670de0b6b3a7640000610464670de0b6b3a76400008a611045565b3461108f565b92506104778b848c6110e7565b945061048b85600001518660600151610ac1565b90506104d6565b6104ad670d2f13f7789f0000670de0b6b3a76400003461108f565b92506104ba8b848c6110e7565b9450846060015191506104ce89838a6107c3565b855190945090505b6104ea856020015185602001518989610d15565b6104fc8b60008151811015156102d457fe5b505050965096945050505050565b60005473ffffffffffffffffffffffffffffffffffffffff16331461055b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612438565b73ffffffffffffffffffffffffffffffffffffffff8116156105b857600080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff83161790555b50565b600034116105f5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612398565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d0e30db0346040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016000604051808303818588803b15801561067b57600080fd5b505af115801561068f573d6000803e3d6000fd5b5050505050565b6000815183511480156107ba5750816040518082805190602001908083835b602083106106f257805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe090920191602091820191016106b5565b51815160209384036101000a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0180199092169116179052604051919093018190038120885190955088945090928392508401908083835b6020831061078757805182527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0909201916020918201910161074a565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916145b90505b92915050565b6107cb6119fa565b60608060008060008060006107de6119fa565b8a15156107ea57610ab2565b6004805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561088e5780601f106108635761010080835404028352916020019161088e565b820191906000526020600020905b81548152906001019060200180831161087157829003601f168201915b505060058054604080516020601f60027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6101006001881615020190951694909404938401819004810282018101909252828152969e509194509250840190508282801561093d5780601f106109125761010080835404028352916020019161093d565b820191906000526020600020905b81548152906001019060200180831161092057829003601f168201915b50505050509650600095508b519450600093505b838514610a7857878c8581518110151561096757fe5b6020908102909101015161014001528b5187908d908690811061098657fe5b60209081029091010151610160015261099f8b87610ac1565b9250610a068c858151811015156109b257fe5b9060200190602002015160a00151610a008e878151811015156109d157fe5b90602001906020020151608001518f888151811015156109ed57fe5b9060200190602002015160e00151610ac1565b8561128b565b9150610a418c85815181101515610a1957fe5b90602001906020020151838c87815181101515610a3257fe5b906020019060200201516112e6565b9050610a4d898261135e565b610a5f89600001518a60600151610ac1565b95508a8610610a6d57610a78565b600190930192610951565b8a861015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b50505050505050509392505050565b600082821115610afd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123b8565b50900390565b610b0b6119fa565b606080600080600080610b1c6119fa565b60008b6000815181101515610b2d57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929b5092909190830182828015610be55780601f10610bba57610100808354040283529160200191610be5565b820191906000526020600020905b815481529060010190602001808311610bc857829003601f168201915b505050505096508b519550600094505b848614610cdb57878c86815181101515610c0b57fe5b6020908102909101015161014001528b5187908d9087908110610c2a57fe5b6020908102909101015161016001528851610c46908c90610ac1565b9350610c898c86815181101515610c5957fe5b9060200190602002015160a001518d87815181101515610c7557fe5b90602001906020020151608001518661128b565b9250610cb58c86815181101515610c9c57fe5b90602001906020020151848c88815181101515610a3257fe5b9150610cc1898361135e565b5087518a8110610cd057610cdb565b600190940193610bf5565b8a811015610ab2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612418565b600080808066b1a2bc2ec50000861115610d5b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612448565b610d658888611045565b935034841115610da1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123a8565b610dab3485610ac1565b9250610dc086670de0b6b3a76400008a61108f565b915082821115610dfc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612428565b6000831115610f1f576002546040517f2e1a7d4d00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff90911690632e1a7d4d90610e5b9086906004016124a4565b600060405180830381600087803b158015610e7557600080fd5b505af1158015610e89573d6000803e3d6000fd5b505050506000821115610edb5760405173ffffffffffffffffffffffffffffffffffffffff86169083156108fc029084906000818181858888f19350505050158015610ed9573d6000803e3d6000fd5b505b610ee58383610ac1565b90506000811115610f1f57604051339082156108fc029083906000818181858888f19350505050158015610f1d573d6000803e3d6000fd5b505b5050505050505050565b6000610f3b838263ffffffff6113c016565b604080517f4552433230546f6b656e28616464726573732900000000000000000000000000815290519081900360130190209091507fffffffff0000000000000000000000000000000000000000000000000000000080831691161415610fab57610fa6838361142d565b610383565b604080517f455243373231546f6b656e28616464726573732c75696e7432353629000000008152905190819003601c0190207fffffffff000000000000000000000000000000000000000000000000000000008281169116141561101357610fa6838361161b565b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123f8565b600082820183811015611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b8091505b5092915050565b60008083116110ca576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d78584611703565b8461175e565b90505b9392505050565b6110ef6119fa565b60608060008060006110ff6119fa565b89600081518110151561110e57fe5b6020908102919091018101516101400151600580546040805160026001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190931692909204601f8101869004860283018601909152808252929950929091908301828280156111c65780601f1061119b576101008083540402835291602001916111c6565b820191906000526020600020905b8154815290600101906020018083116111a957829003601f168201915b5050505050945089519350600092505b82841461127e57858a848151811015156111ec57fe5b602090810290910101516101400152895185908b908590811061120b57fe5b90602001906020020151610160018190525061122b898860200151610ac1565b91506112578a8481518110151561123e57fe5b90602001906020020151838a86815181101515610a3257fe5b9050611263878261135e565b602087015189116112735761127e565b6001909201916111d6565b5050505050509392505050565b60008083116112c6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123d8565b6110dd6110d76112d68685611703565b6112e1866001610ac1565b611045565b6112ee6119fa565b606060006112fd868686611775565b600154815191935073ffffffffffffffffffffffffffffffffffffffff1691506080908390602082016000855af1801561135457825184526020830151602085015260408301516040850152606083015160608501525b5050509392505050565b8151815161136c9190611045565b8252602080830151908201516113829190611045565b60208301526040808301519082015161139b9190611045565b6040830152606080830151908201516113b49190611045565b60609092019190915250565b600081600401835110151515611402576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612468565b5001602001517fffffffff000000000000000000000000000000000000000000000000000000001690565b60008061144184601063ffffffff61194716565b604080517f7472616e7366657228616464726573732c75696e7432353629000000000000008152905190819003601901812091935073ffffffffffffffffffffffffffffffffffffffff8416919061149f903390879060240161236d565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff000000000000000000000000000000000000000000000000000000009094169390931783525181519192909182919080838360005b8381101561154357818101518382015260200161152b565b50505050905090810190601f1680156115705780820380516001836020036101000a031916815260200191505b509150506000604051808303816000865af1925050508015156115bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b3d156115dc575060003d602014156115dc5760206000803e506000515b801515611615576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612408565b50505050565b60008060018314611658576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612478565b61166984601063ffffffff61194716565b915061167c84602463ffffffff6119a816565b6040517f23b872dd00000000000000000000000000000000000000000000000000000000815290915073ffffffffffffffffffffffffffffffffffffffff8316906323b872dd906116d590309033908690600401612345565b600060405180830381600087803b1580156116ef57600080fd5b505af1158015610f1f573d6000803e3d6000fd5b6000808315156117165760009150611088565b5082820282848281151561172657fe5b0414611084576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123e8565b600080828481151561176c57fe5b04949350505050565b604080517fb4be83d5000000000000000000000000000000000000000000000000000000006020808301919091526060602483018181528751608485019081528884015160a48601529488015160c48501529087015160e4840152608087015161010484015260a087015161012484015260c087015161014484015260e08701516101648401526101008701516101848401526101208701516101a4840152610140870180516101c485019081526101608901516101e4860152610180905251805161020485018190529394919384936044870192849261022489019291820191601f82010460005b8181101561187c57835185526020948501949093019260010161185e565b50505050818103610160808401919091528a0151805180835260209283019291820191601f82010460005b818110156118c55783518552602094850194909301926001016118a7565b50505089845250848103602093840190815288518083529093918201918981019190601f82010460005b8181101561190d5783518552602094850194909301926001016118ef565b5050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08883030188525060405250505050509392505050565b600081601401835110151515611989576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd90612458565b50016014015173ffffffffffffffffffffffffffffffffffffffff1690565b60006107ba83836000816020018351101515156119f1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100bd906123c8565b50016020015190565b608060405190810160405280600081526020016000815260200160008152602001600081525090565b60006107ba8235612540565b6000601f82018313611a4057600080fd5b8135611a53611a4e826124d9565b6124b2565b81815260209384019390925082018360005b83811015611a915781358601611a7b8882611b41565b8452506020928301929190910190600101611a65565b5050505092915050565b6000601f82018313611aac57600080fd5b8135611aba611a4e826124d9565b81815260209384019390925082018360005b83811015611a915781358601611ae28882611b90565b8452506020928301929190910190600101611acc565b600080601f83018413611b0a57600080fd5b50813567ffffffffffffffff811115611b2257600080fd5b602083019150836001820283011115611b3a57600080fd5b9250929050565b6000601f82018313611b5257600080fd5b8135611b60611a4e826124fa565b91508082526020830160208301858383011115611b7c57600080fd5b611b8783828461255c565b50505092915050565b60006101808284031215611ba357600080fd5b611bae6101806124b2565b90506000611bbc8484611a23565b8252506020611bcd84848301611a23565b6020830152506040611be184828501611a23565b6040830152506060611bf584828501611a23565b6060830152506080611c0984828501611cd9565b60808301525060a0611c1d84828501611cd9565b60a08301525060c0611c3184828501611cd9565b60c08301525060e0611c4584828501611cd9565b60e083015250610100611c5a84828501611cd9565b61010083015250610120611c7084828501611cd9565b6101208301525061014082013567ffffffffffffffff811115611c9257600080fd5b611c9e84828501611b41565b6101408301525061016082013567ffffffffffffffff811115611cc057600080fd5b611ccc84828501611b41565b6101608301525092915050565b60006107ba8235612559565b600060208284031215611cf757600080fd5b6000611d038484611a23565b949350505050565b60008060008060008060c08789031215611d2457600080fd5b863567ffffffffffffffff811115611d3b57600080fd5b611d4789828a01611a9b565b965050602087013567ffffffffffffffff811115611d6457600080fd5b611d7089828a01611a2f565b955050604087013567ffffffffffffffff811115611d8d57600080fd5b611d9989828a01611a9b565b945050606087013567ffffffffffffffff811115611db657600080fd5b611dc289828a01611a2f565b9350506080611dd389828a01611cd9565b92505060a0611de489828a01611a23565b9150509295509295509295565b600080600080600080600060e0888a031215611e0c57600080fd5b873567ffffffffffffffff811115611e2357600080fd5b611e2f8a828b01611a9b565b9750506020611e408a828b01611cd9565b965050604088013567ffffffffffffffff811115611e5d57600080fd5b611e698a828b01611a2f565b955050606088013567ffffffffffffffff811115611e8657600080fd5b611e928a828b01611a9b565b945050608088013567ffffffffffffffff811115611eaf57600080fd5b611ebb8a828b01611a2f565b93505060a0611ecc8a828b01611cd9565b92505060c0611edd8a828b01611a23565b91505092959891949750929550565b600080600060408486031215611f0157600080fd5b833567ffffffffffffffff811115611f1857600080fd5b611f2486828701611af8565b93509350506020611f3786828701611cd9565b9150509250925092565b611f4a81612540565b82525050565b602381527f44454641554c545f46554e4354494f4e5f574554485f434f4e54524143545f4f60208201527f4e4c590000000000000000000000000000000000000000000000000000000000604082015260600190565b601181527f494e56414c49445f4d53475f56414c5545000000000000000000000000000000602082015260400190565b600d81527f4f564552534f4c445f5745544800000000000000000000000000000000000000602082015260400190565b601181527f55494e543235365f554e444552464c4f57000000000000000000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f33325f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b601081527f4449564953494f4e5f42595f5a45524f00000000000000000000000000000000602082015260400190565b601081527f55494e543235365f4f564552464c4f5700000000000000000000000000000000602082015260400190565b601781527f554e535550504f525445445f41535345545f50524f5859000000000000000000602082015260400190565b600f81527f5452414e534645525f4641494c45440000000000000000000000000000000000602082015260400190565b601481527f434f4d504c4554455f46494c4c5f4641494c4544000000000000000000000000602082015260400190565b601a81527f494e53554646494349454e545f4554485f52454d41494e494e47000000000000602082015260400190565b601381527f4f4e4c595f434f4e54524143545f4f574e455200000000000000000000000000602082015260400190565b601881527f4645455f50455243454e544147455f544f4f5f4c415247450000000000000000602082015260400190565b602681527f475245415445525f4f525f455155414c5f544f5f32305f4c454e4754485f524560208201527f5155495245440000000000000000000000000000000000000000000000000000604082015260600190565b602581527f475245415445525f4f525f455155414c5f544f5f345f4c454e4754485f52455160208201527f5549524544000000000000000000000000000000000000000000000000000000604082015260600190565b600e81527f494e56414c49445f414d4f554e54000000000000000000000000000000000000602082015260400190565b805160808301906122f9848261232e565b50602082015161230c602085018261232e565b50604082015161231f604085018261232e565b50606082015161161560608501825b611f4a81612559565b602081016107bd8284611f41565b606081016123538286611f41565b6123606020830185611f41565b611d03604083018461232e565b6040810161237b8285611f41565b6110e0602083018461232e565b602080825281016107bd81611f50565b602080825281016107bd81611fa6565b602080825281016107bd81611fd6565b602080825281016107bd81612006565b602080825281016107bd81612036565b602080825281016107bd8161208c565b602080825281016107bd816120bc565b602080825281016107bd816120ec565b602080825281016107bd8161211c565b602080825281016107bd8161214c565b602080825281016107bd8161217c565b602080825281016107bd816121ac565b602080825281016107bd816121dc565b602080825281016107bd8161220c565b602080825281016107bd81612262565b602080825281016107bd816122b8565b610100810161249782856122e8565b6110e060808301846122e8565b602081016107bd828461232e565b60405181810167ffffffffffffffff811182821017156124d157600080fd5b604052919050565b600067ffffffffffffffff8211156124f057600080fd5b5060209081020190565b600067ffffffffffffffff82111561251157600080fd5b506020601f919091017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0160190565b73ffffffffffffffffffffffffffffffffffffffff1690565b90565b828183375060009101525600a265627a7a72305820d9f418f11e0f91f06f6f9d22924be0add925495eeb76a6388b5417adb505eeb36c6578706572696d656e74616cf50037&quot;,</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x2c8c7f&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 3,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6974f745a004f030bebb1c01d4595edbda2fafcf01c0bfbd5d335711e2a7b04e&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 0,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6000eca38b8b5bba64986182fe2a69c57f6b5414&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1dba84&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x60704108f47261b000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x48bacb9266a570d521063ef5dd96e61686dbe788&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x6456fbd35a3a69a1709c324fad114d68507d2c8ab391e9adb128f9734c8e4ae8&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 13536,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x3d9&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000001dc4c1cefef38a777b15aa20260a54e584b16c48&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6974f745a004f030bebb1c01d4595edbda2fafcf01c0bfbd5d335711e2a7b04e&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 0,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6000eca38b8b5bba64986182fe2a69c57f6b5414&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1dad2e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x095ea7b30000000000000000000000001dc4c1cefef38a777b15aa20260a54e584b16c48ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0b1ba0af832d7c05fd64161e0db78e85978e8082&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x6456fbd35a3a69a1709c324fad114d68507d2c8ab391e9adb128f9734c8e4ae8&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 13536,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x56c8&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        1</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6974f745a004f030bebb1c01d4595edbda2fafcf01c0bfbd5d335711e2a7b04e&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 0,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x6000eca38b8b5bba64986182fe2a69c57f6b5414&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x1d4ee1&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x095ea7b30000000000000000000000001dc4c1cefef38a777b15aa20260a54e584b16c48ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x6456fbd35a3a69a1709c324fad114d68507d2c8ab391e9adb128f9734c8e4ae8&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 13536,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x56ca&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        2</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6974f745a004f030bebb1c01d4595edbda2fafcf01c0bfbd5d335711e2a7b04e&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 0,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-dd6d01063692554b4f851b6a" role="button"
                   aria-expanded="false" aria-controls="id-dd6d01063692554b4f851b6a">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/oog.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/oog.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+68</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-dd6d01063692554b4f851b6a"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;oog.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;oog.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..26ae2f0604b5dc9e0cbbeb18156d740e1d57c346</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;oog.json</span>
<span class="term-fg36">@@ -0,0 +1,68 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3699098917&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5258985&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xd049bfd667cb46aa3ef5df0da3e57db3be39e511&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294631&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513675366&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x43064693d3d38ad6a7cb579e0d6d9718c8aa6b62&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6060604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100bf578063095ea7b31461014d57806318160ddd146101a757806323b872dd146101d0578063313ce5671461024957806342966c68146102785780635a3b7e42146102b357806370a082311461034157806379cc67901461038e57806395d89b41146103e8578063a9059cbb14610476578063dd62ed3e146104b8575b600080fd5b34156100ca57600080fd5b6100d2610524565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101125780820151818401526020810190506100f7565b50505050905090810190601f16801561013f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015857600080fd5b61018d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061055d565b604051808215151515815260200191505060405180910390f35b34156101b257600080fd5b6101ba6105ea565b6040518082815260200191505060405180910390f35b34156101db57600080fd5b61022f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506105f0565b604051808215151515815260200191505060405180910390f35b341561025457600080fd5b61025c610910565b604051808260ff1660ff16815260200191505060405180910390f35b341561028357600080fd5b6102996004808035906020019091905050610915565b604051808215151515815260200191505060405180910390f35b34156102be57600080fd5b6102c6610a18565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103065780820151818401526020810190506102eb565b50505050905090810190601f1680156103335780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561034c57600080fd5b610378600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610a51565b6040518082815260200191505060405180910390f35b341561039957600080fd5b6103ce600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610a69565b604051808215151515815260200191505060405180910390f35b34156103f357600080fd5b6103fb610bf8565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561043b578082015181840152602081019050610420565b50505050905090810190601f1680156104685780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561048157600080fd5b6104b6600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610c31565b005b34156104c357600080fd5b61050e600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610e34565b6040518082815260200191505060405180910390f35b6040805190810160405280600881526020017f446f70616d696e6500000000000000000000000000000000000000000000000081525081565b600081600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001905092915050565b60005481565b6000808373ffffffffffffffffffffffffffffffffffffffff161415151561061757600080fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561066557600080fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401101515156106f157fe5b600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821115151561077c57600080fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555081600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b601281565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561096557600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508160008082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a260019050919050565b6040805190810160405280600981526020017f446f706d6e20302e32000000000000000000000000000000000000000000000081525081565b60016020528060005260406000206000915090505481565b600081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410151515610ab957600080fd5b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548211151515610b4457600080fd5b81600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508160008082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a26001905092915050565b6040805190810160405280600581526020017f444f504d4e00000000000000000000000000000000000000000000000000000081525081565b60008273ffffffffffffffffffffffffffffffffffffffff1614151515610c5757600080fd5b80600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410151515610ca557600080fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020540110151515610d3157fe5b80600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555080600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b60026020528160005260406000206020528060005260406000206000915091505054815600a165627a7a723058206d93424f4e7b11929b8276a269038402c10c0ddf21800e999916ddd9dff4a7630029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x296b66049cc4f9c8bf3d4f14752add261d1a980b39bdd194a7897baf39ac7579&quot;: &quot;0x0000000000000000000000000000000000000000033b2e3c9fc9653f9e72b1e0&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x94194bc2aaf494501d7880b61274a169f6502a54&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xea8c39a876d19888d&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;265&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3699098917&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5263953&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x03a0f62a8106793dafcfae7b75fd2654322062d585a19cea568314d7205790dc&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x15482cc64b7c00a947f5bf015dfc010db1a6a668c74df61974d6a7848c174408&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0xd1bdb150f6fd170e&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294630&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x1ab1a534e84cc787cda1db21e0d5920ab06017948075b759166cfea7274657a1&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513675347&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7160543502214733&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8ab820109855d21dba00082ca1d9443064693d3d38ad6a7cb579e0d6d9718c8aa6b6280b844a9059cbb000000000000000000000000e77b1ac803616503510bed0086e3a7be2627a69900000000000000000000000000000000000000000000000000000009502f90001ba0ce3ad83f5530136467b7c2bb225f406bd170f4ad59c254e5103c34eeabb5bd69a0455154527224a42ab405cacf0fe92918a75641ce4152f8db292019a5527aa956&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x94194bc2aaf494501d7880b61274a169f6502a54&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x7045&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xa9059cbb000000000000000000000000e77b1ac803616503510bed0086e3a7be2627a69900000000000000000000000000000000000000000000000000000009502f9000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x43064693d3d38ad6a7cb579e0d6d9718c8aa6b62&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2294631,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;out of gas&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-29ff9258fdac466240a70221" role="button"
                   aria-expanded="false" aria-controls="id-29ff9258fdac466240a70221">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/option_convert_parity_errors.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/option_convert_parity_errors.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+71</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-29ff9258fdac466240a70221"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;option_convert_parity_errors.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;option_convert_parity_errors.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0216c318b55a62461752cc7167e4279655ad2d6c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;option_convert_parity_errors.json</span>
<span class="term-fg36">@@ -0,0 +1,71 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3699098917&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5258985&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xd049bfd667cb46aa3ef5df0da3e57db3be39e511&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294631&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513675366&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x43064693d3d38ad6a7cb579e0d6d9718c8aa6b62&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6060604052600436106100ba576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100bf578063095ea7b31461014d57806318160ddd146101a757806323b872dd146101d0578063313ce5671461024957806342966c68146102785780635a3b7e42146102b357806370a082311461034157806379cc67901461038e57806395d89b41146103e8578063a9059cbb14610476578063dd62ed3e146104b8575b600080fd5b34156100ca57600080fd5b6100d2610524565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101125780820151818401526020810190506100f7565b50505050905090810190601f16801561013f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561015857600080fd5b61018d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061055d565b604051808215151515815260200191505060405180910390f35b34156101b257600080fd5b6101ba6105ea565b6040518082815260200191505060405180910390f35b34156101db57600080fd5b61022f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506105f0565b604051808215151515815260200191505060405180910390f35b341561025457600080fd5b61025c610910565b604051808260ff1660ff16815260200191505060405180910390f35b341561028357600080fd5b6102996004808035906020019091905050610915565b604051808215151515815260200191505060405180910390f35b34156102be57600080fd5b6102c6610a18565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103065780820151818401526020810190506102eb565b50505050905090810190601f1680156103335780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561034c57600080fd5b610378600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610a51565b6040518082815260200191505060405180910390f35b341561039957600080fd5b6103ce600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610a69565b604051808215151515815260200191505060405180910390f35b34156103f357600080fd5b6103fb610bf8565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561043b578082015181840152602081019050610420565b50505050905090810190601f1680156104685780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561048157600080fd5b6104b6600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610c31565b005b34156104c357600080fd5b61050e600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610e34565b6040518082815260200191505060405180910390f35b6040805190810160405280600881526020017f446f70616d696e6500000000000000000000000000000000000000000000000081525081565b600081600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506001905092915050565b60005481565b6000808373ffffffffffffffffffffffffffffffffffffffff161415151561061757600080fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561066557600080fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401101515156106f157fe5b600260008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054821115151561077c57600080fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555081600260008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190509392505050565b601281565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561096557600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508160008082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a260019050919050565b6040805190810160405280600981526020017f446f706d6e20302e32000000000000000000000000000000000000000000000081525081565b60016020528060005260406000206000915090505481565b600081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410151515610ab957600080fd5b600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020548211151515610b4457600080fd5b81600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508160008082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff167fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5836040518082815260200191505060405180910390a26001905092915050565b6040805190810160405280600581526020017f444f504d4e00000000000000000000000000000000000000000000000000000081525081565b60008273ffffffffffffffffffffffffffffffffffffffff1614151515610c5757600080fd5b80600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410151515610ca557600080fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205481600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020540110151515610d3157fe5b80600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555080600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a35050565b60026020528160005260406000206020528060005260406000206000915091505054815600a165627a7a723058206d93424f4e7b11929b8276a269038402c10c0ddf21800e999916ddd9dff4a7630029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x296b66049cc4f9c8bf3d4f14752add261d1a980b39bdd194a7897baf39ac7579&quot;: &quot;0x0000000000000000000000000000000000000000033b2e3c9fc9653f9e72b1e0&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x94194bc2aaf494501d7880b61274a169f6502a54&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xea8c39a876d19888d&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;265&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3699098917&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5263953&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x03a0f62a8106793dafcfae7b75fd2654322062d585a19cea568314d7205790dc&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x15482cc64b7c00a947f5bf015dfc010db1a6a668c74df61974d6a7848c174408&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0xd1bdb150f6fd170e&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294630&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x1ab1a534e84cc787cda1db21e0d5920ab06017948075b759166cfea7274657a1&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513675347&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7160543502214733&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;tracerConfig&quot;: {</span>
<span class="term-fg32">+    &quot;convertParityErrors&quot;: true</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8ab820109855d21dba00082ca1d9443064693d3d38ad6a7cb579e0d6d9718c8aa6b6280b844a9059cbb000000000000000000000000e77b1ac803616503510bed0086e3a7be2627a69900000000000000000000000000000000000000000000000000000009502f90001ba0ce3ad83f5530136467b7c2bb225f406bd170f4ad59c254e5103c34eeabb5bd69a0455154527224a42ab405cacf0fe92918a75641ce4152f8db292019a5527aa956&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x94194bc2aaf494501d7880b61274a169f6502a54&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x7045&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0xa9059cbb000000000000000000000000e77b1ac803616503510bed0086e3a7be2627a69900000000000000000000000000000000000000000000000000000009502f9000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x43064693d3d38ad6a7cb579e0d6d9718c8aa6b62&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2294631,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;Out of gas&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6f1d55d62a76b648c2f795da" role="button"
                   aria-expanded="false" aria-controls="id-6f1d55d62a76b648c2f795da">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/result_output.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/result_output.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+110</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6f1d55d62a76b648c2f795da"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;result_output.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;result_output.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f58d20cd2b0475b8af0f9f52b09622e7ab7bc080</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;result_output.json</span>
<span class="term-fg36">@@ -0,0 +1,111 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1911202&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;7842876&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x4d7bc82e0d56307094378e1a8fbfa6260986f621de95b5fe68a95248b3ba8efe&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xc102ad52677c391edab82cc895ca7a7e9fff3eed4fa966ecf7fb61ec1e84bb6b&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x39f5b074e3437f3f&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;553415&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x8f89e79109c19fa00e72b400502448540dc4773ad92dddd341dbba20c710a3b5&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577396195&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;458361299240&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x531f76bad925f6a925474996c7d738c1008045f6&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x6060604052361561008a576000357c01000000000000000000000000000000000000000000000000000000009004806301cb3b20146102bf57806329dcb0cf146102cc57806338af3eed146102ed5780636e66f6e9146103245780637a3a0e841461035b5780637b3e5e7b1461037c578063a035b1fe1461039d578063dc0d3dff146103be5761008a565b6102bd5b60003490506040604051908101604052803381526020018281526020015060066000506006600050805480919060010190908154818355818115116101365760020281600202836000526020600020918201910161013591906100ec565b808211156101315760006000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160005060009055506001016100ec565b5090565b5b505050815481101561000257906000526020600020906002020160005060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555060208201518160010160005055905050806002600082828250540192505081905550600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166390b98a11336004600050548404604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff168152602001828152602001925050506020604051808303816000876161da5a03f1156100025750505060405151507fe842aea7a5f1b01049d752008c53c52890b1a6daf660cf39e8eec506112bbdf633826001604051808473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001828152602001935050505060405180910390a15b50565b005b6102ca6004506104c8565b005b6102d760045061043a565b6040518082815260200191505060405180910390f35b6102f8600450610402565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61032f60045061044c565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610366600450610428565b6040518082815260200191505060405180910390f35b610387600450610431565b6040518082815260200191505060405180910390f35b6103a8600450610443565b6040518082815260200191505060405180910390f35b6103cf600480359060200150610472565b604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60016000505481565b60026000505481565b60036000505481565b60046000505481565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60066000508181548110156100025790600052602060002090600202016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010160005054905082565b6000600360005054421015156107d8576001600050546002600050541015156105cf57600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166000600260005054604051809050600060405180830381858888f19350505050507fe842aea7a5f1b01049d752008c53c52890b1a6daf660cf39e8eec506112bbdf6600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166002600050546000604051808473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001828152602001935050505060405180910390a161079d565b7fe842aea7a5f1b01049d752008c53c52890b1a6daf660cf39e8eec506112bbdf66000600b600060405180848152602001838152602001828152602001935050505060405180910390a1600090505b60066000505481101561079c57600660005081815481101561000257906000526020600020906002020160005060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166000600660005083815481101561000257906000526020600020906002020160005060010160005054604051809050600060405180830381858888f19350505050507fe842aea7a5f1b01049d752008c53c52890b1a6daf660cf39e8eec506112bbdf6600660005082815481101561000257906000526020600020906002020160005060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166006600050838154811015610002579060005260206000209060020201600050600101600050546000604051808473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001828152602001935050505060405180910390a15b806001019050805061061e565b5b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b5056&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000006&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0xf652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0xf652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d40&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x000000000000000000000000b49180d443dc4ca6028de0031ac09337891fd8ce&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000004&quot;: &quot;0x0000000000000000000000000000000000000000000000000de0b6b3a7640000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xb49180d443dc4ca6028de0031ac09337891fd8ce&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x193e9986e2e3f0c58988&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;2585&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;553416&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1909336&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577396224&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;7835218&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf870820a1985e8d4a5100083040b2894531f76bad925f6a925474996c7d738c1008045f6880de0b6b3a76400008081a2a08693170f040d9501b831b404d9e40fba040c5aef4b8974aedc20b3844aea7c32a0476861058ff9b8030c58bcba8be320acc855e4694a633c493fb50fbdb9455489&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x531f76bad925f6a925474996c7d738c1008045f6&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0xde0b6b3a7640000&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x3b920&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x19c3e&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 5,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x04d2029a5cbbed30969cdc0a2ca9e9fc6b719e323af0802b52466f07ee0ecada&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 553416,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x8df024322173d225a09681d35edeaa528aca60743a11a70f854c158862bf5282&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;617.42µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x531f76bad925f6a925474996c7d738c1008045f6&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xb49180d443dc4ca6028de0031ac09337891fd8ce&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2164e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x90b98a11000000000000000000000000877bd459c9b7d8576b44e59e09d076c25946f4430000000000000000000000000000000000000000000000000000000000000001&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 5,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x04d2029a5cbbed30969cdc0a2ca9e9fc6b719e323af0802b52466f07ee0ecada&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 553416,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x8df024322173d225a09681d35edeaa528aca60743a11a70f854c158862bf5282&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-554002a6ceb5ea8123355d34" role="button"
                   aria-expanded="false" aria-controls="id-554002a6ceb5ea8123355d34">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/revert.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/revert.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+68</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-554002a6ceb5ea8123355d34"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..897aebb0e05bf2a7141a3c8a58c153fe248c3d2f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert.json</span>
<span class="term-fg36">@@ -0,0 +1,68 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3665057456&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5232723&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xf4d8e706cfb25c0decbbdd4d2e2cc10c66376a3f&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294501&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513673601&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0f6cef2b7fbb504782e35aa82a2207e816a2b7a9&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x2a3fc32bcc019283&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;10&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xabbcd5b340c80b5f1c0545c04c987b87310296ae&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100755763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416632d0335ab811461007a578063548db174146100ab5780637f649783146100fc578063b092145e1461014d578063c3f44c0a14610186578063c47cf5de14610203575b600080fd5b341561008557600080fd5b610099600160a060020a0360043516610270565b60405190815260200160405180910390f35b34156100b657600080fd5b6100fa600460248135818101908301358060208181020160405190810160405280939291908181526020018383602002808284375094965061028f95505050505050565b005b341561010757600080fd5b6100fa600460248135818101908301358060208181020160405190810160405280939291908181526020018383602002808284375094965061029e95505050505050565b005b341561015857600080fd5b610172600160a060020a03600435811690602435166102ad565b604051901515815260200160405180910390f35b341561019157600080fd5b6100fa6004803560ff1690602480359160443591606435600160a060020a0316919060a49060843590810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965050509235600160a060020a031692506102cd915050565b005b341561020e57600080fd5b61025460046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284375094965061056a95505050505050565b604051600160a060020a03909116815260200160405180910390f35b600160a060020a0381166000908152602081905260409020545b919050565b61029a816000610594565b5b50565b61029a816001610594565b5b50565b600160209081526000928352604080842090915290825290205460ff1681565b60008080600160a060020a038416158061030d5750600160a060020a038085166000908152600160209081526040808320339094168352929052205460ff165b151561031857600080fd5b6103218561056a565b600160a060020a038116600090815260208190526040808220549295507f19000000000000000000000000000000000000000000000000000000000000009230918891908b908b90517fff000000000000000000000000000000000000000000000000000000000000008089168252871660018201526c01000000000000000000000000600160a060020a038088168202600284015286811682026016840152602a8301869052841602604a820152605e810182805190602001908083835b6020831061040057805182525b601f1990920191602091820191016103e0565b6001836020036101000a0380198251168184511617909252505050919091019850604097505050505050505051809103902091506001828a8a8a6040516000815260200160405260006040516020015260405193845260ff90921660208085019190915260408085019290925260608401929092526080909201915160208103908084039060008661646e5a03f1151561049957600080fd5b5050602060405103519050600160a060020a03838116908216146104bc57600080fd5b600160a060020a0380841660009081526020819052604090819020805460010190559087169086905180828051906020019080838360005b8381101561050d5780820151818401525b6020016104f4565b50505050905090810190601f16801561053a5780820380516001836020036101000a031916815260200191505b5091505060006040518083038160008661646e5a03f1915050151561055e57600080fd5b5b505050505050505050565b600060248251101561057e5750600061028a565b600160a060020a0360248301511690505b919050565b60005b825181101561060157600160a060020a033316600090815260016020526040812083918584815181106105c657fe5b90602001906020020151600160a060020a031681526020810191909152604001600020805460ff19169115159190911790555b600101610597565b5b5050505600a165627a7a723058200027e8b695e9d2dea9f3629519022a69f3a1d23055ce86406e686ea54f31ee9c0029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3672229776&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;5227619&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xa07b3d6c6bf63f5f981016db9f2d1d93033833f2c17e8bf7209e85f1faf08076&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x806e151ce2817be922e93e8d5921fa0f0d0fd213d6b2b9a3fa17458e74a163d0&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0xbc5d43adc2c30c7d&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2294500&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xca645b335888352ef9d8b1ef083e9019648180b259026572e3139717270de97d&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513673552&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7160066586979149&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9018b0a8505d21dba00832dc6c094abbcd5b340c80b5f1c0545c04c987b87310296ae80b9012473b40a5c000000000000000000000000400de2e016bda6577407dfc379faba9899bc73ef0000000000000000000000002cc31912b2b0f3075a87b3640923d45a26cef3ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000064d79d8e6c7265636f76657279416464726573730000000000000000000000000000000000000000000000000000000000383e3ec32dc0f66d8fe60dbdc2f6815bdf73a988383e3ec32dc0f66d8fe60dbdc2f6815bdf73a988000000000000000000000000000000000000000000000000000000000000000000000000000000001ba0fd659d76a4edbd2a823e324c93f78ad6803b30ff4a9c8bce71ba82798975c70ca06571eecc0b765688ec6c78942c5ee8b585e00988c0141b518287e9be919bc48a&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x0f6cef2b7fbb504782e35aa82a2207e816a2b7a9&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2d55e8&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x73b40a5c000000000000000000000000400de2e016bda6577407dfc379faba9899bc73ef0000000000000000000000002cc31912b2b0f3075a87b3640923d45a26cef3ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000064d79d8e6c7265636f76657279416464726573730000000000000000000000000000000000000000000000000000000000383e3ec32dc0f66d8fe60dbdc2f6815bdf73a988383e3ec32dc0f66d8fe60dbdc2f6815bdf73a98800000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xabbcd5b340c80b5f1c0545c04c987b87310296ae&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2294501,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;execution reverted&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x719b&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b4a930c7a8b2b35f71a3a9be" role="button"
                   aria-expanded="false" aria-controls="id-b4a930c7a8b2b35f71a3a9be">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/revert_reason.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/revert_reason.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+74</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b4a930c7a8b2b35f71a3a9be"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert_reason.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert_reason.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..62dbaf20dc9421bb3ddf0a133dc64993cbb0f3ed</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;revert_reason.json</span>
<span class="term-fg36">@@ -0,0 +1,74 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;2&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;8000000&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;3212651&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1597246515&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0xf58833cf0c791881b494eb79d461e08a1f043f52&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x608060405234801561001057600080fd5b50600436106100a5576000357c010000000000000000000000000000000000000000000000000000000090048063609ff1bd11610078578063609ff1bd146101af5780639e7b8d61146101cd578063a3ec138d14610211578063e2ba53f0146102ae576100a5565b80630121b93f146100aa578063013cf08b146100d85780632e4176cf146101215780635c19a95c1461016b575b600080fd5b6100d6600480360360208110156100c057600080fd5b81019080803590602001909291905050506102cc565b005b610104600480360360208110156100ee57600080fd5b8101908080359060200190929190505050610469565b604051808381526020018281526020019250505060405180910390f35b61012961049a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6101ad6004803603602081101561018157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506104bf565b005b6101b76108db565b6040518082815260200191505060405180910390f35b61020f600480360360208110156101e357600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610952565b005b6102536004803603602081101561022757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610b53565b60405180858152602001841515151581526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200194505050505060405180910390f35b6102b6610bb0565b6040518082815260200191505060405180910390f35b6000600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905060008160000154141561038a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260148152602001807f486173206e6f20726967687420746f20766f746500000000000000000000000081525060200191505060405180910390fd5b8060010160009054906101000a900460ff161561040f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600e8152602001807f416c726561647920766f7465642e00000000000000000000000000000000000081525060200191505060405180910390fd5b60018160010160006101000a81548160ff02191690831515021790555081816002018190555080600001546002838154811061044757fe5b9060005260206000209060020201600101600082825401925050819055505050565b6002818154811061047657fe5b90600052602060002090600202016000915090508060000154908060010154905082565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090508060010160009054906101000a900460ff1615610587576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260128152602001807f596f7520616c726561647920766f7465642e000000000000000000000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610629576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601e8152602001807f53656c662d64656c65676174696f6e20697320646973616c6c6f7765642e000081525060200191505060405180910390fd5b5b600073ffffffffffffffffffffffffffffffffffffffff16600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146107cc57600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1691503373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614156107c7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260198152602001807f466f756e64206c6f6f7020696e2064656c65676174696f6e2e0000000000000081525060200191505060405180910390fd5b61062a565b60018160010160006101000a81548160ff021916908315150217905550818160010160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002090508060010160009054906101000a900460ff16156108bf578160000154600282600201548154811061089c57fe5b9060005260206000209060020201600101600082825401925050819055506108d6565b816000015481600001600082825401925050819055505b505050565b6000806000905060008090505b60028054905081101561094d57816002828154811061090357fe5b9060005260206000209060020201600101541115610940576002818154811061092857fe5b90600052602060002090600202016001015491508092505b80806001019150506108e8565b505090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146109f7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526028815260200180610bde6028913960400191505060405180910390fd5b600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff1615610aba576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260188152602001807f54686520766f74657220616c726561647920766f7465642e000000000000000081525060200191505060405180910390fd5b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015414610b0957600080fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000018190555050565b60016020528060005260406000206000915090508060000154908060010160009054906101000a900460ff16908060010160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154905084565b60006002610bbc6108db565b81548110610bc657fe5b90600052602060002090600202016000015490509056fe4f6e6c79206368616972706572736f6e2063616e206769766520726967687420746f20766f74652ea26469706673582212201d282819f8f06fed792100d60a8b08809b081a34a1ecd225e83a4b41122165ed64736f6c63430006060033&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x6200beec95762de01ce05f2a0e58ce3299dbb53c68c9f3254a242121223cdf58&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xf7579c3d8a669c89d5ed246a22eb6db8f6fedbf1&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x57af9d6b3df812900&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;6&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;IstanbulBlock&quot;: 1561651,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 5,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3509749784&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4727564&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x609948ac3bd3c00b7736b933248891d6c901ee28f066241bddb28f4e00a9f440&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xb131e4507c93c7377de00e7c271bf409ec7492767142ff0f45c882f8068c2ada&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x4eb12e19c16d43da&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2289805&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xc7f10f352bff82fac3c2999d3085093d12652e19c7fd32591de49dc5d91b4f1f&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513601261&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7143276353481064&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf888068449504f80832dc6c094f58833cf0c791881b494eb79d461e08a1f043f5280a45c19a95c000000000000000000000000f7579c3d8a669c89d5ed246a22eb6db8f6fedbf12da0264664db3e71fae1dbdaf2f53954be149ad3b7ba8a5054b4d89c70febfacc8b1a0212e8398757963f419681839ae8c5a54b411e252473c82d93dda68405ca63294&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xf7579c3d8a669c89d5ed246a22eb6db8f6fedbf1&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x2d7308&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x5c19a95c000000000000000000000000f7579c3d8a669c89d5ed246a22eb6db8f6fedbf1&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xf58833cf0c791881b494eb79d461e08a1f043f52&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 3212651,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;execution reverted&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x5940&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x08c379a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001e53656c662d64656c65676174696f6e20697320646973616c6c6f7765642e0000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f736970b74022dd49929a21e" role="button"
                   aria-expanded="false" aria-controls="id-f736970b74022dd49929a21e">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/selfdestruct.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/selfdestruct.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+90</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f736970b74022dd49929a21e"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;selfdestruct.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;selfdestruct.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..cd34d0b6d063e17c7d6661672f0261e74a5b975c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;selfdestruct.json</span>
<span class="term-fg36">@@ -0,0 +1,91 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4628640&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010b05846765746888676f312e31342e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9244120&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x5a1f551897cc91265225b0453136ad8c7eef1c1c8b06139da4f2e6e710c1f4df&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x73f26d124436b0791169d63a3af29c2ae47765a3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xd6735e63f8937fe0c5491e0d5836ec28467363be7ada5a2f979f9d107e2c831e&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x7c35e34d2e328d7d&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555145&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x565873b05f71b98595133e37a52d79c3476ce820c05ebedaddd35541b0e894a3&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590793819&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2241994078605&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x119f569a45e9d0089d51d7f9529f5ea9bf5785e2&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x622e8fced69d43eb8d97&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;260140&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555146&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4630900&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590793820&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9253146&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf8628303f82c843b9aca0083019ecc80808e605a600053600160006001f0ff0081a2a077f539ae2a58746bbfa6370fc423f946870efa32753d697d3729d361a428623aa0384ef9a5650d6630f5c1ddef616bffa5fc72a95a9314361d0918de066aa4475a&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xcf08&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x605a600053600160006001f0ff00&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x102a1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x1d99a1a3efa9181f540f9e24fa6e4e08eb7844ca&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 14,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xdd76f02407e2f8329303ba688e111cae4f7008ad0d14d6e42c5698424ea36d79&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555146,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xafb4f1dd27b9054c805acb81a88ed04384788cb31d84164c21874935c81e5c7e&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;187.145µs&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;suicide&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x1d99a1a3efa9181f540f9e24fa6e4e08eb7844ca&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;result&quot;: null,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 14,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0xdd76f02407e2f8329303ba688e111cae4f7008ad0d14d6e42c5698424ea36d79&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555146,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xafb4f1dd27b9054c805acb81a88ed04384788cb31d84164c21874935c81e5c7e&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e03c5fc264ba0f95a88a8ed9" role="button"
                   aria-expanded="false" aria-controls="id-e03c5fc264ba0f95a88a8ed9">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/simple.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/simple.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+97</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e03c5fc264ba0f95a88a8ed9"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;simple.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;simple.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6d084410a366089765aca9677bfc6edcc2ae86b0</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;simple.json</span>
<span class="term-fg36">@@ -0,0 +1,97 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3502894804&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4722976&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x1585936b53834b021f68cc13eeefdec2efc8e724&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2289806&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513601314&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x0024f658a46fbb89d8ac105e98d7ac7cbbaf27c5&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;22&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x3b873a919aa0512d5a0f09e6dcceaa4a6727fafe&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x4d87094125a369d9bd5&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156100935763ffffffff60e060020a60003504166311ee8382811461009c57806313af4035146100be5780631f5e8f4c146100ee57806324daddc5146101125780634921a91a1461013b57806363e4bff414610157578063764978f91461017f578063893d20e8146101a1578063ba40aaa1146101cd578063cebc9a82146101f4578063e177246e14610216575b61009a5b5b565b005b34156100a457fe5b6100ac61023d565b60408051918252519081900360200190f35b34156100c657fe5b6100da600160a060020a0360043516610244565b604080519115158252519081900360200190f35b34156100f657fe5b6100da610307565b604080519115158252519081900360200190f35b341561011a57fe5b6100da6004351515610318565b604080519115158252519081900360200190f35b6100da6103d6565b604080519115158252519081900360200190f35b6100da600160a060020a0360043516610420565b604080519115158252519081900360200190f35b341561018757fe5b6100ac61046c565b60408051918252519081900360200190f35b34156101a957fe5b6101b1610473565b60408051600160a060020a039092168252519081900360200190f35b34156101d557fe5b6100da600435610483565b604080519115158252519081900360200190f35b34156101fc57fe5b6100ac61050d565b60408051918252519081900360200190f35b341561021e57fe5b6100da600435610514565b604080519115158252519081900360200190f35b6003545b90565b60006000610250610473565b600160a060020a031633600160a060020a03161415156102705760006000fd5b600160a060020a03831615156102865760006000fd5b50600054600160a060020a0390811690831681146102fb57604051600160a060020a0380851691908316907ffcf23a92150d56e85e3a3d33b357493246e55783095eb6a733eb8439ffc752c890600090a360008054600160a060020a031916600160a060020a03851617905560019150610300565b600091505b5b50919050565b60005460a060020a900460ff165b90565b60006000610324610473565b600160a060020a031633600160a060020a03161415156103445760006000fd5b5060005460a060020a900460ff16801515831515146102fb576000546040805160a060020a90920460ff1615158252841515602083015280517fe6cd46a119083b86efc6884b970bfa30c1708f53ba57b86716f15b2f4551a9539281900390910190a16000805460a060020a60ff02191660a060020a8515150217905560019150610300565b600091505b5b50919050565b60006103e0610307565b801561040557506103ef610473565b600160a060020a031633600160a060020a031614155b156104105760006000fd5b610419336105a0565b90505b5b90565b600061042a610307565b801561044f5750610439610473565b600160a060020a031633600160a060020a031614155b1561045a5760006000fd5b610463826105a0565b90505b5b919050565b6001545b90565b600054600160a060020a03165b90565b6000600061048f610473565b600160a060020a031633600160a060020a03161415156104af5760006000fd5b506001548281146102fb57604080518281526020810185905281517f79a3746dde45672c9e8ab3644b8bb9c399a103da2dc94b56ba09777330a83509929181900390910190a160018381559150610300565b600091505b5b50919050565b6002545b90565b60006000610520610473565b600160a060020a031633600160a060020a03161415156105405760006000fd5b506002548281146102fb57604080518281526020810185905281517ff6991a728965fedd6e927fdf16bdad42d8995970b4b31b8a2bf88767516e2494929181900390910190a1600283905560019150610300565b600091505b5b50919050565b60006000426105ad61023d565b116102fb576105c46105bd61050d565b4201610652565b6105cc61046c565b604051909150600160a060020a038416908290600081818185876187965a03f1925050501561063d57604080518281529051600160a060020a038516917f9bca65ce52fdef8a470977b51f247a2295123a4807dfa9e502edf0d30722da3b919081900360200190a260019150610300565b6102fb42610652565b5b600091505b50919050565b60038190555b505600a165627a7a72305820f3c973c8b7ed1f62000b6701bd5b708469e19d0f1d73fde378a56c07fd0b19090029&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000001b436ba50d378d4bbc8660d312a13df6af6e89dfb&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x00000000000000000000000000000000000000000000000006f05b59d3b20000&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000003c&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;: &quot;0x000000000000000000000000000000000000000000000000000000005a37b834&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xb436ba50d378d4bbc8660d312a13df6af6e89dfb&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x1780d77678137ac1b775&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;29072&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;3509749784&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x4554482e45544846414e532e4f52472d4641313738394444&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4727564&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x609948ac3bd3c00b7736b933248891d6c901ee28f066241bddb28f4e00a9f440&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0xbbf5029fd710d227630c8b7d338051b8e76d50b3&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xb131e4507c93c7377de00e7c271bf409ec7492767142ff0f45c882f8068c2ada&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x4eb12e19c16d43da&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;2289805&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0xc7f10f352bff82fac3c2999d3085093d12652e19c7fd32591de49dc5d91b4f1f&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1513601261&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;7143276353481064&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf88b8271908506fc23ac0083015f90943b873a919aa0512d5a0f09e6dcceaa4a6727fafe80a463e4bff40000000000000000000000000024f658a46fbb89d8ac105e98d7ac7cbbaf27c52aa0bdce0b59e8761854e857fe64015f06dd08a4fbb7624f6094893a79a72e6ad6bea01d9dde033cff7bb235a3163f348a6d7ab8d6b52bc0963a95b91612e40ca766a4&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0xb436ba50d378d4bbc8660d312a13df6af6e89dfb&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x10738&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x63e4bff40000000000000000000000000024f658a46fbb89d8ac105e98d7ac7cbbaf27c5&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x3b873a919aa0512d5a0f09e6dcceaa4a6727fafe&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 2289806,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x9751&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x3b873a919aa0512d5a0f09e6dcceaa4a6727fafe&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x6d05&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x0024f658a46fbb89d8ac105e98d7ac7cbbaf27c5&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x6f05b59d3b20000&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 0,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [0],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e95cc637b18264486f8a3d04" role="button"
                   aria-expanded="false" aria-controls="id-e95cc637b18264486f8a3d04">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/skip_no_balance_error.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/skip_no_balance_error.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+69</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e95cc637b18264486f8a3d04"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;skip_no_balance_error.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;skip_no_balance_error.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..d530fe908b2a2f3ed109e128fab52a2cc62f96ab</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;skip_no_balance_error.json</span>
<span class="term-fg36">@@ -0,0 +1,70 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4673862&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd683010b05846765746886676f312e3133856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9471919&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x7f072150c5905c214966e3432d418910badcdbe510aceaac295b1d7059cc0ffc&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x113ced8fedb939fdc862008da7bdddde726f997c0e6dfba0e55613994757b489&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0f411a2e5552c5b7&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555284&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x9fe125b361b72d5479b24ad9be9964b74228c73a2dfb0065060a79b4a6dfaa1e&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795374&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;2242642335405&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0xe85df1413eebe1b191c26260e19783a274a6b041&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x6244c985ef1e48e84531&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;265775&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;1555285&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;4676144&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1590795378&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;9481167&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9014083040e2f843b9aca008301aab08080b8eb7f000000000000000000000000945304eb96065b2a98b57a48a06ae28d285a71b57f000000000000000000000000000000000000000000000000000000000000c3507f000000000000000000000000945304eb96065b2a98b57a48a06ae28d285a71b5547f000000000000000000000000000000000000000000000000000000000000c3507f000000000000000000000000000000000000000000000000000000000000c3507f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000037f05581a2a09db45e7846f193471f6d897fb6ff58b7ec41a9c6f63d10aca47d821c365981cba052ec320875625e16141a1a9e8b7993de863698fb699f93ae2cab26149bbb144f&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;create&quot;,</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0xd550&quot;,</span>
<span class="term-fg32">+        &quot;init&quot;: &quot;0x7f000000000000000000000000945304eb96065b2a98b57a48a06ae28d285a71b57f000000000000000000000000000000000000000000000000000000000000c3507f000000000000000000000000945304eb96065b2a98b57a48a06ae28d285a71b5547f000000000000000000000000000000000000000000000000000000000000c3507f000000000000000000000000000000000000000000000000000000000000c3507f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000037f055&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;out of gas&quot;,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 16,</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x384487e5ae8d2997aece8e28403d393cb9752425e6de358891bed981c5af1c05&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 1555285,</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0x93231d8e9662adb4c5c703583a92c7b3112cd5448f43ab4fa1f0f00a0183ed3f&quot;,</span>
<span class="term-fg32">+      &quot;time&quot;: &quot;665.278µs&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-184a873e01b09c0a9367fa32" role="button"
                   aria-expanded="false" aria-controls="id-184a873e01b09c0a9367fa32">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/staticcall_precompiled.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/staticcall_precompiled.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+82</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-184a873e01b09c0a9367fa32"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;staticcall_precompiled.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;staticcall_precompiled.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9291149bdb691a6136c431815b366f251b1b5d7c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;staticcall_precompiled.json</span>
<span class="term-fg36">@@ -0,0 +1,83 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;2028219&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd883010906846765746888676f312e31332e35856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;23481547&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x3c06114e88c26b52decfe4e5f6d4d51cfaaea0317b646017fac32fadbe7df9f5&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x2a1442b4fbabf7b5507c13ccf076a547abfaeb1b&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x46108f74220c5ab23651f93912b14fea37ed1380d22e10639a1f5651c98cb949&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x426a5267e0b636fe&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;567687&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x7b4b193fe73ef87101c7c325954681861cc240c299d03459784b2b11c9c522ae&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577578008&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;485254950048&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x8521f13dd5e4bc3dab3cf0f01a195a5af899e851&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x608060405260043610610251576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806301ffc9a7146102565780630519ce79146102c857806306fdde031461031f578063095ea7b3146103af5780630a0f81681461040a5780631155dfe51461046157806318160ddd1461048c5780631b57cd44146104b7578063200b1e641461050657806327d7874c146105cb5780632ba73c151461061c5780633108e4d71461066d578063317676bf146106bc5780633f4ba83a1461071557806342842e0e1461072c57806346cb96fa146107a75780634e0a3379146107f65780635501d42d146108475780635c975abb146108a05780635fd8c710146108cf5780636352211e146108e65780636af04a571461096157806370a08231146109b85780637158798814610a1d5780637866928014610a6e5780638456cb5914610ae95780638462151c14610b0057806385ac788214610ba657806395787d2614610c2c57806395d89b4114610c6e57806396b5d99214610cfe578063990581b614610d795780639db797f014610e2d578063ab8f933a14610e80578063ad84202814610eab578063b047fb5014610ed6578063b355752214610f2d578063b9db15b414610f7c578063bc4006f514610fd2578063ca083be214611029578063cdd22c9314611082578063cec21acb146110d1578063e078d8b114611136578063e17b25af14611182578063e52ab74b146111d3578063f010432314611222578063fac9c51f1461129d578063fdb33429146112ec578063fffb147914611367575b600080fd5b34801561026257600080fd5b506102ae6004803603602081101561027957600080fd5b8101908080357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690602001909291905050506113e2565b604051808215151515815260200191505060405180910390f35b3480156102d457600080fd5b506102dd6116cb565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561032b57600080fd5b506103346116f1565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610374578082015181840152602081019050610359565b50505050905090810190601f1680156103a15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156103bb57600080fd5b50610408600480360360408110156103d257600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061172a565b005b34801561041657600080fd5b5061041f6117c4565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561046d57600080fd5b506104766117e9565b6040518082815260200191505060405180910390f35b34801561049857600080fd5b506104a16117f6565b6040518082815260200191505060405180910390f35b3480156104c357600080fd5b506104f0600480360360208110156104da57600080fd5b8101908080359060200190929190505050611806565b6040518082815260200191505060405180910390f35b34801561051257600080fd5b506105b5600480360360a081101561052957600080fd5b81019080803590602001909291908035906020019064010000000081111561055057600080fd5b82018360208201111561056257600080fd5b8035906020019184600183028401116401000000008311171561058457600080fd5b9091929391929390803560ff169060200190929190803590602001909291908035906020019092919050505061181e565b6040518082815260200191505060405180910390f35b3480156105d757600080fd5b5061061a600480360360208110156105ee57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611cac565b005b34801561062857600080fd5b5061066b6004803603602081101561063f57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611d86565b005b34801561067957600080fd5b506106a66004803603602081101561069057600080fd5b8101908080359060200190929190505050611e61565b6040518082815260200191505060405180910390f35b3480156106c857600080fd5b506106ff600480360360408110156106df57600080fd5b810190808035906020019092919080359060200190929190505050611e79565b6040518082815260200191505060405180910390f35b34801561072157600080fd5b5061072a611ea9565b005b34801561073857600080fd5b506107a56004803603606081101561074f57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611f86565b005b3480156107b357600080fd5b506107e0600480360360208110156107ca57600080fd5b8101908080359060200190929190505050612053565b6040518082815260200191505060405180910390f35b34801561080257600080fd5b506108456004803603602081101561081957600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061206b565b005b34801561085357600080fd5b5061088a6004803603604081101561086a57600080fd5b810190808035906020019092919080359060200190929190505050612146565b6040518082815260200191505060405180910390f35b3480156108ac57600080fd5b506108b5612176565b604051808215151515815260200191505060405180910390f35b3480156108db57600080fd5b506108e4612189565b005b3480156108f257600080fd5b5061091f6004803603602081101561090957600080fd5b810190808035906020019092919050505061226d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561096d57600080fd5b506109766122e6565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156109c457600080fd5b50610a07600480360360208110156109db57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061230c565b6040518082815260200191505060405180910390f35b348015610a2957600080fd5b50610a6c60048036036020811015610a4057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612355565b005b348015610a7a57600080fd5b50610aa760048036036020811015610a9157600080fd5b8101908080359060200190929190505050612472565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b348015610af557600080fd5b50610afe6124a5565b005b348015610b0c57600080fd5b50610b4f60048036036020811015610b2357600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506125e9565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b83811015610b92578082015181840152602081019050610b77565b505050509050019250505060405180910390f35b348015610bb257600080fd5b50610c16600480360360c0811015610bc957600080fd5b810190808035906020019092919080359060200190929190803515159060200190929190803560ff1690602001909291908035906020019092919080359060200190929190505050612737565b6040518082815260200191505060405180910390f35b610c5860048036036020811015610c4257600080fd5b8101908080359060200190929190505050612c0c565b6040518082815260200191505060405180910390f35b348015610c7a57600080fd5b50610c8361304b565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610cc3578082015181840152602081019050610ca8565b50505050905090810190601f168015610cf05780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b348015610d0a57600080fd5b50610d3760048036036020811015610d2157600080fd5b8101908080359060200190929190505050613084565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b348015610d8557600080fd5b50610db260048036036020811015610d9c57600080fd5b81019080803590602001909291905050506130b7565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610df2578082015181840152602081019050610dd7565b50505050905090810190601f168015610e1f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b348015610e3957600080fd5b50610e6660048036036020811015610e5057600080fd5b810190808035906020019092919050505061317b565b604051808215151515815260200191505060405180910390f35b348015610e8c57600080fd5b50610e956131b3565b6040518082815260200191505060405180910390f35b348015610eb757600080fd5b50610ec06131b9565b6040518082815260200191505060405180910390f35b348015610ee257600080fd5b50610eeb6131bf565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b348015610f3957600080fd5b50610f6660048036036020811015610f5057600080fd5b81019080803590602001909291905050506131e5565b6040518082815260200191505060405180910390f35b348015610f8857600080fd5b50610fb560048036036020811015610f9f57600080fd5b81019080803590602001909291905050506131fd565b604051808381526020018281526020019250505060405180910390f35b348015610fde57600080fd5b50610fe7613235565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561103557600080fd5b5061106c6004803603604081101561104c57600080fd5b81019080803590602001909291908035906020019092919050505061325b565b6040518082815260200191505060405180910390f35b34801561108e57600080fd5b506110bb600480360360208110156110a557600080fd5b810190808035906020019092919050505061328b565b6040518082815260200191505060405180910390f35b3480156110dd57600080fd5b50611120600480360360208110156110f457600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506132ab565b6040518082815260200191505060405180910390f35b61116c6004803603604081101561114c57600080fd5b8101908080359060200190929190803590602001909291905050506132c3565b6040518082815260200191505060405180910390f35b34801561118e57600080fd5b506111d1600480360360208110156111a557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506134ee565b005b3480156111df57600080fd5b5061120c600480360360208110156111f657600080fd5b810190808035906020019092919050505061358d565b6040518082815260200191505060405180910390f35b34801561122e57600080fd5b5061125b6004803603602081101561124557600080fd5b81019080803590602001909291905050506135ad565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156112a957600080fd5b506112d6600480360360208110156112c057600080fd5b81019080803590602001909291905050506135e0565b6040518082815260200191505060405180910390f35b3480156112f857600080fd5b506113256004803603602081101561130f57600080fd5b81019080803590602001909291905050506135f8565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561137357600080fd5b506113a06004803603602081101561138a57600080fd5b810190808035906020019092919050505061362b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b600060405180807f737570706f727473496e74657266616365286279746573342900000000000000815250601901905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161480611610575060405180807f746f6b656e734f664f776e6572286164647265737329000000000000000000008152506016019050604051809103902060405180807f736166655472616e7366657246726f6d28616464726573732c6164647265737381526020017f2c75696e743235362900000000000000000000000000000000000000000000008152506029019050604051809103902060405180807f617070726f766528616464726573732c75696e743235362900000000000000008152506018019050604051809103902060405180807f6f776e65724f662875696e7432353629000000000000000000000000000000008152506010019050604051809103902060405180807f62616c616e63654f6628616464726573732900000000000000000000000000008152506012019050604051809103902060405180807f746f74616c537570706c79282900000000000000000000000000000000000000815250600d019050604051809103902018181818187bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806116c4575060405180807f73796d626f6c28290000000000000000000000000000000000000000000000008152506008019050604051809103902060405180807f6e616d652829000000000000000000000000000000000000000000000000000081525060060190506040518091039020187bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9050919050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6040805190810160405280600781526020017f426974766965770000000000000000000000000000000000000000000000000081525081565b600260149054906101000a900460ff1615151561174657600080fd5b611750338261365e565b151561175b57600080fd5b61176581836136ca565b808273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600480549050905090565b6000600160048054905003905090565b60166020528060005260406000206000915090505481565b600085858080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050506101006000825111801561187a575080825111155b151561188557600080fd5b33896005600082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156118f557600080fd5b6000878760405160200180838152602001828152602001925050506040516020818303038152906040528051906020012090506000600e6000838152602001908152602001600020541415156119b3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f5369676e617475726520416c726561647920557365640000000000000000000081525060200191505060405180910390fd5b600560008d815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1660018d60405160200180828152602001915050604051602081830303815290604052805190602001208b8b8b60405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa158015611a80573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff16141515611aac57600080fd5b611ab4613a21565b6020604051908101604052808d8d8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050815250905060006001600a839080600181540180825580915050906001820390600052602060002001600090919290919091506000820151816000019080519060200190611b54929190613a35565b5050500390508063ffffffff1681141515611b6e57600080fd5b7fe819187a0cf517f3c23c7bd6e6b11a3aec56ec3f2784dc69ac56ebac668748ee3382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a133600b600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508d600c600083815260200190815260200160002081905550600860008f81526020019081526020016000208190806001815401808255809150509060018203906000526020600020016000909192909190915055508d600e600085815260200190815260200160002081905550809750505050505050509695505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611d0757600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515611d4357600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611de157600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515611e1d57600080fd5b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60116020528060005260406000206000915090505481565b600860205281600052604060002081815481101515611e9457fe5b90600052602060002001600091509150505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611f0457600080fd5b600260149054906101000a900460ff161515611f1f57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff16601860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515611f7c57600080fd5b611f84613720565b565b600260149054906101000a900460ff16151515611fa257600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515611fde57600080fd5b3073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415151561201957600080fd5b61202333826137b3565b151561202e57600080fd5b612038838261365e565b151561204357600080fd5b61204e83838361381f565b505050565b600e6020528060005260406000206000915090505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156120c657600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561210257600080fd5b80600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600d6020528160005260406000208181548110151561216157fe5b90600052602060002001600091509150505481565b600260149054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156121e557600080fd5b60003073ffffffffffffffffffffffffffffffffffffffff16319050600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015612269573d6000803e3d6000fd5b5050565b60006005600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156122e157600080fd5b919050565b601860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156123b057600080fd5b600260149054906101000a900460ff1615156123cb57600080fd5b80601860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f450db8da6efbe9c22f2347f7c2021231df1fc58d3ae9a2fa75d39fa44619930581604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a150565b600b6020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061254d57506000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b806125a55750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b15156125b057600080fd5b600260149054906101000a900460ff161515156125cc57600080fd5b6001600260146101000a81548160ff021916908315150217905550565b606060006125f68361230c565b9050600081141561263a5760006040519080825280602002602001820160405280156126315781602001602082028038833980820191505090505b50915050612732565b60608160405190808252806020026020018201604052801561266b5781602001602082028038833980820191505090505b50905060006126786117f6565b905060008090506000600190505b8281111515612729578673ffffffffffffffffffffffffffffffffffffffff166005600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561271c5780848381518110151561270557fe5b906020019060200201818152505081806001019250505b8080600101915050612686565b83955050505050505b919050565b600033876005600082815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141515156127a957600080fd5b60008585604051602001808381526020018281526020019250505060405160208183030381529060405280519060200120905060008911156128715788601260008381526020019081526020016000205414151515612870576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f5369676e617475726520416c726561647920557365640000000000000000000081525060200191505060405180910390fd5b5b600560008b815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1660018b604051602001808281526020019150506040516020818303038152906040528051906020012089898960405160008152602001604052604051808581526020018460ff1660ff1681526020018381526020018281526020019450505050506020604051602081039080840390855afa15801561293e573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff1614151561296a57600080fd5b6000339050600073ffffffffffffffffffffffffffffffffffffffff16600b60008c815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156129de57600080fd5b8073ffffffffffffffffffffffffffffffffffffffff16600b60008c815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515612a4c57600080fd5b612a54613ab5565b6020604051908101604052808b1515815250905060006001600f8390806001815401808255809150509060018203906000526020600020016000909192909190915060008201518160000160006101000a81548160ff02191690831515021790555050500390508063ffffffff1681141515612acf57600080fd5b7fa10f25ef783c24056e27eb55eb6c0ac1c4863cd5eab7e657cd067926b3dce0648382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1826010600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600d60008d81526020019081526020016000208190806001815401808255809150509060018203906000526020600020016000909192909190915055508b60116000838152602001908152602001600020819055508b60126000868152602001908152602001600020819055508096505050505050509695505050505050565b600034601354808210151515612c2157600080fd5b60003390506000600b600087815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515612c9a57600080fd5b8173ffffffffffffffffffffffffffffffffffffffff16600b600088815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515612d0857600080fd5b612d10613acb565b602060405190810160405280348152509050600060016014839080600181540180825580915050906001820390600052602060002001600090919290919091506000820151816000015550500390508063ffffffff1681141515612d7357600080fd5b836015600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508760166000838152602001908152602001600020819055506000606434604602811515612dee57fe5b0490506000600d60008b815260200190815260200160002080549050823403811515612e1657fe5b049050600b60008b815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015612e92573d6000803e3d6000fd5b5060008090505b600d60008c815260200190815260200160002080549050811015612fcf5760106000600d60008e815260200190815260200160002083815481101515612edb57fe5b9060005260206000200154815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051600060405180830381858888f19350505050158015612f5a573d6000803e3d6000fd5b5060176000858152602001908152602001600020600d60008d815260200190815260200160002082815481101515612f8e57fe5b906000526020600020015490806001815401808255809150509060018203906000526020600020016000909192909190915055508080600101915050612e99565b507f6ea1e5e03071ff9bad53b614eafcc00d29db646e9c351fcc00d45a4118d7c51a8684604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a18298505050505050505050919050565b6040805190810160405280600281526020017f425600000000000000000000000000000000000000000000000000000000000081525081565b60056020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60606000600a838154811015156130ca57fe5b906000526020600020019050806000018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561316e5780601f106131435761010080835404028352916020019161316e565b820191906000526020600020905b81548152906001019060200180831161315157829003601f168201915b5050505050915050919050565b600080600f8381548110151561318d57fe5b9060005260206000200190508060000160009054906101000a900460ff16915050919050565b60035481565b60135481565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60126020528060005260406000206000915090505481565b600080600060048481548110151561321157fe5b90600052602060002090600202019050806000015492508060010154915050915091565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60176020528160005260406000208181548110151561327657fe5b90600052602060002001600091509150505481565b600060086000838152602001908152602001600020805490509050919050565b60066020528060005260406000206000915090505481565b6000346003548082101515156132d857600080fd5b8460007f01000000000000000000000000000000000000000000000000000000000000000281600060208110151561330c57fe5b1a7f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415151561335e57600080fd5b8460007f01000000000000000000000000000000000000000000000000000000000000000281600060208110151561339257fe5b1a7f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916141515156133e457600080fd5b60003390506133f1613adf565b60408051908101604052808a81526020018981525090506000600160048390806001815401808255809150509060018203906000526020600020906002020160009091929091909150600082015181600001556020820151816001015550500390508063ffffffff168114151561346757600080fd5b7f982bb66d9aa60573bc0a2066122e1466ecbc4c179a5e7c1c5b589345008ce69a8382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16134de6000848361381f565b8097505050505050505092915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561354957600080fd5b80600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000600d6000838152602001908152602001600020805490509050919050565b60156020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600c6020528060005260406000206000915090505481565b60076020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60106020528060005260406000206000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008273ffffffffffffffffffffffffffffffffffffffff166005600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614905092915050565b806007600084815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561377b57600080fd5b600260149054906101000a900460ff16151561379657600080fd5b6000600260146101000a81548160ff021916908315150217905550565b60008273ffffffffffffffffffffffffffffffffffffffff166007600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614905092915050565b600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008154809291906001019190505550816005600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614151561397d57600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008154809291906001900391905055506007600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690555b7f70a295484349ac4c2073cdca8ba026869fff31e0d35e268f820e44c9d25f4a2e838383604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390a1505050565b602060405190810160405280606081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10613a7657805160ff1916838001178555613aa4565b82800160010185558215613aa4579182015b82811115613aa3578251825591602001919060010190613a88565b5b509050613ab19190613aff565b5090565b6020604051908101604052806000151581525090565b602060405190810160405280600081525090565b604080519081016040528060008019168152602001600080191681525090565b613b2191905b80821115613b1d576000816000905550600101613b05565b5090565b9056fea165627a7a72305820b73bf81476c95567782e45ebae5220573d46c55a9004c11243c470bc91f2d26d0029&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x05b8ccbb9d4d8fb16ea74ce3c29a41f1b461fbdaff4714a0d9a8eb05499746bc&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+          &quot;0xa54c2b4154b4f221d71d6d5bc0ec905c931a021bb6fb138fc0495bb0373e2276&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x0000000000000000000000000000000000000001&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0xcec3d4daf44926cc41e&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;147795&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;567688&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;2028219&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577578023&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;23504477&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf9018f8302415385746a52880083048196948521f13dd5e4bc3dab3cf0f01a195a5af899e85180b90124200b1e64000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000001b9af799918107e9a339eba0584b8b60b35aae6f087c74f6bfc00c9301849b204d094ed65e09c76c2597f5516f9440aad2921e50dde096e7caaa65a536d4d9265e00000000000000000000000000000000000000000000000000000000000000504269747669657720697320616e20616d617a696e6720776562736974652e20596f752073686f756c6420646566696e6974656c792061646420796f75722070726f6475637420746f2069742e20e282bf0000000000000000000000000000000081a2a0686e4a69e1fa6cac6b4f751a3935ca5a371d720c34d3a7136988aa017a528ed5a07d993e607b665c24557d0eae166c21fe744e618ed3430902ac6206c63a331dc0&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;author&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x4053e&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x200b1e64000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000001b9af799918107e9a339eba0584b8b60b35aae6f087c74f6bfc00c9301849b204d094ed65e09c76c2597f5516f9440aad2921e50dde096e7caaa65a536d4d9265e00000000000000000000000000000000000000000000000000000000000000504269747669657720697320616e20616d617a696e6720776562736974652e20596f752073686f756c6420646566696e6974656c792061646420796f75722070726f6475637420746f2069742e20e282bf00000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x8521f13dd5e4bc3dab3cf0f01a195a5af899e851&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;execution reverted&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x947c&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c5dbe76ae5abf26cd76e61a2" role="button"
                   aria-expanded="false" aria-controls="id-c5dbe76ae5abf26cd76e61a2">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/suicide.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/suicide.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+91</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c5dbe76ae5abf26cd76e61a2"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;suicide.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;suicide.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..bd9e057c02297be88694cfe9656a2bc3544f8428</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;suicide.json</span>
<span class="term-fg36">@@ -0,0 +1,92 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;553153&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0x88bde20840880a1f3fba92121912a3cc0d3b26d76e4d914fbd85fc2e43da3b3f&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x7be554ffe4b82fc2&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0xf73d2ff3c16599c3b8a24b9ebde6c09583b5ee3f747d3cd37845d564f4c8d87a&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x40b5f53d610108947688a04fb68838ff9c0aa0dd6e54156b682537192171ff5c&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x774c398d763161f55b66a646f17edda4addad2ca&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1928226&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;457857582215&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd983010907846765746888676f312e31332e358664617277696e&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;7999473&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577392669&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x19bb4ac611ca7a1fc881&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;701&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0x8ee79c5b3f6e1d214d2c4fcf7ea4092a32e26e91&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x60606040526000357c01000000000000000000000000000000000000000000000000000000009004806341c0e1b514610044578063cfae32171461005157610042565b005b61004f6004506100ca565b005b61005c60045061015e565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561015b57600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60206040519081016040528060008152602001506001600050805480601f016020809104026020016040519081016040528092919081815260200182805480156101cd57820191906000526020600020905b8154815290600101906020018083116101b057829003601f168201915b505050505090506101d9565b9056&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;: &quot;0x000000000000000000000000877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;chainId&quot;: 63,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+      &quot;constantinopleBlock&quot;: 301243,</span>
<span class="term-fg32">+      &quot;petersburgBlock&quot;: 999983,</span>
<span class="term-fg32">+      &quot;istanbulBlock&quot;: 999983</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;553154&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;1929167&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1577392670&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;8000000&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf86c8202bd850ee6b280008344aa20948ee79c5b3f6e1d214d2c4fcf7ea4092a32e26e91808441c0e1b581a2a03f95ca5cdf7fd727630341c4c6aa1b64ccd9949bd9ecc72cfdd7ce17a2013a69a06d34795ef7fb0108a6dbee4ae0a1bdc48dcd2a4ee53bb6a33d45515af07bb9a8&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x445708&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x41c0e1b5&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0x8ee79c5b3f6e1d214d2c4fcf7ea4092a32e26e91&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xf641c3b0f82b07cd3a528adb9927dd83eeb4f1682e2bd523ed36888e0d82c9a9&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 553154,</span>
<span class="term-fg32">+      &quot;result&quot;: {</span>
<span class="term-fg32">+        &quot;gasUsed&quot;: &quot;0x347a&quot;,</span>
<span class="term-fg32">+        &quot;output&quot;: &quot;0x&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 1,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6af0a5c3188ffacae4d340d4a17e14fdb5a54187683a80ef241bde248189882b&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 15,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;address&quot;: &quot;0x8ee79c5b3f6e1d214d2c4fcf7ea4092a32e26e91&quot;,</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;refundAddress&quot;: &quot;0x877bd459c9b7d8576b44e59e09d076c25946f443&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockHash&quot;: &quot;0xf641c3b0f82b07cd3a528adb9927dd83eeb4f1682e2bd523ed36888e0d82c9a9&quot;,</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 553154,</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [</span>
<span class="term-fg32">+        0</span>
<span class="term-fg32">+      ],</span>
<span class="term-fg32">+      &quot;transactionHash&quot;: &quot;0x6af0a5c3188ffacae4d340d4a17e14fdb5a54187683a80ef241bde248189882b&quot;,</span>
<span class="term-fg32">+      &quot;transactionPosition&quot;: 15,</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;suicide&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-69bca68d53ffe204cda339ed" role="button"
                   aria-expanded="false" aria-controls="id-69bca68d53ffe204cda339ed">
                    <code>eth/tracers/internal/tracetest/testdata/call_tracer_flat/throw.json</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/internal/tracetest/testdata/call_tracer_flat/throw.json" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+70</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-69bca68d53ffe204cda339ed"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;throw.json op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;throw.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b119bed5289a199c4aed683b54583d264b0da13e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;call_tracer_flat&#47;throw.json</span>
<span class="term-fg36">@@ -0,0 +1,70 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+  &quot;context&quot;: {</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117009631&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712388&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x294e5d6c39a36ce38af1dca70c1060f78dee8070&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;25009&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891666&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;genesis&quot;: {</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+      &quot;0x70c9217d814985faef62b124420f8dfbddd96433&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x4ecd70668f5d854a&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1638&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {}</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;: {</span>
<span class="term-fg32">+        &quot;balance&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+        &quot;code&quot;: &quot;0x606060405236156101745760e060020a600035046302d05d3f811461017c57806304a7fdbc1461018e5780630e90f957146101fb5780630fb5a6b41461021257806314baa1b61461021b57806317fc45e21461023a5780632b096926146102435780632e94420f1461025b578063325a19f11461026457806336da44681461026d5780633f81a2c01461027f5780633fc306821461029757806345ecd3d7146102d45780634665096d146102dd5780634e71d92d146102e657806351a34eb8146103085780636111bb951461032d5780636f265b93146103445780637e9014e11461034d57806390ba009114610360578063927df5e014610393578063a7f437791461046c578063ad8f50081461046e578063bc6d909414610477578063bdec3ad114610557578063c19d93fb1461059a578063c9503fe2146105ad578063e0a73a93146105b6578063ea71b02d146105bf578063ea8a1af0146105d1578063ee4a96f9146105f3578063f1ff78a01461065c575b61046c610002565b610665600054600160a060020a031681565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600554600090600160a060020a0390811633909116146106a857610002565b61068260015460a060020a900460ff166000145b90565b61069660085481565b61046c600435600154600160a060020a03166000141561072157610002565b610696600d5481565b610696600435600f8160068110156100025750015481565b61069660045481565b61069660035481565b610665600554600160a060020a031681565b61069660043560158160068110156100025750015481565b6106966004355b600b54600f5460009160028202808203928083039290810191018386101561078357601054840186900394505b50505050919050565b61069660025481565b61069660095481565b61046c600554600090600160a060020a03908116339091161461085857610002565b61046c600435600554600090600160a060020a03908116339091161461092e57610002565b6106826001805460a060020a900460ff161461020f565b610696600b5481565b61068260075460a060020a900460ff1681565b6106966004355b600b54601554600091600282028082039280830392908101910183861015610a6c5760165494506102cb565b61046c6004356024356044356040805160015460e360020a631c2d8fb302825260b260020a691858d8dbdd5b9d18dd1b02600483015291516000928392600160a060020a03919091169163e16c7d9891602481810192602092909190829003018187876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610b4657610002565b005b610696600a5481565b61046c60006000600060006000600160009054906101000a9004600160a060020a0316600160a060020a031663e16c7d986040518160e060020a028152600401808060b260020a691858d8dbdd5b9d18dd1b0281526020015060200190506020604051808303816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663c4b0c96a336040518260e060020a0281526004018082600160a060020a031681526020019150506020604051808303816000876161da5a03f1156100025750506040515115159050610f1757610002565b61046c5b60015b60058160ff16101561071e57600f6001820160ff166006811015610002578101549060ff83166006811015610002570154101561129057610002565b61069660015460a060020a900460ff1681565b61069660065481565b610696600c5481565b610665600754600160a060020a031681565b61046c600554600090600160a060020a0390811633909116146112c857610002565b6040805160c081810190925261046c9160049160c4918390600690839083908082843760408051808301909152929750909561018495509193509091908390839080828437509095505050505050600154600090600160a060020a03168114156113fb57610002565b610696600e5481565b60408051600160a060020a03929092168252519081900360200190f35b604080519115158252519081900360200190f35b60408051918252519081900360200190f35b5060005b60068160ff16101561070857828160ff166006811015610002576020020151600f60ff831660068110156100025701558160ff82166006811015610002576020020151601560ff831660068110156100025701556001016106ac565b61071061055b565b505050565b600e8054820190555b50565b6040805160015460e060020a6313bc6d4b02825233600160a060020a03908116600484015292519216916313bc6d4b9160248181019260209290919082900301816000876161da5a03f115610002575050604051511515905061071557610002565b83861015801561079257508286105b156107b457600f546010546011548689039082030291909104900394506102cb565b8286101580156107c55750600b5486105b156107e757600f546011546012548589039082030291909104900394506102cb565b600b5486108015906107f857508186105b1561081d57600b54600f546012546013549289039281039290920204900394506102cb565b81861015801561082c57508086105b1561084e57600f546013546014548489039082030291909104900394506102cb565b60145494506102cb565b60015460a060020a900460ff1660001461087157610002565b600254600a01431161088257610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750505060405180519060200150905080600160a060020a031663771d50e16040518160e060020a0281526004018090506000604051808303816000876161da5a03f1156100025750505050565b60015460a060020a900460ff1660001461094757610002565b600254600a01431161095857610002565b6040805160015460e360020a631c2d8fb302825260a860020a6a636f6e74726163746170690260048301529151600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180517f51a34eb8000000000000000000000000000000000000000000000000000000008252600482018690529151919350600160a060020a03841692506351a34eb8916024808301926000929190829003018183876161da5a03f11561000257505050600b8290554360025560408051838152905130600160a060020a0316917fa609f6bd4ad0b4f419ddad4ac9f0d02c2b9295c5e6891469055cf73c2b568fff919081900360200190a25050565b838610158015610a7b57508286105b15610a9d576015546016546017548689039082900302919091040194506102cb565b828610158015610aae5750600b5486105b15610ad0576015546017546018548589039082900302919091040194506102cb565b600b548610801590610ae157508186105b15610b0657600b546015546018546019549289039281900392909202040194506102cb565b818610158015610b1557508086105b15610b3757601554601954601a548489039082900302919091040194506102cb565b601a54860181900394506102cb565b60015460a060020a900460ff16600014610b5f57610002565b6001805460a060020a60ff02191660a060020a17908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919450600160a060020a038516925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604080518051600a556005547ffebf661200000000000000000000000000000000000000000000000000000000825233600160a060020a03908116600484015216602482015260448101879052905163febf661291606480820192600092909190829003018183876161da5a03f115610002575050508215610cc7576007805473ffffffffffffffffffffffffffffffffffffffff191633179055610dbb565b6040805160055460065460e060020a63599efa6b028352600160a060020a039182166004840152602483015291519184169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050604080516006547f56ccb6f000000000000000000000000000000000000000000000000000000000825233600160a060020a03166004830152602482015290516356ccb6f091604480820192600092909190829003018183876161da5a03f115610002575050600580546007805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a038416179091551633179055505b6007805460a060020a60ff02191660a060020a87810291909117918290556008544301600955900460ff1615610df757600a54610e039061029e565b600a54610e0b90610367565b600c55610e0f565b600c555b600c54670de0b6b3a7640000850204600d55600754600554604080517f759297bb000000000000000000000000000000000000000000000000000000008152600160a060020a039384166004820152918316602483015260448201879052519184169163759297bb91606481810192600092909190829003018183876161da5a03f11561000257505060408051600754600a54600d54600554600c5460a060020a850460ff161515865260208601929092528486019290925260608401529251600160a060020a0391821694509281169230909116917f3b3d1986083d191be01d28623dc19604728e29ae28bdb9ba52757fdee1a18de2919081900360800190a45050505050565b600954431015610f2657610002565b6001805460a060020a900460ff1614610f3e57610002565b6001805460a060020a60ff0219167402000000000000000000000000000000000000000017908190556040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f1156100025750506040805180516004805460e260020a633e4baddd028452908301529151919750600160a060020a038816925063f92eb77491602482810192602092919082900301816000876161da5a03f115610002575050604051516007549095506000945060a060020a900460ff1615905061105c57600a5484111561105757600a54600d54670de0b6b3a7640000918603020492505b61107e565b600a5484101561107e57600a54600d54670de0b6b3a764000091869003020492505b60065483111561108e5760065492505b6006548390039150600083111561111857604080516005546007547f5928d37f000000000000000000000000000000000000000000000000000000008352600160a060020a0391821660048401528116602483015260448201869052915191871691635928d37f91606481810192600092909190829003018183876161da5a03f115610002575050505b600082111561117a576040805160055460e060020a63599efa6b028252600160a060020a0390811660048301526024820185905291519187169163599efa6b91604481810192600092909190829003018183876161da5a03f115610002575050505b6040805185815260208101849052808201859052905130600160a060020a0316917f89e690b1d5aaae14f3e85f108dc92d9ab3763a58d45aed8b59daedbbae8fe794919081900360600190a260008311156112285784600160a060020a0316634cc927d785336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f11561000257505050611282565b84600160a060020a0316634cc927d7600a60005054336040518360e060020a0281526004018083815260200182600160a060020a03168152602001925050506000604051808303816000876161da5a03f115610002575050505b600054600160a060020a0316ff5b60156001820160ff166006811015610002578101549060ff8316600681101561000257015411156112c057610002565b60010161055e565b60015460a060020a900460ff166000146112e157610002565b600254600a0143116112f257610002565b6001546040805160e360020a631c2d8fb302815260a860020a6a636f6e74726163746170690260048201529051600160a060020a03929092169163e16c7d989160248181019260209290919082900301816000876161da5a03f11561000257505060408051805160055460065460e060020a63599efa6b028452600160a060020a03918216600485015260248401529251909450918416925063599efa6b916044808301926000929190829003018183876161da5a03f1156100025750505080600160a060020a0316632b68bb2d6040518160e060020a0281526004018090506000604051808303816000876161da5a03f115610002575050600054600160a060020a03169050ff5b6001546040805160e060020a6313bc6d4b02815233600160a060020a039081166004830152915191909216916313bc6d4b91602480830192602092919082900301816000876161da5a03f11561000257505060405151151590506106a85761000256&quot;,</span>
<span class="term-fg32">+        &quot;nonce&quot;: &quot;1&quot;,</span>
<span class="term-fg32">+        &quot;storage&quot;: {</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;: &quot;0x0000000000000000000000002cccf5e0538493c235d1c5ef6580f77d99e91396&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000002&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000061a9&quot;,</span>
<span class="term-fg32">+          &quot;0x0000000000000000000000000000000000000000000000000000000000000005&quot;: &quot;0x00000000000000000000000070c9217d814985faef62b124420f8dfbddd96433&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+      &quot;byzantiumBlock&quot;: 1700000,</span>
<span class="term-fg32">+      &quot;chainId&quot;: 3,</span>
<span class="term-fg32">+      &quot;daoForkSupport&quot;: true,</span>
<span class="term-fg32">+      &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+      &quot;eip150Hash&quot;: &quot;0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d&quot;,</span>
<span class="term-fg32">+      &quot;eip155Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;eip158Block&quot;: 10,</span>
<span class="term-fg32">+      &quot;ethash&quot;: {},</span>
<span class="term-fg32">+      &quot;homesteadBlock&quot;: 0</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;117066792&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0xd783010502846765746887676f312e372e33856c696e7578&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;4712388&quot;,</span>
<span class="term-fg32">+    &quot;hash&quot;: &quot;0xe23e8d4562a1045b70cbc99fefb20c101a8f0fc8559a80d65fea8896e2f1d46e&quot;,</span>
<span class="term-fg32">+    &quot;miner&quot;: &quot;0x71842f946b98800fe6feb49f0ae4e253259031c9&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0aada9d6e93dd4db0d09c0488dc0a048fca2ccdc1f3fc7b83ba2a8d393a3a4ff&quot;,</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x70849d5838dee2e9&quot;,</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;25008&quot;,</span>
<span class="term-fg32">+    &quot;stateRoot&quot;: &quot;0x1e01d2161794768c5b917069e73d86e8dca80cd7f3168c0597de420ab93a3b7b&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;1479891641&quot;,</span>
<span class="term-fg32">+    &quot;totalDifficulty&quot;: &quot;1896347038589&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  &quot;input&quot;: &quot;0xf88b8206668504a817c8008303d09094c212e03b9e060e36facad5fd8f4435412ca22e6b80a451a34eb8000000000000000000000000000000000000000000000027fad02094277c000029a0692a3b4e7b2842f8dd7832e712c21e09f451f416c8976d5b8d02e8c0c2b4bea9a07645e90fc421b63dd755767fd93d3c03b4ec0c4d8fafa059558d08cf11d59750&quot;,</span>
<span class="term-fg32">+  &quot;result&quot;: [</span>
<span class="term-fg32">+    {</span>
<span class="term-fg32">+      &quot;action&quot;: {</span>
<span class="term-fg32">+        &quot;callType&quot;: &quot;call&quot;,</span>
<span class="term-fg32">+        &quot;from&quot;: &quot;0x70c9217d814985faef62b124420f8dfbddd96433&quot;,</span>
<span class="term-fg32">+        &quot;gas&quot;: &quot;0x37b38&quot;,</span>
<span class="term-fg32">+        &quot;input&quot;: &quot;0x51a34eb8000000000000000000000000000000000000000000000027fad02094277c0000&quot;,</span>
<span class="term-fg32">+        &quot;to&quot;: &quot;0xc212e03b9e060e36facad5fd8f4435412ca22e6b&quot;,</span>
<span class="term-fg32">+        &quot;value&quot;: &quot;0x0&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      &quot;blockNumber&quot;: 25009,</span>
<span class="term-fg32">+      &quot;error&quot;: &quot;invalid jump destination&quot;,</span>
<span class="term-fg32">+      &quot;result&quot;: {},</span>
<span class="term-fg32">+      &quot;subtraces&quot;: 0,</span>
<span class="term-fg32">+      &quot;traceAddress&quot;: [],</span>
<span class="term-fg32">+      &quot;type&quot;: &quot;call&quot;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+  ]</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b63d27511a07b78e5767f851" role="button"
                   aria-expanded="false" aria-controls="id-b63d27511a07b78e5767f851">
                    <code>eth/tracers/native/call.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/native/call.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/native/call.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+17</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b63d27511a07b78e5767f851"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;native&#47;call.go op-geth&#47;eth&#47;tracers&#47;native&#47;call.go</span>
<span class="term-fg1">index 75103f64cc87393f8dab8524a71f20c80014ca61..02ee152a5aa1a77e0bd99fb76332cd994c172335 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;native&#47;call.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;native&#47;call.go</span>
<span class="term-fg36">@@ -42,17 +42,17 @@</span> 	Data    hexutil.Bytes  `json:&quot;data&quot;`
 }
&nbsp;
 type callFrame struct {
<span class="term-fg31">-	Type         vm.OpCode      `json:&quot;-&quot;`</span>
<span class="term-fg31">-	From         common.Address `json:&quot;from&quot;`</span>
<span class="term-fg31">-	Gas          uint64         `json:&quot;gas&quot;`</span>
<span class="term-fg31">-	GasUsed      uint64         `json:&quot;gasUsed&quot;`</span>
<span class="term-fg31">-	To           common.Address `json:&quot;to,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-	Input        []byte         `json:&quot;input&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-	Output       []byte         `json:&quot;output,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-	Error        string         `json:&quot;error,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-	RevertReason string         `json:&quot;revertReason,omitempty&quot;`</span>
<span class="term-fg31">-	Calls        []callFrame    `json:&quot;calls,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-	Logs         []callLog      `json:&quot;logs,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	Type         vm.OpCode       `json:&quot;-&quot;`</span>
<span class="term-fg32">+	From         common.Address  `json:&quot;from&quot;`</span>
<span class="term-fg32">+	Gas          uint64          `json:&quot;gas&quot;`</span>
<span class="term-fg32">+	GasUsed      uint64          `json:&quot;gasUsed&quot;`</span>
<span class="term-fg32">+	To           *common.Address `json:&quot;to,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	Input        []byte          `json:&quot;input&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	Output       []byte          `json:&quot;output,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	Error        string          `json:&quot;error,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	RevertReason string          `json:&quot;revertReason,omitempty&quot;`</span>
<span class="term-fg32">+	Calls        []callFrame     `json:&quot;calls,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+	Logs         []callLog       `json:&quot;logs,omitempty&quot; rlp:&quot;optional&quot;`</span>
 	&#47;&#47; Placed at end on purpose. The RLP will be decoded to 0 instead of
 	&#47;&#47; nil if there are non-empty elements after in the struct.
 	Value *big.Int `json:&quot;value,omitempty&quot; rlp:&quot;optional&quot;`
<span class="term-fg36">@@ -74,7 +74,7 @@</span> 		return
 	}
 	f.Error = err.Error()
 	if f.Type == vm.CREATE || f.Type == vm.CREATE2 {
<span class="term-fg31">-		f.To = common.Address{}</span>
<span class="term-fg32">+		f.To = nil</span>
 	}
 	if !errors.Is(err, vm.ErrExecutionReverted) || len(output) == 0 {
 		return
<span class="term-fg36">@@ -127,10 +127,11 @@</span> }
&nbsp;
 &#47;&#47; CaptureStart implements the EVMLogger interface to initialize the tracing operation.
 func (t *callTracer) CaptureStart(env *vm.EVM, from common.Address, to common.Address, create bool, input []byte, gas uint64, value *big.Int) {
<span class="term-fg32">+	toCopy := to</span>
 	t.callstack[0] = callFrame{
 		Type:  vm.CALL,
 		From:  from,
<span class="term-fg31">-		To:    to,</span>
<span class="term-fg32">+		To:    &amp;toCopy,</span>
 		Input: common.CopyBytes(input),
 		Gas:   gas,
 		Value: value,
<span class="term-fg36">@@ -191,10 +192,11 @@</span> 	if atomic.LoadUint32(&amp;t.interrupt) &gt; 0 {
 		return
 	}
&nbsp;
<span class="term-fg32">+	toCopy := to</span>
 	call := callFrame{
 		Type:  typ,
 		From:  from,
<span class="term-fg31">-		To:    to,</span>
<span class="term-fg32">+		To:    &amp;toCopy,</span>
 		Input: common.CopyBytes(input),
 		Gas:   gas,
 		Value: value,
<span class="term-fg36">@@ -240,6 +242,7 @@</span> func (t *callTracer) GetResult() (json.RawMessage, error) {
 	if len(t.callstack) != 1 {
 		return nil, errors.New(&quot;incorrect number of top-level calls&quot;)
 	}
<span class="term-fg32">+</span>
 	res, err := json.Marshal(t.callstack[0])
 	if err != nil {
 		return nil, err</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a89bec17af1c7774026ed241" role="button"
                   aria-expanded="false" aria-controls="id-a89bec17af1c7774026ed241">
                    <code>eth/tracers/native/call_flat.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/native/call_flat.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+379</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a89bec17af1c7774026ed241"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;native&#47;call_flat.go op-geth&#47;eth&#47;tracers&#47;native&#47;call_flat.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..5da60405062fcd92574cd18340ba58407ed4a458</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;native&#47;call_flat.go</span>
<span class="term-fg36">@@ -0,0 +1,379 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package native</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47;go:generate go run github.com&#47;fjl&#47;gencodec -type flatCallAction -field-override flatCallActionMarshaling -out gen_flatcallaction_json.go</span>
<span class="term-fg32">+&#47;&#47;go:generate go run github.com&#47;fjl&#47;gencodec -type flatCallResult -field-override flatCallResultMarshaling -out gen_flatcallresult_json.go</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func init() {</span>
<span class="term-fg32">+	tracers.DefaultDirectory.Register(&quot;flatCallTracer&quot;, newFlatCallTracer, false)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var parityErrorMapping = map[string]string{</span>
<span class="term-fg32">+	&quot;contract creation code storage out of gas&quot;: &quot;Out of gas&quot;,</span>
<span class="term-fg32">+	&quot;out of gas&quot;:                      &quot;Out of gas&quot;,</span>
<span class="term-fg32">+	&quot;gas uint64 overflow&quot;:             &quot;Out of gas&quot;,</span>
<span class="term-fg32">+	&quot;max code size exceeded&quot;:          &quot;Out of gas&quot;,</span>
<span class="term-fg32">+	&quot;invalid jump destination&quot;:        &quot;Bad jump destination&quot;,</span>
<span class="term-fg32">+	&quot;execution reverted&quot;:              &quot;Reverted&quot;,</span>
<span class="term-fg32">+	&quot;return data out of bounds&quot;:       &quot;Out of bounds&quot;,</span>
<span class="term-fg32">+	&quot;stack limit reached 1024 (1023)&quot;: &quot;Out of stack&quot;,</span>
<span class="term-fg32">+	&quot;precompiled failed&quot;:              &quot;Built-in failed&quot;,</span>
<span class="term-fg32">+	&quot;invalid input length&quot;:            &quot;Built-in failed&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var parityErrorMappingStartingWith = map[string]string{</span>
<span class="term-fg32">+	&quot;invalid opcode:&quot;: &quot;Bad instruction&quot;,</span>
<span class="term-fg32">+	&quot;stack underflow&quot;: &quot;Stack underflow&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; flatCallFrame is a standalone callframe.</span>
<span class="term-fg32">+type flatCallFrame struct {</span>
<span class="term-fg32">+	Action              flatCallAction  `json:&quot;action&quot;`</span>
<span class="term-fg32">+	BlockHash           *common.Hash    `json:&quot;blockHash&quot;`</span>
<span class="term-fg32">+	BlockNumber         uint64          `json:&quot;blockNumber&quot;`</span>
<span class="term-fg32">+	Error               string          `json:&quot;error,omitempty&quot;`</span>
<span class="term-fg32">+	Result              *flatCallResult `json:&quot;result,omitempty&quot;`</span>
<span class="term-fg32">+	Subtraces           int             `json:&quot;subtraces&quot;`</span>
<span class="term-fg32">+	TraceAddress        []int           `json:&quot;traceAddress&quot;`</span>
<span class="term-fg32">+	TransactionHash     *common.Hash    `json:&quot;transactionHash&quot;`</span>
<span class="term-fg32">+	TransactionPosition uint64          `json:&quot;transactionPosition&quot;`</span>
<span class="term-fg32">+	Type                string          `json:&quot;type&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallAction struct {</span>
<span class="term-fg32">+	Author         *common.Address `json:&quot;author,omitempty&quot;`</span>
<span class="term-fg32">+	RewardType     string          `json:&quot;rewardType,omitempty&quot;`</span>
<span class="term-fg32">+	SelfDestructed *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+	Balance        *big.Int        `json:&quot;balance,omitempty&quot;`</span>
<span class="term-fg32">+	CallType       string          `json:&quot;callType,omitempty&quot;`</span>
<span class="term-fg32">+	CreationMethod string          `json:&quot;creationMethod,omitempty&quot;`</span>
<span class="term-fg32">+	From           *common.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+	Gas            *uint64         `json:&quot;gas,omitempty&quot;`</span>
<span class="term-fg32">+	Init           *[]byte         `json:&quot;init,omitempty&quot;`</span>
<span class="term-fg32">+	Input          *[]byte         `json:&quot;input,omitempty&quot;`</span>
<span class="term-fg32">+	RefundAddress  *common.Address `json:&quot;refundAddress,omitempty&quot;`</span>
<span class="term-fg32">+	To             *common.Address `json:&quot;to,omitempty&quot;`</span>
<span class="term-fg32">+	Value          *big.Int        `json:&quot;value,omitempty&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallActionMarshaling struct {</span>
<span class="term-fg32">+	Balance *hexutil.Big</span>
<span class="term-fg32">+	Gas     *hexutil.Uint64</span>
<span class="term-fg32">+	Init    *hexutil.Bytes</span>
<span class="term-fg32">+	Input   *hexutil.Bytes</span>
<span class="term-fg32">+	Value   *hexutil.Big</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallResult struct {</span>
<span class="term-fg32">+	Address *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+	Code    *[]byte         `json:&quot;code,omitempty&quot;`</span>
<span class="term-fg32">+	GasUsed *uint64         `json:&quot;gasUsed,omitempty&quot;`</span>
<span class="term-fg32">+	Output  *[]byte         `json:&quot;output,omitempty&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallResultMarshaling struct {</span>
<span class="term-fg32">+	Code    *hexutil.Bytes</span>
<span class="term-fg32">+	GasUsed *hexutil.Uint64</span>
<span class="term-fg32">+	Output  *hexutil.Bytes</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; flatCallTracer reports call frame information of a tx in a flat format, i.e.</span>
<span class="term-fg32">+&#47;&#47; as opposed to the nested format of `callTracer`.</span>
<span class="term-fg32">+type flatCallTracer struct {</span>
<span class="term-fg32">+	tracer            *callTracer</span>
<span class="term-fg32">+	config            flatCallTracerConfig</span>
<span class="term-fg32">+	ctx               *tracers.Context &#47;&#47; Holds tracer context data</span>
<span class="term-fg32">+	reason            error            &#47;&#47; Textual reason for the interruption</span>
<span class="term-fg32">+	activePrecompiles []common.Address &#47;&#47; Updated on CaptureStart based on given rules</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type flatCallTracerConfig struct {</span>
<span class="term-fg32">+	ConvertParityErrors bool `json:&quot;convertParityErrors&quot;` &#47;&#47; If true, call tracer converts errors to parity format</span>
<span class="term-fg32">+	IncludePrecompiles  bool `json:&quot;includePrecompiles&quot;`  &#47;&#47; If true, call tracer includes calls to precompiled contracts</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; newFlatCallTracer returns a new flatCallTracer.</span>
<span class="term-fg32">+func newFlatCallTracer(ctx *tracers.Context, cfg json.RawMessage) (tracers.Tracer, error) {</span>
<span class="term-fg32">+	var config flatCallTracerConfig</span>
<span class="term-fg32">+	if cfg != nil {</span>
<span class="term-fg32">+		if err := json.Unmarshal(cfg, &amp;config); err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tracer, err := tracers.DefaultDirectory.New(&quot;callTracer&quot;, ctx, cfg)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	t, ok := tracer.(*callTracer)</span>
<span class="term-fg32">+	if !ok {</span>
<span class="term-fg32">+		return nil, errors.New(&quot;internal error: embedded tracer has wrong type&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;flatCallTracer{tracer: t, ctx: ctx, config: config}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureStart implements the EVMLogger interface to initialize the tracing operation.</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureStart(env *vm.EVM, from common.Address, to common.Address, create bool, input []byte, gas uint64, value *big.Int) {</span>
<span class="term-fg32">+	t.tracer.CaptureStart(env, from, to, create, input, gas, value)</span>
<span class="term-fg32">+	&#47;&#47; Update list of precompiles based on current block</span>
<span class="term-fg32">+	rules := env.ChainConfig().Rules(env.Context.BlockNumber, env.Context.Random != nil, env.Context.Time)</span>
<span class="term-fg32">+	t.activePrecompiles = vm.ActivePrecompiles(rules)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureEnd is called after the call finishes to finalize the tracing.</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureEnd(output []byte, gasUsed uint64, err error) {</span>
<span class="term-fg32">+	t.tracer.CaptureEnd(output, gasUsed, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureState implements the EVMLogger interface to trace a single step of VM execution.</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureState(pc uint64, op vm.OpCode, gas, cost uint64, scope *vm.ScopeContext, rData []byte, depth int, err error) {</span>
<span class="term-fg32">+	t.tracer.CaptureState(pc, op, gas, cost, scope, rData, depth, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureFault implements the EVMLogger interface to trace an execution fault.</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureFault(pc uint64, op vm.OpCode, gas, cost uint64, scope *vm.ScopeContext, depth int, err error) {</span>
<span class="term-fg32">+	t.tracer.CaptureFault(pc, op, gas, cost, scope, depth, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureEnter is called when EVM enters a new scope (via call, create or selfdestruct).</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureEnter(typ vm.OpCode, from common.Address, to common.Address, input []byte, gas uint64, value *big.Int) {</span>
<span class="term-fg32">+	t.tracer.CaptureEnter(typ, from, to, input, gas, value)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Child calls must have a value, even if it&#39;s zero.</span>
<span class="term-fg32">+	&#47;&#47; Practically speaking, only STATICCALL has nil value. Set it to zero.</span>
<span class="term-fg32">+	if t.tracer.callstack[len(t.tracer.callstack)-1].Value == nil &amp;&amp; value == nil {</span>
<span class="term-fg32">+		t.tracer.callstack[len(t.tracer.callstack)-1].Value = big.NewInt(0)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CaptureExit is called when EVM exits a scope, even if the scope didn&#39;t</span>
<span class="term-fg32">+&#47;&#47; execute any code.</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureExit(output []byte, gasUsed uint64, err error) {</span>
<span class="term-fg32">+	t.tracer.CaptureExit(output, gasUsed, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Parity traces don&#39;t include CALL&#47;STATICCALLs to precompiles.</span>
<span class="term-fg32">+	&#47;&#47; By default we remove them from the callstack.</span>
<span class="term-fg32">+	if t.config.IncludePrecompiles {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		&#47;&#47; call has been nested in parent</span>
<span class="term-fg32">+		parent = t.tracer.callstack[len(t.tracer.callstack)-1]</span>
<span class="term-fg32">+		call   = parent.Calls[len(parent.Calls)-1]</span>
<span class="term-fg32">+		typ    = call.Type</span>
<span class="term-fg32">+		to     = call.To</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if typ == vm.CALL || typ == vm.STATICCALL {</span>
<span class="term-fg32">+		if t.isPrecompiled(*to) {</span>
<span class="term-fg32">+			t.tracer.callstack[len(t.tracer.callstack)-1].Calls = parent.Calls[:len(parent.Calls)-1]</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureTxStart(gasLimit uint64) {</span>
<span class="term-fg32">+	t.tracer.CaptureTxStart(gasLimit)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (t *flatCallTracer) CaptureTxEnd(restGas uint64) {</span>
<span class="term-fg32">+	t.tracer.CaptureTxEnd(restGas)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetResult returns an empty json object.</span>
<span class="term-fg32">+func (t *flatCallTracer) GetResult() (json.RawMessage, error) {</span>
<span class="term-fg32">+	if len(t.tracer.callstack) &lt; 1 {</span>
<span class="term-fg32">+		return nil, errors.New(&quot;invalid number of calls&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	flat, err := flatFromNested(&amp;t.tracer.callstack[0], []int{}, t.config.ConvertParityErrors, t.ctx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	res, err := json.Marshal(flat)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return res, t.reason</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Stop terminates execution of the tracer at the first opportune moment.</span>
<span class="term-fg32">+func (t *flatCallTracer) Stop(err error) {</span>
<span class="term-fg32">+	t.tracer.Stop(err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; isPrecompiled returns whether the addr is a precompile.</span>
<span class="term-fg32">+func (t *flatCallTracer) isPrecompiled(addr common.Address) bool {</span>
<span class="term-fg32">+	for _, p := range t.activePrecompiles {</span>
<span class="term-fg32">+		if p == addr {</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return false</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func flatFromNested(input *callFrame, traceAddress []int, convertErrs bool, ctx *tracers.Context) (output []flatCallFrame, err error) {</span>
<span class="term-fg32">+	var frame *flatCallFrame</span>
<span class="term-fg32">+	switch input.Type {</span>
<span class="term-fg32">+	case vm.CREATE, vm.CREATE2:</span>
<span class="term-fg32">+		frame = newFlatCreate(input)</span>
<span class="term-fg32">+	case vm.SELFDESTRUCT:</span>
<span class="term-fg32">+		frame = newFlatSuicide(input)</span>
<span class="term-fg32">+	case vm.CALL, vm.STATICCALL, vm.CALLCODE, vm.DELEGATECALL:</span>
<span class="term-fg32">+		frame = newFlatCall(input)</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;unrecognized call frame type: %s&quot;, input.Type)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	frame.TraceAddress = traceAddress</span>
<span class="term-fg32">+	frame.Error = input.Error</span>
<span class="term-fg32">+	frame.Subtraces = len(input.Calls)</span>
<span class="term-fg32">+	fillCallFrameFromContext(frame, ctx)</span>
<span class="term-fg32">+	if convertErrs {</span>
<span class="term-fg32">+		convertErrorToParity(frame)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Revert output contains useful information (revert reason).</span>
<span class="term-fg32">+	&#47;&#47; Otherwise discard result.</span>
<span class="term-fg32">+	if input.Error != &quot;&quot; &amp;&amp; input.Error != vm.ErrExecutionReverted.Error() {</span>
<span class="term-fg32">+		frame.Result = nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	output = append(output, *frame)</span>
<span class="term-fg32">+	if len(input.Calls) &gt; 0 {</span>
<span class="term-fg32">+		for i, childCall := range input.Calls {</span>
<span class="term-fg32">+			childAddr := childTraceAddress(traceAddress, i)</span>
<span class="term-fg32">+			childCallCopy := childCall</span>
<span class="term-fg32">+			flat, err := flatFromNested(&amp;childCallCopy, childAddr, convertErrs, ctx)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return nil, err</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			output = append(output, flat...)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return output, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newFlatCreate(input *callFrame) *flatCallFrame {</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		actionInit = input.Input[:]</span>
<span class="term-fg32">+		resultCode = input.Output[:]</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;flatCallFrame{</span>
<span class="term-fg32">+		Type: strings.ToLower(vm.CREATE.String()),</span>
<span class="term-fg32">+		Action: flatCallAction{</span>
<span class="term-fg32">+			From:  &amp;input.From,</span>
<span class="term-fg32">+			Gas:   &amp;input.Gas,</span>
<span class="term-fg32">+			Value: input.Value,</span>
<span class="term-fg32">+			Init:  &amp;actionInit,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Result: &amp;flatCallResult{</span>
<span class="term-fg32">+			GasUsed: &amp;input.GasUsed,</span>
<span class="term-fg32">+			Address: input.To,</span>
<span class="term-fg32">+			Code:    &amp;resultCode,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newFlatCall(input *callFrame) *flatCallFrame {</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		actionInput  = input.Input[:]</span>
<span class="term-fg32">+		resultOutput = input.Output[:]</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;flatCallFrame{</span>
<span class="term-fg32">+		Type: strings.ToLower(vm.CALL.String()),</span>
<span class="term-fg32">+		Action: flatCallAction{</span>
<span class="term-fg32">+			From:     &amp;input.From,</span>
<span class="term-fg32">+			To:       input.To,</span>
<span class="term-fg32">+			Gas:      &amp;input.Gas,</span>
<span class="term-fg32">+			Value:    input.Value,</span>
<span class="term-fg32">+			CallType: strings.ToLower(input.Type.String()),</span>
<span class="term-fg32">+			Input:    &amp;actionInput,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		Result: &amp;flatCallResult{</span>
<span class="term-fg32">+			GasUsed: &amp;input.GasUsed,</span>
<span class="term-fg32">+			Output:  &amp;resultOutput,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newFlatSuicide(input *callFrame) *flatCallFrame {</span>
<span class="term-fg32">+	return &amp;flatCallFrame{</span>
<span class="term-fg32">+		Type: &quot;suicide&quot;,</span>
<span class="term-fg32">+		Action: flatCallAction{</span>
<span class="term-fg32">+			SelfDestructed: &amp;input.From,</span>
<span class="term-fg32">+			Balance:        input.Value,</span>
<span class="term-fg32">+			RefundAddress:  input.To,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func fillCallFrameFromContext(callFrame *flatCallFrame, ctx *tracers.Context) {</span>
<span class="term-fg32">+	if ctx == nil {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.BlockHash != (common.Hash{}) {</span>
<span class="term-fg32">+		callFrame.BlockHash = &amp;ctx.BlockHash</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.BlockNumber != nil {</span>
<span class="term-fg32">+		callFrame.BlockNumber = ctx.BlockNumber.Uint64()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.TxHash != (common.Hash{}) {</span>
<span class="term-fg32">+		callFrame.TransactionHash = &amp;ctx.TxHash</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	callFrame.TransactionPosition = uint64(ctx.TxIndex)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func convertErrorToParity(call *flatCallFrame) {</span>
<span class="term-fg32">+	if call.Error == &quot;&quot; {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if parityError, ok := parityErrorMapping[call.Error]; ok {</span>
<span class="term-fg32">+		call.Error = parityError</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		for gethError, parityError := range parityErrorMappingStartingWith {</span>
<span class="term-fg32">+			if strings.HasPrefix(call.Error, gethError) {</span>
<span class="term-fg32">+				call.Error = parityError</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func childTraceAddress(a []int, i int) []int {</span>
<span class="term-fg32">+	child := make([]int, 0, len(a)+1)</span>
<span class="term-fg32">+	child = append(child, a...)</span>
<span class="term-fg32">+	child = append(child, i)</span>
<span class="term-fg32">+	return child</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ae156e9e933c912f844162f4" role="button"
                   aria-expanded="false" aria-controls="id-ae156e9e933c912f844162f4">
                    <code>eth/tracers/native/gen_callframe_json.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/native/gen_callframe_json.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/native/gen_callframe_json.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-14</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ae156e9e933c912f844162f4"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;native&#47;gen_callframe_json.go op-geth&#47;eth&#47;tracers&#47;native&#47;gen_callframe_json.go</span>
<span class="term-fg1">index 21fc9e2b31af06f38df42295d4004005dd4fd1f1..c44f38390df7b3df171b85352b00d916e78a9b75 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;native&#47;gen_callframe_json.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;native&#47;gen_callframe_json.go</span>
<span class="term-fg36">@@ -16,19 +16,19 @@</span>
 &#47;&#47; MarshalJSON marshals as JSON.
 func (c callFrame) MarshalJSON() ([]byte, error) {
 	type callFrame0 struct {
<span class="term-fg31">-		Type         vm.OpCode      `json:&quot;-&quot;`</span>
<span class="term-fg31">-		From         common.Address `json:&quot;from&quot;`</span>
<span class="term-fg31">-		Gas          hexutil.Uint64 `json:&quot;gas&quot;`</span>
<span class="term-fg31">-		GasUsed      hexutil.Uint64 `json:&quot;gasUsed&quot;`</span>
<span class="term-fg31">-		To           common.Address `json:&quot;to,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		Input        hexutil.Bytes  `json:&quot;input&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		Output       hexutil.Bytes  `json:&quot;output,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		Error        string         `json:&quot;error,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		RevertReason string         `json:&quot;revertReason,omitempty&quot;`</span>
<span class="term-fg31">-		Calls        []callFrame    `json:&quot;calls,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		Logs         []callLog      `json:&quot;logs,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		Value        *hexutil.Big   `json:&quot;value,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg31">-		TypeString   string         `json:&quot;type&quot;`</span>
<span class="term-fg32">+		Type         vm.OpCode       `json:&quot;-&quot;`</span>
<span class="term-fg32">+		From         common.Address  `json:&quot;from&quot;`</span>
<span class="term-fg32">+		Gas          hexutil.Uint64  `json:&quot;gas&quot;`</span>
<span class="term-fg32">+		GasUsed      hexutil.Uint64  `json:&quot;gasUsed&quot;`</span>
<span class="term-fg32">+		To           *common.Address `json:&quot;to,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		Input        hexutil.Bytes   `json:&quot;input&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		Output       hexutil.Bytes   `json:&quot;output,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		Error        string          `json:&quot;error,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		RevertReason string          `json:&quot;revertReason,omitempty&quot;`</span>
<span class="term-fg32">+		Calls        []callFrame     `json:&quot;calls,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		Logs         []callLog       `json:&quot;logs,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		Value        *hexutil.Big    `json:&quot;value,omitempty&quot; rlp:&quot;optional&quot;`</span>
<span class="term-fg32">+		TypeString   string          `json:&quot;type&quot;`</span>
 	}
 	var enc callFrame0
 	enc.Type = c.Type
<span class="term-fg36">@@ -80,7 +80,7 @@</span> 	if dec.GasUsed != nil {
 		c.GasUsed = uint64(*dec.GasUsed)
 	}
 	if dec.To != nil {
<span class="term-fg31">-		c.To = *dec.To</span>
<span class="term-fg32">+		c.To = dec.To</span>
 	}
 	if dec.Input != nil {
 		c.Input = *dec.Input</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-331b00893571e87999a8eb74" role="button"
                   aria-expanded="false" aria-controls="id-331b00893571e87999a8eb74">
                    <code>eth/tracers/native/gen_flatcallaction_json.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/native/gen_flatcallaction_json.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+110</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-331b00893571e87999a8eb74"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;native&#47;gen_flatcallaction_json.go op-geth&#47;eth&#47;tracers&#47;native&#47;gen_flatcallaction_json.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c0756069835bdd3c8b6de4b271de7ac978f8a13b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;native&#47;gen_flatcallaction_json.go</span>
<span class="term-fg36">@@ -0,0 +1,110 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated by github.com&#47;fjl&#47;gencodec. DO NOT EDIT.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package native</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var _ = (*flatCallActionMarshaling)(nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MarshalJSON marshals as JSON.</span>
<span class="term-fg32">+func (f flatCallAction) MarshalJSON() ([]byte, error) {</span>
<span class="term-fg32">+	type flatCallAction struct {</span>
<span class="term-fg32">+		Author         *common.Address `json:&quot;author,omitempty&quot;`</span>
<span class="term-fg32">+		RewardType     string          `json:&quot;rewardType,omitempty&quot;`</span>
<span class="term-fg32">+		SelfDestructed *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+		Balance        *hexutil.Big    `json:&quot;balance,omitempty&quot;`</span>
<span class="term-fg32">+		CallType       string          `json:&quot;callType,omitempty&quot;`</span>
<span class="term-fg32">+		CreationMethod string          `json:&quot;creationMethod,omitempty&quot;`</span>
<span class="term-fg32">+		From           *common.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+		Gas            *hexutil.Uint64 `json:&quot;gas,omitempty&quot;`</span>
<span class="term-fg32">+		Init           *hexutil.Bytes  `json:&quot;init,omitempty&quot;`</span>
<span class="term-fg32">+		Input          *hexutil.Bytes  `json:&quot;input,omitempty&quot;`</span>
<span class="term-fg32">+		RefundAddress  *common.Address `json:&quot;refundAddress,omitempty&quot;`</span>
<span class="term-fg32">+		To             *common.Address `json:&quot;to,omitempty&quot;`</span>
<span class="term-fg32">+		Value          *hexutil.Big    `json:&quot;value,omitempty&quot;`</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var enc flatCallAction</span>
<span class="term-fg32">+	enc.Author = f.Author</span>
<span class="term-fg32">+	enc.RewardType = f.RewardType</span>
<span class="term-fg32">+	enc.SelfDestructed = f.SelfDestructed</span>
<span class="term-fg32">+	enc.Balance = (*hexutil.Big)(f.Balance)</span>
<span class="term-fg32">+	enc.CallType = f.CallType</span>
<span class="term-fg32">+	enc.CreationMethod = f.CreationMethod</span>
<span class="term-fg32">+	enc.From = f.From</span>
<span class="term-fg32">+	enc.Gas = (*hexutil.Uint64)(f.Gas)</span>
<span class="term-fg32">+	enc.Init = (*hexutil.Bytes)(f.Init)</span>
<span class="term-fg32">+	enc.Input = (*hexutil.Bytes)(f.Input)</span>
<span class="term-fg32">+	enc.RefundAddress = f.RefundAddress</span>
<span class="term-fg32">+	enc.To = f.To</span>
<span class="term-fg32">+	enc.Value = (*hexutil.Big)(f.Value)</span>
<span class="term-fg32">+	return json.Marshal(&amp;enc)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; UnmarshalJSON unmarshals from JSON.</span>
<span class="term-fg32">+func (f *flatCallAction) UnmarshalJSON(input []byte) error {</span>
<span class="term-fg32">+	type flatCallAction struct {</span>
<span class="term-fg32">+		Author         *common.Address `json:&quot;author,omitempty&quot;`</span>
<span class="term-fg32">+		RewardType     *string         `json:&quot;rewardType,omitempty&quot;`</span>
<span class="term-fg32">+		SelfDestructed *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+		Balance        *hexutil.Big    `json:&quot;balance,omitempty&quot;`</span>
<span class="term-fg32">+		CallType       *string         `json:&quot;callType,omitempty&quot;`</span>
<span class="term-fg32">+		CreationMethod *string         `json:&quot;creationMethod,omitempty&quot;`</span>
<span class="term-fg32">+		From           *common.Address `json:&quot;from,omitempty&quot;`</span>
<span class="term-fg32">+		Gas            *hexutil.Uint64 `json:&quot;gas,omitempty&quot;`</span>
<span class="term-fg32">+		Init           *hexutil.Bytes  `json:&quot;init,omitempty&quot;`</span>
<span class="term-fg32">+		Input          *hexutil.Bytes  `json:&quot;input,omitempty&quot;`</span>
<span class="term-fg32">+		RefundAddress  *common.Address `json:&quot;refundAddress,omitempty&quot;`</span>
<span class="term-fg32">+		To             *common.Address `json:&quot;to,omitempty&quot;`</span>
<span class="term-fg32">+		Value          *hexutil.Big    `json:&quot;value,omitempty&quot;`</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var dec flatCallAction</span>
<span class="term-fg32">+	if err := json.Unmarshal(input, &amp;dec); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Author != nil {</span>
<span class="term-fg32">+		f.Author = dec.Author</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.RewardType != nil {</span>
<span class="term-fg32">+		f.RewardType = *dec.RewardType</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.SelfDestructed != nil {</span>
<span class="term-fg32">+		f.SelfDestructed = dec.SelfDestructed</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Balance != nil {</span>
<span class="term-fg32">+		f.Balance = (*big.Int)(dec.Balance)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.CallType != nil {</span>
<span class="term-fg32">+		f.CallType = *dec.CallType</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.CreationMethod != nil {</span>
<span class="term-fg32">+		f.CreationMethod = *dec.CreationMethod</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.From != nil {</span>
<span class="term-fg32">+		f.From = dec.From</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Gas != nil {</span>
<span class="term-fg32">+		f.Gas = (*uint64)(dec.Gas)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Init != nil {</span>
<span class="term-fg32">+		f.Init = (*[]byte)(dec.Init)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Input != nil {</span>
<span class="term-fg32">+		f.Input = (*[]byte)(dec.Input)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.RefundAddress != nil {</span>
<span class="term-fg32">+		f.RefundAddress = dec.RefundAddress</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.To != nil {</span>
<span class="term-fg32">+		f.To = dec.To</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Value != nil {</span>
<span class="term-fg32">+		f.Value = (*big.Int)(dec.Value)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7ce13692b9fd42eceb80f3eb" role="button"
                   aria-expanded="false" aria-controls="id-7ce13692b9fd42eceb80f3eb">
                    <code>eth/tracers/native/gen_flatcallresult_json.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/native/gen_flatcallresult_json.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+55</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7ce13692b9fd42eceb80f3eb"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;native&#47;gen_flatcallresult_json.go op-geth&#47;eth&#47;tracers&#47;native&#47;gen_flatcallresult_json.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e9fa5e44da8bc63e577ded1786883197a3e7c41c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;native&#47;gen_flatcallresult_json.go</span>
<span class="term-fg36">@@ -0,0 +1,55 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated by github.com&#47;fjl&#47;gencodec. DO NOT EDIT.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package native</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var _ = (*flatCallResultMarshaling)(nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MarshalJSON marshals as JSON.</span>
<span class="term-fg32">+func (f flatCallResult) MarshalJSON() ([]byte, error) {</span>
<span class="term-fg32">+	type flatCallResult struct {</span>
<span class="term-fg32">+		Address *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+		Code    *hexutil.Bytes  `json:&quot;code,omitempty&quot;`</span>
<span class="term-fg32">+		GasUsed *hexutil.Uint64 `json:&quot;gasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		Output  *hexutil.Bytes  `json:&quot;output,omitempty&quot;`</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var enc flatCallResult</span>
<span class="term-fg32">+	enc.Address = f.Address</span>
<span class="term-fg32">+	enc.Code = (*hexutil.Bytes)(f.Code)</span>
<span class="term-fg32">+	enc.GasUsed = (*hexutil.Uint64)(f.GasUsed)</span>
<span class="term-fg32">+	enc.Output = (*hexutil.Bytes)(f.Output)</span>
<span class="term-fg32">+	return json.Marshal(&amp;enc)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; UnmarshalJSON unmarshals from JSON.</span>
<span class="term-fg32">+func (f *flatCallResult) UnmarshalJSON(input []byte) error {</span>
<span class="term-fg32">+	type flatCallResult struct {</span>
<span class="term-fg32">+		Address *common.Address `json:&quot;address,omitempty&quot;`</span>
<span class="term-fg32">+		Code    *hexutil.Bytes  `json:&quot;code,omitempty&quot;`</span>
<span class="term-fg32">+		GasUsed *hexutil.Uint64 `json:&quot;gasUsed,omitempty&quot;`</span>
<span class="term-fg32">+		Output  *hexutil.Bytes  `json:&quot;output,omitempty&quot;`</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var dec flatCallResult</span>
<span class="term-fg32">+	if err := json.Unmarshal(input, &amp;dec); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Address != nil {</span>
<span class="term-fg32">+		f.Address = dec.Address</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Code != nil {</span>
<span class="term-fg32">+		f.Code = (*[]byte)(dec.Code)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.GasUsed != nil {</span>
<span class="term-fg32">+		f.GasUsed = (*uint64)(dec.GasUsed)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if dec.Output != nil {</span>
<span class="term-fg32">+		f.Output = (*[]byte)(dec.Output)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f0f2993f64a6c5b79fa68888" role="button"
                   aria-expanded="false" aria-controls="id-f0f2993f64a6c5b79fa68888">
                    <code>eth/tracers/tracers.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/tracers.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/tracers.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f0f2993f64a6c5b79fa68888"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;tracers.go op-geth&#47;eth&#47;tracers&#47;tracers.go</span>
<span class="term-fg1">index b93f7db6f57062a24bb33a3df3c8a133cbc245b2..856f52a10de382e6743cbbdcb5c06b67b90c7cd3 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;tracers.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;tracers.go</span>
<span class="term-fg36">@@ -19,6 +19,7 @@</span> package tracers
&nbsp;
 import (
 	&quot;encoding&#47;json&quot;
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
<span class="term-fg36">@@ -27,9 +28,10 @@</span>
 &#47;&#47; Context contains some contextual infos for a transaction execution that is not
 &#47;&#47; available from within the EVM object.
 type Context struct {
<span class="term-fg31">-	BlockHash common.Hash &#47;&#47; Hash of the block the tx is contained within (zero if dangling tx or call)</span>
<span class="term-fg31">-	TxIndex   int         &#47;&#47; Index of the transaction within a block (zero if dangling tx or call)</span>
<span class="term-fg31">-	TxHash    common.Hash &#47;&#47; Hash of the transaction being traced (zero if dangling call)</span>
<span class="term-fg32">+	BlockHash   common.Hash &#47;&#47; Hash of the block the tx is contained within (zero if dangling tx or call)</span>
<span class="term-fg32">+	BlockNumber *big.Int    &#47;&#47; Number of the block the tx is contained within (zero if dangling tx or call)</span>
<span class="term-fg32">+	TxIndex     int         &#47;&#47; Index of the transaction within a block (zero if dangling tx or call)</span>
<span class="term-fg32">+	TxHash      common.Hash &#47;&#47; Hash of the transaction being traced (zero if dangling call)</span>
 }
&nbsp;
 &#47;&#47; Tracer interface extends vm.EVMLogger and additionally</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7f8ddf4bc206efae5a995ef9" role="button"
                   aria-expanded="false" aria-controls="id-7f8ddf4bc206efae5a995ef9">
                    <code>eth/tracers/tracers_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/eth/tracers/tracers_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/eth/tracers/tracers_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7f8ddf4bc206efae5a995ef9"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;tracers_test.go op-geth&#47;eth&#47;tracers&#47;tracers_test.go</span>
<span class="term-fg1">index 6cd5a022b1a12b5b932123b38afef04156be47f0..7c5ec65650ee5dc10a27ea4a408834da4cd8aa49 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;tracers_test.go</span>
<span class="term-fg1">+++ op-geth&#47;eth&#47;tracers&#47;tracers_test.go</span>
<span class="term-fg36">@@ -88,7 +88,7 @@</span> 		&#47;&#47;EnableMemory: false,
 		&#47;&#47;EnableReturnData: false,
 	})
 	evm := vm.NewEVM(context, txContext, statedb, params.AllEthashProtocolChanges, vm.Config{Debug: true, Tracer: tracer})
<span class="term-fg31">-	msg, err := tx.AsMessage(signer, nil)</span>
<span class="term-fg32">+	msg, err := core.TransactionToMessage(tx, signer, nil)</span>
 	if err != nil {
 		b.Fatalf(&quot;failed to prepare transaction for tracing: %v&quot;, err)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c349caf30c1f4bb9d5dfc79c" role="button"
                   aria-expanded="false" aria-controls="id-c349caf30c1f4bb9d5dfc79c">
                    <code>ethclient/ethclient.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/ethclient/ethclient.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/ethclient/ethclient.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-7</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c349caf30c1f4bb9d5dfc79c"><span class="term-fg1">diff --git go-ethereum&#47;ethclient&#47;ethclient.go op-geth&#47;ethclient&#47;ethclient.go</span>
<span class="term-fg1">index 460035f36a6d0f3564fb218ae8afa94ad77bf28a..c8353b25ae210aef48f5288a381fa776166e4e79 100644</span>
<span class="term-fg1">--- go-ethereum&#47;ethclient&#47;ethclient.go</span>
<span class="term-fg1">+++ op-geth&#47;ethclient&#47;ethclient.go</span>
<span class="term-fg36">@@ -102,9 +102,10 @@</span> 	return uint64(result), err
 }
&nbsp;
 type rpcBlock struct {
<span class="term-fg31">-	Hash         common.Hash      `json:&quot;hash&quot;`</span>
<span class="term-fg31">-	Transactions []rpcTransaction `json:&quot;transactions&quot;`</span>
<span class="term-fg31">-	UncleHashes  []common.Hash    `json:&quot;uncles&quot;`</span>
<span class="term-fg32">+	Hash         common.Hash         `json:&quot;hash&quot;`</span>
<span class="term-fg32">+	Transactions []rpcTransaction    `json:&quot;transactions&quot;`</span>
<span class="term-fg32">+	UncleHashes  []common.Hash       `json:&quot;uncles&quot;`</span>
<span class="term-fg32">+	Withdrawals  []*types.Withdrawal `json:&quot;withdrawals,omitempty&quot;`</span>
 }
&nbsp;
 func (ec *Client) getBlock(ctx context.Context, method string, args ...interface{}) (*types.Block, error) {
<span class="term-fg36">@@ -112,15 +113,19 @@</span> 	var raw json.RawMessage
 	err := ec.c.CallContext(ctx, &amp;raw, method, args...)
 	if err != nil {
 		return nil, err
<span class="term-fg31">-	} else if len(raw) == 0 {</span>
<span class="term-fg31">-		return nil, ethereum.NotFound</span>
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Decode header and transactions.
 	var head *types.Header
<span class="term-fg31">-	var body rpcBlock</span>
 	if err := json.Unmarshal(raw, &amp;head); err != nil {
 		return nil, err
 	}
<span class="term-fg32">+	&#47;&#47; When the block is not found, the API returns JSON null.</span>
<span class="term-fg32">+	if head == nil {</span>
<span class="term-fg32">+		return nil, ethereum.NotFound</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var body rpcBlock</span>
 	if err := json.Unmarshal(raw, &amp;body); err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -169,7 +174,7 @@</span> 			setSenderFromServer(tx.tx, *tx.From, body.Hash)
 		}
 		txs[i] = tx.tx
 	}
<span class="term-fg31">-	return types.NewBlockWithHeader(head).WithBody(txs, uncles), nil</span>
<span class="term-fg32">+	return types.NewBlockWithHeader(head).WithBody(txs, uncles).WithWithdrawals(body.Withdrawals), nil</span>
 }
&nbsp;
 &#47;&#47; HeaderByHash returns the block header with the given hash.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c278ac06a5e3b93a09eb2373" role="button"
                   aria-expanded="false" aria-controls="id-c278ac06a5e3b93a09eb2373">
                    <code>ethdb/pebble/pebble.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/ethdb/pebble/pebble.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/ethdb/pebble/pebble.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c278ac06a5e3b93a09eb2373"><span class="term-fg1">diff --git go-ethereum&#47;ethdb&#47;pebble&#47;pebble.go op-geth&#47;ethdb&#47;pebble&#47;pebble.go</span>
<span class="term-fg1">index fdad13b392eae2d92144b1788a9a580308c82fc7..4e374c9e283284be282936f92436cba390a7af74 100644</span>
<span class="term-fg1">--- go-ethereum&#47;ethdb&#47;pebble&#47;pebble.go</span>
<span class="term-fg1">+++ op-geth&#47;ethdb&#47;pebble&#47;pebble.go</span>
<span class="term-fg36">@@ -14,12 +14,13 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build arm64 || amd64</span>
<span class="term-fg32">+&#47;&#47;go:build (arm64 || amd64) &amp;&amp; !openbsd</span>
&nbsp;
 &#47;&#47; Package pebble implements the key-value database layer based on pebble.
 package pebble
&nbsp;
 import (
<span class="term-fg32">+	&quot;bytes&quot;</span>
 	&quot;fmt&quot;
 	&quot;runtime&quot;
 	&quot;sync&quot;
<span class="term-fg36">@@ -130,7 +131,7 @@</span>
 	&#47;&#47; The max memtable size is limited by the uint32 offsets stored in
 	&#47;&#47; internal&#47;arenaskl.node, DeferredBatchOp, and flushableBatchEntry.
 	&#47;&#47; Taken from https:&#47;&#47;github.com&#47;cockroachdb&#47;pebble&#47;blob&#47;master&#47;open.go#L38
<span class="term-fg31">-	maxMemTableSize := 4 &lt;&lt; 30 &#47;&#47; 4 GB</span>
<span class="term-fg32">+	maxMemTableSize := 4&lt;&lt;30 - 1 &#47;&#47; Capped by 4 GB</span>
&nbsp;
 	&#47;&#47; Two memory tables is configured which is identical to leveldb,
 	&#47;&#47; including a frozen memory table and another live one.
<span class="term-fg36">@@ -361,6 +362,17 @@</span> &#47;&#47; A nil start is treated as a key before all keys in the data store; a nil limit
 &#47;&#47; is treated as a key after all keys in the data store. If both is nil then it
 &#47;&#47; will compact entire data store.
 func (d *Database) Compact(start []byte, limit []byte) error {
<span class="term-fg32">+	&#47;&#47; There is no special flag to represent the end of key range</span>
<span class="term-fg32">+	&#47;&#47; in pebble(nil in leveldb). Use an ugly hack to construct a</span>
<span class="term-fg32">+	&#47;&#47; large key to represent it.</span>
<span class="term-fg32">+	&#47;&#47; Note any prefixed database entry will be smaller than this</span>
<span class="term-fg32">+	&#47;&#47; flag, as for trie nodes we need the 32 byte 0xff because</span>
<span class="term-fg32">+	&#47;&#47; there might be a shared prefix starting with a number of</span>
<span class="term-fg32">+	&#47;&#47; 0xff-s, so 32 ensures than only a hash collision could touch it.</span>
<span class="term-fg32">+	&#47;&#47; https:&#47;&#47;github.com&#47;cockroachdb&#47;pebble&#47;issues&#47;2359#issuecomment-1443995833</span>
<span class="term-fg32">+	if limit == nil {</span>
<span class="term-fg32">+		limit = bytes.Repeat([]byte{0xff}, 32)</span>
<span class="term-fg32">+	}</span>
 	return d.db.Compact(start, limit, true) &#47;&#47; Parallelization is preferred
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c52061a4c3d0e2a0047902c8" role="button"
                   aria-expanded="false" aria-controls="id-c52061a4c3d0e2a0047902c8">
                    <code>ethdb/pebble/pebble_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/ethdb/pebble/pebble_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/ethdb/pebble/pebble_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c52061a4c3d0e2a0047902c8"><span class="term-fg1">diff --git go-ethereum&#47;ethdb&#47;pebble&#47;pebble_test.go op-geth&#47;ethdb&#47;pebble&#47;pebble_test.go</span>
<span class="term-fg1">index c773967dc66fd72d5d53072ab60fece21d169b1f..590d5bf0353d0ac09aa7904455246e3e4b153710 100644</span>
<span class="term-fg1">--- go-ethereum&#47;ethdb&#47;pebble&#47;pebble_test.go</span>
<span class="term-fg1">+++ op-geth&#47;ethdb&#47;pebble&#47;pebble_test.go</span>
<span class="term-fg36">@@ -14,7 +14,7 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build arm64 || amd64</span>
<span class="term-fg32">+&#47;&#47;go:build (arm64 || amd64) &amp;&amp; !openbsd</span>
&nbsp;
 package pebble
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5c887df65fa3560124feff61" role="button"
                   aria-expanded="false" aria-controls="id-5c887df65fa3560124feff61">
                    <code>event/feedof.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/event/feedof.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/event/feedof.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5c887df65fa3560124feff61"><span class="term-fg1">diff --git go-ethereum&#47;event&#47;feedof.go op-geth&#47;event&#47;feedof.go</span>
<span class="term-fg1">index 598038a19e245af525131151b900ee6fd4345ebb..4a24e37f1256429a5fd85af3c60c68dd6241499e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;event&#47;feedof.go</span>
<span class="term-fg1">+++ op-geth&#47;event&#47;feedof.go</span>
<span class="term-fg36">@@ -14,9 +14,6 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build go1.18</span>
<span class="term-fg31">-&#47;&#47; +build go1.18</span>
<span class="term-fg31">-</span>
 package event
&nbsp;
 import (</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c9239fb93a6be9ce30947705" role="button"
                   aria-expanded="false" aria-controls="id-c9239fb93a6be9ce30947705">
                    <code>event/feedof_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/event/feedof_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/event/feedof_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c9239fb93a6be9ce30947705"><span class="term-fg1">diff --git go-ethereum&#47;event&#47;feedof_test.go op-geth&#47;event&#47;feedof_test.go</span>
<span class="term-fg1">index 8478eeffb1e59e3a71fce697fbc0ae295e5b1ba9..846afc9ee19e65cd86832a34fee1a3fc6d7cf92c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;event&#47;feedof_test.go</span>
<span class="term-fg1">+++ op-geth&#47;event&#47;feedof_test.go</span>
<span class="term-fg36">@@ -14,9 +14,6 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build go1.18</span>
<span class="term-fg31">-&#47;&#47; +build go1.18</span>
<span class="term-fg31">-</span>
 package event
&nbsp;
 import (</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2811cbbcc8253762f1fb3ed5" role="button"
                   aria-expanded="false" aria-controls="id-2811cbbcc8253762f1fb3ed5">
                    <code>graphql/graphql.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/graphql/graphql.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/graphql/graphql.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2811cbbcc8253762f1fb3ed5"><span class="term-fg1">diff --git go-ethereum&#47;graphql&#47;graphql.go op-geth&#47;graphql&#47;graphql.go</span>
<span class="term-fg1">index 356ff669fb16d6aa1bec28dbdeeeef7f40b62141..0c13cc80f5559383bb3721dfac375bd63a06a934 100644</span>
<span class="term-fg1">--- go-ethereum&#47;graphql&#47;graphql.go</span>
<span class="term-fg1">+++ op-geth&#47;graphql&#47;graphql.go</span>
<span class="term-fg36">@@ -1219,7 +1219,7 @@</span> 	var to rpc.BlockNumber
 	if args.To != nil {
 		to = rpc.BlockNumber(*args.To)
 	} else {
<span class="term-fg31">-		to = rpc.BlockNumber(r.backend.CurrentBlock().Number().Int64())</span>
<span class="term-fg32">+		to = rpc.BlockNumber(r.backend.CurrentBlock().Number.Int64())</span>
 	}
 	if to &lt; from {
 		return []*Block{}, nil</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fa688ab2ac5e05d8a26fe242" role="button"
                   aria-expanded="false" aria-controls="id-fa688ab2ac5e05d8a26fe242">
                    <code>internal/ethapi/transaction_args.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/ethapi/transaction_args.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/ethapi/transaction_args.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fa688ab2ac5e05d8a26fe242"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;transaction_args.go op-geth&#47;internal&#47;ethapi&#47;transaction_args.go</span>
<span class="term-fg1">index e07248db5d69321eb03438495f3a5280ab3f7ab6..c74f540b761b8d65cc6f6a0c10fe1ed59267f17c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;transaction_args.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;ethapi&#47;transaction_args.go</span>
<span class="term-fg36">@@ -26,6 +26,7 @@</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg36">@@ -199,10 +200,10 @@</span>
 &#47;&#47; ToMessage converts the transaction arguments to the Message type used by the
 &#47;&#47; core evm. This method is used in calls and traces that do not require a real
 &#47;&#47; live transaction.
<span class="term-fg31">-func (args *TransactionArgs) ToMessage(globalGasCap uint64, baseFee *big.Int) (types.Message, error) {</span>
<span class="term-fg32">+func (args *TransactionArgs) ToMessage(globalGasCap uint64, baseFee *big.Int) (*core.Message, error) {</span>
 	&#47;&#47; Reject invalid combinations of pre- and post-1559 fee styles
 	if args.GasPrice != nil &amp;&amp; (args.MaxFeePerGas != nil || args.MaxPriorityFeePerGas != nil) {
<span class="term-fg31">-		return types.Message{}, errors.New(&quot;both gasPrice and (maxFeePerGas or maxPriorityFeePerGas) specified&quot;)</span>
<span class="term-fg32">+		return nil, errors.New(&quot;both gasPrice and (maxFeePerGas or maxPriorityFeePerGas) specified&quot;)</span>
 	}
 	&#47;&#47; Set sender address or use zero address if none specified.
 	addr := args.from()
<span class="term-fg36">@@ -263,7 +264,18 @@</span> 	var accessList types.AccessList
 	if args.AccessList != nil {
 		accessList = *args.AccessList
 	}
<span class="term-fg31">-	msg := types.NewMessage(addr, args.To, 0, value, gas, gasPrice, gasFeeCap, gasTipCap, data, accessList, true)</span>
<span class="term-fg32">+	msg := &amp;core.Message{</span>
<span class="term-fg32">+		From:              addr,</span>
<span class="term-fg32">+		To:                args.To,</span>
<span class="term-fg32">+		Value:             value,</span>
<span class="term-fg32">+		GasLimit:          gas,</span>
<span class="term-fg32">+		GasPrice:          gasPrice,</span>
<span class="term-fg32">+		GasFeeCap:         gasFeeCap,</span>
<span class="term-fg32">+		GasTipCap:         gasTipCap,</span>
<span class="term-fg32">+		Data:              data,</span>
<span class="term-fg32">+		AccessList:        accessList,</span>
<span class="term-fg32">+		SkipAccountChecks: true,</span>
<span class="term-fg32">+	}</span>
 	return msg, nil
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b19683f34d6fa9c7970a6ef7" role="button"
                   aria-expanded="false" aria-controls="id-b19683f34d6fa9c7970a6ef7">
                    <code>internal/version/vcs.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/internal/version/vcs.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b19683f34d6fa9c7970a6ef7"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;version&#47;vcs_go1.18.go op-geth&#47;internal&#47;version&#47;vcs.go</span>
<span class="term-fg1">rename from internal&#47;version&#47;vcs_go1.18.go</span>
<span class="term-fg1">rename to internal&#47;version&#47;vcs.go</span>
<span class="term-fg1">index 53cd41fb3097d6dbad4632759a127dde5c69291d..21de8946e80337be7a639449a9ccc4cbedd31570 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;version&#47;vcs_go1.18.go</span>
<span class="term-fg1">+++ op-geth&#47;internal&#47;version&#47;vcs.go</span>
<span class="term-fg36">@@ -14,9 +14,6 @@</span> &#47;&#47;
 &#47;&#47; You should have received a copy of the GNU Lesser General Public License
 &#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.
&nbsp;
<span class="term-fg31">-&#47;&#47;go:build go1.18</span>
<span class="term-fg31">-&#47;&#47; +build go1.18</span>
<span class="term-fg31">-</span>
 package version
&nbsp;
 import (</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cf28482895bb3c15fb8d3f5a" role="button"
                   aria-expanded="false" aria-controls="id-cf28482895bb3c15fb8d3f5a">
                    <code>internal/version/vcs_fallback.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/internal/version/vcs_fallback.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-28</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cf28482895bb3c15fb8d3f5a"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;version&#47;vcs_fallback.go op-geth&#47;internal&#47;version&#47;vcs_fallback.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index f792c68cdb4c8e71bef7a1f1fd5eb9ba01411602..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;version&#47;vcs_fallback.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,28 +0,0 @@</span>
<span class="term-fg31">-&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg31">-&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg31">-&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg31">-&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg31">-&#47;&#47; (at your option) any later version.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg31">-&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg31">-&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg31">-&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg31">-&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47;go:build !go1.18</span>
<span class="term-fg31">-&#47;&#47; +build !go1.18</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-package version</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-import &quot;runtime&#47;debug&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; In Go versions before 1.18, VCS information is not available.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func buildInfoVCS(info *debug.BuildInfo) (VCSInfo, bool) {</span>
<span class="term-fg31">-	return VCSInfo{}, false</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-28375fb49740938005a8e041" role="button"
                   aria-expanded="false" aria-controls="id-28375fb49740938005a8e041">
                    <code>light/odr_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/light/odr_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/light/odr_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+12</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-28375fb49740938005a8e041"><span class="term-fg1">diff --git go-ethereum&#47;light&#47;odr_test.go op-geth&#47;light&#47;odr_test.go</span>
<span class="term-fg1">index 903c7f6f90a6fd634b47d8be74d502720c562624..31ec261811d7a9a85995e781ba8af9e9bffd3b1a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;light&#47;odr_test.go</span>
<span class="term-fg1">+++ op-geth&#47;light&#47;odr_test.go</span>
<span class="term-fg36">@@ -174,12 +174,6 @@</span> }
&nbsp;
 func TestOdrContractCallLes2(t *testing.T) { testChainOdr(t, 1, odrContractCall) }
&nbsp;
<span class="term-fg31">-type callmsg struct {</span>
<span class="term-fg31">-	types.Message</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func (callmsg) CheckNonce() bool { return false }</span>
<span class="term-fg31">-</span>
 func odrContractCall(ctx context.Context, db ethdb.Database, bc *core.BlockChain, lc *LightChain, bhash common.Hash) ([]byte, error) {
 	data := common.Hex2Bytes(&quot;60CD26850000000000000000000000000000000000000000000000000000000000000000&quot;)
 	config := params.TestChainConfig
<span class="term-fg36">@@ -205,9 +199,19 @@</span> 		}
&nbsp;
 		&#47;&#47; Perform read-only call.
 		st.SetBalance(testBankAddress, math.MaxBig256)
<span class="term-fg31">-		msg := callmsg{types.NewMessage(testBankAddress, &amp;testContractAddr, 0, new(big.Int), 1000000, big.NewInt(params.InitialBaseFee), big.NewInt(params.InitialBaseFee), new(big.Int), data, nil, true)}</span>
<span class="term-fg32">+		msg := &amp;core.Message{</span>
<span class="term-fg32">+			From:              testBankAddress,</span>
<span class="term-fg32">+			To:                &amp;testContractAddr,</span>
<span class="term-fg32">+			Value:             new(big.Int),</span>
<span class="term-fg32">+			GasLimit:          1000000,</span>
<span class="term-fg32">+			GasPrice:          big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+			GasFeeCap:         big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+			GasTipCap:         new(big.Int),</span>
<span class="term-fg32">+			Data:              data,</span>
<span class="term-fg32">+			SkipAccountChecks: true,</span>
<span class="term-fg32">+		}</span>
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(header, chain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(header, chain, nil, config, st)</span>
 		vmenv := vm.NewEVM(context, txContext, st, config, vm.Config{NoBaseFee: true})
 		gp := new(core.GasPool).AddGas(math.MaxUint64)
 		result, _ := core.ApplyMessage(vmenv, msg, gp)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eb7d99a977a8f18a2ab51cc6" role="button"
                   aria-expanded="false" aria-controls="id-eb7d99a977a8f18a2ab51cc6">
                    <code>light/odr_util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/light/odr_util.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/light/odr_util.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eb7d99a977a8f18a2ab51cc6"><span class="term-fg1">diff --git go-ethereum&#47;light&#47;odr_util.go op-geth&#47;light&#47;odr_util.go</span>
<span class="term-fg1">index c49af3a1fb7a81aa778ec941aaa4d9d9e5b98b62..37a1b7a633fb9771653825ed8c58e862a6eebd93 100644</span>
<span class="term-fg1">--- go-ethereum&#47;light&#47;odr_util.go</span>
<span class="term-fg1">+++ op-geth&#47;light&#47;odr_util.go</span>
<span class="term-fg36">@@ -175,7 +175,7 @@</span> 		}
 		genesis := rawdb.ReadCanonicalHash(odr.Database(), 0)
 		config := rawdb.ReadChainConfig(odr.Database(), genesis)
&nbsp;
<span class="term-fg31">-		if err := receipts.DeriveFields(config, block.Hash(), block.NumberU64(), block.Transactions()); err != nil {</span>
<span class="term-fg32">+		if err := receipts.DeriveFields(config, block.Hash(), block.NumberU64(), block.Time(), block.BaseFee(), block.Transactions()); err != nil {</span>
 			return nil, err
 		}
 		rawdb.WriteReceipts(odr.Database(), hash, number, receipts)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bfe785f2658da4377cebe31f" role="button"
                   aria-expanded="false" aria-controls="id-bfe785f2658da4377cebe31f">
                    <code>log/logger.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/log/logger.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/log/logger.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+47</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bfe785f2658da4377cebe31f"><span class="term-fg1">diff --git go-ethereum&#47;log&#47;logger.go op-geth&#47;log&#47;logger.go</span>
<span class="term-fg1">index 1549e3285481ae82c9cc30d7dd519b07575e4bc3..4e471a22da9a3ac3c524c98478da0450842ea646 100644</span>
<span class="term-fg1">--- go-ethereum&#47;log&#47;logger.go</span>
<span class="term-fg1">+++ op-geth&#47;log&#47;logger.go</span>
<span class="term-fg36">@@ -116,12 +116,58 @@</span>
 	&#47;&#47; SetHandler updates the logger to write records to the specified handler.
 	SetHandler(h Handler)
&nbsp;
<span class="term-fg31">-	&#47;&#47; Log a message at the given level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the trace level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Trace(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Trace(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Trace(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Trace(msg string, ctx ...interface{})
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the debug level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Debug(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Debug(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Debug(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Debug(msg string, ctx ...interface{})
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the info level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Info(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Info(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Info(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Info(msg string, ctx ...interface{})
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the warn level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Warn(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Warn(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Warn(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Warn(msg string, ctx ...interface{})
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the error level with context key&#47;value pairs</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Error(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Error(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Error(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Error(msg string, ctx ...interface{})
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log a message at the crit level with context key&#47;value pairs, and then exit.</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47;	log.Crit(&quot;msg&quot;)</span>
<span class="term-fg32">+	&#47;&#47;	log.Crit(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+	&#47;&#47;	log.Crit(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 	Crit(msg string, ctx ...interface{})
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7a08dc13b234eb54e6ac5043" role="button"
                   aria-expanded="false" aria-controls="id-7a08dc13b234eb54e6ac5043">
                    <code>log/root.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/log/root.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/log/root.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+48</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a08dc13b234eb54e6ac5043"><span class="term-fg1">diff --git go-ethereum&#47;log&#47;root.go op-geth&#47;log&#47;root.go</span>
<span class="term-fg1">index 9fb4c5ae0b1c84b41c1f1a8c2ed8f9b743b5eafe..5a41723c3eeb4637adc1c2ec9caeab2716c61725 100644</span>
<span class="term-fg1">--- go-ethereum&#47;log&#47;root.go</span>
<span class="term-fg1">+++ op-geth&#47;log&#47;root.go</span>
<span class="term-fg36">@@ -30,31 +30,79 @@</span> &#47;&#47; etc.) to keep the call depth the same for all paths to logger.write so
 &#47;&#47; runtime.Caller(2) always refers to the call site in client code.
&nbsp;
 &#47;&#47; Trace is a convenient alias for Root().Trace
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the trace level with context key&#47;value pairs</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Trace(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Trace(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Trace(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Trace(msg string, ctx ...interface{}) {
 	root.write(msg, LvlTrace, ctx, skipLevel)
 }
&nbsp;
 &#47;&#47; Debug is a convenient alias for Root().Debug
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the debug level with context key&#47;value pairs</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Debug(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Debug(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Debug(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Debug(msg string, ctx ...interface{}) {
 	root.write(msg, LvlDebug, ctx, skipLevel)
 }
&nbsp;
 &#47;&#47; Info is a convenient alias for Root().Info
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the info level with context key&#47;value pairs</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Info(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Info(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Info(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Info(msg string, ctx ...interface{}) {
 	root.write(msg, LvlInfo, ctx, skipLevel)
 }
&nbsp;
 &#47;&#47; Warn is a convenient alias for Root().Warn
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the warn level with context key&#47;value pairs</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Warn(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Warn(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Warn(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Warn(msg string, ctx ...interface{}) {
 	root.write(msg, LvlWarn, ctx, skipLevel)
 }
&nbsp;
 &#47;&#47; Error is a convenient alias for Root().Error
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the error level with context key&#47;value pairs</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Error(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Error(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Error(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Error(msg string, ctx ...interface{}) {
 	root.write(msg, LvlError, ctx, skipLevel)
 }
&nbsp;
 &#47;&#47; Crit is a convenient alias for Root().Crit
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Log a message at the crit level with context key&#47;value pairs, and then exit.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; # Usage Examples</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47;	log.Crit(&quot;msg&quot;)</span>
<span class="term-fg32">+&#47;&#47;	log.Crit(&quot;msg&quot;, &quot;key1&quot;, val1)</span>
<span class="term-fg32">+&#47;&#47;	log.Crit(&quot;msg&quot;, &quot;key1&quot;, val1, &quot;key2&quot;, val2)</span>
 func Crit(msg string, ctx ...interface{}) {
 	root.write(msg, LvlCrit, ctx, skipLevel)
 	os.Exit(1)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7450f41343fd88e65c62d030" role="button"
                   aria-expanded="false" aria-controls="id-7450f41343fd88e65c62d030">
                    <code>metrics/cpu.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/metrics/cpu.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/metrics/cpu.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7450f41343fd88e65c62d030"><span class="term-fg1">diff --git go-ethereum&#47;metrics&#47;cpu.go op-geth&#47;metrics&#47;cpu.go</span>
<span class="term-fg1">index 72ece16e0768d9bd98e7492b1848ccccfba096f1..3a49cd42493a1dbd9ef6bdcec358652d1b976975 100644</span>
<span class="term-fg1">--- go-ethereum&#47;metrics&#47;cpu.go</span>
<span class="term-fg1">+++ op-geth&#47;metrics&#47;cpu.go</span>
<span class="term-fg36">@@ -17,8 +17,9 @@</span>
 package metrics
&nbsp;
 &#47;&#47; CPUStats is the system and process CPU stats.
<span class="term-fg32">+&#47;&#47; All values are in seconds.</span>
 type CPUStats struct {
<span class="term-fg31">-	GlobalTime int64 &#47;&#47; Time spent by the CPU working on all processes</span>
<span class="term-fg31">-	GlobalWait int64 &#47;&#47; Time spent by waiting on disk for all processes</span>
<span class="term-fg31">-	LocalTime  int64 &#47;&#47; Time spent by the CPU working on this process</span>
<span class="term-fg32">+	GlobalTime float64 &#47;&#47; Time spent by the CPU working on all processes</span>
<span class="term-fg32">+	GlobalWait float64 &#47;&#47; Time spent by waiting on disk for all processes</span>
<span class="term-fg32">+	LocalTime  float64 &#47;&#47; Time spent by the CPU working on this process</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e8c1c912adf4d99b68295ac5" role="button"
                   aria-expanded="false" aria-controls="id-e8c1c912adf4d99b68295ac5">
                    <code>metrics/cpu_enabled.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/metrics/cpu_enabled.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/metrics/cpu_enabled.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e8c1c912adf4d99b68295ac5"><span class="term-fg1">diff --git go-ethereum&#47;metrics&#47;cpu_enabled.go op-geth&#47;metrics&#47;cpu_enabled.go</span>
<span class="term-fg1">index 533d40b85a58ae385f3e5b15966b3a21d218b98a..2359028a2120d88c7f4833139d139de07c36deb6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;metrics&#47;cpu_enabled.go</span>
<span class="term-fg1">+++ op-geth&#47;metrics&#47;cpu_enabled.go</span>
<span class="term-fg36">@@ -38,7 +38,7 @@</span> 		return
 	}
 	&#47;&#47; requesting all cpu times will always return an array with only one time stats entry
 	timeStat := timeStats[0]
<span class="term-fg31">-	stats.GlobalTime = int64((timeStat.User + timeStat.Nice + timeStat.System) * cpu.ClocksPerSec)</span>
<span class="term-fg31">-	stats.GlobalWait = int64((timeStat.Iowait) * cpu.ClocksPerSec)</span>
<span class="term-fg32">+	stats.GlobalTime = timeStat.User + timeStat.Nice + timeStat.System</span>
<span class="term-fg32">+	stats.GlobalWait = timeStat.Iowait</span>
 	stats.LocalTime = getProcessCPUTime()
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0a7fdd9afac59b8957b9d508" role="button"
                   aria-expanded="false" aria-controls="id-0a7fdd9afac59b8957b9d508">
                    <code>metrics/cputime_nop.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/metrics/cputime_nop.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/metrics/cputime_nop.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0a7fdd9afac59b8957b9d508"><span class="term-fg1">diff --git go-ethereum&#47;metrics&#47;cputime_nop.go op-geth&#47;metrics&#47;cputime_nop.go</span>
<span class="term-fg1">index 0188735a783397c4e3f5e178085112ddc6243546..465d88c4d232085f2cbc35a796fd4d0039b11f5a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;metrics&#47;cputime_nop.go</span>
<span class="term-fg1">+++ op-geth&#47;metrics&#47;cputime_nop.go</span>
<span class="term-fg36">@@ -21,6 +21,6 @@</span> package metrics
&nbsp;
 &#47;&#47; getProcessCPUTime returns 0 on Windows as there is no system call to resolve
 &#47;&#47; the actual process&#39; CPU time.
<span class="term-fg31">-func getProcessCPUTime() int64 {</span>
<span class="term-fg32">+func getProcessCPUTime() float64 {</span>
 	return 0
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7317f663730a139b39c62ffa" role="button"
                   aria-expanded="false" aria-controls="id-7317f663730a139b39c62ffa">
                    <code>metrics/cputime_unix.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/metrics/cputime_unix.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/metrics/cputime_unix.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+2</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7317f663730a139b39c62ffa"><span class="term-fg1">diff --git go-ethereum&#47;metrics&#47;cputime_unix.go op-geth&#47;metrics&#47;cputime_unix.go</span>
<span class="term-fg1">index 3c56a75d0077cfb1e09351b72cc2edb080f64ebb..ad4f812fd285da1b46cf15552ff65005bcff77a9 100644</span>
<span class="term-fg1">--- go-ethereum&#47;metrics&#47;cputime_unix.go</span>
<span class="term-fg1">+++ op-geth&#47;metrics&#47;cputime_unix.go</span>
<span class="term-fg36">@@ -26,11 +26,11 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 )
&nbsp;
 &#47;&#47; getProcessCPUTime retrieves the process&#39; CPU time since program startup.
<span class="term-fg31">-func getProcessCPUTime() int64 {</span>
<span class="term-fg32">+func getProcessCPUTime() float64 {</span>
 	var usage syscall.Rusage
 	if err := syscall.Getrusage(syscall.RUSAGE_SELF, &amp;usage); err != nil {
 		log.Warn(&quot;Failed to retrieve CPU time&quot;, &quot;err&quot;, err)
 		return 0
 	}
<span class="term-fg31">-	return int64(usage.Utime.Sec+usage.Stime.Sec)*100 + int64(usage.Utime.Usec+usage.Stime.Usec)&#47;10000 &#47;&#47;nolint:unconvert</span>
<span class="term-fg32">+	return float64(usage.Utime.Sec+usage.Stime.Sec) + float64(usage.Utime.Usec+usage.Stime.Usec)&#47;1000000 &#47;&#47;nolint:unconvert</span>
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-47dd6d609aa3cfa84060e96b" role="button"
                   aria-expanded="false" aria-controls="id-47dd6d609aa3cfa84060e96b">
                    <code>metrics/metrics.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/metrics/metrics.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/metrics/metrics.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+15</span></div>
                        <div class="text-start"><span class="text-danger">-6</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-47dd6d609aa3cfa84060e96b"><span class="term-fg1">diff --git go-ethereum&#47;metrics&#47;metrics.go op-geth&#47;metrics&#47;metrics.go</span>
<span class="term-fg1">index 2edf8e35f151a7edc2313dea14f16a57ccbc0e24..ff7196b56494a5a2ecd8ebe8f90fb5fc20b6bbdc 100644</span>
<span class="term-fg1">--- go-ethereum&#47;metrics&#47;metrics.go</span>
<span class="term-fg1">+++ op-geth&#47;metrics&#47;metrics.go</span>
<span class="term-fg36">@@ -127,8 +127,6 @@</span> 	if !Enabled {
 		return
 	}
&nbsp;
<span class="term-fg31">-	refreshFreq := int64(refresh &#47; time.Second)</span>
<span class="term-fg31">-</span>
 	&#47;&#47; Create the various data collectors
 	var (
 		cpustats  = make([]CPUStats, 2)
<span class="term-fg36">@@ -163,14 +161,25 @@</span> 		diskWriteBytes        = GetOrRegisterMeter(&quot;system&#47;disk&#47;writedata&quot;, DefaultRegistry)
 		diskWriteBytesCounter = GetOrRegisterCounter(&quot;system&#47;disk&#47;writebytes&quot;, DefaultRegistry)
 	)
&nbsp;
<span class="term-fg32">+	var lastCollectTime time.Time</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Iterate loading the different stats and updating the meters.
 	now, prev := 0, 1
 	for ; ; now, prev = prev, now {
<span class="term-fg31">-		&#47;&#47; CPU</span>
<span class="term-fg32">+		&#47;&#47; Gather CPU times.</span>
 		ReadCPUStats(&amp;cpustats[now])
<span class="term-fg31">-		cpuSysLoad.Update((cpustats[now].GlobalTime - cpustats[prev].GlobalTime) &#47; refreshFreq)</span>
<span class="term-fg31">-		cpuSysWait.Update((cpustats[now].GlobalWait - cpustats[prev].GlobalWait) &#47; refreshFreq)</span>
<span class="term-fg31">-		cpuProcLoad.Update((cpustats[now].LocalTime - cpustats[prev].LocalTime) &#47; refreshFreq)</span>
<span class="term-fg32">+		collectTime := time.Now()</span>
<span class="term-fg32">+		secondsSinceLastCollect := collectTime.Sub(lastCollectTime).Seconds()</span>
<span class="term-fg32">+		lastCollectTime = collectTime</span>
<span class="term-fg32">+		if secondsSinceLastCollect &gt; 0 {</span>
<span class="term-fg32">+			sysLoad := (cpustats[now].GlobalTime - cpustats[prev].GlobalTime) &#47; secondsSinceLastCollect</span>
<span class="term-fg32">+			sysWait := (cpustats[now].GlobalWait - cpustats[prev].GlobalWait) &#47; secondsSinceLastCollect</span>
<span class="term-fg32">+			procLoad := (cpustats[now].LocalTime - cpustats[prev].LocalTime) &#47; secondsSinceLastCollect</span>
<span class="term-fg32">+			&#47;&#47; Convert to integer percentage.</span>
<span class="term-fg32">+			cpuSysLoad.Update(int64(sysLoad * 100))</span>
<span class="term-fg32">+			cpuSysWait.Update(int64(sysWait * 100))</span>
<span class="term-fg32">+			cpuProcLoad.Update(int64(procLoad * 100))</span>
<span class="term-fg32">+		}</span>
&nbsp;
 		&#47;&#47; Threads
 		cpuThreads.Update(int64(threadCreateProfile.Count()))</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b9d92e92efa42cc247fec5d9" role="button"
                   aria-expanded="false" aria-controls="id-b9d92e92efa42cc247fec5d9">
                    <code>node/node.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/node/node.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/node/node.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+16</span></div>
                        <div class="text-start"><span class="text-danger">-16</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b9d92e92efa42cc247fec5d9"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;node.go op-geth&#47;node&#47;node.go</span>
<span class="term-fg1">index 112a771ab090981282195047fcf282ba6bc4ec1e..2f89bc1ad274d9fc8ef934db10b7f46cd5f51244 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;node.go</span>
<span class="term-fg1">+++ op-geth&#47;node&#47;node.go</span>
<span class="term-fg36">@@ -37,7 +37,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg31">-	&quot;github.com&#47;prometheus&#47;tsdb&#47;fileutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;gofrs&#47;flock&quot;</span>
 )
&nbsp;
 &#47;&#47; Node is a container on which services can be registered.
<span class="term-fg36">@@ -46,13 +46,13 @@</span> 	eventmux      *event.TypeMux
 	config        *Config
 	accman        *accounts.Manager
 	log           log.Logger
<span class="term-fg31">-	keyDir        string            &#47;&#47; key store directory</span>
<span class="term-fg31">-	keyDirTemp    bool              &#47;&#47; If true, key directory will be removed by Stop</span>
<span class="term-fg31">-	dirLock       fileutil.Releaser &#47;&#47; prevents concurrent use of instance directory</span>
<span class="term-fg31">-	stop          chan struct{}     &#47;&#47; Channel to wait for termination notifications</span>
<span class="term-fg31">-	server        *p2p.Server       &#47;&#47; Currently running P2P networking layer</span>
<span class="term-fg31">-	startStopLock sync.Mutex        &#47;&#47; Start&#47;Stop are protected by an additional lock</span>
<span class="term-fg31">-	state         int               &#47;&#47; Tracks state of node lifecycle</span>
<span class="term-fg32">+	keyDir        string        &#47;&#47; key store directory</span>
<span class="term-fg32">+	keyDirTemp    bool          &#47;&#47; If true, key directory will be removed by Stop</span>
<span class="term-fg32">+	dirLock       *flock.Flock  &#47;&#47; prevents concurrent use of instance directory</span>
<span class="term-fg32">+	stop          chan struct{} &#47;&#47; Channel to wait for termination notifications</span>
<span class="term-fg32">+	server        *p2p.Server   &#47;&#47; Currently running P2P networking layer</span>
<span class="term-fg32">+	startStopLock sync.Mutex    &#47;&#47; Start&#47;Stop are protected by an additional lock</span>
<span class="term-fg32">+	state         int           &#47;&#47; Tracks state of node lifecycle</span>
&nbsp;
 	lock          sync.Mutex
 	lifecycles    []Lifecycle &#47;&#47; All registered backends, services, and auxiliary services that have a lifecycle
<span class="term-fg36">@@ -320,20 +320,20 @@</span> 		return err
 	}
 	&#47;&#47; Lock the instance directory to prevent concurrent use by another instance as well as
 	&#47;&#47; accidental use of the instance directory as a database.
<span class="term-fg31">-	release, _, err := fileutil.Flock(filepath.Join(instdir, &quot;LOCK&quot;))</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		return convertFileLockError(err)</span>
<span class="term-fg32">+	n.dirLock = flock.New(filepath.Join(instdir, &quot;LOCK&quot;))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if locked, err := n.dirLock.TryLock(); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	} else if !locked {</span>
<span class="term-fg32">+		return ErrDatadirUsed</span>
 	}
<span class="term-fg31">-	n.dirLock = release</span>
 	return nil
 }
&nbsp;
 func (n *Node) closeDataDir() {
 	&#47;&#47; Release instance directory lock.
<span class="term-fg31">-	if n.dirLock != nil {</span>
<span class="term-fg31">-		if err := n.dirLock.Release(); err != nil {</span>
<span class="term-fg31">-			n.log.Error(&quot;Can&#39;t release datadir lock&quot;, &quot;err&quot;, err)</span>
<span class="term-fg31">-		}</span>
<span class="term-fg32">+	if n.dirLock != nil &amp;&amp; n.dirLock.Locked() {</span>
<span class="term-fg32">+		n.dirLock.Unlock()</span>
 		n.dirLock = nil
 	}
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-802b1151ba9c6fe7ca4c804f" role="button"
                   aria-expanded="false" aria-controls="id-802b1151ba9c6fe7ca4c804f">
                    <code>oss-fuzz.sh</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/oss-fuzz.sh" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/oss-fuzz.sh" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-2</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-802b1151ba9c6fe7ca4c804f"><span class="term-fg1">diff --git go-ethereum&#47;oss-fuzz.sh op-geth&#47;oss-fuzz.sh</span>
<span class="term-fg1">index 7f454ff307b44504a30186141d5b970a01015b8e..745a5ba7c7c099b512986a6cde857c0e3ac7923f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;oss-fuzz.sh</span>
<span class="term-fg1">+++ op-geth&#47;oss-fuzz.sh</span>
<span class="term-fg36">@@ -125,7 +125,5 @@</span> compile_fuzzer tests&#47;fuzzers&#47;snap  FuzzSRange fuzz_storage_range
 compile_fuzzer tests&#47;fuzzers&#47;snap  FuzzByteCodes fuzz_byte_codes
 compile_fuzzer tests&#47;fuzzers&#47;snap  FuzzTrieNodes fuzz_trie_nodes
&nbsp;
<span class="term-fg31">-compile_fuzzer tests&#47;fuzzers&#47;modexp  Fuzz fuzzModexp</span>
<span class="term-fg31">-</span>
 #TODO: move this to tests&#47;fuzzers, if possible
 compile_fuzzer crypto&#47;blake2b  Fuzz      fuzzBlake2b</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a5ea3955d07cae348809adf4" role="button"
                   aria-expanded="false" aria-controls="id-a5ea3955d07cae348809adf4">
                    <code>p2p/server.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/p2p/server.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/p2p/server.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+1</span></div>
                        <div class="text-start"><span class="text-danger">-1</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a5ea3955d07cae348809adf4"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;server.go op-geth&#47;p2p&#47;server.go</span>
<span class="term-fg1">index 19f7935ffcaeb388a49fe386bcd664d2a7fba156..610b82d784f62f9f074f64e189654955e9024aac 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;server.go</span>
<span class="term-fg1">+++ op-geth&#47;p2p&#47;server.go</span>
<span class="term-fg36">@@ -1057,7 +1057,7 @@</span>
 	&#47;&#47; Broadcast peer drop to external subscribers. This needs to be
 	&#47;&#47; after the send to delpeer so subscribers have a consistent view of
 	&#47;&#47; the peer set (i.e. Server.Peers() doesn&#39;t include the peer when the
<span class="term-fg31">-	&#47;&#47; event is received.</span>
<span class="term-fg32">+	&#47;&#47; event is received).</span>
 	srv.peerFeed.Send(&amp;PeerEvent{
 		Type:          PeerEventTypeDrop,
 		Peer:          p.ID(),</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2961402ff805d06546b5c9b5" role="button"
                   aria-expanded="false" aria-controls="id-2961402ff805d06546b5c9b5">
                    <code>params/bootnodes.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/params/bootnodes.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/params/bootnodes.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+4</span></div>
                        <div class="text-start"><span class="text-danger">-8</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2961402ff805d06546b5c9b5"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;bootnodes.go op-geth&#47;params&#47;bootnodes.go</span>
<span class="term-fg1">index 0a995bc3c404687bb86901f039804772ff5a0d72..45e27c441a785b39058c4469953ab31694f37e66 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;bootnodes.go</span>
<span class="term-fg1">+++ op-geth&#47;params&#47;bootnodes.go</span>
<span class="term-fg36">@@ -22,14 +22,10 @@</span> &#47;&#47; MainnetBootnodes are the enode URLs of the P2P bootstrap nodes running on
 &#47;&#47; the main Ethereum network.
 var MainnetBootnodes = []string{
 	&#47;&#47; Ethereum Foundation Go Bootnodes
<span class="term-fg31">-	&quot;enode:&#47;&#47;d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666@18.138.108.67:30303&quot;,   &#47;&#47; bootnode-aws-ap-southeast-1-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de@3.209.45.79:30303&quot;,     &#47;&#47; bootnode-aws-us-east-1-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;8499da03c47d637b20eee24eec3c356c9a2e6148d6fe25ca195c7949ab8ec2c03e3556126b0d7ed644675e78c4318b08691b7b57de10e5f0d40d05b09238fa0a@52.187.207.27:30303&quot;,   &#47;&#47; bootnode-azure-australiaeast-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;103858bdb88756c71f15e9b5e09b56dc1be52f0a5021d46301dbbfb7e130029cc9d0d6f73f693bc29b665770fff7da4d34f3c6379fe12721b5d7a0bcb5ca1fc1@191.234.162.198:30303&quot;, &#47;&#47; bootnode-azure-brazilsouth-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;715171f50508aba88aecd1250af392a45a330af91d7b90701c436b618c86aaa1589c9184561907bebbb56439b8f8787bc01f49a7c77276c58c1b09822d75e8e8@52.231.165.108:30303&quot;,  &#47;&#47; bootnode-azure-koreasouth-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;5d6d7cd20d6da4bb83a1d28cadb5d409b64edf314c0335df658c1a54e32c7c4a7ab7823d57c39b6a757556e68ff1df17c748b698544a55cb488b52479a92b60f@104.42.217.25:30303&quot;,   &#47;&#47; bootnode-azure-westus-001</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc@65.108.70.101:30303&quot;,   &#47;&#47; bootnode-hetzner-hel</span>
<span class="term-fg31">-	&quot;enode:&#47;&#47;4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052@157.90.35.166:30303&quot;,   &#47;&#47; bootnode-hetzner-fsn</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;d860a01f9722d78051619d1e2351aba3f43f943f6f00718d1b9baa4101932a1f5011f16bb2b1bb35db20d6fe28fa0bf09636d26a87d31de9ec6203eeedb1f666@18.138.108.67:30303&quot;, &#47;&#47; bootnode-aws-ap-southeast-1-001</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;22a8232c3abc76a16ae9d6c3b164f98775fe226f0917b0ca871128a74a8e9630b458460865bab457221f1d448dd9791d24c4e5d88786180ac185df813a68d4de@3.209.45.79:30303&quot;,   &#47;&#47; bootnode-aws-us-east-1-001</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;2b252ab6a1d0f971d9722cb839a42cb81db019ba44c08754628ab4a823487071b5695317c8ccd085219c3a03af063495b2f1da8d18218da2d6a82981b45e6ffc@65.108.70.101:30303&quot;, &#47;&#47; bootnode-hetzner-hel</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;4aeb4ab6c14b23e2c4cfdce879c04b0748a20d8e9b59e25ded2a08143e265c6c25936e74cbc8e641e3312ca288673d91f2f93f8e277de3cfa444ecdaaf982052@157.90.35.166:30303&quot;, &#47;&#47; bootnode-hetzner-fsn</span>
 }
&nbsp;
 &#47;&#47; SepoliaBootnodes are the enode URLs of the P2P bootstrap nodes running on the</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d27d427e5c35fb3bec6559c2" role="button"
                   aria-expanded="false" aria-controls="id-d27d427e5c35fb3bec6559c2">
                    <code>params/config_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/params/config_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/params/config_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+19</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d27d427e5c35fb3bec6559c2"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;config_test.go op-geth&#47;params&#47;config_test.go</span>
<span class="term-fg1">index 5634569e29f09891985c442d87ad51a0d053268f..bf9181d00afa04eb9d1ed8c2ee7b22797260be70 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;config_test.go</span>
<span class="term-fg1">+++ op-geth&#47;params&#47;config_test.go</span>
<span class="term-fg36">@@ -136,3 +136,22 @@</span> 	if r := c.Rules(big.NewInt(0), true, stamp); !r.IsShanghai {
 		t.Errorf(&quot;expected %v to be shanghai&quot;, stamp)
 	}
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestConfigRulesRegolith(t *testing.T) {</span>
<span class="term-fg32">+	c := &amp;ChainConfig{</span>
<span class="term-fg32">+		RegolithTime: newUint64(500),</span>
<span class="term-fg32">+		Optimism:     &amp;OptimismConfig{},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var stamp uint64</span>
<span class="term-fg32">+	if r := c.Rules(big.NewInt(0), true, stamp); r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to not be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	stamp = 500</span>
<span class="term-fg32">+	if r := c.Rules(big.NewInt(0), true, stamp); !r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	stamp = math.MaxInt64</span>
<span class="term-fg32">+	if r := c.Rules(big.NewInt(0), true, stamp); !r.IsOptimismRegolith {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected %v to be regolith&quot;, stamp)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-55a339b8aae72c0fc2c61262" role="button"
                   aria-expanded="false" aria-controls="id-55a339b8aae72c0fc2c61262">
                    <code>signer/core/apitypes/types.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/signer/core/apitypes/types.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/signer/core/apitypes/types.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+20</span></div>
                        <div class="text-start"><span class="text-danger">-102</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-55a339b8aae72c0fc2c61262"><span class="term-fg1">diff --git go-ethereum&#47;signer&#47;core&#47;apitypes&#47;types.go op-geth&#47;signer&#47;core&#47;apitypes&#47;types.go</span>
<span class="term-fg1">index c72cad5939cf296a8533274c655a817646355475..8218e754d36c2a996d070a4a82b274d376c234c5 100644</span>
<span class="term-fg1">--- go-ethereum&#47;signer&#47;core&#47;apitypes&#47;types.go</span>
<span class="term-fg1">+++ op-geth&#47;signer&#47;core&#47;apitypes&#47;types.go</span>
<span class="term-fg36">@@ -742,112 +742,30 @@</span> 		primitiveType == &quot;address[]&quot; ||
 		primitiveType == &quot;bool&quot; ||
 		primitiveType == &quot;bool[]&quot; ||
 		primitiveType == &quot;string&quot; ||
<span class="term-fg31">-		primitiveType == &quot;string[]&quot; {</span>
<span class="term-fg31">-		return true</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if primitiveType == &quot;bytes&quot; ||</span>
<span class="term-fg32">+		primitiveType == &quot;string[]&quot; ||</span>
<span class="term-fg32">+		primitiveType == &quot;bytes&quot; ||</span>
 		primitiveType == &quot;bytes[]&quot; ||
<span class="term-fg31">-		primitiveType == &quot;bytes1&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes1[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes2&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes2[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes3&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes3[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes4&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes4[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes5&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes5[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes6&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes6[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes7&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes7[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes8&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes8[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes9&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes9[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes10&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes10[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes11&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes11[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes12&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes12[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes13&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes13[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes14&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes14[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes15&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes15[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes16&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes16[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes17&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes17[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes18&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes18[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes19&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes19[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes20&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes20[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes21&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes21[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes22&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes22[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes23&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes23[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes24&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes24[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes25&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes25[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes26&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes26[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes27&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes27[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes28&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes28[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes29&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes29[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes30&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes30[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes31&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes31[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes32&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;bytes32[]&quot; {</span>
<span class="term-fg32">+		primitiveType == &quot;int&quot; ||</span>
<span class="term-fg32">+		primitiveType == &quot;int[]&quot; ||</span>
<span class="term-fg32">+		primitiveType == &quot;uint&quot; ||</span>
<span class="term-fg32">+		primitiveType == &quot;uint[]&quot; {</span>
 		return true
 	}
<span class="term-fg31">-	if primitiveType == &quot;int&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int8&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int8[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int16&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int16[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int32&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int32[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int64&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int64[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int96&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int96[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int128&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int128[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int256&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;int256[]&quot; {</span>
<span class="term-fg31">-		return true</span>
<span class="term-fg32">+	&#47;&#47; For &#39;bytesN&#39;, &#39;bytesN[]&#39;, we allow N from 1 to 32</span>
<span class="term-fg32">+	for n := 1; n &lt;= 32; n++ {</span>
<span class="term-fg32">+		&#47;&#47; e.g. &#39;bytes28&#39; or &#39;bytes28[]&#39;</span>
<span class="term-fg32">+		if primitiveType == fmt.Sprintf(&quot;bytes%d&quot;, n) || primitiveType == fmt.Sprintf(&quot;bytes%d[]&quot;, n) {</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
 	}
<span class="term-fg31">-	if primitiveType == &quot;uint&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint8&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint8[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint16&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint16[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint32&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint32[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint64&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint64[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint96&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint96[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint128&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint128[]&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint256&quot; ||</span>
<span class="term-fg31">-		primitiveType == &quot;uint256[]&quot; {</span>
<span class="term-fg31">-		return true</span>
<span class="term-fg32">+	&#47;&#47; For &#39;intN&#39;,&#39;intN[]&#39; and &#39;uintN&#39;,&#39;uintN[]&#39; we allow N in increments of 8, from 8 up to 256</span>
<span class="term-fg32">+	for n := 8; n &lt;= 256; n += 8 {</span>
<span class="term-fg32">+		if primitiveType == fmt.Sprintf(&quot;int%d&quot;, n) || primitiveType == fmt.Sprintf(&quot;int%d[]&quot;, n) {</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if primitiveType == fmt.Sprintf(&quot;uint%d&quot;, n) || primitiveType == fmt.Sprintf(&quot;uint%d[]&quot;, n) {</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
 	}
 	return false
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4eb8371c6719bfda8776fda2" role="button"
                   aria-expanded="false" aria-controls="id-4eb8371c6719bfda8776fda2">
                    <code>signer/core/apitypes/types_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/signer/core/apitypes/types_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+40</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4eb8371c6719bfda8776fda2"><span class="term-fg1">diff --git go-ethereum&#47;signer&#47;core&#47;apitypes&#47;types_test.go op-geth&#47;signer&#47;core&#47;apitypes&#47;types_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..eef3cae00cc41d44f18c98ccef97f36628063738</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;signer&#47;core&#47;apitypes&#47;types_test.go</span>
<span class="term-fg36">@@ -0,0 +1,40 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2023 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package apitypes</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import &quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestIsPrimitive(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Expected positives</span>
<span class="term-fg32">+	for i, tc := range []string{</span>
<span class="term-fg32">+		&quot;int24&quot;, &quot;int24[]&quot;, &quot;uint88&quot;, &quot;uint88[]&quot;, &quot;uint&quot;, &quot;uint[]&quot;, &quot;int256&quot;, &quot;int256[]&quot;,</span>
<span class="term-fg32">+		&quot;uint96&quot;, &quot;uint96[]&quot;, &quot;int96&quot;, &quot;int96[]&quot;, &quot;bytes17[]&quot;, &quot;bytes17&quot;,</span>
<span class="term-fg32">+	} {</span>
<span class="term-fg32">+		if !isPrimitiveTypeValid(tc) {</span>
<span class="term-fg32">+			t.Errorf(&quot;test %d: expected &#39;%v&#39; to be a valid primitive&quot;, i, tc)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Expected negatives</span>
<span class="term-fg32">+	for i, tc := range []string{</span>
<span class="term-fg32">+		&quot;int257&quot;, &quot;int257[]&quot;, &quot;uint88 &quot;, &quot;uint88 []&quot;, &quot;uint257&quot;, &quot;uint-1[]&quot;,</span>
<span class="term-fg32">+		&quot;uint0&quot;, &quot;uint0[]&quot;, &quot;int95&quot;, &quot;int95[]&quot;, &quot;uint1&quot;, &quot;uint1[]&quot;, &quot;bytes33[]&quot;, &quot;bytess&quot;,</span>
<span class="term-fg32">+	} {</span>
<span class="term-fg32">+		if isPrimitiveTypeValid(tc) {</span>
<span class="term-fg32">+			t.Errorf(&quot;test %d: expected &#39;%v&#39; to not be a valid primitive&quot;, i, tc)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b96c5755c32c82ad482915a0" role="button"
                   aria-expanded="false" aria-controls="id-b96c5755c32c82ad482915a0">
                    <code>tests/block_test_util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/tests/block_test_util.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/tests/block_test_util.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+3</span></div>
                        <div class="text-start"><span class="text-danger">-3</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b96c5755c32c82ad482915a0"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;block_test_util.go op-geth&#47;tests&#47;block_test_util.go</span>
<span class="term-fg1">index 8da95a640a109b2051a38923b29ca06bc661a82f..b74653ea6accea0ede9f633f77c07d0079bbce06 100644</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;block_test_util.go</span>
<span class="term-fg1">+++ op-geth&#47;tests&#47;block_test_util.go</span>
<span class="term-fg36">@@ -154,7 +154,7 @@</span> 		return fmt.Errorf(&quot;post state validation failed: %v&quot;, err)
 	}
 	&#47;&#47; Cross-check the snapshot-to-hash against the trie hash
 	if snapshotter {
<span class="term-fg31">-		if err := chain.Snapshots().Verify(chain.CurrentBlock().Root()); err != nil {</span>
<span class="term-fg32">+		if err := chain.Snapshots().Verify(chain.CurrentBlock().Root); err != nil {</span>
 			return err
 		}
 	}
<span class="term-fg36">@@ -317,8 +317,8 @@</span> 	&#47;&#47; headers vs test file. some tests have reorgs, and we import
 	&#47;&#47; block-by-block, so we can only validate imported headers after
 	&#47;&#47; all blocks have been processed by BlockChain, as they may not
 	&#47;&#47; be part of the longest chain until last block is imported.
<span class="term-fg31">-	for b := cm.CurrentBlock(); b != nil &amp;&amp; b.NumberU64() != 0; b = cm.GetBlockByHash(b.Header().ParentHash) {</span>
<span class="term-fg31">-		if err := validateHeader(bmap[b.Hash()].BlockHeader, b.Header()); err != nil {</span>
<span class="term-fg32">+	for b := cm.CurrentBlock(); b != nil &amp;&amp; b.Number.Uint64() != 0; b = cm.GetBlockByHash(b.ParentHash).Header() {</span>
<span class="term-fg32">+		if err := validateHeader(bmap[b.Hash()].BlockHeader, b); err != nil {</span>
 			return fmt.Errorf(&quot;imported block header validation failed: %v&quot;, err)
 		}
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-91ba7a99bdf9a1501f6a6827" role="button"
                   aria-expanded="false" aria-controls="id-91ba7a99bdf9a1501f6a6827">
                    <code>tests/fuzzers/modexp/debug/main.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/tests/fuzzers/modexp/debug/main.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-40</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-91ba7a99bdf9a1501f6a6827"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;fuzzers&#47;modexp&#47;debug&#47;main.go op-geth&#47;tests&#47;fuzzers&#47;modexp&#47;debug&#47;main.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 22002bd3f807a66119ffa8259a317e202f75baab..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;fuzzers&#47;modexp&#47;debug&#47;main.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,40 +0,0 @@</span>
<span class="term-fg31">-&#47;&#47; Copyright 2020 The go-ethereum Authors</span>
<span class="term-fg31">-&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg31">-&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg31">-&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg31">-&#47;&#47; (at your option) any later version.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg31">-&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg31">-&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg31">-&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg31">-&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-package main</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-import (</span>
<span class="term-fg31">-	&quot;fmt&quot;</span>
<span class="term-fg31">-	&quot;os&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;fuzzers&#47;modexp&quot;</span>
<span class="term-fg31">-)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-func main() {</span>
<span class="term-fg31">-	if len(os.Args) != 2 {</span>
<span class="term-fg31">-		fmt.Fprintf(os.Stderr, &quot;Usage: debug &lt;file&gt;\n&quot;)</span>
<span class="term-fg31">-		fmt.Fprintf(os.Stderr, &quot;Example\n&quot;)</span>
<span class="term-fg31">-		fmt.Fprintf(os.Stderr, &quot;	$ debug ..&#47;crashers&#47;4bbef6857c733a87ecf6fd8b9e7238f65eb9862a\n&quot;)</span>
<span class="term-fg31">-		os.Exit(1)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	crasher := os.Args[1]</span>
<span class="term-fg31">-	data, err := os.ReadFile(crasher)</span>
<span class="term-fg31">-	if err != nil {</span>
<span class="term-fg31">-		fmt.Fprintf(os.Stderr, &quot;error loading crasher %v: %v&quot;, crasher, err)</span>
<span class="term-fg31">-		os.Exit(1)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	modexp.Fuzz(data)</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0453f939575664c9547227f9" role="button"
                   aria-expanded="false" aria-controls="id-0453f939575664c9547227f9">
                    <code>tests/fuzzers/modexp/modexp-fuzzer.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/tests/fuzzers/modexp/modexp-fuzzer.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <span class="text-muted">(deleted)</span>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+0</span></div>
                        <div class="text-start"><span class="text-danger">-90</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0453f939575664c9547227f9"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;fuzzers&#47;modexp&#47;modexp-fuzzer.go op-geth&#47;tests&#47;fuzzers&#47;modexp&#47;modexp-fuzzer.go</span>
<span class="term-fg1">deleted file mode 100644</span>
<span class="term-fg1">index 086d9e115310558faa599fad48490489402b6a29..0000000000000000000000000000000000000000</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;fuzzers&#47;modexp&#47;modexp-fuzzer.go</span>
<span class="term-fg1">+++ &#47;dev&#47;null</span>
<span class="term-fg36">@@ -1,90 +0,0 @@</span>
<span class="term-fg31">-&#47;&#47; Copyright 2022 The go-ethereum Authors</span>
<span class="term-fg31">-&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg31">-&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg31">-&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg31">-&#47;&#47; (at your option) any later version.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg31">-&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg31">-&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg31">-&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg31">-&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-package modexp</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-import (</span>
<span class="term-fg31">-	&quot;fmt&quot;</span>
<span class="term-fg31">-	&quot;math&#47;big&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg31">-	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;</span>
<span class="term-fg31">-	big2 &quot;github.com&#47;holiman&#47;big&quot;</span>
<span class="term-fg31">-)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; Fuzz is the fuzzing entry-point.</span>
<span class="term-fg31">-&#47;&#47; The function must return</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47;   - 1 if the fuzzer should increase priority of the</span>
<span class="term-fg31">-&#47;&#47;     given input during subsequent fuzzing (for example, the input is lexically</span>
<span class="term-fg31">-&#47;&#47;     correct and was parsed successfully);</span>
<span class="term-fg31">-&#47;&#47;   - -1 if the input must not be added to corpus even if gives new coverage; and</span>
<span class="term-fg31">-&#47;&#47;   - 0 otherwise</span>
<span class="term-fg31">-&#47;&#47;</span>
<span class="term-fg31">-&#47;&#47; other values are reserved for future use.</span>
<span class="term-fg31">-func Fuzz(input []byte) int {</span>
<span class="term-fg31">-	if len(input) &lt;= 96 {</span>
<span class="term-fg31">-		return -1</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	&#47;&#47; Abort on too expensive inputs</span>
<span class="term-fg31">-	precomp := vm.PrecompiledContractsBerlin[common.BytesToAddress([]byte{5})]</span>
<span class="term-fg31">-	if gas := precomp.RequiredGas(input); gas &gt; 40_000_000 {</span>
<span class="term-fg31">-		return 0</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	var (</span>
<span class="term-fg31">-		baseLen = new(big.Int).SetBytes(getData(input, 0, 32)).Uint64()</span>
<span class="term-fg31">-		expLen  = new(big.Int).SetBytes(getData(input, 32, 32)).Uint64()</span>
<span class="term-fg31">-		modLen  = new(big.Int).SetBytes(getData(input, 64, 32)).Uint64()</span>
<span class="term-fg31">-	)</span>
<span class="term-fg31">-	&#47;&#47; Handle a special case when both the base and mod length is zero</span>
<span class="term-fg31">-	if baseLen == 0 &amp;&amp; modLen == 0 {</span>
<span class="term-fg31">-		return -1</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	input = input[96:]</span>
<span class="term-fg31">-	&#47;&#47; Retrieve the operands and execute the exponentiation</span>
<span class="term-fg31">-	var (</span>
<span class="term-fg31">-		base  = new(big.Int).SetBytes(getData(input, 0, baseLen))</span>
<span class="term-fg31">-		exp   = new(big.Int).SetBytes(getData(input, baseLen, expLen))</span>
<span class="term-fg31">-		mod   = new(big.Int).SetBytes(getData(input, baseLen+expLen, modLen))</span>
<span class="term-fg31">-		base2 = new(big2.Int).SetBytes(getData(input, 0, baseLen))</span>
<span class="term-fg31">-		exp2  = new(big2.Int).SetBytes(getData(input, baseLen, expLen))</span>
<span class="term-fg31">-		mod2  = new(big2.Int).SetBytes(getData(input, baseLen+expLen, modLen))</span>
<span class="term-fg31">-	)</span>
<span class="term-fg31">-	if mod.BitLen() == 0 {</span>
<span class="term-fg31">-		&#47;&#47; Modulo 0 is undefined, return zero</span>
<span class="term-fg31">-		return -1</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	var a = new(big2.Int).Exp(base2, exp2, mod2).String()</span>
<span class="term-fg31">-	var b = new(big.Int).Exp(base, exp, mod).String()</span>
<span class="term-fg31">-	if a != b {</span>
<span class="term-fg31">-		panic(fmt.Sprintf(&quot;Inequality %#x ^ %#x mod %#x \n have %s\n want %s&quot;, base, exp, mod, a, b))</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return 1</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-&#47;&#47; getData returns a slice from the data based on the start and size and pads</span>
<span class="term-fg31">-&#47;&#47; up to size with zero&#39;s. This function is overflow safe.</span>
<span class="term-fg31">-func getData(data []byte, start uint64, size uint64) []byte {</span>
<span class="term-fg31">-	length := uint64(len(data))</span>
<span class="term-fg31">-	if start &gt; length {</span>
<span class="term-fg31">-		start = length</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	end := start + size</span>
<span class="term-fg31">-	if end &gt; length {</span>
<span class="term-fg31">-		end = length</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	return common.RightPadBytes(data[start:end], int(size))</span>
<span class="term-fg31">-}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-70ec29c99bc8a5a7beb37820" role="button"
                   aria-expanded="false" aria-controls="id-70ec29c99bc8a5a7beb37820">
                    <code>tests/state_test.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/tests/state_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/tests/state_test.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-70ec29c99bc8a5a7beb37820"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;state_test.go op-geth&#47;tests&#47;state_test.go</span>
<span class="term-fg1">index 7dd2f678c68308c570769fdf3602371c5cc39b6c..0cfbbe992b5363d435cfd818d1312926535bdbb6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;state_test.go</span>
<span class="term-fg1">+++ op-geth&#47;tests&#47;state_test.go</span>
<span class="term-fg36">@@ -222,13 +222,13 @@</span> 			}
&nbsp;
 			&#47;&#47; Prepare the EVM.
 			txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-			context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase)</span>
<span class="term-fg32">+			context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase, config, statedb)</span>
 			context.GetHash = vmTestBlockHash
 			context.BaseFee = baseFee
 			evm := vm.NewEVM(context, txContext, statedb, config, vmconfig)
&nbsp;
 			&#47;&#47; Create &quot;contract&quot; for sender to cache code analysis.
<span class="term-fg31">-			sender := vm.NewContract(vm.AccountRef(msg.From()), vm.AccountRef(msg.From()),</span>
<span class="term-fg32">+			sender := vm.NewContract(vm.AccountRef(msg.From), vm.AccountRef(msg.From),</span>
 				nil, 0)
&nbsp;
 			var (
<span class="term-fg36">@@ -239,12 +239,12 @@</span> 			)
 			b.ResetTimer()
 			for n := 0; n &lt; b.N; n++ {
 				snapshot := statedb.Snapshot()
<span class="term-fg31">-				statedb.Prepare(rules, msg.From(), context.Coinbase, msg.To(), vm.ActivePrecompiles(rules), msg.AccessList())</span>
<span class="term-fg32">+				statedb.Prepare(rules, msg.From, context.Coinbase, msg.To, vm.ActivePrecompiles(rules), msg.AccessList)</span>
 				b.StartTimer()
 				start := time.Now()
&nbsp;
 				&#47;&#47; Execute the message.
<span class="term-fg31">-				_, leftOverGas, err := evm.Call(sender, *msg.To(), msg.Data(), msg.Gas(), msg.Value())</span>
<span class="term-fg32">+				_, leftOverGas, err := evm.Call(sender, *msg.To, msg.Data, msg.GasLimit, msg.Value)</span>
 				if err != nil {
 					b.Error(err)
 					return
<span class="term-fg36">@@ -253,7 +253,7 @@</span>
 				b.StopTimer()
 				elapsed += uint64(time.Since(start))
 				refund += statedb.GetRefund()
<span class="term-fg31">-				gasUsed += msg.Gas() - leftOverGas</span>
<span class="term-fg32">+				gasUsed += msg.GasLimit - leftOverGas</span>
&nbsp;
 				statedb.RevertToSnapshot(snapshot)
 			}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b2f437faf3527701b652ecf2" role="button"
                   aria-expanded="false" aria-controls="id-b2f437faf3527701b652ecf2">
                    <code>tests/state_test_util.go</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/tests/state_test_util.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/tests/state_test_util.go" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+14</span></div>
                        <div class="text-start"><span class="text-danger">-4</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b2f437faf3527701b652ecf2"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;state_test_util.go op-geth&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">index b2e87fb004b988e8a3a198601025d512d23a38ac..8e9388fbffec4cd9f2ed803ffd693c9757f039b0 100644</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">+++ op-geth&#47;tests&#47;state_test_util.go</span>
<span class="term-fg36">@@ -245,7 +245,7 @@</span> 	}
&nbsp;
 	&#47;&#47; Prepare the EVM.
 	txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-	context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase, config, statedb)</span>
 	context.GetHash = vmTestBlockHash
 	context.BaseFee = baseFee
 	context.Random = nil
<span class="term-fg36">@@ -329,7 +329,7 @@</span> 	}
 	return genesis
 }
&nbsp;
<span class="term-fg31">-func (tx *stTransaction) toMessage(ps stPostState, baseFee *big.Int) (core.Message, error) {</span>
<span class="term-fg32">+func (tx *stTransaction) toMessage(ps stPostState, baseFee *big.Int) (*core.Message, error) {</span>
 	&#47;&#47; Derive sender from private key if present.
 	var from common.Address
 	if len(tx.PrivateKey) &gt; 0 {
<span class="term-fg36">@@ -397,8 +397,18 @@</span> 	if gasPrice == nil {
 		return nil, fmt.Errorf(&quot;no gas price provided&quot;)
 	}
&nbsp;
<span class="term-fg31">-	msg := types.NewMessage(from, to, tx.Nonce, value, gasLimit, gasPrice,</span>
<span class="term-fg31">-		tx.MaxFeePerGas, tx.MaxPriorityFeePerGas, data, accessList, false)</span>
<span class="term-fg32">+	msg := &amp;core.Message{</span>
<span class="term-fg32">+		From:       from,</span>
<span class="term-fg32">+		To:         to,</span>
<span class="term-fg32">+		Nonce:      tx.Nonce,</span>
<span class="term-fg32">+		Value:      value,</span>
<span class="term-fg32">+		GasLimit:   gasLimit,</span>
<span class="term-fg32">+		GasPrice:   gasPrice,</span>
<span class="term-fg32">+		GasFeeCap:  tx.MaxFeePerGas,</span>
<span class="term-fg32">+		GasTipCap:  tx.MaxPriorityFeePerGas,</span>
<span class="term-fg32">+		Data:       data,</span>
<span class="term-fg32">+		AccessList: accessList,</span>
<span class="term-fg32">+	}</span>
 	return msg, nil
 }
</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

                
                    <div class="text-muted">
                        <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-14146bf35de2d61725e7c89e"role="button" aria-expanded="false" aria-controls="id-14146bf35de2d61725e7c89e">
        
            <div class="col-12 col-sm-9 text-start"><h4>Ignored changes</h4></div>
        
        <div class="col-12 col-sm-3 ms-auto mt-2">
            <div class="row line-stat">
                <div class="text-end"><span class="text-success">+407</span></div>
                <div class="text-start"><span class="text-danger">-16</span></div>
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-14146bf35de2d61725e7c89e">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2622f683bebe76427a6d4d1f" role="button"
                   aria-expanded="false" aria-controls="id-2622f683bebe76427a6d4d1f">
                    <code>.circleci/config.yml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/.circleci/config.yml" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+157</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2622f683bebe76427a6d4d1f"><span class="term-fg1">diff --git go-ethereum&#47;.circleci&#47;config.yml op-geth&#47;.circleci&#47;config.yml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..51871e0e38328b6fc62f0f788096944d930ac5a1</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;.circleci&#47;config.yml</span>
<span class="term-fg36">@@ -0,0 +1,158 @@</span>
<span class="term-fg32">+version: 2.1</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+orbs:</span>
<span class="term-fg32">+  gcp-cli: circleci&#47;gcp-cli@3.0.1</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+commands:</span>
<span class="term-fg32">+  gcp-oidc-authenticate:</span>
<span class="term-fg32">+    description: &quot;Authenticate with GCP using a CircleCI OIDC token.&quot;</span>
<span class="term-fg32">+    parameters:</span>
<span class="term-fg32">+      project_id:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_PROJECT_ID</span>
<span class="term-fg32">+      workload_identity_pool_id:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_WIP_ID</span>
<span class="term-fg32">+      workload_identity_pool_provider_id:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_WIP_PROVIDER_ID</span>
<span class="term-fg32">+      service_account_email:</span>
<span class="term-fg32">+        type: env_var_name</span>
<span class="term-fg32">+        default: GCP_SERVICE_ACCOUNT_EMAIL</span>
<span class="term-fg32">+      gcp_cred_config_file_path:</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &#47;home&#47;circleci&#47;gcp_cred_config.json</span>
<span class="term-fg32">+      oidc_token_file_path:</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &#47;home&#47;circleci&#47;oidc_token.json</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: &quot;Create OIDC credential configuration&quot;</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            # Store OIDC token in temp file</span>
<span class="term-fg32">+            echo $CIRCLE_OIDC_TOKEN &gt; &lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg32">+            # Create a credential configuration for the generated OIDC ID Token</span>
<span class="term-fg32">+            gcloud iam workload-identity-pools create-cred-config \</span>
<span class="term-fg32">+                &quot;projects&#47;${&lt;&lt; parameters.project_id &gt;&gt;}&#47;locations&#47;global&#47;workloadIdentityPools&#47;${&lt;&lt; parameters.workload_identity_pool_id &gt;&gt;}&#47;providers&#47;${&lt;&lt; parameters.workload_identity_pool_provider_id &gt;&gt;}&quot;\</span>
<span class="term-fg32">+                --output-file=&quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot; \</span>
<span class="term-fg32">+                --service-account=&quot;${&lt;&lt; parameters.service_account_email &gt;&gt;}&quot; \</span>
<span class="term-fg32">+                --credential-source-file=&lt;&lt; parameters.oidc_token_file_path &gt;&gt;</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: &quot;Authenticate with GCP using OIDC&quot;</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            # Configure gcloud to leverage the generated credential configuration</span>
<span class="term-fg32">+            gcloud auth login --brief --cred-file &quot;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&quot;</span>
<span class="term-fg32">+            # Configure ADC</span>
<span class="term-fg32">+            echo &quot;export GOOGLE_APPLICATION_CREDENTIALS=&#39;&lt;&lt; parameters.gcp_cred_config_file_path &gt;&gt;&#39;&quot; | tee -a &quot;$BASH_ENV&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+jobs:</span>
<span class="term-fg32">+  docker-release:</span>
<span class="term-fg32">+    environment:</span>
<span class="term-fg32">+      DOCKER_BUILDKIT: 1</span>
<span class="term-fg32">+    parameters:</span>
<span class="term-fg32">+      docker_name:</span>
<span class="term-fg32">+        description: Docker image name</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;op-geth&quot;</span>
<span class="term-fg32">+      docker_tags:</span>
<span class="term-fg32">+        description: Docker image tags as csv</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+      registry:</span>
<span class="term-fg32">+        description: Docker registry</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;us-docker.pkg.dev&quot;</span>
<span class="term-fg32">+      repo:</span>
<span class="term-fg32">+        description: Docker repo</span>
<span class="term-fg32">+        type: string</span>
<span class="term-fg32">+        default: &quot;oplabs-tools-artifacts&#47;images&quot;</span>
<span class="term-fg32">+    machine:</span>
<span class="term-fg32">+      image: ubuntu-2204:2022.07.1</span>
<span class="term-fg32">+      resource_class: xlarge</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - gcp-cli&#47;install</span>
<span class="term-fg32">+      - gcp-oidc-authenticate</span>
<span class="term-fg32">+      - checkout</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: Configure Docker</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            gcloud auth configure-docker &lt;&lt;parameters.registry&gt;&gt;</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          name: Build and push</span>
<span class="term-fg32">+          command: |</span>
<span class="term-fg32">+            RAW_TAGS=&quot;&lt;&lt;parameters.docker_tags&gt;&gt;&quot;</span>
<span class="term-fg32">+            if [ &quot;$CIRCLE_BRANCH&quot; = &quot;optimism&quot; ]; then</span>
<span class="term-fg32">+              RAW_TAGS=&quot;$RAW_TAGS,optimism&quot;</span>
<span class="term-fg32">+            fi</span>
<span class="term-fg32">+            IMAGE_BASE=&quot;&lt;&lt;parameters.registry&gt;&gt;&#47;&lt;&lt;parameters.repo&gt;&gt;&#47;&lt;&lt;parameters.docker_name&gt;&gt;&quot;</span>
<span class="term-fg32">+            DOCKER_TAGS=$(echo -ne &quot;$RAW_TAGS&quot; | sed &quot;s&#47;,&#47;\n&#47;g&quot; | sed &quot;s&#47;[^a-zA-Z0-9\n.]&#47;-&#47;g&quot; | sed -e &quot;s|^|-t ${IMAGE_BASE}:|&quot;)</span>
<span class="term-fg32">+            docker context create buildx-build</span>
<span class="term-fg32">+            docker buildx create --use buildx-build</span>
<span class="term-fg32">+            docker buildx build --push \</span>
<span class="term-fg32">+              $(echo -ne $DOCKER_TAGS | tr &#39;\n&#39; &#39; &#39;) \</span>
<span class="term-fg32">+              --platform=linux&#47;arm64,linux&#47;amd64 \</span>
<span class="term-fg32">+              --build-arg VERSION=$CIRCLE_TAG \</span>
<span class="term-fg32">+              --build-arg COMMIT=$CIRCLE_SHA \</span>
<span class="term-fg32">+              --build-arg BUILDNUM=$CIRCLE_BUILD_NUM \</span>
<span class="term-fg32">+              --progress plain \</span>
<span class="term-fg32">+              -f Dockerfile .</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+  build-geth:</span>
<span class="term-fg32">+    docker:</span>
<span class="term-fg32">+      - image: cimg&#47;go:1.19</span>
<span class="term-fg32">+    resource_class: medium</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - checkout</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          command: go run build&#47;ci.go install</span>
<span class="term-fg32">+  unit-test:</span>
<span class="term-fg32">+    resource_class: medium</span>
<span class="term-fg32">+    docker:</span>
<span class="term-fg32">+      - image: cimg&#47;go:1.19</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - checkout</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          command: go run build&#47;ci.go test</span>
<span class="term-fg32">+  lint-geth:</span>
<span class="term-fg32">+    resource_class: medium</span>
<span class="term-fg32">+    docker:</span>
<span class="term-fg32">+      - image: cimg&#47;go:1.19</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - checkout</span>
<span class="term-fg32">+      - run:</span>
<span class="term-fg32">+          command: go run build&#47;ci.go lint</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+workflows:</span>
<span class="term-fg32">+  main:</span>
<span class="term-fg32">+    jobs:</span>
<span class="term-fg32">+      - build-geth:</span>
<span class="term-fg32">+          name: Build geth</span>
<span class="term-fg32">+      - unit-test:</span>
<span class="term-fg32">+          name: Run unit tests for geth</span>
<span class="term-fg32">+      - lint-geth:</span>
<span class="term-fg32">+          name: Run linter over geth</span>
<span class="term-fg32">+      - docker-release:</span>
<span class="term-fg32">+          name: Push to Docker</span>
<span class="term-fg32">+          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;</span>
<span class="term-fg32">+          context:</span>
<span class="term-fg32">+            - oplabs-gcr</span>
<span class="term-fg32">+  release:</span>
<span class="term-fg32">+    jobs:</span>
<span class="term-fg32">+      - hold:</span>
<span class="term-fg32">+          type: approval</span>
<span class="term-fg32">+          filters:</span>
<span class="term-fg32">+            tags:</span>
<span class="term-fg32">+              only: &#47;^v.*&#47;</span>
<span class="term-fg32">+            branches:</span>
<span class="term-fg32">+              ignore: &#47;.*&#47;</span>
<span class="term-fg32">+      - docker-release:</span>
<span class="term-fg32">+          name: Push to Docker</span>
<span class="term-fg32">+          filters:</span>
<span class="term-fg32">+            tags:</span>
<span class="term-fg32">+              only: &#47;^v.*&#47;</span>
<span class="term-fg32">+            branches:</span>
<span class="term-fg32">+              ignore: &#47;.*&#47;</span>
<span class="term-fg32">+          docker_tags: &lt;&lt;pipeline.git.revision&gt;&gt;,&lt;&lt;pipeline.git.tag&gt;&gt;</span>
<span class="term-fg32">+          context:</span>
<span class="term-fg32">+            - oplabs-gcr-release</span>
<span class="term-fg32">+          requires:</span>
<span class="term-fg32">+            - hold</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a40ec698114160d2ad1117d4" role="button"
                   aria-expanded="false" aria-controls="id-a40ec698114160d2ad1117d4">
                    <code>.github/workflows/pages.yaml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/.github/workflows/pages.yaml" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+36</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a40ec698114160d2ad1117d4"><span class="term-fg1">diff --git go-ethereum&#47;.github&#47;workflows&#47;pages.yaml op-geth&#47;.github&#47;workflows&#47;pages.yaml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6973b227ce779be6138ee2084e71bb5a5cdd57de</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;.github&#47;workflows&#47;pages.yaml</span>
<span class="term-fg36">@@ -0,0 +1,36 @@</span>
<span class="term-fg32">+name: Build and publish forkdiff github-pages</span>
<span class="term-fg32">+permissions:</span>
<span class="term-fg32">+  contents: write</span>
<span class="term-fg32">+on:</span>
<span class="term-fg32">+  push:</span>
<span class="term-fg32">+    branches:</span>
<span class="term-fg32">+      - optimism</span>
<span class="term-fg32">+jobs:</span>
<span class="term-fg32">+  deploy:</span>
<span class="term-fg32">+    concurrency: ci-${{ github.ref }}</span>
<span class="term-fg32">+    runs-on: ubuntu-latest</span>
<span class="term-fg32">+    steps:</span>
<span class="term-fg32">+      - name: Checkout</span>
<span class="term-fg32">+        uses: actions&#47;checkout@v3</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          fetch-depth: 1000  # make sure to fetch the old commit we diff against</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Build forkdiff</span>
<span class="term-fg32">+        uses: &quot;docker:&#47;&#47;protolambda&#47;forkdiff:latest&quot;</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          args: -repo=&#47;github&#47;workspace -fork=&#47;github&#47;workspace&#47;fork.yaml -out=&#47;github&#47;workspace&#47;index.html</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Build pages</span>
<span class="term-fg32">+        run: |</span>
<span class="term-fg32">+          mkdir -p tmp&#47;pages</span>
<span class="term-fg32">+          mv index.html tmp&#47;pages&#47;index.html</span>
<span class="term-fg32">+          touch tmp&#47;pages&#47;.nojekyll</span>
<span class="term-fg32">+          if [ &quot;$GITHUB_REPOSITORY&quot; == &quot;ethereum-optimism&#47;op-geth&quot; ]; then</span>
<span class="term-fg32">+              echo &quot;op-geth.optimism.io&quot; &gt; tmp&#47;pages&#47;CNAME</span>
<span class="term-fg32">+          fi;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - name: Deploy</span>
<span class="term-fg32">+        uses: JamesIves&#47;github-pages-deploy-action@v4</span>
<span class="term-fg32">+        with:</span>
<span class="term-fg32">+          folder: tmp&#47;pages</span>
<span class="term-fg32">+          clean: true</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b2a305dc6994bd4905a1c474" role="button"
                   aria-expanded="false" aria-controls="id-b2a305dc6994bd4905a1c474">
                    <code>fork.yaml</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/fork.yaml" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+203</span></div>
                        <div class="text-start"><span class="text-danger">-0</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b2a305dc6994bd4905a1c474"><span class="term-fg1">diff --git go-ethereum&#47;fork.yaml op-geth&#47;fork.yaml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0e14630d19a287a70ee2096daf4a12eb9803f79e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ op-geth&#47;fork.yaml</span>
<span class="term-fg36">@@ -0,0 +1,203 @@</span>
<span class="term-fg32">+title: &quot;op-geth - go-ethereum fork diff overview&quot;</span>
<span class="term-fg32">+footer: |</span>
<span class="term-fg32">+  Fork-diff overview of [`op-geth`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;op-geth), a fork of [`go-ethereum`](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum).</span>
<span class="term-fg32">+  and execution-engine of the [OP-stack](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism).</span>
<span class="term-fg32">+base:</span>
<span class="term-fg32">+  name: go-ethereum</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum</span>
<span class="term-fg32">+  hash: 73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47</span>
<span class="term-fg32">+fork:</span>
<span class="term-fg32">+  name: op-geth</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;ethereum-optimism&#47;op-geth</span>
<span class="term-fg32">+  ref: refs&#47;heads&#47;optimism</span>
<span class="term-fg32">+def:</span>
<span class="term-fg32">+  title: &quot;op-geth&quot;</span>
<span class="term-fg32">+  description: |</span>
<span class="term-fg32">+    This is an overview of the changes in [`op-geth`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;op-geth),</span>
<span class="term-fg32">+    a fork of [`go-ethereum`](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum), part of the OP-stack.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    The OP-stack architecture is modular, following the Consensus&#47;Execution split of post-Merge Ethereum L1:</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+      - [`op-node`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;tree&#47;develop&#47;op-node) implements most rollup-specific functionality as Consensus-Layer, similar to a L1 beacon-node. </span>
<span class="term-fg32">+      - [`op-geth`](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;op-geth) implements the Execution-Layer, with **minimal changes** for a secure Ethereum-equivalent application environment.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    Related [op-stack specifications](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;tree&#47;develop&#47;specs):</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    - [L2 Execution Engine spec](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;exec-engine.md)</span>
<span class="term-fg32">+    - [Deposit Transaction spec](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;deposits.md)</span>
<span class="term-fg32">+  sub:</span>
<span class="term-fg32">+    - title: &quot;Core modifications&quot;</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+        - title: &quot;State-transition modifications&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          sub:</span>
<span class="term-fg32">+            - title: &quot;Deposit Transaction type&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                The Bedrock upgrade introduces a `Deposit` transaction-type (`0x7E`) to enable both users and the</span>
<span class="term-fg32">+                rollup system itself to change the L2 state based on L1 events and system rules as</span>
<span class="term-fg32">+                [specified](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;deposits.md).</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;deposit_tx.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;transaction_marshalling.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;transaction_signing.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Transaction properties&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                The `Transaction` type now exposes the deposit-transaction and L1-cost properties required for the rollup.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;transaction.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;tx_access_list.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;tx_dynamic_fee.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;tx_legacy.go&quot;</span>
<span class="term-fg32">+            - title: &quot;L1 cost computation&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                Transactions must pay an additional L1 cost based on the amount of rollup-data-gas they consume,</span>
<span class="term-fg32">+                estimated based on gas-price-oracle information and encoded tx size.&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;vm&#47;evm.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;types&#47;rollup_l1_cost.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;state_processor.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;state_prefetcher.go&quot;</span>
<span class="term-fg32">+            - title: Transaction processing</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                Deposit transactions have special processing rules: gas is pre-paid on L1,</span>
<span class="term-fg32">+                and deposits with EVM-failure are included with rolled back changes (except mint).</span>
<span class="term-fg32">+                For regular transactions, at the end of the transition, the 1559 burn and L1 cost are routed to vaults.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;state_transition.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Gaslimit&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                The gaslimit is free to be set by the Engine API caller, instead of enforcing adjustments of the</span>
<span class="term-fg32">+                gaslimit in increments of 1&#47;1024 of the previous gaslimit.</span>
<span class="term-fg32">+                The gaslimit is changed (and limited) through the `SystemConfig` contract.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;consensus&#47;misc&#47;eip1559.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Consensus tweaks&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                The Engine API is activated at the Merge transition, with a Total Terminal Difficulty (TTD).</span>
<span class="term-fg32">+                The rollup starts post-merge, and thus sets the TTD to 0.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;consensus&#47;beacon&#47;consensus.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Chain config&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            The rollup functionality is enabled with the `optimism` field in the chain config.</span>
<span class="term-fg32">+            The EIP-1559 parameters are configurable to adjust for faster more frequent and smaller blocks.</span>
<span class="term-fg32">+            The parameters can be overriden for testing.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;params&#47;config.go&quot;</span>
<span class="term-fg32">+            - &quot;params&#47;protocol_params.go&quot;</span>
<span class="term-fg32">+            - &quot;core&#47;genesis.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Chain config cleanup&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            The optimism Goerli testnet used clique-config data to make geth internals accept blocks.</span>
<span class="term-fg32">+            Post-bedrock the beacon-consensus (i.e. follow Engine API) is now used, and the clique config is removed.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;core&#47;rawdb&#47;accessors_metadata.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Engine API modifications&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            The Engine API is extended to insert transactions into the block and optionally exclude the tx-pool,</span>
<span class="term-fg32">+            to reproduce the exact block of the sequencer from just the inputs, as derived from L1 by the rollup-node.</span>
<span class="term-fg32">+            See [L2 execution engine specs](https:&#47;&#47;github.com&#47;ethereum-optimism&#47;optimism&#47;blob&#47;develop&#47;specs&#47;exec-engine.md).</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;beacon&#47;engine&#47;types.go&quot;</span>
<span class="term-fg32">+            - &quot;beacon&#47;engine&#47;gen_blockparams.go&quot;</span>
<span class="term-fg32">+            - &quot;eth&#47;catalyst&#47;api.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Block-building modifications&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            The block-building code (in the &quot;miner&quot; package because of Proof-Of-Work legacy of ethereum) implements the</span>
<span class="term-fg32">+            changes to support the transaction-inclusion, tx-pool toggle and gaslimit parameters of the Engine API.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;miner&#47;*&quot;</span>
<span class="term-fg32">+        - title: &quot;Tx-pool tx cost updates&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            Transaction queueing and inclusion needs to account for the L1 cost component.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;core&#47;txpool&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;Node modifications&quot;</span>
<span class="term-fg32">+      description: Changes to the node configuration and services.</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+        - title: &quot;CLI&quot;</span>
<span class="term-fg32">+          sub:</span>
<span class="term-fg32">+            - title: &quot;Flags&quot;</span>
<span class="term-fg32">+              description: |</span>
<span class="term-fg32">+                Flag changes:</span>
<span class="term-fg32">+                  - Transactions can be forwarded to an RPC for sequencing.</span>
<span class="term-fg32">+                  - Historical calls can be forwarded to a legacy node.</span>
<span class="term-fg32">+                  - The tx pool propagation can be enabled&#47;disabled.</span>
<span class="term-fg32">+                  - The Optimism bedrock fork activation can be changed for testing.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;cmd&#47;utils&#47;flags.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;main.go&quot;</span>
<span class="term-fg32">+                - &quot;internal&#47;flags&#47;categories.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;config.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Versioning&quot;</span>
<span class="term-fg32">+              description: List the op-geth and upstream go-ethereum versions.</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;misccmd.go&quot;</span>
<span class="term-fg32">+                - &quot;params&#47;version.go&quot;</span>
<span class="term-fg32">+                - &quot;build&#47;ci.go&quot;</span>
<span class="term-fg32">+        - title: Node config</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;ethconfig&#47;config.go&quot;</span>
<span class="term-fg32">+        - title: Tx gossip disable option</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;handler.go&quot;</span>
<span class="term-fg32">+            - &quot;eth&#47;handler_eth.go&quot;</span>
<span class="term-fg32">+    - title: &quot;User API enhancements&quot;</span>
<span class="term-fg32">+      description: &quot;Encode the Deposit Tx properties, the L1 costs, and daisy-chain RPC-calls for pre-Bedrock historical data&quot;</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+        - title: &quot;Receipts metadata&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            Pre-Bedrock L1-cost receipt data is loaded from the database if available, and post-Bedrock the L1-cost </span>
<span class="term-fg32">+            metadata is hydrated on-the-fly based on the L1 fee information in the corresponding block.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;core&#47;types&#47;receipt.go&quot;</span>
<span class="term-fg32">+            - &quot;core&#47;types&#47;gen_receipt_json.go&quot;</span>
<span class="term-fg32">+        - title: &quot;API Backend&quot;</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            Forward transactions to the sequencer if configured.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;api_backend.go&quot;</span>
<span class="term-fg32">+            - &quot;eth&#47;backend.go&quot;</span>
<span class="term-fg32">+            - &quot;internal&#47;ethapi&#47;backend.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Apply L1 cost in API responses&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;state_accessor.go&quot;</span>
<span class="term-fg32">+        - title: API frontend</span>
<span class="term-fg32">+          description: Format deposit and L1-cost data in transaction responses.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;internal&#47;ethapi&#47;api.go&quot;</span>
<span class="term-fg32">+            - &quot;rpc&#47;errors.go&quot;</span>
<span class="term-fg32">+        - title: Tracer RPC daisy-chain</span>
<span class="term-fg32">+          description: Forward pre-bedrock tracing calls to legacy node.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;tracers&#47;api.go&quot;</span>
<span class="term-fg32">+        - title: &quot;Light Ethereum Subprotocol (LES) RPC&quot;</span>
<span class="term-fg32">+          description: Match the RPC changes in the LES RPC</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;les&#47;*&quot;</span>
<span class="term-fg32">+        - title: &quot;Daisy Chain tests&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;internal&#47;ethapi&#47;transaction_args_test.go&quot;</span>
<span class="term-fg32">+            - &quot;ethclient&#47;ethclient_test.go&quot;</span>
<span class="term-fg32">+            - &quot;eth&#47;tracers&#47;api_test.go&quot;</span>
<span class="term-fg32">+    - title: &quot;Geth extras&quot;</span>
<span class="term-fg32">+      description: Extend the tools available in geth to improve external testing and tooling.</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+        - title: Simulated Backend</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;accounts&#47;abi&#47;bind&#47;backends&#47;simulated.go&quot;</span>
<span class="term-fg32">+        - title: diff-included testing testing</span>
<span class="term-fg32">+          description: |</span>
<span class="term-fg32">+            Most of the op-geth changes are tested in the Optimism Monorepo and not part of the geth diff,</span>
<span class="term-fg32">+            but some testing like the Deposit TX encoding and API interactions are embedded in the op-geth diff instead.</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;core&#47;types&#47;transaction_marshalling_test.go&quot;</span>
<span class="term-fg32">+            - &quot;internal&#47;ethapi&#47;api_test.go&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# ignored globally, does not count towards line count</span>
<span class="term-fg32">+ignore:</span>
<span class="term-fg32">+  - &quot;.circleci&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;*.sum&quot;</span>
<span class="term-fg32">+  - &quot;go.mod&quot;</span>
<span class="term-fg32">+  - &quot;fork.yaml&quot;</span>
<span class="term-fg32">+  - &quot;.github&#47;workflows&#47;*&quot;</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7c9ae153daff3eeb0703ea75" role="button"
                   aria-expanded="false" aria-controls="id-7c9ae153daff3eeb0703ea75">
                    <code>go.mod</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/go.mod" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/go.mod" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+5</span></div>
                        <div class="text-start"><span class="text-danger">-5</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7c9ae153daff3eeb0703ea75"><span class="term-fg1">diff --git go-ethereum&#47;go.mod op-geth&#47;go.mod</span>
<span class="term-fg1">index fbac3e4d67ad2d1b3b747068ce57a0e9b7ca15aa..430451fc3324ba5594a27b9560167c0823a0b066 100644</span>
<span class="term-fg1">--- go-ethereum&#47;go.mod</span>
<span class="term-fg1">+++ op-geth&#47;go.mod</span>
<span class="term-fg36">@@ -1,6 +1,6 @@</span>
 module github.com&#47;ethereum&#47;go-ethereum
&nbsp;
<span class="term-fg31">-go 1.18</span>
<span class="term-fg32">+go 1.19</span>
&nbsp;
 require (
 	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;storage&#47;azblob v0.3.0
<span class="term-fg36">@@ -26,6 +26,7 @@</span> 	github.com&#47;fsnotify&#47;fsnotify v1.6.0
 	github.com&#47;gballet&#47;go-libpcsclite v0.0.0-20190607065134-2772fd86a8ff
 	github.com&#47;gballet&#47;go-verkle v0.0.0-20220902153445-097bd83b7732
 	github.com&#47;go-stack&#47;stack v1.8.1
<span class="term-fg32">+	github.com&#47;gofrs&#47;flock v0.8.1</span>
 	github.com&#47;golang-jwt&#47;jwt&#47;v4 v4.3.0
 	github.com&#47;golang&#47;protobuf v1.5.2
 	github.com&#47;golang&#47;snappy v0.0.4
<span class="term-fg36">@@ -34,7 +35,6 @@</span> 	github.com&#47;google&#47;uuid v1.3.0
 	github.com&#47;gorilla&#47;websocket v1.4.2
 	github.com&#47;graph-gophers&#47;graphql-go v1.3.0
 	github.com&#47;hashicorp&#47;go-bexpr v0.1.10
<span class="term-fg31">-	github.com&#47;holiman&#47;big v0.0.0-20221017200358-a027dc42d04e</span>
 	github.com&#47;holiman&#47;bloomfilter&#47;v2 v2.0.3
 	github.com&#47;holiman&#47;uint256 v1.2.0
 	github.com&#47;huin&#47;goupnp v1.0.3
<span class="term-fg36">@@ -44,16 +44,16 @@</span> 	github.com&#47;jackpal&#47;go-nat-pmp v1.0.2
 	github.com&#47;jedisct1&#47;go-minisign v0.0.0-20190909160543-45766022959e
 	github.com&#47;julienschmidt&#47;httprouter v1.3.0
 	github.com&#47;karalabe&#47;usb v0.0.2
<span class="term-fg32">+	github.com&#47;kylelemons&#47;godebug v1.1.0</span>
 	github.com&#47;mattn&#47;go-colorable v0.1.13
 	github.com&#47;mattn&#47;go-isatty v0.0.16
 	github.com&#47;naoina&#47;toml v0.1.2-0.20170918210437-9fafd6967416
 	github.com&#47;olekukonko&#47;tablewriter v0.0.5
 	github.com&#47;peterh&#47;liner v1.1.1-0.20190123174540-a2c9a5303de7
<span class="term-fg31">-	github.com&#47;prometheus&#47;tsdb v0.7.1</span>
 	github.com&#47;rs&#47;cors v1.7.0
 	github.com&#47;shirou&#47;gopsutil v3.21.4-0.20210419000835-c7a38de76ee5+incompatible
 	github.com&#47;status-im&#47;keycard-go v0.2.0
<span class="term-fg31">-	github.com&#47;stretchr&#47;testify v1.8.0</span>
<span class="term-fg32">+	github.com&#47;stretchr&#47;testify v1.8.1</span>
 	github.com&#47;supranational&#47;blst v0.3.8-0.20220526154634-513d2456b344
 	github.com&#47;syndtr&#47;goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7
 	github.com&#47;tyler-smith&#47;go-bip39 v1.1.0
<span class="term-fg36">@@ -98,7 +98,6 @@</span> 	github.com&#47;influxdata&#47;line-protocol v0.0.0-20210311194329-9aa0e372d097 &#47;&#47; indirect
 	github.com&#47;klauspost&#47;compress v1.15.15 &#47;&#47; indirect
 	github.com&#47;kr&#47;pretty v0.3.1 &#47;&#47; indirect
 	github.com&#47;kr&#47;text v0.2.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;kylelemons&#47;godebug v1.1.0 &#47;&#47; indirect</span>
 	github.com&#47;mattn&#47;go-runewidth v0.0.9 &#47;&#47; indirect
 	github.com&#47;matttproud&#47;golang_protobuf_extensions v1.0.4 &#47;&#47; indirect
 	github.com&#47;mitchellh&#47;mapstructure v1.4.1 &#47;&#47; indirect
<span class="term-fg36">@@ -114,6 +113,7 @@</span> 	github.com&#47;prometheus&#47;common v0.39.0 &#47;&#47; indirect
 	github.com&#47;prometheus&#47;procfs v0.9.0 &#47;&#47; indirect
 	github.com&#47;rogpeppe&#47;go-internal v1.9.0 &#47;&#47; indirect
 	github.com&#47;russross&#47;blackfriday&#47;v2 v2.1.0 &#47;&#47; indirect
<span class="term-fg32">+	github.com&#47;stretchr&#47;objx v0.5.0 &#47;&#47; indirect</span>
 	github.com&#47;tklauser&#47;go-sysconf v0.3.5 &#47;&#47; indirect
 	github.com&#47;tklauser&#47;numcpus v0.2.2 &#47;&#47; indirect
 	github.com&#47;xrash&#47;smetrics v0.0.0-20201216005158-039620a65673 &#47;&#47; indirect</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-60fd730ee2cada0256f934cb" role="button"
                   aria-expanded="false" aria-controls="id-60fd730ee2cada0256f934cb">
                    <code>go.sum</code>
                </a>
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/73b01f40ceb6bcb6f9f44c2a3d6f963b40452b47/go.sum" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum-optimism/op-geth/blob/11f0554a4313ea0e0aaddef194058b057aadce5c/go.sum" target="_blank">op-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        <div class="text-end"><span class="text-success">+6</span></div>
                        <div class="text-start"><span class="text-danger">-11</span></div>
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-60fd730ee2cada0256f934cb"><span class="term-fg1">diff --git go-ethereum&#47;go.sum op-geth&#47;go.sum</span>
<span class="term-fg1">index bf28cd2e24e53f6d5cddbc0b3e2a2c8c4fc077d9..449f638159a73ff1f737fc897ecc47372f610436 100644</span>
<span class="term-fg1">--- go-ethereum&#47;go.sum</span>
<span class="term-fg1">+++ op-geth&#47;go.sum</span>
<span class="term-fg36">@@ -135,7 +135,6 @@</span> github.com&#47;dgraph-io&#47;badger v1.6.0&#47;go.mod h1:zwt7syl517jmP8s94KqSxTlM6IMsdhYy6psNgSztDR4=
 github.com&#47;dgrijalva&#47;jwt-go v3.2.0+incompatible&#47;go.mod h1:E3ru+11k8xSBh+hMPgOLZmtrrCbhqsmaPHjLKYnJCaQ=
 github.com&#47;dgryski&#47;go-bitstream v0.0.0-20180413035011-3522498ce2c8&#47;go.mod h1:VMaSuZ+SZcx&#47;wljOQKvp5srsbCiKDEb6K2wC4+PiBmQ=
 github.com&#47;dgryski&#47;go-farm v0.0.0-20190423205320-6a90982ecee2&#47;go.mod h1:SqUrOPUnsFjfmXRMNPybcSiG0BgUW2AuFH8PAnS2iTw=
<span class="term-fg31">-github.com&#47;dgryski&#47;go-sip13 v0.0.0-20181026042036-e10d5fee7954&#47;go.mod h1:vAd38F8PWV+bWy6jNmig1y&#47;TA+kYO4g3RSRF0IAv0no=</span>
 github.com&#47;dlclark&#47;regexp2 v1.4.1-0.20201116162257-a2a8dda75c91&#47;go.mod h1:2pZnwuY&#47;m+8K6iRw6wQdMtk+rH5tNGR1i55kozfMjCc=
 github.com&#47;dlclark&#47;regexp2 v1.7.0 h1:7lJfhqlPssTb1WQx4yvTHN0uElPEv52sbaECrAQxjAo=
 github.com&#47;dlclark&#47;regexp2 v1.7.0&#47;go.mod h1:DHkYz0B9wPfa6wondMfaivmHpzrQ3v9q8cnmRbL6yW8=
<span class="term-fg36">@@ -195,11 +194,9 @@</span> github.com&#47;go-errors&#47;errors v1.0.1&#47;go.mod h1:f4zRHt4oKfwPJE5k8C9vpYG+aDHdBFUsgrm6&#47;TyX73Q=
 github.com&#47;go-errors&#47;errors v1.4.2 h1:J6MZopCL4uSllY1OfXM374weqZFFItUbrImctkmUxIA=
 github.com&#47;go-gl&#47;glfw v0.0.0-20190409004039-e6da0acd62b1&#47;go.mod h1:vR7hzQXu2zJy9AVAgeJqvqgH9Q5CA+iKCZ2gyEVpxRU=
 github.com&#47;go-gl&#47;glfw&#47;v3.3&#47;glfw v0.0.0-20191125211704-12ad95a8df72&#47;go.mod h1:tQ2UAYgL5IevRw8kRxooKSPJfGvJ9fJQFa0TUsXzTg8=
<span class="term-fg31">-github.com&#47;go-kit&#47;kit v0.8.0 h1:Wz+5lgoB0kkuqLEc6NVmwRknTKP6dTGbSqvhZtBI&#47;j0=</span>
 github.com&#47;go-kit&#47;kit v0.8.0&#47;go.mod h1:xBxKIO96dXMWWy0MnWVtmwkA9&#47;13aqxPnvrjFYMA2as=
 github.com&#47;go-logfmt&#47;logfmt v0.3.0&#47;go.mod h1:Qt1PoO58o5twSAckw1HlFXLmHsOX5&#47;0LbT9GBnD5lWE=
 github.com&#47;go-logfmt&#47;logfmt v0.4.0&#47;go.mod h1:3RMwSq7FuexP4Kalkev3ejPJsZTpXXBr9+V4qmtdjCk=
<span class="term-fg31">-github.com&#47;go-logfmt&#47;logfmt v0.5.1 h1:otpy5pqBCBZ1ng9RQ0dPu4PN7ba75Y&#47;aA+UpowDyNVA=</span>
 github.com&#47;go-martini&#47;martini v0.0.0-20170121215854-22fa46961aab&#47;go.mod h1:&#47;P9AEU963A2AYjv4d1V5eVL1CQbEJq6aCNHDDjibzu8=
 github.com&#47;go-ole&#47;go-ole v1.2.1 h1:2lOsA72HgjxAuMlKpFiCbHTvu44PIVkZ5hqm3RSdI&#47;E=
 github.com&#47;go-ole&#47;go-ole v1.2.1&#47;go.mod h1:7FAglXiTm7HKlQRDeOQ6ZNUHidzCWXuZWq&#47;1dTyBNF8=
<span class="term-fg36">@@ -214,6 +211,8 @@</span> github.com&#47;go-stack&#47;stack v1.8.1&#47;go.mod h1:dcoOX6HbPZSZptuspn9bctJ+N&#47;CnF5gGygcUP3XYfe4=
 github.com&#47;gobwas&#47;httphead v0.0.0-20180130184737-2c6c146eadee&#47;go.mod h1:L0fX3K22YWvt&#47;FAX9NnzrNzcI4wNYi9Yku4O0LKYflo=
 github.com&#47;gobwas&#47;pool v0.2.0&#47;go.mod h1:q8bcK0KcYlCgd9e7WYLm9LpyS+YeLd8JVDW6WezmKEw=
 github.com&#47;gobwas&#47;ws v1.0.2&#47;go.mod h1:szmBTxLgaFppYjEmNtny&#47;v3w89xOydFnnZMcgRRu&#47;EM=
<span class="term-fg32">+github.com&#47;gofrs&#47;flock v0.8.1 h1:+gYjHKf32LDeiEEFhQaotPbLuUXjY5ZqxKgXy7n59aw=</span>
<span class="term-fg32">+github.com&#47;gofrs&#47;flock v0.8.1&#47;go.mod h1:F1TvTiK9OcQqauNUHlbJvyl9Qa1QvF&#47;gOUDKA14jxHU=</span>
 github.com&#47;gofrs&#47;uuid v3.3.0+incompatible&#47;go.mod h1:b2aQJv3Z4Fp6yNu3cdSllBxTCLRxnplIgP&#47;c0N&#47;04lM=
 github.com&#47;gogo&#47;googleapis v0.0.0-20180223154316-0cd9801be74a&#47;go.mod h1:gf4bu3Q80BeJ6H1S1vYPm8&#47;ELATdvryBaNFGgqEef3s=
 github.com&#47;gogo&#47;googleapis v1.4.1&#47;go.mod h1:2lpHqI5OcWCtVElxXnPt+s8oJvMpySlOyM6xDCrzib4=
<span class="term-fg36">@@ -294,8 +293,6 @@</span> github.com&#47;hashicorp&#47;go-version v1.2.0&#47;go.mod h1:fltr4n8CU8Ke44wwGCBoEymUuxUHl09ZGVZPK5anwXA=
 github.com&#47;hashicorp&#47;golang-lru v0.5.0&#47;go.mod h1:&#47;m3WP610KZHVQ1SGc6re&#47;UDhFvYD7pJ4Ao+sR&#47;qLZy8=
 github.com&#47;hashicorp&#47;golang-lru v0.5.1&#47;go.mod h1:&#47;m3WP610KZHVQ1SGc6re&#47;UDhFvYD7pJ4Ao+sR&#47;qLZy8=
 github.com&#47;hashicorp&#47;hcl v1.0.0&#47;go.mod h1:E5yfLk+7swimpb2L&#47;Alb&#47;PJmXilQ&#47;rhwaUYs4T20WEQ=
<span class="term-fg31">-github.com&#47;holiman&#47;big v0.0.0-20221017200358-a027dc42d04e h1:pIYdhNkDh+YENVNi3gto8n9hAmRxKxoar0iE6BLucjw=</span>
<span class="term-fg31">-github.com&#47;holiman&#47;big v0.0.0-20221017200358-a027dc42d04e&#47;go.mod h1:j9cQbcqHQujT0oKJ38PylVfqohClLr3CvDC+Qcg+lhU=</span>
 github.com&#47;holiman&#47;bloomfilter&#47;v2 v2.0.3 h1:73e0e&#47;V0tCydx14a0SCYS&#47;EWCxgwLZ18CZcZKVu0fao=
 github.com&#47;holiman&#47;bloomfilter&#47;v2 v2.0.3&#47;go.mod h1:zpoh+gs7qcpqrHr3dB55AMiJwo0iURXE7ZOP9L9hSkA=
 github.com&#47;holiman&#47;uint256 v1.2.0 h1:gpSYcPLWGv4sG43I2mVLiDZCNDh&#47;EpGjSk8tmtxitHM=
<span class="term-fg36">@@ -440,7 +437,6 @@</span> github.com&#47;nats-io&#47;nkeys v0.1.0&#47;go.mod h1:xpnFELMwJABBLVhffcfd1MZx6VsNRFpEugbxziKVo7w=
 github.com&#47;nats-io&#47;nuid v1.0.1&#47;go.mod h1:19wcPz3Ph3q0Jbyiqsd0kePYG7A95tJPxeL+1OSON2c=
 github.com&#47;nxadm&#47;tail v1.4.4 h1:DQuhQpB1tVlglWS2hLQ5OV6B5r8aGxSrPc5Qo6uTN78=
 github.com&#47;nxadm&#47;tail v1.4.4&#47;go.mod h1:kenIhsEOeOJmVchQTgglprH7qJGnHDVpk1VPCcaMI8A=
<span class="term-fg31">-github.com&#47;oklog&#47;ulid v1.3.1&#47;go.mod h1:CirwcVhetQ6Lv90oh&#47;F+FBtV6XMibvdAFo93nm5qn4U=</span>
 github.com&#47;olekukonko&#47;tablewriter v0.0.5 h1:P2Ga83D34wi1o9J6Wh1mRuqd4mF&#47;x&#47;lgBS7N7AbDhec=
 github.com&#47;olekukonko&#47;tablewriter v0.0.5&#47;go.mod h1:hPp6KlRPjbx+hW8ykQs1w3UBbZlj6HuIJcUGPhkA7kY=
 github.com&#47;onsi&#47;ginkgo v1.6.0&#47;go.mod h1:lLunBs&#47;Ym6LB5Z9jYTR76FiuTmxDTDusOGeTQH+WWjE=
<span class="term-fg36">@@ -481,7 +477,6 @@</span> github.com&#47;prometheus&#47;client_model v0.0.0-20190129233127-fd36f4220a90&#47;go.mod h1:xMI15A0UPsDsEKsMN9yxemIoYk6Tm2C1GtYGdfGttqA=
 github.com&#47;prometheus&#47;client_model v0.0.0-20190812154241-14fe0d1b01d4&#47;go.mod h1:xMI15A0UPsDsEKsMN9yxemIoYk6Tm2C1GtYGdfGttqA=
 github.com&#47;prometheus&#47;client_model v0.3.0 h1:UBgGFHqYdG&#47;TPFD1B1ogZywDqEkwp3fBMvqdiQ7Xew4=
 github.com&#47;prometheus&#47;client_model v0.3.0&#47;go.mod h1:LDGWKZIo7rky3hgvBe+caln+Dr3dPggB5dvjtD7w9+w=
<span class="term-fg31">-github.com&#47;prometheus&#47;common v0.0.0-20181113130724-41aa239b4cce&#47;go.mod h1:daVV7qP5qjZbuso7PdcryaAu0sAZbrN9i7WWcTMWvro=</span>
 github.com&#47;prometheus&#47;common v0.4.1&#47;go.mod h1:TNfzLD0ON7rHzMJeJkieUDPYmFC7Snx&#47;y86RQel1bk4=
 github.com&#47;prometheus&#47;common v0.6.0&#47;go.mod h1:eBmuwkDJBwy6iBfxCBob6t6dR6ENT&#47;y+J+Zk0j9GMYc=
 github.com&#47;prometheus&#47;common v0.39.0 h1:oOyhkDq05hPZKItWVBkJ6g6AtGxi+fy7F4JvUV8uhsI=
<span class="term-fg36">@@ -490,8 +485,6 @@</span> github.com&#47;prometheus&#47;procfs v0.0.0-20181005140218-185b4288413d&#47;go.mod h1:c3At6R&#47;oaqEKCNdg8wHV1ftS6bRYblBhIjjI8uT2IGk=
 github.com&#47;prometheus&#47;procfs v0.0.2&#47;go.mod h1:TjEm7ze935MbeOT&#47;UhFTIMYKhuLP4wbCsTZCD3I8kEA=
 github.com&#47;prometheus&#47;procfs v0.9.0 h1:wzCHvIvM5SxWqYvwgVL7yJY8Lz3PKn49KQtpgMYJfhI=
 github.com&#47;prometheus&#47;procfs v0.9.0&#47;go.mod h1:+pB4zwohETzFnmlpe6yd2lSc+0&#47;46IYZRB&#47;chUwxUZY=
<span class="term-fg31">-github.com&#47;prometheus&#47;tsdb v0.7.1 h1:YZcsG11NqnK4czYLrWd9mpEuAJIHVQLwdrleYfszMAA=</span>
<span class="term-fg31">-github.com&#47;prometheus&#47;tsdb v0.7.1&#47;go.mod h1:qhTCs0VvXwvX&#47;y3TZrWD7rabWM+ijKTux40TwIPHuXU=</span>
 github.com&#47;retailnext&#47;hllpp v1.0.1-0.20180308014038-101a6d2f8b52&#47;go.mod h1:RDpi1RftBQPUCDRw6SmxeaREsAaRKnOclghuzp&#47;WRzc=
 github.com&#47;rogpeppe&#47;go-internal v1.3.0&#47;go.mod h1:M8bDsm7K2OlrFYOpmOWEs&#47;qY81heoFRclV5y23lUDJ4=
 github.com&#47;rogpeppe&#47;go-internal v1.6.1&#47;go.mod h1:xXDCJY+GAPziupqXw64V24skbSoqbTEfhy4qGm1nDQc=
<span class="term-fg36">@@ -528,6 +521,8 @@</span> github.com&#47;status-im&#47;keycard-go v0.2.0&#47;go.mod h1:wlp8ZLbsmrF6g6WjugPAx+IzoLrkdf9+mHxBEeo3Hbg=
 github.com&#47;stretchr&#47;objx v0.1.0&#47;go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
 github.com&#47;stretchr&#47;objx v0.1.1&#47;go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
 github.com&#47;stretchr&#47;objx v0.4.0&#47;go.mod h1:YvHI0jy2hoMjB+UWwv71VJQ9isScKT&#47;TqJzVSSt89Yw=
<span class="term-fg32">+github.com&#47;stretchr&#47;objx v0.5.0 h1:1zr&#47;of2m5FGMsad5YfcqgdqdWrIhu+EBEJRhR1U7z&#47;c=</span>
<span class="term-fg32">+github.com&#47;stretchr&#47;objx v0.5.0&#47;go.mod h1:Yh+to48EsGEfYuaHDzXPcE3xhTkx73EhmCGUpEOglKo=</span>
 github.com&#47;stretchr&#47;testify v1.2.0&#47;go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=
 github.com&#47;stretchr&#47;testify v1.2.2&#47;go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=
 github.com&#47;stretchr&#47;testify v1.3.0&#47;go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UVUgZn+9EI=
<span class="term-fg36">@@ -535,8 +530,9 @@</span> github.com&#47;stretchr&#47;testify v1.4.0&#47;go.mod h1:j7eGeouHqKxXV5pUuKE4zz7dFj8WfuZ+81PSLYec5m4=
 github.com&#47;stretchr&#47;testify v1.5.1&#47;go.mod h1:5W2xD1RspED5o8YsWQXVCued0rvSQ+mT+I5cxcmMvtA=
 github.com&#47;stretchr&#47;testify v1.7.0&#47;go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962&#47;h&#47;Wwjteg=
 github.com&#47;stretchr&#47;testify v1.7.1&#47;go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962&#47;h&#47;Wwjteg=
<span class="term-fg31">-github.com&#47;stretchr&#47;testify v1.8.0 h1:pSgiaMZlXftHpm5L7V1+rVB+AZJydKsMxsQBIJw4PKk=</span>
 github.com&#47;stretchr&#47;testify v1.8.0&#47;go.mod h1:yNjHg4UonilssWZ8iaSj1OCr&#47;vHnekPRkoO+kdMU+MU=
<span class="term-fg32">+github.com&#47;stretchr&#47;testify v1.8.1 h1:w7B6lhMri9wdJUVmEZPGGhZzrYTPvgJArz7wNPgYKsk=</span>
<span class="term-fg32">+github.com&#47;stretchr&#47;testify v1.8.1&#47;go.mod h1:w2LPCIKwWwSfY2zedu0+kehJoqGctiVI29o6fzry7u4=</span>
 github.com&#47;supranational&#47;blst v0.3.8-0.20220526154634-513d2456b344 h1:m+8fKfQwCAy1QjzINvKe&#47;pYtLjo2dl59x2w9YSEJxuY=
 github.com&#47;supranational&#47;blst v0.3.8-0.20220526154634-513d2456b344&#47;go.mod h1:jZJtfjgudtNl4en1tzwPIV3KjUnQUvG3&#47;j+w+fVonLw=
 github.com&#47;syndtr&#47;goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7 h1:epCh84lMvA70Z7CTTCmYQn2CKbY8j86K7&#47;FAIr141uY=
<span class="term-fg36">@@ -683,7 +679,6 @@</span> golang.org&#47;x&#47;sync v0.1.0&#47;go.mod h1:RxMgew5VJxzue5&#47;jJTE5uejpjVlOe&#47;izrB70Jof72aM=
 golang.org&#47;x&#47;sys v0.0.0-20180830151530-49385e6e1522&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20180905080454-ebe1bf3edb33&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20180909124046-d0be0721c37e&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
<span class="term-fg31">-golang.org&#47;x&#47;sys v0.0.0-20181107165924-66b7b1311ac8&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=</span>
 golang.org&#47;x&#47;sys v0.0.0-20181116152217-5ac8a444bdc5&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20181205085412-a5c9d58dba9a&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20190215142949-d0b11bdaac8a&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

                    </div>
                
            </div>
        </main>
    </div>

    <footer class="col-xl-10 col-xxl-8 mx-auto px-3 pt-5 my-5 text-muted border-top">
        <p>Fork-diff overview of <a href="https://github.com/ethereum-optimism/op-geth"><code>op-geth</code></a>, a fork of <a href="https://github.com/ethereum/go-ethereum"><code>go-ethereum</code></a>.
and execution-engine of the <a href="https://github.com/ethereum-optimism/optimism">OP-stack</a>.</p>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const storedTheme = localStorage.getItem('theme')

        // Get the preferred theme from the user's OS
        const getPreferredTheme = () => {
            if (storedTheme) {
                return storedTheme
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        // Set the bootstrap theme
        const setTheme = function (theme) {
            document.documentElement.setAttribute('data-bs-theme', theme)
            if (theme === 'dark') {
                document.getElementById('dark-mode-toggle').setAttribute('checked', true)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-high-fill', 'bi-brightness-low')
            } else {
                document.getElementById('dark-mode-toggle').setAttribute('checked', false)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-low', 'bi-brightness-high-fill')
            }
        }

        // Returns true if the current theme is dark
        const isDark = () => {
            return document.documentElement.getAttribute('data-bs-theme') === 'dark'
        }

        // Toggles dark mode
        const toggleDarkMode = () => {
            const newTheme = isDark() ? 'light' : 'dark'
            setTheme(newTheme)
            localStorage.setItem('theme', newTheme)
        }

        // Set the preferred theme on page load
        window.onload = () => {
            // Set preferred theme
            setTheme(getPreferredTheme());
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        }

        // Toggle dark mode when the toggle button is clicked
        addEventListener("click", (event) => {
            if (event.target.id === 'dark-mode-toggle') {
                toggleDarkMode();
                // De-focus the toggle
                document.activeElement.blur()
            }
        });
    </script>
</body>
</html>
